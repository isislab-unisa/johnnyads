var requirejs,require,define;if(typeof requirejs==="undefined"){(function(){require={locale:"en-gb"}})()}(function(global){var version="2.0.4",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=!!(typeof window!=="undefined"&&navigator&&document),isWebWorker=!isBrowser&&typeof importScripts!=="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=false,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath;function isFunction(it){return ostring.call(it)==="[object Function]"}function isArray(it){return ostring.call(it)==="[object Array]"}function each(ary,func){if(ary){var i;for(i=0;i<ary.length;i+=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1;i-=1){if(ary[i]&&func(ary[i],i,ary)){break}}}}function hasProp(obj,prop){return obj.hasOwnProperty(prop)}function eachProp(obj,func){var prop;for(prop in obj){if(obj.hasOwnProperty(prop)){if(func(obj[prop],prop)){break}}}}function mixin(target,source,force,deepStringMixin){if(source){eachProp(source,function(value,prop){if(force||!hasProp(target,prop)){if(deepStringMixin&&typeof value!=="string"){if(!target[prop]){target[prop]={}}mixin(target[prop],value,force,deepStringMixin)}else{target[prop]=value}}})}return target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(value){if(!value){return value}var g=global;each(value.split("."),function(part){g=g[part]});return g}function makeContextModuleFunc(func,relMap,enableBuildCallback){return function(){var args=aps.call(arguments,0),lastArg;if(enableBuildCallback&&isFunction((lastArg=args[args.length-1]))){lastArg.__requireJsBuild=true}args.push(relMap);return func.apply(null,args)}}function addRequireMethods(req,context,relMap){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(item){var prop=item[1]||item[0];req[item[0]]=context?makeContextModuleFunc(context[prop],relMap):function(){var ctx=contexts[defContextName];return ctx[prop].apply(ctx,arguments)}})}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);e.requireType=id;e.requireModules=requireModules;if(err){e.originalError=err}return e}if(typeof define!=="undefined"){return}if(typeof requirejs!=="undefined"){if(isFunction(requirejs)){return}cfg=requirejs;requirejs=undefined}if(typeof require!=="undefined"&&!isFunction(require)){cfg=require;require=undefined}function newContext(contextName){var config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},registry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1,waitAry=[],inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else{if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else{if(i>0){ary.splice(i-1,2);i-=2}}}}}}function normalize(name,baseName,applyMap){var baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"],pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap;if(name&&name.charAt(0)==="."){if(baseName){if(config.pkgs[baseName]){normalizedBaseParts=baseParts=[baseName]}else{normalizedBaseParts=baseParts.slice(0,baseParts.length-1)}name=normalizedBaseParts.concat(name.split("/"));trimDots(name);pkgConfig=config.pkgs[(pkgName=name[0])];name=name.join("/");if(pkgConfig&&name===pkgName+"/"+pkgConfig.main){name=pkgName}}else{if(name.indexOf("./")===0){name=name.substring(2)}}}if(applyMap&&(baseParts||starMap)&&map){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join("/")];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;break}}}}if(!foundMap&&starMap&&starMap[nameSegment]){foundMap=starMap[nameSegment]}if(foundMap){nameParts.splice(0,i,foundMap);name=nameParts.join("/");break}}}return name}function removeScript(name){if(isBrowser){each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName){scriptNode.parentNode.removeChild(scriptNode);return true}})}}function hasPathFallback(id){var pathConfig=config.paths[id];if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1){removeScript(id);pathConfig.shift();context.undef(id);context.require([id]);return true}}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var index=name?name.indexOf("!"):-1,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=true,normalizedName="",url,pluginModule,suffix;if(!name){isDefine=false;name="_@r"+(requireCounter+=1)}if(index!==-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}if(prefix){prefix=normalize(prefix,parentName,applyMap);pluginModule=defined[prefix]}if(name){if(prefix){if(pluginModule&&pluginModule.normalize){normalizedName=pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)})}else{normalizedName=normalize(name,parentName,applyMap)}}else{normalizedName=normalize(name,parentName,applyMap);url=context.nameToUrl(normalizedName)}}suffix=prefix&&!pluginModule&&!isNormalized?"_unnormalized"+(unnormalizedCounter+=1):"";return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=registry[id];if(!mod){mod=registry[id]=new context.Module(depMap)}return mod}function on(depMap,name,fn){var id=depMap.id,mod=registry[id];if(hasProp(defined,id)&&(!mod||mod.defineEmitComplete)){if(name==="defined"){fn(defined[id])}}else{getModule(depMap).on(name,fn)}}function onError(err,errback){var ids=err.requireModules,notified=false;if(errback){errback(err)}else{each(ids,function(id){var mod=registry[id];if(mod){mod.error=err;if(mod.events.error){notified=true;mod.emit("error",err)}}});if(!notified){req.onError(err)}}}function takeGlobalQueue(){if(globalDefQueue.length){apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue));globalDefQueue=[]}}function makeRequire(mod,enableBuildCallback,altRequire){var relMap=mod&&mod.map,modRequire=makeContextModuleFunc(altRequire||context.require,relMap,enableBuildCallback);addRequireMethods(modRequire,context,relMap);modRequire.isBrowser=isBrowser;return modRequire}handlers={require:function(mod){return makeRequire(mod)},exports:function(mod){mod.usingExports=true;if(mod.map.isDefine){return(mod.exports=defined[mod.map.id]={})}},module:function(mod){return(mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return(config.config&&config.config[mod.map.id])||{}},exports:defined[mod.map.id]})}};function removeWaiting(id){delete registry[id];each(waitAry,function(mod,i){if(mod.map.id===id){waitAry.splice(i,1);if(!mod.defined){context.waitCount-=1}return true}})}function findCycle(mod,traced){var id=mod.map.id,depArray=mod.depMaps,foundModule;if(!mod.inited){return}if(traced[id]){return mod}traced[id]=true;each(depArray,function(depMap){var depId=depMap.id,depMod=registry[depId];if(!depMod){return}if(!depMod.inited||!depMod.enabled){foundModule=null;delete traced[id];return true}return(foundModule=findCycle(depMod,mixin({},traced)))});return foundModule}function forceExec(mod,traced,uninited){var id=mod.map.id,depArray=mod.depMaps;if(!mod.inited||!mod.map.isDefine){return}if(traced[id]){return defined[id]}traced[id]=mod;each(depArray,function(depMap){var depId=depMap.id,depMod=registry[depId],value;if(handlers[depId]){return}if(depMod){if(!depMod.inited||!depMod.enabled){uninited[id]=true;return}value=forceExec(depMod,traced,uninited);if(!uninited[depId]){mod.defineDepById(depId,value)}}});mod.check(true);return defined[id]}function modCheck(mod){mod.check()}function checkLoaded(){var waitInterval=config.waitSeconds*1000,expired=waitInterval&&(context.startTime+waitInterval)<new Date().getTime(),noLoads=[],stillLoading=false,needCycleCheck=true,map,modId,err,usingPathFallback;if(inCheckLoaded){return}inCheckLoaded=true;eachProp(registry,function(mod){map=mod.map;modId=map.id;if(!mod.enabled){return}if(!mod.error){if(!mod.inited&&expired){if(hasPathFallback(modId)){usingPathFallback=true;stillLoading=true}else{noLoads.push(modId);removeScript(modId)}}else{if(!mod.inited&&mod.fetched&&map.isDefine){stillLoading=true;if(!map.prefix){return(needCycleCheck=false)}}}}});if(expired&&noLoads.length){err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads);err.contextName=context.contextName;return onError(err)}if(needCycleCheck){each(waitAry,function(mod){if(mod.defined){return}var cycleMod=findCycle(mod,{}),traced={};if(cycleMod){forceExec(cycleMod,traced,{});eachProp(traced,modCheck)}});eachProp(registry,modCheck)}if((!expired||usingPathFallback)&&stillLoading){if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50)}}inCheckLoaded=false}Module=function(map){this.events=undefEvents[map.id]||{};this.map=map;this.shim=config.shim[map.id];this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Module.prototype={init:function(depMaps,factory,errback,options){options=options||{};if(this.inited){return}this.factory=factory;if(errback){this.on("error",errback)}else{if(this.events.error){errback=bind(this,function(err){this.emit("error",err)})}}this.depMaps=depMaps&&depMaps.slice(0);this.depMaps.rjsSkipMap=depMaps.rjsSkipMap;this.errback=errback;this.inited=true;this.ignore=options.ignore;if(options.enabled||this.enabled){this.enable()}else{this.check()}},defineDepById:function(id,depExports){var i;each(this.depMaps,function(map,index){if(map.id===id){i=index;return true}});return this.defineDep(i,depExports)},defineDep:function(i,depExports){if(!this.depMatched[i]){this.depMatched[i]=true;this.depCount-=1;this.depExports[i]=depExports}},fetch:function(){if(this.fetched){return}this.fetched=true;context.startTime=(new Date()).getTime();var map=this.map;if(this.shim){makeRequire(this,true)(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}else{return map.prefix?this.callPlugin():this.load()}},load:function(){var url=this.map.url;if(!urlFetched[url]){urlFetched[url]=true;context.load(this.map.id,url)}},check:function(silent){if(!this.enabled||this.enabling){return}var id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory,err,cjsModule;if(!this.inited){this.fetch()}else{if(this.error){this.emit("error",this.error)}else{if(!this.defining){this.defining=true;if(this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error){try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}}else{exports=context.execCb(id,factory,depExports,exports)}if(this.map.isDefine){cjsModule=this.module;if(cjsModule&&cjsModule.exports!==undefined&&cjsModule.exports!==this.exports){exports=cjsModule.exports}else{if(exports===undefined&&this.usingExports){exports=this.exports}}}if(err){err.requireMap=this.map;err.requireModules=[this.map.id];err.requireType="define";return onError((this.error=err))}}else{exports=factory}this.exports=exports;if(this.map.isDefine&&!this.ignore){defined[id]=exports;if(req.onResourceLoad){req.onResourceLoad(context,this.map,this.depMaps)}}delete registry[id];this.defined=true;context.waitCount-=1;if(context.waitCount===0){waitAry=[]}}this.defining=false;if(!silent){if(this.defined&&!this.defineEmitted){this.defineEmitted=true;this.emit("defined",this.exports);this.defineEmitComplete=true}}}}}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix,null,false,true);on(pluginMap,"defined",bind(this,function(plugin){var name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,load,normalizedMap,normalizedMod;if(this.map.unnormalized){if(plugin.normalize){name=plugin.normalize(name,function(name){return normalize(name,parentName,true)})||""}normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap,false,true);on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:true,ignore:true})}));normalizedMod=registry[normalizedMap.id];if(normalizedMod){if(this.events.error){normalizedMod.on("error",bind(this,function(err){this.emit("error",err)}))}normalizedMod.enable()}return}load=bind(this,function(value){this.init([],function(){return value},null,{enabled:true})});load.error=bind(this,function(err){this.inited=true;this.error=err;err.requireModules=[id];eachProp(registry,function(mod){if(mod.map.id.indexOf(id+"_unnormalized")===0){removeWaiting(mod.map.id)}});onError(err)});load.fromText=function(moduleName,text){var hasInteractive=useInteractive;if(hasInteractive){useInteractive=false}getModule(makeModuleMap(moduleName));req.exec(text);if(hasInteractive){useInteractive=true}context.completeLoad(moduleName)};plugin.load(map.name,makeRequire(map.parentMap,true,function(deps,cb){deps.rjsSkipMap=true;return context.require(deps,cb)}),load,config)}));context.enable(pluginMap,this);this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){this.enabled=true;if(!this.waitPushed){waitAry.push(this);context.waitCount+=1;this.waitPushed=true}this.enabling=true;each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if(typeof depMap==="string"){depMap=makeModuleMap(depMap,(this.map.isDefine?this.map:this.map.parentMap),false,!this.depMaps.rjsSkipMap);this.depMaps[i]=depMap;handler=handlers[depMap.id];if(handler){this.depExports[i]=handler(this);return}this.depCount+=1;on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports);this.check()}));if(this.errback){on(depMap,"error",this.errback)}}id=depMap.id;mod=registry[id];if(!handlers[id]&&mod&&!mod.enabled){context.enable(depMap,this)}}));eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=registry[pluginMap.id];if(mod&&!mod.enabled){context.enable(pluginMap,this)}}));this.enabling=false;this.check()},on:function(name,cb){var cbs=this.events[name];if(!cbs){cbs=this.events[name]=[]}cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)});if(name==="error"){delete this.events[name]}}};function callGetModule(args){getModule(makeModuleMap(args[0],null,true)).init(args[1],args[2])}function removeListener(node,func,name,ieName){if(node.detachEvent&&!isOpera){if(ieName){node.detachEvent(ieName,func)}}else{node.removeEventListener(name,func,false)}}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;removeListener(node,context.onScriptLoad,"load","onreadystatechange");removeListener(node,context.onScriptError,"error");return{node:node,id:node&&node.getAttribute("data-requiremodule")}}return(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,waitCount:0,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,configure:function(cfg){if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=="/"){cfg.baseUrl+="/"}}var pkgs=config.pkgs,shim=config.shim,paths=config.paths,map=config.map;mixin(config,cfg,true);config.paths=mixin(paths,cfg.paths,true);if(cfg.map){config.map=mixin(map||{},cfg.map,true,true)}if(cfg.shim){eachProp(cfg.shim,function(value,id){if(isArray(value)){value={deps:value}}if(value.exports&&!value.exports.__buildReady){value.exports=context.makeShimExports(value.exports)}shim[id]=value});config.shim=shim}if(cfg.packages){each(cfg.packages,function(pkgObj){var location;pkgObj=typeof pkgObj==="string"?{name:pkgObj}:pkgObj;location=pkgObj.location;pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}});config.pkgs=pkgs}eachProp(registry,function(mod,id){mod.map=makeModuleMap(id)});if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback)}},makeShimExports:function(exports){var func;if(typeof exports==="string"){func=function(){return getGlobal(exports)};func.exports=exports;return func}else{return function(){return exports.apply(global,arguments)}}},requireDefined:function(id,relMap){return hasProp(defined,makeModuleMap(id,relMap,false,true).id)},requireSpecified:function(id,relMap){id=makeModuleMap(id,relMap,false,true).id;return hasProp(defined,id)||hasProp(registry,id)},require:function(deps,callback,errback,relMap){var moduleName,id,map,requireMod,args;if(typeof deps==="string"){if(isFunction(callback)){return onError(makeError("requireargs","Invalid require call"),errback)}if(req.get){return req.get(context,deps,callback)}moduleName=deps;relMap=callback;map=makeModuleMap(moduleName,relMap,false,true);id=map.id;if(!hasProp(defined,id)){return onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName))}return defined[id]}if(errback&&!isFunction(errback)){relMap=errback;errback=undefined}if(callback&&!isFunction(callback)){relMap=callback;callback=undefined}takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))}else{callGetModule(args)}}requireMod=getModule(makeModuleMap(null,relMap));requireMod.init(deps,callback,errback,{enabled:true});checkLoaded();return context.require},undef:function(id){var map=makeModuleMap(id,null,true),mod=registry[id];delete defined[id];delete urlFetched[map.url];delete undefEvents[id];if(mod){if(mod.events.defined){undefEvents[id]=mod.events}removeWaiting(id)}},enable:function(depMap,parent){var mod=registry[depMap.id];if(mod){getModule(depMap).enable()}},completeLoad:function(moduleName){var shim=config.shim[moduleName]||{},shExports=shim.exports&&shim.exports.exports,found,args,mod;takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;if(found){break}found=true}else{if(args[0]===moduleName){found=true}}callGetModule(args)}mod=registry[moduleName];if(!found&&!defined[moduleName]&&mod&&!mod.inited){if(config.enforceDefine&&(!shExports||!getGlobal(shExports))){if(hasPathFallback(moduleName)){return}else{return onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]))}}else{callGetModule([moduleName,(shim.deps||[]),shim.exports])}}checkLoaded()},toUrl:function(moduleNamePlusExt,relModuleMap){var index=moduleNamePlusExt.lastIndexOf("."),ext=null;if(index!==-1){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(normalize(moduleNamePlusExt,relModuleMap&&relModuleMap.id,true),ext)},nameToUrl:function(moduleName,ext){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath;if(req.jsExtRegExp.test(moduleName)){url=moduleName+(ext||"")}else{paths=config.paths;pkgs=config.pkgs;syms=moduleName.split("/");for(i=syms.length;i>0;i-=1){parentModule=syms.slice(0,i).join("/");pkg=pkgs[parentModule];parentPath=paths[parentModule];if(parentPath){if(isArray(parentPath)){parentPath=parentPath[0]}syms.splice(0,i,parentPath);break}else{if(pkg){if(moduleName===pkg.name){pkgPath=pkg.location+"/"+pkg.main}else{pkgPath=pkg.location}syms.splice(0,i,pkgPath);break}}}url=syms.join("/")+(ext||".js");url=(url.charAt(0)==="/"||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if(evt.type==="load"||(readyRegExp.test((evt.currentTarget||evt.srcElement).readyState))){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){return onError(makeError("scripterror","Script error",evt,[data.id]))}}})}req=requirejs=function(deps,callback,errback,optional){var contextName=defContextName,context,config;if(!isArray(deps)&&typeof deps!=="string"){config=deps;if(isArray(callback)){deps=callback;callback=errback;errback=optional}else{deps=[]}}if(config&&config.context){contextName=config.context}context=contexts[contextName];if(!context){context=contexts[contextName]=req.s.newContext(contextName)}if(config){context.configure(config)}return context.require(deps,callback,errback)};req.config=function(config){return req(config)};if(!require){require=req}req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};req({});addRequireMethods(req);if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];if(baseElement){head=s.head=baseElement.parentNode}}req.onError=function(err){throw err};req.load=function(context,moduleName,url){var config=(context&&context.config)||{},node;if(isBrowser){node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=config.scriptType||"text/javascript";node.charset="utf-8";node.async=true;node.setAttribute("data-requirecontext",context.contextName);node.setAttribute("data-requiremodule",moduleName);if(node.attachEvent&&!(node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0)&&!isOpera){useInteractive=true;node.attachEvent("onreadystatechange",context.onScriptLoad)}else{node.addEventListener("load",context.onScriptLoad,false);node.addEventListener("error",context.onScriptError,false)}node.src=url;currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement)}else{head.appendChild(node)}currentlyAddingScript=null;return node}else{if(isWebWorker){importScripts(url);context.completeLoad(moduleName)}}};function getInteractiveScript(){if(interactiveScript&&interactiveScript.readyState==="interactive"){return interactiveScript}eachReverse(scripts(),function(script){if(script.readyState==="interactive"){return(interactiveScript=script)}});return interactiveScript}if(isBrowser){eachReverse(scripts(),function(script){if(!head){head=script.parentNode}dataMain=script.getAttribute("data-main");if(dataMain){if(!cfg.baseUrl){src=dataMain.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath;dataMain=mainScript}dataMain=dataMain.replace(jsSuffixRegExp,"");cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain];return true}})}define=function(name,deps,callback){var node,context;if(typeof name!=="string"){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=[]}if(!deps.length&&isFunction(callback)){if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(callback.length===1?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute("data-requiremodule")}context=contexts[node.getAttribute("data-requirecontext")]}}(context?context.defQueue:globalDefQueue).push([name,deps,callback])};define.amd={jQuery:true};req.exec=function(text){return eval(text)};req(cfg)}(this));

/* jQuery v1.8.3 jquery.com | jquery.org/license */
(function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else{r=t}}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t])){continue}if(t!=="toJSON"){return !1}}return !0}function et(){return !1}function tt(){return !0}function ut(e){return !e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do{e=e[t]}while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t)){return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n})}if(t.nodeType){return v.grep(e,function(e,r){return e===t===n})}if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t)){return v.filter(t,r,!n)}t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement){while(t.length){n.createElement(t.pop())}}return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e)){return}var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u){for(r=0,i=u[n].length;r<i;r++){v.event.add(t,n,u[n][r])}}}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1){return}t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e){return t}var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e){return t}}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style){continue}i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style){continue}if(!t||n.style.display==="none"||n.style.display===""){n.style.display=t?i[s]||"":"none"}}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2){n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0))}return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null){r=e.style[t]}if(Ut.test(r)){return r}i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e]){return Wt[e]}var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement){Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close()}t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t)){v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)})}else{if(!n&&v.type(t)==="object"){for(i in t){fn(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n)){for(;u<a;u++){r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++){u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)))}return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n){n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r])}i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l){s in r&&(n[l[s]]=r[s])}while(f[0]==="*"){f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"))}if(i){for(s in a){if(a[s]&&a[s].test(i)){f.unshift(s);break}}}if(f[0] in r){o=f[0]}else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o){return o!==f[0]&&f.unshift(o),r[o]}}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1]){for(n in e.converters){a[n.toLowerCase()]=e.converters[n]}}for(;i=o[++f];){if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n){for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}}if(n!==!0){if(n&&e["throws"]){t=n(t)}else{try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}}}u=i}}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++){if(r[i].call(e,t,n)){return}}})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++){f.tweens[s].run(i)}return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++){f.tweens[n].run(1)}return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r){return r}}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand" in o){s=o.expand(s),delete e[r];for(n in s){n in e||(e[n]=s[n],t[n]=i)}}else{t[r]=i}}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height" in t||"width" in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show")){continue}m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden" in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d){v.style(e,t,d[t])}});for(r=0;r<o;r++){i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t){n=$t[i],r["margin"+n]=r["padding"+n]=e}return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e){return this}if(e.nodeType){return this.context=this[0]=e,this.length=1,this}if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1]){return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e)}o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2]){return r.find(e)}this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return !n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++){if((e=arguments[a])!=null){for(n in e){r=u[n],i=e[n];if(u===i){continue}l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}}}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady){return}if(!i.body){return setTimeout(v.ready,1)}v.isReady=!0;if(e!==!0&&--v.readyWait>0){return}r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e)){return !1}try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf")){return !1}}catch(n){return !1}var r;for(r in e){}return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e){return !1}return !0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return !e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string"){return null}t=v.trim(t);if(e.JSON&&e.JSON.parse){return e.JSON.parse(t)}if(S.test(t.replace(T,"@").replace(N,"]").replace(x,""))){return(new Function("return "+t))()}v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string"){return null}try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e){if(n.apply(e[i],r)===!1){break}}}else{for(;s<o;){if(n.apply(e[s++],r)===!1){break}}}}else{if(u){for(i in e){if(n.call(e[i],i,e[i])===!1){break}}}else{for(;s<o;){if(n.call(e[s],s,e[s++])===!1){break}}}}return e},trim:d&&!d.call("\ufeff\u00a0")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c){return c.call(t,e,n)}r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++){if(n in t&&t[n]===e){return n}}}return -1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number"){for(;s<r;s++){e[i++]=n[s]}}else{while(n[s]!==t){e[i++]=n[s++]}}return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++){r=!!t(e[s],s),n!==r&&i.push(e[s])}return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f){for(;u<a;u++){i=n(e[u],u,r),i!=null&&(o[o.length]=i)}}else{for(s in e){i=n(e[s],s,r),i!=null&&(o[o.length]=i)}}return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r){v.access(e,n,l,r[l],1,o,i)}s=1}else{if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n){for(;l<c;l++){n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u)}}s=1}}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete"){setTimeout(v.ready,1)}else{if(i.addEventListener){i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1)}else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++){if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1){a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return !a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return !f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return !!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++){n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length){return{}}s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent){for(l in {submit:!0,change:!0,focusin:!0}){f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c}}return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a){return}n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e)){return}var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t){return}c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function"){i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n)}return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e)){return}var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a]){return}if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++){delete r[t[i]]}if(!(n?B:v.isEmptyObject)(r)){return}}}if(!n){delete u[a].data;if(!B(u[a])){return}}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return !t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++){o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]))}v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t){return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l}r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e){return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]}},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--){r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a))}return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e)){return this.each(function(t){v(this).addClass(e.call(this,t,this.className))})}if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1){if(!i.className&&t.length===1){i.className=e}else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++){s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ")}i.className=v.trim(s)}}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e)){return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))})}if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++){while(r.indexOf(" "+n[s]+" ")>=0){r=r.replace(" "+n[s]+" "," ")}}i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++]){u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}}else{if(n==="undefined"||n==="boolean"){this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""}}})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++){if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0){return !0}}return !1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s){return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get" in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r)}return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1){return}i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set" in n)||n.set(this,s,"value")===t){this.value=s}})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return !t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s){return t}o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2){return}if(i&&v.isFunction(v.fn[n])){return v(e)[n](r)}if(typeof e.getAttribute=="undefined"){return v.prop(e,n,r)}u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set" in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get" in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++){i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode){v.error("type property can't be changed")}else{if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button")){return j.set(e,t,n)}e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2){return}return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set" in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get" in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n===""){return e.setAttribute(t,"auto"),n}}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t)){return e.checked=v.inArray(v(e).val(),t)>=0}}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e))){return}r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1){e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events)){return}t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h){v.event.remove(e,u+t[s],n,r,!0)}continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++){m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m))}d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered)){return}y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y]){return}n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u){u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0)}return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1){return}m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode){m.push([l,g]),c=l}c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++){l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault()}return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1){return}if(m&&(!n.button||n.type!=="click")){for(s=n.target;s!=this;s=s.parentNode||this){if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++){c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c)}f.length&&w.push({elem:s,matches:f})}}}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace)){n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando]){return e}var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;){n=o[--t],e[n]=r[n]}return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event)){return new v.Event(e,t)}e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e){return}e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e){return}e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i)){e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t}return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form")){return !1}v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form")){return !1}v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)})}return !1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox"){return e.handleObj.handler.apply(this,arguments)}},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e){this.on(u,n,r,e[u],s)}return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1){i=et}else{if(!i){return this}}return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj){return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if(typeof e=="object"){for(s in e){this.off(s,n,e[s])}return this}if(n===!1||typeof n=="function"){r=n,n=t}return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0]){return v.event.trigger(e,t,this[0],!0)}},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length){t[r++].guid=n}return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string"){return n}if(l!==1&&l!==9){return[]}a=o(t);if(!a&&!r){if(i=R.exec(e)){if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode){return n}if(s.id===f){return n.push(s),n}}else{if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f){return n.push(s),n}}}else{if(i[2]){return S.apply(n,x.call(t.getElementsByTagName(e),0)),n}if((f=i[3])&&Z&&t.getElementsByClassName){return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}}}}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--){n[i=s[o]]&&(n[i]=!(r[i]=n[i]))}})})}function ot(e,t,n){if(e===t){return n}var r=e.nextSibling;while(r){if(r===t){return -1}r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l){return t?0:l.slice(0)}u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u))){r&&(u=u.slice(r[0].length)||u),a.push(s=[])}n=!1;if(r=I.exec(u)){s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ")}for(o in i.filter){(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r)}if(!n){break}}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i]){if(s||t.nodeType===1){return e(t,n,r)}}}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i]){if(s||t.nodeType===1){if((a=t[d])===l){return t.sizset}if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset){return t}}else{t[d]=l;if(e(t,r,u)){return t.sizset=!0,t}t.sizset=!1}}}}else{while(t=t[i]){if(s||t.nodeType===1){if(e(t,r,u)){return t}}}}}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return !1}}return !0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++){if(s=e[u]){if(!n||n(s,r,i)){o.push(s),f&&t.push(u)}}}return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--){if(c=f[l]){g[p[l]]=!(m[p[l]]=c)}}}if(s){if(i||e){if(i){f=[],l=g.length;while(l--){(c=g[l])&&f.push(m[l]=c)}i(null,g=[],f,a)}l=g.length;while(l--){(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}}else{g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)}})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return !o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++){if(n=i.relative[e[a].type]){h=[at(ft(h),n)]}else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++){if(i.relative[e[r].type]){break}}return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++){if(v(p,a,f)){l.push(p);break}}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++){v(x,m,a,f)}if(u){if(y>0){while(w--){!x[w]&&!m[w]&&(m[w]=E.call(l))}}m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++){nt(e,t[r],n)}return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t){return n}e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type]){break}if(c=i.find[l]){if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e){return S.apply(n,x.call(r,0)),n}break}}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return -1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return !1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++){n.push(t)}return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string"){return e.textContent}for(e=e.firstChild;e;e=e.nextSibling){n+=s(e)}}else{if(i===3||i===4){return e.nodeValue}}}else{for(;t=e[r];r++){n+=s(t)}}return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode){if(t===e){return !0}}return !1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p){return t.getElementsByTagName(e)}}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++){r.nodeType===1&&i.push(r)}return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p){return t.getElementsByName(name)}},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n){return t.getElementsByClassName(e)}}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0])){return null}if(e[3]){e[2]=e[3]}else{if(t=e[4]){q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t}}return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return !0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0){return !0}if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling){if(t.nodeType===1){i++;if(e===t){break}}}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling){if(n.nodeType===1){return !1}}if(e==="first"){return !0}n=t;case"last":while(n=n.nextSibling){if(n.nodeType===1){return !1}}return !0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--){i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--){if(s=o[u]){e[u]=!(t[u]=s)}}}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return !i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4){return !1}e=e.nextSibling}return !0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2){e.push(n)}return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2){e.push(n)}return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;){e.push(r)}return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;){e.push(r)}return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t){return l=!0,0}if(e.sourceIndex&&t.sourceIndex){return e.sourceIndex-t.sourceIndex}var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u){return ot(e,t)}if(!o){return -1}if(!u){return 1}while(a){i.unshift(a),a=a.parentNode}a=u;while(a){s.unshift(a),a=a.parentNode}n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++){if(i[f]!==s[f]){return ot(i[f],s[f])}}return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++){t===e[r-1]&&(i=n.push(r))}while(i--){e.splice(n[i],1)}}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--){s=ht(t[n]),s[d]?r.push(s):i.push(s)}s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--){a[f]=c+a[f].join("")}h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p){try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n)){try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11){return a}}catch(f){}}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string"){return v(e).filter(function(){for(t=0,n=u.length;t<n;t++){if(v.contains(u[t],this)){return !0}}})}o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0){for(i=r;i<o.length;i++){for(s=0;s<r;s++){if(o[s]===o[i]){o.splice(i--,1);break}}}}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++){if(v.contains(this,n[t])){return !0}}})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return !!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r))){s.nodeType===1&&i.push(s),s=s[n]}return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling){e.nodeType===1&&e!==t&&n.push(e)}return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e)){return this.each(function(t){v(this).wrapAll(e.call(this,t))})}if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1){e=e.firstChild}return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0])){return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)})}if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0])){return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)})}if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++){if(!e||v.filter(e,[n]).length){!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n)}}return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild){e.removeChild(e.firstChild)}}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t){return n.nodeType===1?n.innerHTML.replace(ht,""):t}if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++){n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e)}n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f)){return this.each(function(){v(this).domManip(e,n,r)})}if(v.isFunction(f)){return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)})}if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++){r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1){return o[t](this[0]),this}for(;i<u;i++){r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r)}return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s){i[s]&&Ot(r[s],i[s])}}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s){At(r[s],i[s])}}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined"){t=i}for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u){continue}if(typeof u=="string"){if(!gt.test(u)){u=t.createTextNode(u)}else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--){c=c.lastChild}if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o){v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked){for(s=0;(u=b[s])!=null;s++){v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t)}}if(n){m=function(e){if(!e.type||xt.test(e.type)){return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)}};for(s=0;(u=b[s])!=null;s++){if(!v.nodeName(u,"script")||!m(u)){n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}}}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++){if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events){for(s in n.events){l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle)}}a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t){return u&&"get" in u&&(s=u.get(e,!1,i))!==t?s:f[n]}o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r)){return}o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set" in u)||(r=u.set(e,r,i))!==t){try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get" in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t){s[i]=e.style[i],e.style[i]=t[i]}r=n.call(e);for(i in t){e.style[i]=s[i]}return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n){return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)}},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter){return}}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t){return Dt(e,"marginRight")}})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return !v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++){s[e+$t[r]+t]=i[r]||i[r-2]||i[0]}return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e)){v.each(e,function(){s(this.name,this.value)})}else{for(r in e){fn(r,e[r],n,s)}}return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En){return En.apply(this,arguments)}if(!this.length){return this}var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2){return}E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304){c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b)}else{b=T;if(!T||e){T="error",e<0&&(e=0)}}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i)){s[n[1].toLowerCase()]=n[2]}}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2){for(t in e){g[t]=[g[t],e[t]]}}else{t=e[x.status],x.always(t)}}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2){return x}f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers){x.setRequestHeader(l,c.headers[l])}if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in {success:1,error:1,complete:1}){x[l](c[l])}o=kn(xn,c,n,x);if(!o){T(-1,"No Transport")}else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2)){throw k}T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h){return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState)){n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")}},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn){Hn[e](0,1)}}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return !this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials" in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields){for(u in n.xhrFields){a[u]=n.xhrFields[u]}}n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i){a.setRequestHeader(u,i[u])}}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i){a.readyState!==4&&a.abort()}else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do{a=a||".5",u/=a,v.style(i.elem,e,u+r)}while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++){n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)}},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n){o[n]&&o[n].stop&&i(o[n])}else{for(n in o){o[n]&&o[n].stop&&Wn.test(n)&&i(o[n])}}for(n=s.length;n--;){s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1))}(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0){r.queue="fx"}return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++){e=n[r],!e()&&n[r]===e&&n.splice(r--,1)}n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length){return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)})}var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c){return}return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using" in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0]){return}var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static"){e=e.offsetParent}return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t){return o?n in o?o[n]:o.document.documentElement[i]:e[i]}o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);define("ftx/lib/jquery-1.8.3.min",function(){});define("ftx/lib/jquery-current",["ftx/lib/jquery-1.8.3.min"],function(){jQuery.ajaxPrefilter(function(options,localOptions,jqXHR){var relatedRequestId=$("body").data("requestId");if(relatedRequestId!==undefined&&relatedRequestId!==null){jqXHR.setRequestHeader("relatedRequestId",relatedRequestId)}});return jQuery});define("isValid",[],function(){var zipValidators={US:/^\d{5}([\-]\d{4})?$/,CA:/^[ABCEGHJKLMNPRSTVXYabceghjklmnprstvxy]{1}\d{1}[A-Za-z]{1} *\d{1}[A-Za-z]{1}\d{1}$/};var ccTypeRegEx={mastercard:/^5[1-5][0-9]{14}$/,visa:/^4[0-9]{12}(?:[0-9]{3})?$/,americanexpress:/^3[47][0-9]{13}$/,discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,diners:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/};var alphaValidators={DE:/^[\w\u00C4\u00E4\u00C9\u00E9\u00D6\u00F6\u00DC\u00FC\u00DF\s-\.]*$/,FR:/^[\w\u00C0\u00E0\u00C2\u00E2\u00C6\u00E6\u00C7\u00E7\u00C8\u00E8\u00C9\u00E9\u00CA\u00EA\u00CB\u00EB\u00CE\u00EE\u00CF\u00EF\u00D4\u00F4\u008C\u009C\u00D9\u00F9\u00DB\u00FB\u00DC\u00FC\s-\.]*$/,"default":/^[\w\s-\.]*$/};function isValidCreditCardNumber(number,type){return ccTypeRegEx[type.toLowerCase()]?!!number.match(ccTypeRegEx[type.toLowerCase()]):false}return{CreditCard:function(ccNumber,ccType){if((ccNumber&&typeof ccNumber!=="string")&&(!ccType)){return false}return isValidCreditCardNumber(ccNumber,ccType)},ZipCode:function(zipcode){if(zipcode&&typeof zipcode!=="string"){return false}var validator=zipValidators[$("#adbl_country").val()];if(!validator){validator=/^[A-Za-z\d\s-]{1,20}$/}zipcode=$.trim(zipcode);return zipcode.match(validator)!=null},Alphabetic:function(inputStr){if(inputStr&&typeof inputStr!=="string"){return false}var validator=alphaValidators[$("#adbl_country").val()];if(!validator){validator=alphaValidators["default"]}return inputStr.match(validator)!=null},CCExpDate:function(expMonth,expYear){var date=new Date();return(expYear>date.getFullYear())||((expMonth>=date.getMonth()+1)&&(expYear==date.getFullYear()))},Email:function(emailId){if(emailId&&typeof emailId!=="string"){return false}var validator=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;return emailId.match(validator)!=null},PhoneNumber:function(phoneNumber){if(!phoneNumber){return false}var validator=/^\s*[\d\s-.\(\)\+]*\s*$/;var digitsOnly=phoneNumber.replace(/\D/g,"");return digitsOnly.length>=9&&digitsOnly.length<20&&phoneNumber.match(validator)!=null},Password:function(passwd,minLen,maxLen){if(passwd&&typeof passwd!=="string"){return false}if(minLen&&passwd.length<minLen){return false}if(maxLen&&passwd.length>maxLen){return false}return true},isIbanBankAccount:function(accountNo){return(accountNo.match(/^[A-Za-z]{2}/)&&accountNo.length>10)},Bank:function(acctNumber){if(!acctNumber){return false}if(this.isIbanBankAccount(acctNumber)){return true}return false},BankRouting:function(routingNumber){if(!routingNumber){return false}var ibanValidator=/^\s*[\A-Za-z]{6}/;if(routingNumber.match(ibanValidator)){return true}return false}}});(function(b){"function"===typeof define&&define.amd?define("ftx/lib/jquery.simplemodal.1.4.3.min",["ftx/lib/jquery-current"],b):b(jQuery)})(function(b){var j=[],l=b(document),m=b.browser.msie&&6===parseInt(b.browser.version)&&"object"!==typeof window.XMLHttpRequest,o=b.browser.msie&&7===parseInt(b.browser.version),n=null,k=b(window),h=[];b.modal=function(a,d){return b.modal.impl.init(a,d)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=function(){b.modal.impl.setContainerDimensions()};b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,d){b.modal.impl.update(a,d)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1000,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,d){if(this.d.data){return !1}n=b.browser.msie&&!b.support.boxModel;this.o=b.extend({},b.modal.defaults,d);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof b?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist)){this.d.orig=a.clone(!0)}}else{if("string"===typeof a||"number"===typeof a){a=b("<div></div>").html(a)}else{return alert("SimpleModal Error: Unsupported data type: "+typeof a),this}}this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(a){this.getDimensions();if(this.o.modal&&m){this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:h[0],width:h[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)}this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();this.d.data.appendTo(this.d.wrap);(m||n)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault();a.close()});a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault();a.close()});l.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())});k.bind("resize.simplemodal orientationchange.simplemodal",function(){a.getDimensions();a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition();m||n?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:h[0],width:h[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");l.unbind("keydown.simplemodal");k.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,"fixed"===this.d.container.css("position")?this.d.container:null],function(b,f){if(f){var g=f[0].style;g.position="absolute";if(2>b){g.removeExpression("height"),g.removeExpression("width"),g.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),g.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"')}else{var c,e;a&&a.constructor===Array?(c=a[0]?"number"===typeof a[0]?a[0].toString():a[0].replace(/px/,""):f.css("top").replace(/px/,""),c=-1===c.indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(e="number"===typeof a[1]?a[1].toString():a[1].replace(/px/,""),e=-1===e.indexOf("%")?e+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(e.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',e='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');g.removeExpression("top");g.removeExpression("left");g.setExpression("top",c);g.setExpression("left",e)}}})},focus:function(a){var d=this,a=a&&-1!==b.inArray(a,["first","last"])?a:"first",f=b(":input:enabled:visible:"+a,d.d.wrap);setTimeout(function(){0<f.length?f.focus():d.d.wrap.focus()},10)},getDimensions:function(){var a="undefined"===typeof window.innerHeight?k.height():window.innerHeight;j=[l.height(),l.width()];h=[a,k.width()]},getVal:function(a,b){return a?"number"===typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?h[0]:h[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data){return !1}this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var a=m||o,d=this.d.origHeight?this.d.origHeight:b.browser.opera?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:b.browser.opera?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),f=this.d.data.outerHeight(!0),g=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||d;this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,e=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,c=c&&c<h[0]?c:h[0],e=e&&e<h[1]?e:h[1],i=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",d=d?this.o.autoResize&&d>c?c:d<i?i:d:f?f>c?c:this.o.minHeight&&"auto"!==i&&f<i?i:f:i,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>e?e:a<c?c:a:g?g>e?e:this.o.minWidth&&"auto"!==c&&g<c?c:g:c;this.d.container.css({height:d,width:a});this.d.wrap.css({overflow:f>d||g>a?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=h[0]/2-this.d.container.outerHeight(!0)/2;b=h[1]/2-this.d.container.outerWidth(!0)/2;var f="fixed"!==this.d.container.css("position")?k.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=f+(this.o.position[0]||a),b=this.o.position[1]||b):a=f+a;this.d.container.css({left:b,top:a})},watchTab:function(a){if(0<b(a.target).parents(".simplemodal-container").length){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length){a.preventDefault(),this.focus(a.shiftKey?"last":"first")}}else{a.preventDefault(),this.focus()}},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data){return !1}this.unbindEvents();if(b.isFunction(this.o.onClose)&&!this.occb){this.occb=!0,this.o.onClose.apply(this,[this.d])}else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else{this.d.data.hide().remove()}this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});(function(){var nlsRegExp=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;function addPart(locale,master,needed,toLoad,prefix,suffix){if(master[locale]){needed.push(locale);if(master[locale]===true||master[locale]===1){toLoad.push(prefix+locale+"/"+suffix)}}}function addIfExists(req,locale,toLoad,prefix,suffix){var fullName=prefix+locale+"/"+suffix;if(require._fileExists(req.toUrl(fullName))){toLoad.push(fullName)}}function mixin(target,source,force){var prop;for(prop in source){if(source.hasOwnProperty(prop)&&(!target.hasOwnProperty(prop)||force)){target[prop]=source[prop]}else{if(typeof source[prop]==="object"){mixin(target[prop],source[prop],force)}}}}define("i18n",["module"],function(module){var masterConfig=module.config();return{version:"2.0.1",load:function(name,req,onLoad,config){config=config||{};if(config.locale){masterConfig.locale=config.locale}var masterName,match=nlsRegExp.exec(name),prefix=match[1],locale=match[4],suffix=match[5],parts=locale.split("-"),toLoad=[],value={},i,part,current="";if(match[5]){prefix=match[1];masterName=prefix+suffix}else{masterName=name;suffix=match[4];locale=masterConfig.locale;if(!locale){locale=masterConfig.locale=typeof navigator==="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()}parts=locale.split("-")}if(config.isBuild){toLoad.push(masterName);addIfExists(req,"root",toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addIfExists(req,current,toLoad,prefix,suffix)}req(toLoad,function(){onLoad()})}else{req([masterName],function(master){var needed=[],part;addPart("root",master,needed,toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addPart(current,master,needed,toLoad,prefix,suffix)}req(toLoad,function(){var i,partBundle,part;for(i=needed.length-1;i>-1&&needed[i];i--){part=needed[i];partBundle=master[part];if(partBundle===true||partBundle===1){partBundle=req(prefix+part+"/"+suffix)}mixin(value,partBundle)}onLoad(value)})})}}}})}());define("nls/localizedstrings",{root:{audible_global_errorMessage:"There is missing or invalid information in the field(s) highlighted in red. Please check these fields and try again: ",audible_global_addToCart:"This title has been added to your cart.",audible_global_alreadyAddToCart:"This title has already been added to your cart.",audible_global_purchased:"This title has already been purchased.",audible_global_unableToAdd:"We are sorry, we were unable to add this product to the cart. Please try again",audible_global_viewCart:"View Cart",audible_global_errorAddingToWishlist:"Error occurred while adding the title to your wish list. Please try again",audible_global_addToWishlist:"This title has been added to your wish list.",audible_global_alreadyAddToWishlist:"This title has already been added to your wish list.",audible_global_alreadyInLibrary:"This title is already in your library.",audible_global_notAuthorizedToSell:"We are not authorized to sell this item to your geographic location.",audible_global_goToWishlist:"Go To Wish List",audible_global_inWishlist:"In Wish List",audible_global_recentlyAddedTitles:"Other recently added titles:",audible_global_errorSubmitRating:"Error submitting rating",audible_global_searchFor:"Search for an audiobook, newspaper, magazine, speech and more...",audible_global_searchForMore:"Search for audiobooks, newspapers, magazines, and more...",audible_global_whatIsThis:"What's this: ",audible_global_asAnAmazonCompany:"As an Amazon company, Audible.com is powered by the same secure technology that you know and trust on Amazon.com.",audible_global_enterAccessCode:"You must enter an access code.",audible_global_loading:"Loading...",audible_global_adding:"Adding...",audible_global_year:"Year",audible_global_month:"Month",buy_extra_credits:"Buy 3 Extra Credits",acc_merge_invalidZipCode:"Please check your zip code entry and try again.",acc_merge_clickCheckbox:"Please click on the checkbox to acknowledge that you are aware of the terms and conditions.",acc_merge_addPayment:"You have to add a payment before we finish.",acc_merge_selectPayment:"You have to select a payment before we finish.",billing_checkYourZipCode:"Please check your zip code entry and try again.",billing_passwdMismatch:"Your first and second password entries do not match. Please check your entry and try again.",billing_emailMismatch:"Your first and second email address entries do not match. Please check your entry and try again.",account_settings_emailMismatch:"Your first and second email address entries do not match. Please check your typing and try again.",account_settings_forgotPasswd:"Forgot your password?",account_errorFetching:"Error fetching order history",account_turnItOn:"Turn it On",account_turnItOff:"Turn it Off",account_on:"On",account_off:"Off",account_errorSaving:"Error saving account preference. Please try again.",acct_msg_errorYPart1:"Oops! you've already purchased this item.",acct_msg_errorYPart2:"close",acct_msg_errorYPart3:"It's available for download in",acct_msg_errorYPart4:"My Library",acct_msg_errorYPart5:"You can also",acct_msg_errorYPart6:"continue shopping",acct_msg_errorNPart3:"The audiobook you selected is already available for download in ",acct_msg_errorNPart5:", and it appears that you're not eligible for the membership offer you chose.",acct_msg_errorNPart6:"This may be because:",acct_msg_errorNPart7:"you already have an AudibleListener membership.",acct_msg_errorNPart8:"you have taken advantage of a membership offer within the past 24 months.",acct_msg_errorNPart9:"the offer is no longer valid.",acct_msg_errorNPartA:"If you believe this message is in error, please",acct_msg_errorNPartB:"contact Customer Service",acct_msg_errorNPartC:"Close window and continue shopping",acct_msg_error2Part1:"We're Sorry",acct_msg_error2Part3:"Due to publishing rights restrictions, we are not authorized to sell this book in the country where you live.",acct_msg_error2Part4:"Check out Audible's available titles.",acct_msg_error4Part2:"It appears that you're not eligible for the membership offer you chose.",acct_msg_error4PartA:"If you believe this message is in error, please contact",acct_msg_error4PartB:"Customer Service",acct_msg_error4Part9:"Continue Shopping",acct_msg_error4Part1:"Close",acct_msg_error5Part1:"Welcome Back!",acct_msg_error5Part5:"We'd love to have you back as a member.",acct_msg_error5Part6:"However, it appears you are not eligible for the offer you chose, because of a previous membership or an offer you began within the last 24 months.",acct_msg_error5Part7:"You are eligible for other membership plans that will also bring you great savings on the audiobooks you love.",acct_msg_error5Part8:"Choose a plan",affiliate_audibleLink:"Audible Link",affiliate_idNumber:"Your Publisher ID Number",anon_at_signup_enterEmail:"Please enter your email address",anon_at_signup_enterValidEmail:"Please enter a valid email address",audible_fgl_carousel_of:" of ",audible_fgl_carousel_by:"by",audible_fgl_carousel_narratedBy:"Narrated by",audible_fgl_carousel_ratings:"ratings",audible_fgl_carousel_hour:"hrs",audible_fgl_carousel_minute:"mins",audible_fgl_carousel_productdescription:"product.description.extended",audible_fgl_modal_publisherDefaultLabel:"What the Publisher Says",audible_fgl_modal_editorDefaultLabel:"What our Editors Say",audible_fgl_modal_addToWL:"Add to Wishlist",audible_fgl_modal_onWL:"On Wishlist",audible_fgl_modal_purchased:"Purchased",audible_fgl_modal_unavailable:"Unavailable",audible_fgl_modal_goToWL:"Go to Wishlist",audible_fgl_modal_wishList:"wish list",audible_fgl_modal_successText:"This title has been added to your ",audible_fgl_modal_duplicateText:"This title has already been added to your ",audible_fgl_modal_inLibraryText:"This title is already in your library.",audible_fgl_modal_noGeoText:"We are not authorized to sell this item to your geographic location.",audible_fgl_modal_errorText:"Error occurred while adding the title to your wish list. Please try again.",audible_fgl_modal_addToCart:"Add to Cart",audible_fgl_modal_inCart:"In Cart",audible_fgl_modal_yourCart:"your cart",audible_fgl_modal_errorTextCart:"We are sorry, we were unable to add this product to the cart. Please try again",audible_fgl_modal_successTextCart:"This title has been added to ",audible_fgl_modal_duplicateTextCart:"This title has already been added to ",audible_fgl_modal_purchasedTextCart:"This title has already been purchased",audible_fgl_modal_dateFormatMonthName:"MMMM dd, yyyy",audible_fgl_modal_locale:"en-us",audible_fgl_modal_MemberPrice:"Member Price",audible_fgl_modal_Price:"Price",audible_fgl_modal_SpecialPrice:"Special Offer Price",audible_fgl_modal_SalePrice:"Sale Price",audible_fgl_modal_RegularPrice:"Regular Price",audible_fgl_modal_UNABRIDGED:"UNABRIDGED",audible_fgl_modal_ABRIDGED:"ABRIDGED",audible_fgl_modal_playsampleof:"play sample of",audible_rating_ui_only:"Only ",audible_rating_ui_star:" star?",audible_rating_ui_stars:" stars?",audibleair_invalidChar:"Email address contains invalid characters",audibleair_enterEmail:"Enter your Email Address",audibleair_nonAsciiChar:"Email address contains non ascii characters.",audibleair_enterValidEmail:"Please enter a valid email address.",audibleair_onlyNumber:"Only Numbers should be entered for ",audibleair_enterPhone:"Enter your Phone Number",audibleair_selectValidCarrier:"Please select a valid Wireless Carrier",audibleair_acceptEULA:"Please accpet Audible EULA and Terms and Conditions to proceed",audibleair_enterUSPhone:"Please enter a valid US Phone",audibleair_entetEUPhone:"Please enter a valid EU Phone",audibleorderdetailajax_noPurchaseOrder:"You don't have any audio purchase orders.",audibleorderdetailajax_somethingWrong:"Something went wrong.  Try reloading this page to see your purchase orders.",audibleorderdetailajax_showMorePurchase:"Show More Purchases",audibleorderdetailajax_eligible:"eligible",advanced_search:"Advanced Search",cart_message1:"Your shopping cart is empty.",cart_message2:"Available credits:",cart_message3:"We've added the audiobook you selected to ",cart_message4:"Close window and continue to cart",cart_message5:"We've added the membership you selected to your",cart_message6:"Cart",cart_message7:"Due to publishing rights restrictions, we are not authorized to sell this book in the country where you live.",cart_message8:"Continue signing up for an AudibleListener membership.",cart_message9:"Check out Audible's available titles.",cart_messageA:"cart",category_experts_everything:"Everything",extra_credits_selectCredits:"Please select the number of credits you would like to purchase.",first_listen_maxChar:"You can only have a max of 2000 characters for your story.",first_listen_charLeft:"Characters Left ",first_listen_enterName:"Please enter your name or username.",first_listen_enterTitle:"Please enter the title of the book.",first_listen_enterStory:"Please enter your story.",gift_module_enterCode:" Enter the code you received... ",gift_module_limitChar:"Limit 300 characters. ",gift_module_charRemaining:" characters remaining",gift_module_giftOnItsWay:"Thank you. Your gift is on its way.",gift_module_enterName:"enter your name",gift_module_onlySend:"You can only send this gift to up to 20 people at a time.",gift_module_addNewRecipient:"you can add new recipient after purchase.",gift_module_onlySendOne:"You can only send this gift to one person.",gift_module_removeDuplicateEmail:"please remove duplicate email addresses",gift_module_enterEmail:"please enter a valid email address",gift_module_blankRecipientName:"Recipient name can not be blank",gift_module_noMoreThan:"name can not be more than 75 characters",gift_module_onlyOneRecipient:"Only one recipient is allowed",gift_module_blankPurchaseName:"Purchaser's name can not be blank",gift_module_sendThisGift:"Send this gift",gift_module_saveChanges:"Save changes",gift_module_pleaseWait:"Please wait",gift_module_sendThisEmail:"Send this email",gift_module_productImage:"product image",gift_module_yourGiftWillBeEmailedOn:"Your gift will be emailed on ",gift_module_immediately:"immediately",gift_module_done:"Done",gift_module_print:"print",gift_module_inPrint:"in Print",gift_module_print_default_name:"ex. John Doe",giftredemption_enterClaimCode:"You must enter a claim code.",glg_prompt_problem:"There was a problem with your exchange.  Please try again.",glg_prompt_pleaseSelect:"Please select an item from the drop-down",library_items_all:"All ",library_items_all_titles:" items",library_items_per_page:" items per page",library_enhanced:"Enhanced",library_seeLatestEpisodes:"See Latest Episodes",library_hideLatestEpisodes:"Hide Latest Episodes",library_domain:"www.audible.com",library_apple_appStoreURL:" https://itunes.apple.com/us/app/audiobooks-from-audible/id379693831?mt=8&uo=4",library_android_appStoreURL:"https://play.google.com/store/apps/details?id=com.audible.application&hl=en",library_kindle_appStoreURL:"http://www.amazon.com/gp/mas/dl/android?p=com.audible.application",library_windowsPhone_appStoreURL:"http://www.windowsphone.com/en-us/store/app/audible-audiobooks/bdc813dd-c20b-41f8-8646-de72fa0b365d",nextlisten_clickCheckbox:"Please click the checkbox near the title you would like to remove/move.",personsocial_cannotContact:"We could not contact Facebook successfully. Please try again later.",personsocial_cannotAccess:"We could not access your Facebook profile photo. Please ensure you have one set in your Facebook profile.",personsocial_editPhoto:"Edit Photo",personsocial_addPhoto:"Add Photo",personsocial_unfollowReviewer:"Unfollow this reviewer",personsocial_unfollow:"Unfollow",personsocial_followReviewer:"Follow this reviewer",personsocial_follow:"Follow",software_wizard_errroSaving:"Error saving account preference. Try again !!",subswitch_selectSubscription:"Please select your subscription.",toa_subscried:"We have successfully subscribed ",toa_receiveEmail:" to receive update emails.",toa_makeSelection:"Please make a selection, then click Submit.",vote_votedReview:"You have voted on this review.",whatAreCreditsInSecureImageUrl:"http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/flyouts/whatarecredits_flyout.png",whatAreCreditsSecureImageUrl:"https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/images/flyouts/whatarecredits_flyout.png",whatAreCreditsImageAltText:"What are credits? Members receive credits that can be used as currency on our site and applied to any purchase. One credit equals one audiobook. A very small number of audiobooks and other titles are valued at more than one credit.",write_review_orig_reachMaximum:"Maximum review length reached. Your message has been shortened to ",write_review_orig_chars:" characters.",write_review_orig_enterDetail:"Please enter all the required details below.",write_review_orig_setRating:"You need to set a rating for each category, enter a title and some review text before you can preview.",write_review_guided_headline:"GUIDED REVIEW",write_review_guided_tooltipText:"Don't worry we've saved the information from the last screen. If you decide to go back just click this button.",write_review_guided_buttonText:"Return to Freeform",write_review_freeform_headline:"FREEFORM REVIEW",write_review_freeform_tooltipText:"Would you prefer to write a guided review?",write_review_freeform_buttonText:"Switch to Guided",write_review_chars_remaining:"characters remaining",listener_error:"An error occured please refresh",navigation_more:"More",navigation_fewer:"Fewer",photoactions_notSelected:"Avatar not selected",photoactions_cropFailed:"Crop failed please retry.",photoactions_uploadPhoto:"Please upload your photo again",photoactions_uploadUrl:"Please upload your url again",promocode_cannotProcessRequest:"Sorry, we can't process your request right now. Please try again later or contact Customer Care.",promocode_moreDetails:"More details",promocode_remove:"Remove",promocode_cannotApplyToCart:"Sorry, there was a problem applying this promotion to your cart.Please try again, or contact customer care.",promocode_cannotRemoveFromCart:"Sorry, there was a problem removing this promotion from your cart.Please try again, or contact customer care.",promocode_cannotValidateCode:"Sorry, there was a problem validating your code. Please try again later or contact Customer Care.",promocode_default_box_text:"Enter your promotional code here...",search_clientId:"audible-search@amazon.com/51e79f2a04393fec379e92128b5898c565f370b3",search_acHost:"completion.amazon.com/search/complete",search_acMktid:"91470",search_alias:"marketplace",search_suggestionsText:"Suggestions",ftxTopNavSearch_placeHolderText:"Find a Good Book",OC_select_reason:"Please select a reason",amz2aud_proccessing:"Processing...",sendSms_sending:"Sending...",facebook_jsurl:"//connect.facebook.net/en_US/sdk.js",marketplaceDateFormat:"m/d/yy",giftEmail_recipientList:"<span>RECIPIENTLIST_1</span> and <a href='#' id='giftPrevListMore'>other HIDDEN_RECIPIENT recipient</a>",giftEmail_recipientLists:"<span>RECIPIENTLIST_1</span> and <a href='#' id='giftPrevListMore'>other HIDDEN_RECIPIENT recipients</a>",audio_play_big:"PLAY AUDIO SAMPLE",audio_play:"SAMPLE",audio_playing:"PLAYING...",audio_paused:"PAUSED",buybox_processing:"Processing..",message_getapp:"Message sent to ",quick_view_error:"Sorry, there was an error.  Please try again.",online_cancel_select_rating:"Select Rating",hmd_ratings_notrated:"Please Rate",hmd_ratings_verybad:"Very Poor",hmd_ratings_bad:"Poor",hmd_ratings_neutral:"Average",hmd_ratings_good:"Good",hmd_ratings_verygood:"Excellent"},"fr-fr":true,"en-gb":true,"de-de":true,"en-au":true,"ja-jp":true});define("nls/en-gb/localizedstrings",{audible_global_errorMessage:"There is missing or invalid information in the field(s) highlighted in red. Please check these fields and try again: ",audible_global_addToCart:"This title has been added to your basket.",audible_global_alreadyAddToCart:"This title has already been added to your basket.",audible_global_purchased:"This title has already been purchased.",audible_global_unableToAdd:"We are sorry, we were unable to add this product to the basket. Please try again",audible_global_viewCart:"View Basket",audible_global_errorAddingToWishlist:"Error occurred while adding the title to your wish list. Please try again",audible_global_addToWishlist:"This title has been added to your wish list.",audible_global_alreadyAddToWishlist:"This title has already been added to your wish list.",audible_global_alreadyInLibrary:"This title is already in your library.",audible_global_notAuthorizedToSell:"We are not authorized to sell this item to your geographic location.",audible_global_goToWishlist:"Go To Wish List",audible_global_inWishlist:"In Wish List",audible_global_recentlyAddedTitles:"Other recently added titles:",audible_global_errorSubmitRating:"Error submitting rating",audible_global_searchFor:"Search for an audiobook, newspaper, magazine, speech and more...",audible_global_searchForMore:"Search for audiobooks, newspapers, magazines, and more...",audible_global_whatIsThis:"What's this: ",audible_global_asAnAmazonCompany:"As an Amazon company, Audible.co.uk is powered by the same secure technology that you know and trust on Amazon.co.uk.",audible_global_enterAccessCode:"You must enter an access code.",audible_global_loading:"Loading...",audible_global_adding:"Adding...",audible_global_year:"Year",audible_global_month:"Month",buy_extra_credits:"Buy 3 Extra Credits",acc_merge_invalidZipCode:"Please check your zip code entry and try again.",acc_merge_clickCheckbox:"Please click on the checkbox to acknowledge that you are aware of the terms and conditions.",acc_merge_addPayment:"You have to add a payment before we finish.",acc_merge_selectPayment:"You have to select a payment before we finish.",billing_checkYourZipCode:"Please check your zip code entry and try again.",billing_passwdMismatch:"Your first and second password entries do not match. Please check your entry and try again.",billing_emailMismatch:"Your first and second email address entries do not match. Please check your entry and try again.",account_settings_emailMismatch:"Your first and second email address entries do not match. Please check your typing and try again.",account_settings_forgotPasswd:"Forgot your password?",account_errorFetching:"Error fetching order history",account_turnItOn:"Turn it On",account_turnItOff:"Turn it Off",account_on:"On",account_off:"Off",account_errorSaving:"Error saving account preference. Please try again.",acct_msg_errorYPart1:"Oops! you've already purchased this item.",acct_msg_errorYPart2:"close",acct_msg_errorYPart3:"It's available for download in",acct_msg_errorYPart4:"My Library",acct_msg_errorYPart5:"You can also",acct_msg_errorYPart6:"continue shopping",acct_msg_errorNPart3:"The audiobook you selected is already available for download in ",acct_msg_errorNPart5:", and it appears that you're not eligible for the membership offer you chose.",acct_msg_errorNPart6:"This may be because:",acct_msg_errorNPart7:"you already have an AudibleListener membership.",acct_msg_errorNPart8:"you have taken advantage of a membership offer within the past 24 months.",acct_msg_errorNPart9:"the offer is no longer valid.",acct_msg_errorNPartA:"If you believe this message is in error, please",acct_msg_errorNPartB:"contact Customer Service",acct_msg_errorNPartC:"Close window and continue shopping",acct_msg_error2Part1:"We're Sorry",acct_msg_error2Part3:"Due to publishing rights restrictions, we are not authorized to sell this book in the country where you live.",acct_msg_error2Part4:"Check out Audible's available titles.",acct_msg_error4Part2:"It appears that you're not eligible for the membership offer you chose.",acct_msg_error4PartA:"If you believe this message is in error, please contact",acct_msg_error4PartB:"Customer Service",acct_msg_error4Part9:"Continue Shopping",acct_msg_error4Part1:"Close",acct_msg_error5Part1:"Welcome Back!",acct_msg_error5Part5:"We'd love to have you back as a member.",acct_msg_error5Part6:"However, it appears you are not eligible for the offer you chose, because of a previous membership or an offer you began within the last 24 months.",acct_msg_error5Part7:"You are eligible for other membership plans that will also bring you great savings on the audiobooks you love.",acct_msg_error5Part8:"Choose a plan",affiliate_audibleLink:"Audible Link",affiliate_idNumber:"Your Publisher ID Number",anon_at_signup_enterEmail:"Please enter your email address",anon_at_signup_enterValidEmail:"Please enter a valid email address",audible_fgl_carousel_of:" of ",audible_fgl_carousel_by:"by",audible_fgl_carousel_narratedBy:"Narrated by",audible_fgl_carousel_ratings:"ratings",audible_fgl_carousel_hour:"hrs",audible_fgl_carousel_minute:"mins",audible_fgl_carousel_productdescription:"product.description.extended",audible_fgl_modal_publisherDefaultLabel:"What the Publisher Says",audible_fgl_modal_editorDefaultLabel:"What our Editors Say",audible_fgl_modal_addToWL:"Add to Wishlist",audible_fgl_modal_onWL:"On Wishlist",audible_fgl_modal_purchased:"Purchased",audible_fgl_modal_unavailable:"Unavailable",audible_fgl_modal_goToWL:"Go to Wishlist",audible_fgl_modal_wishList:"wish list",audible_fgl_modal_successText:"This title has been added to your ",audible_fgl_modal_duplicateText:"This title has already been added to your ",audible_fgl_modal_inLibraryText:"This title is already in your library.",audible_fgl_modal_noGeoText:"We are not authorized to sell this item to your geographic location.",audible_fgl_modal_errorText:"Error occurred while adding the title to your wish list. Please try again.",audible_fgl_modal_addToCart:"Add to Basket",audible_fgl_modal_inCart:"In Basket",audible_fgl_modal_yourCart:"your basket",audible_fgl_modal_errorTextCart:"We are sorry, we were unable to add this product to the basket. Please try again",audible_fgl_modal_successTextCart:"This title has been added to ",audible_fgl_modal_duplicateTextCart:"This title has already been added to ",audible_fgl_modal_purchasedTextCart:"This title has already been purchased",audible_fgl_modal_dateFormatMonthName:"dd MMMM yyyy",audible_fgl_modal_locale:"en-gb",audible_fgl_modal_MemberPrice:"Member Price",audible_fgl_modal_Price:"Price",audible_fgl_modal_SpecialPrice:"Special Offer Price",audible_fgl_modal_SalePrice:"Sale Price",audible_fgl_modal_RegularPrice:"Regular Price",audible_fgl_modal_UNABRIDGED:"UNABRIDGED",audible_fgl_modal_ABRIDGED:"ABRIDGED",audible_fgl_modal_playsampleof:"play sample of",audible_rating_ui_only:"Only ",audible_rating_ui_star:" star?",audible_rating_ui_stars:" stars?",audibleair_invalidChar:"Email address contains invalid characters",audibleair_enterEmail:"Enter your Email Address",audibleair_nonAsciiChar:"Email address contains non ascii characters.",audibleair_enterValidEmail:"Please enter a valid email address.",audibleair_onlyNumber:"Only Numbers should be entered for ",audibleair_enterPhone:"Enter your Phone Number",audibleair_selectValidCarrier:"Please select a valid Wireless Carrier",audibleair_acceptEULA:"Please accpet Audible EULA and Terms and Conditions to proceed",audibleair_enterUSPhone:"Please enter a valid US Phone",audibleair_entetEUPhone:"Please enter a valid EU Phone",audibleorderdetailajax_noPurchaseOrder:"You don't have any audio purchase orders.",audibleorderdetailajax_somethingWrong:"Something went wrong.  Try reloading this page to see your purchase orders.",audibleorderdetailajax_showMorePurchase:"Show More Purchases",audibleorderdetailajax_eligible:"eligible",advanced_search:"Advanced Search",cart_message1:"Your shopping basket is empty.",cart_message2:"Available credits:",cart_message3:"We've added the audiobook you selected to ",cart_message4:"Close window and continue to basket",cart_message5:"We've added the membership you selected to your",cart_message6:"Basket",cart_message7:"Due to publishing rights restrictions, we are not authorized to sell this book in the country where you live.",cart_message8:"Continue signing up for an AudibleListener membership.",cart_message9:"Check out Audible's available titles.",cart_messageA:"basket",category_experts_everything:"Everything",extra_credits_selectCredits:"Please select the number of credits you would like to purchase.",first_listen_maxChar:"You can only have a max of 2000 characters for your story.",first_listen_charLeft:"Characters Left ",first_listen_enterName:"Please enter your name or username.",first_listen_enterTitle:"Please enter the title of the book.",first_listen_enterStory:"Please enter your story.",gift_module_enterCode:" Enter the code you received... ",gift_module_limitChar:"Limit 300 characters. ",gift_module_charRemaining:" characters remaining",gift_module_giftOnItsWay:"Thank you. Your gift is on its way.",gift_module_enterName:"enter your name",gift_module_onlySend:"You can only send this gift to up to 20 people at a time.",gift_module_addNewRecipient:"you can add new recipient after purchase.",gift_module_onlySendOne:"You can only send this gift to one person.",gift_module_removeDuplicateEmail:"please remove duplicate email addresses",gift_module_enterEmail:"please enter a valid email address",gift_module_blankRecipientName:"Recipient name can not be blank",gift_module_noMoreThan:"name can not be more than 75 characters",gift_module_onlyOneRecipient:"Only one recipient is allowed",gift_module_blankPurchaseName:"Purchaser's name can not be blank",gift_module_sendThisGift:"Send this gift",gift_module_saveChanges:"Save changes",gift_module_pleaseWait:"Please wait",gift_module_sendThisEmail:"Send this email",gift_module_productImage:"product image",gift_module_yourGiftWillBeEmailedOn:"Your gift will be emailed on ",gift_module_immediately:"immediately",gift_module_done:"Done",gift_module_print:"print",gift_module_inPrint:"in Print",gift_module_print_default_name:"ex. John Doe",giftredemption_enterClaimCode:"You must enter a claim code.",glg_prompt_problem:"There was a problem with your exchange.  Please try again.",glg_prompt_pleaseSelect:"Please select an item from the drop-down",library_apple_appStoreURL:" https://itunes.apple.com/gb/app/audiobooks-from-audible/id379693831?mt=8&uo=4",library_android_appStoreURL:"https://play.google.com/store/apps/details?id=com.audible.application&hl=gb",library_kindle_appStoreURL:"http://www.amazon.com/gp/mas/dl/android?p=com.audible.application",library_windowsPhone_appStoreURL:"http://www.windowsphone.com/en-gb/store/app/audible-audiobooks/bdc813dd-c20b-41f8-8646-de72fa0b365d",library_items_all:"All ",library_items_all_titles:" items",library_items_per_page:" items per page",library_enhanced:"Enhanced",library_seeLatestEpisodes:"See Latest Episodes",library_hideLatestEpisodes:"Hide Latest Episodes",library_domain:"www.audible.co.uk",nextlisten_clickCheckbox:"Please click the checkbox near the title you would like to remove/move.",personsocial_cannotContact:"We could not contact Facebook successfully. Please try again later.",personsocial_cannotAccess:"We could not access your Facebook profile photo. Please ensure you have one set in your Facebook profile.",personsocial_editPhoto:"Edit Photo",personsocial_addPhoto:"Add Photo",personsocial_unfollowReviewer:"Unfollow this reviewer",personsocial_unfollow:"Unfollow",personsocial_followReviewer:"Follow this reviewer",personsocial_follow:"Follow",software_wizard_errroSaving:"Error saving account preference. Try again !!",subswitch_selectSubscription:"Please select your subscription.",toa_subscried:"We have successfully subscribed ",toa_receiveEmail:" to receive update emails.",toa_makeSelection:"Please make a selection, then click Submit.",vote_votedReview:"You have voted on this review.",whatAreCreditsInSecureImageUrl:"http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/flyouts/whatarecredits_flyout.png",whatAreCreditsSecureImageUrl:"https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/images/flyouts/whatarecredits_flyout.png",whatAreCreditsImageAltText:"What are credits? Members receive credits that can be used as currency on our site and applied to any purchase. One credit equals one audiobook. A very small number of audiobooks and other titles are valued at more than one credit.",write_review_orig_reachMaximum:"Maximum review length reached. Your message has been shortened to ",write_review_orig_chars:" characters.",write_review_orig_enterDetail:"Please enter all the required details below.",write_review_orig_setRating:"You need to set a rating for each category, enter a title and some review text before you can preview.",write_review_guided_headline:"GUIDED REVIEW",write_review_guided_tooltipText:"Don't worry we've saved the information from the last screen. If you decide to go back just click this button.",write_review_guided_buttonText:"Return to Freeform",write_review_freeform_headline:"FREEFORM REVIEW",write_review_freeform_tooltipText:"Would you prefer to write a guided review?",write_review_freeform_buttonText:"Switch to Guided",write_review_chars_remaining:"characters remaining",listener_error:"An error occured please refresh",navigation_more:"More",navigation_fewer:"Fewer",photoactions_notSelected:"Avatar not selected",photoactions_cropFailed:"Crop failed please retry.",photoactions_uploadPhoto:"Please upload your photo again",photoactions_uploadUrl:"Please upload your url again",promocode_cannotProcessRequest:"Sorry, we can't process your request right now. Please try again later or contact Customer Care.",promocode_moreDetails:"More details",promocode_remove:"Remove",promocode_cannotApplyToCart:"Sorry, there was a problem applying this promotion to your basket.Please try again, or contact customer care.",promocode_cannotRemoveFromCart:"Sorry, there was a problem removing this promotion from your basket.Please try again, or contact customer care.",promocode_cannotValidateCode:"Sorry, there was a problem validating your code. Please try again later or contact Customer Care.",promocode_default_box_text:"Enter your promotional code here...",search_clientId:"audible-search-uk@amazon.com/3763066480fd0eefc383708b84fe909dd7d0203c",search_acHost:"completion.amazon.co.uk/search/complete",search_acMktid:"36061",search_suggestionsText:"Suggestions",ftxTopNavSearch_placeHolderText:"Find a Good Book",OC_select_reason:"Please select a reason",amz2aud_proccessing:"Processing...",sendSms_sending:"Sending...",facebook_jsurl:"//connect.facebook.net/en_GB/sdk.js",marketplaceDateFormat:"dd/mm/yy",giftEmail_recipientList:"<span>RECIPIENTLIST_1</span> and <a href='#' id='giftPrevListMore'>other HIDDEN_RECIPIENT recipient</a>",giftEmail_recipientLists:"<span>RECIPIENTLIST_1</span> and <a href='#' id='giftPrevListMore'>other HIDDEN_RECIPIENT recipients</a>",buybox_processing:"Processing..",message_getapp:"Message sent to ",quick_view_error:"Sorry, there was an error.  Please try again.",online_cancel_select_rating:"Select Rating",hmd_ratings_notrated:"Please Rate",hmd_ratings_verybad:"Very Poor",hmd_ratings_bad:"Poor",hmd_ratings_neutral:"Average",hmd_ratings_good:"Good",hmd_ratings_verygood:"Excellent"});define("client-side-metrics-jslogging",[],function(){var attribution=" ";var message;function setLogging(errMsg,url,lineNo){if(message!="DISABLE_CSM_LOG_FLAG"){logJSErrors(errMsg,url,lineNo,"ERROR")}}function logJSErrors(exception,url,lineNo,logLevel){incrementCounter("JSErrors");var att=attribution.concat(", Line No : "+lineNo+", url : "+url);if(window.ueLogError){window.ueLogError(exception,{logLevel:logLevel,attribution:att,message:message})}}function set(errAttribution,msg){attribution=errAttribution;message=msg}function csmForWidgets(scope,data,isWidget){if(window.uet&&typeof uet=="function"){if(!isWidget){uet("t0",scope,new Date());latency("uet",scope,isWidget,"tc")}latency("uet",scope,isWidget,"bb");latency("uet",scope,isWidget,"cf");latency("uet",scope,isWidget,"af");if(!isWidget){latency("uet",scope,isWidget,"bft");latency("uet",scope,isWidget,"ue")}}if(window.ues&&typeof(ues)=="function"&&!isWidget){ues("ctb",scope,"1");Id(scope,data)}if(window.ue&&ue.tag){ue.tag("navtiming",scope)}if(window.uex&&typeof uex=="function"){latency("uex",scope,isWidget,"ld")}}function latency(windowFn,scope,isWidget,metrics){window[windowFn](metrics,scope,(isWidget?{wb:1}:null))}function Id(scope,data){ues("id",scope,data.id)}function setCounter(counterName,counterValue){if(typeof ue!="undefined"){ue.count(counterName,counterValue)}}function getCounter(counterName){return((window.ue&&ue.count(counterName)!=null)?ue.count(counterName):0)}function incrementCounter(counterName){setCounter(counterName,getCounter(counterName)+1)}return{logJSErrors:logJSErrors,set:set,setLogging:setLogging,incrementCounter:incrementCounter,csmForWidgets:csmForWidgets}});define("ftx/sendSMS",["ftx/lib/jquery-current","isValid","ftx/lib/jquery.simplemodal.1.4.3.min","i18n!nls/localizedstrings","client-side-metrics-jslogging"],function($,isValid,sm,localizedStrings,csm){var smsButton=$(".smsform button");var callbackMethod=null;if(smsButton.length==0){smsButton=$('.smsform input[type="button"]')}var sentText=$("#smsText").html();var originalButtonText=smsButton.html();var originalButtonClass=smsButton.attr("class");var isWaiting=false;var localStrings=localizedStrings;function getInputByName(name){return $("input[name='"+name+"']").val()}function getContactInfo(){if(getInputByName("contactInfo").indexOf("@")>0){return getInputByName("contactInfo").replace(/\<|\>|\(|\)/g,"")}else{return getInputByName("contactInfo").replace(/\<|\>|\-|\(|\)/g,"")}}function setWaitingIndicator(state){isWaiting=state;if(originalButtonText.length>0){smsButton.html(state?localStrings.sendSms_sending:originalButtonText)}else{smsButton.attr("class",(state?originalButtonClass+"_disabled":originalButtonClass))}}function inputValid(){var inpt=getInputByName("contactInfo");if(isValid.Email(inpt)){return true}else{if(isValid.PhoneNumber(inpt)){return true}else{if(typeof s_enabled!="undefined"){try{s_formErrors("How It Works:invalid link")}catch(e){csm.logJSErrors(e,"/sms-ftx-ajax","s_formErrors","ERROR")}}var contactSuccess=$("#contactSuccess");if(contactSuccess!="undefined"&&contactSuccess!=null){contactSuccess.css("display","none")}var contactError=$("#contactError");contactError.css("display","block");return false}}}function getRefMarker(){var refMarker=smsButton.attr("data-ref");if(refMarker===undefined||refMarker==""){return""}var inpt=getInputByName("contactInfo");refMarker+=isValid.Email(inpt)?"_e":"_s";return refMarker}function sendAppLink(evt){evt.preventDefault();if(isWaiting===true||inputValid()===false){return}var url="/sms-ftx-ajax"+getRefMarker();var contactInfo="";setWaitingIndicator(true);var appLink=$("a.download-button").attr("href");$.ajax({url:url,type:"post",data:{contactInfo:getContactInfo(),appAction:getInputByName("appAction"),appActionToken:getInputByName("appActionToken"),appLink:appLink},complete:function(msg){setWaitingIndicator(false);if(msg&&msg.responseText.indexOf("SUCCESS")==1){$("#smsText").html(sentText+getInputByName("contactInfo")+".");var contactError=$("#contactError");contactError.css("display","none");var contactSuccess=$("#contactSuccess");if(contactSuccess!="undefined"&&contactSuccess!=null){contactSuccess.css("display","block")}if(callbackMethod){callbackMethod();return}if($("#smsModal").length>0){$("#smsModal").modal({minHeight:245,minWidth:300,maxHeight:400,maxWidth:500,closeHTML:'<a class="modalCloseImg" title="'+unescape(localStrings.acct_msg_error4Part1)+'"></a>'})}}}})}return{init:function(callback){callbackMethod=callback;smsButton.click(sendAppLink)}}});define("logger",["ftx/lib/jquery-current"],function($){if(typeof String.prototype.format==="undefined"){String.prototype.format=function(){var formatted=this;for(var i=0;i<arguments.length;i++){var regexp=new RegExp("\\{"+i+"\\}","gi");formatted=formatted.replace(regexp,arguments[i])}return formatted}}var _errorDivLoc="windowOnError";var _errorDiv;var _console=typeof console!=="undefined"?console:undefined;function getErrorDiv(){if(typeof _errorDiv!=="undefined"){return _errorDiv}$("body").append("<div id="+_errorDivLoc+" style='display:none'></div>");_errorDiv=$("#"+_errorDivLoc);return _errorDiv}function appendToErrorDiv(msg,url,num){getErrorDiv().append("<div>{0}; {1}; {2} </div>".format(msg,url,num))}window.onerror=appendToErrorDiv;var _debugOn=(location.hash.indexOf("debug")!=-1);var shouldLog=typeof _console!=="undefined"&&_debugOn;function canGroup(){return(shouldLog&&typeof _console.group!=="undefined"&&typeof _console.groupEnd!=="undefined")}function log(msg){if(shouldLog){_console.log(msg)}}function startGroup(grp){if(canGroup()){_console.group(grp)}else{if(shouldLog){_console.log(grp+": Group Start")}}}function endGroup(){if(canGroup()){_console.groupEnd()}else{if(shouldLog){_console.log("Group End")}}}function debugOn(){_debugOn=true}function debugOff(){_debugOn=false}return{log:log,startGroup:startGroup,endGroup:endGroup,debugOn:debugOn,debugOff:debugOff}});define("newsampleplayer",["ftx/lib/jquery-current","i18n!nls/localizedstrings","logger","client-side-metrics-jslogging"],function($,localstrings,logger,csm){var audio_play,audio_play_big,audio_playing,audio_paused,refTag_on_hp_load,refTag_on_cf_load,audio_listen,audio_pause;$(function(){audio_play=$("#string_sample_play").val();audio_play_big=$("#string_sample_play_big").val();audio_playing=$("#string_sample_playing").val();audio_paused=$("#string_sample_paused").val();refTag_on_hp_load=$("#string_reftag_on_hp_load").val();refTag_on_cf_load=$("#string_reftag_on_cf_load").val();if(spTargetGoodReads()){audio_listen=$("#gr_string_sample_listen").val();audio_play_big=audio_listen;audio_play=$("#gr_string_sample_play").val();audio_playing=$("#gr_string_sample_playing").val();audio_pause=$("#gr_string_sample_pause").val();audio_paused=$("#gr_string_sample_paused").val();refTag_on_hp_load=$("#gr_string_reftag_on_sp_load").val()}$(".sample-player").click(function(e){e.preventDefault()});setPlayerBtnAndSampleURL();audioSampleCommon();audibleSampleManager=new Audible.SampleManager();var path=window.location.pathname;if($(AUDIBLE_SAMPLE_PLAYER_CONTAINER).length){var refTagOnPageLoad=null;if(path=="/"){refTagOnPageLoad=refTag_on_hp_load}else{if(path=="/mt/content-first"){refTagOnPageLoad=refTag_on_cf_load}else{if(path=="/product-upsell"){refTagOnPageLoad=refTag_on_hp_load}}}if(refTagOnPageLoad!=null){callMetricsApp(refTagOnPageLoad)}}$(".adbl-prod-image-sample-cont, .adbl-prod-image-cont, #adbl-cart-rec .recc_item, .adbl-sp-prod-image-content").each(function(){enableSamplePlayer($(this))});if(spTargetGoodReads()){setGoodReadsOverrides();setGoodReadsOverridesFlyout();var requestOrigin=$("#gr_request_origin").val();if($(".adbl-sample-cont:not(:empty)").length){window.parent.window.postMessage({func:"showAudibleButton",params:[""]},requestOrigin)}}});var AUDIBLE_SAMPLE_PLAY_IMAGE="";var AUDIBLE_SAMPLE_PAUSE_IMAGE="";var AUDIBLE_SAMPLE_SPINNING_IMAGE="";var AUDIBLE_SAMPLE_HOVER_PLAY_IMAGE="";var AUDIBLE_SAMPLE_HOVER_STOP_IMAGE="";var AUDIBLE_SAMPLE_HOVER_PAUSE_IMAGE="";var AUDIBLE_SAMPLE_GREEN_PLAY_IMAGE="";var AUDIBLE_SAMPLE_GREEN_PAUSE_IMAGE="";var AUDIBLE_SAMPLE_GREEN_SPINNING_IMAGE="";var BASE_URL="";var AUDIBLE_SAMPLE_PLAYER_CONTAINER=".adbl-sample-cont";function enableSamplePlayer(sampleCont){if(hasHtml5Audio()){audibleSampleManager.setSampleBoxSize(sampleCont);audioSampleHtml5()}else{sampleCont.find(".flashcontentcontainer").css("display","block");audioSampleNone()}}function updateAccessibilityAttributes(uniqueId,reset){var spriteplay=$("#largesprite_"+uniqueId);if(spriteplay.length==0){spriteplay=$("#mediumsprite_"+uniqueId)}if(spriteplay.length==0){spriteplay=$("#smallsprite_"+uniqueId)}if(spriteplay.length&&spriteplay.closest(AUDIBLE_SAMPLE_PLAYER_CONTAINER).length){var parentContainer=spriteplay.closest(AUDIBLE_SAMPLE_PLAYER_CONTAINER);var ariaPressed=parentContainer.attr("aria-pressed");if(typeof ariaPressed!="undefined"){if(reset){parentContainer.attr("aria-pressed","false")}else{parentContainer.attr("aria-pressed",ariaPressed=="true"?"false":"true")}}}}function setPlayerBtnAndSampleURL(){AUDIBLE_SAMPLE_PLAY_IMAGE=$("#btnPlayActive").attr("href");AUDIBLE_SAMPLE_PAUSE_IMAGE=$("#btnPauseActive").attr("href");AUDIBLE_SAMPLE_HOVER_PLAY_IMAGE=$("#btnPlayActive").attr("href");AUDIBLE_SAMPLE_HOVER_PAUSE_IMAGE=$("#btnPauseActive").attr("href");AUDIBLE_SAMPLE_HOVER_STOP_IMAGE=$("#btnPauseActive").attr("href");AUDIBLE_SAMPLE_SPINNING_IMAGE=$("#btnPlaySpin").attr("href");AUDIBLE_SAMPLE_OFF_STOP_IMAGE=$("#btnPauseOff").attr("href");AUDIBLE_SAMPLE_OFF_PLAY_IMAGE=$("#btnPlayOff").attr("href");AUDIBLE_SAMPLE_GREEN_PLAY_IMAGE=$("#btnGreenAudio").attr("href");AUDIBLE_SAMPLE_GREEN_PAUSE_IMAGE=$("#btnGreenAudioPause").attr("href");AUDIBLE_SAMPLE_GREEN_SPINNING_IMAGE=$("#btnGreenAudioSpinning").attr("href");switch(window.location.protocol){case"https:":BASE_URL="https://d3dqntzfhcgpyw.cloudfront.net/";break;default:BASE_URL="http://samples.audible.com/";break}}function hasHtml5Audio(){var myAudio=document.createElement("audio");var isIphone3=String(navigator.userAgent).indexOf("iPhone OS 3")!=-1;if(isIphone3){return false}var canPlayMp3=(!!myAudio.canPlayType)&&myAudio.canPlayType("audio/mpeg")&&(""!=myAudio.canPlayType("audio/mpeg"));return canPlayMp3}function audioSampleCommon(){if(typeof Audible=="undefined"){Audible={}}Audible.SampleManager=function(debug){var _debug=debug;var ids2samples=[];var currentSample=null;var skuCountryPostfixes=["UK","FR","DE","AU"];var originId=null;function removeCountryPostfix(asin){var length=asin.length;if(jQuery.inArray(asin.substr(length-2,length),skuCountryPostfixes)>-1){asin=asin.slice(0,-2)}return asin}function getSample(uniqueId,asin){originId=uniqueId;asin=removeCountryPostfix(asin);var sample=ids2samples[uniqueId];if(!sample){var lcAsin=asin.toLowerCase();if($("#flashcontent"+uniqueId).length>0&&$("#flashcontent"+uniqueId).parent().children(".sampleURL").length>0&&decodeURIComponent($("#flashcontent"+uniqueId).parent().children(".sampleURL").text()).match("samples.audible.(.*?)/")!=null){BASE_URL=BASE_URL.replace("samples.audible.com","samples.audible."+decodeURIComponent($("#flashcontent"+uniqueId).parent().children(".sampleURL").text()).match("samples.audible.(.*?)/")[1])}var url=BASE_URL+lcAsin.replace(/_/g,"/")+"/"+lcAsin+"_sample.mp3";sample=new Audible.Sample(uniqueId,asin,url,this,originId);ids2samples[uniqueId]=sample}return sample}function toggle(uniqueId,asin,img,asinRef,reftag){var sample=this.getSample(uniqueId,asin);if(currentSample&&sample!=currentSample){this.setResting(currentSample.getId());try{currentSample.stop()}catch(e){logger.log("failed to stop playing the previouse sample: "+currentSample.getAsin())}try{currentSample.setPlaying(false);currentSample.setPaused(false)}catch(e){logger.log("failed to set the previouse sample playing status to false"+currentSample.getAsin())}}toggleSprite(uniqueId,sample.isPlaying()||sample.isPaused());sample.toggle(asinRef,reftag);if(sample.isPlaying()){setLoading(uniqueId)}else{setResting(uniqueId)}currentSample=sample;return sample}function toggleSprite(uniqueId,sampleStatus){var largeSpritePlayer=$("#largesprite_"+uniqueId);toggleOneSpritePlayer(largeSpritePlayer,sampleStatus);var mediumSpritePlayer=$("#mediumsprite_"+uniqueId);if(spTargetGoodReads()){toggleGRSpritePlayer(mediumSpritePlayer,sampleStatus)}else{toggleOneSpritePlayer(mediumSpritePlayer,sampleStatus)}var smallSpritePlayer=$("#smallsprite_"+uniqueId);toggleOneSpritePlayer(smallSpritePlayer,sampleStatus)}function toggleOneSpritePlayer(sp,ss){if(sp.length&&sp.parent().get(0).style.display!=="none"){sp.find(".audio-sample-cta").toggleClass("paused");if(!ss){sp.find(".audio-sample-cta").toggleClass("activated")}var st=sp.find(".audio-sample-text");if(st.length){var text=st.text();var countDown=sp.find(".sample-countdown");if(text!=audio_playing){st.hide();countDown.show()}else{st.show();countDown.hide()}st.text(text==audio_playing?audio_paused:audio_playing)}}}function toggleGRSpritePlayer(sp,ss){if(sp.length&&sp.parent().get(0).style.display!=="none"){sp.find(".audio-sample-cta").toggleClass("paused");if(!ss){sp.find(".audio-sample-cta").toggleClass("activated")}var st=sp.find(".audio-sample-text");if(st.length){var text=st.text();var classList=sp.find(".audio-sample-cta").attr("class").split(/\s+/);$.each(classList,function(index,item){if(item=="paused"||text==audio_listen){st.text(audio_playing)}else{st.text(audio_paused)}})}}}function stopSample(){if(currentSample){var sampleId=currentSample.getId();this.setResting(sampleId);try{currentSample.pause()}catch(e){logger.log("failed to stop playing the previouse sample: "+currentSample.getAsin())}try{currentSample.setPlaying(false);currentSample.setPaused(false)}catch(e){logger.log("failed to set the sample playing status to false: "+currentSample.getAsin())}}}function pauseSample(){if(currentSample&&currentSample.isPlaying()){var sampleId=currentSample.getId();this.setResting(sampleId);try{currentSample.pause()}catch(e){logger.log("failed to pause the previous sample: "+currentSample.getAsin())}try{currentSample.setPlaying(false);currentSample.setPaused(true)}catch(e){logger.log("failed to set the sample playing status to false and paused status to true: "+currentSample.getAsin())}toggleSprite(sampleId,true)}}function setSampleSrc(uniqueId,src){$(".sample_"+uniqueId).each(function(){$(this).attr("src",src)});var el=document.getElementById("sample_"+uniqueId);if(!el){return}el.src=src}function attachEventHandlers(parent,child){if(parent.length&&child.length){parent.click(function(evt){evt.preventDefault();if(evt.target==this){child.click()}else{if(currentSample){updateAccessibilityAttributes(currentSample.getId(),false)}}});parent.keypress(function(evt){evt=evt||window.event;evt.preventDefault();if(event.keyCode===32||event.keyCode===13){child.click()}return false})}}function setSampleBoxSize(imgSample){imgSample.find(AUDIBLE_SAMPLE_PLAYER_CONTAINER).css("height","45px");var imgsize=null;if(imgSample.length){var img=imgSample.find('img.adbl-prod-image, img.adbl-prod-img, img[alt="product image"]');if(img.length){var t4series=img.parents(".adbl-t4-image-series");var imgSrc=img[0].src.match(/\._SL[0-9]{2,}_\./g);if(imgSrc===null){imgSrc=img[0].src.match(/no_image_s_[0-9]{2,}_image/g)}if(imgSrc!=null){imgsize=parseInt(imgSrc[0].match(/[0-9]{2,}/g))}else{imgSrc=img[0].src.match(/no_image_detail_image/g);if(imgSrc===null){imgSrc=img[0].src.match(/no_image_med_image/g)}if(imgSrc!=null){imgsize=img[0].width}}}if(spTargetGoodReads()){imgsize=80}if($.isNumeric(imgsize)){var samplePlayLabel=imgSample.find(".largespriteplayer .audio-sample-text").text();imgSample.find(AUDIBLE_SAMPLE_PLAYER_CONTAINER).attr({tabindex:0,role:"button","aria-label":samplePlayLabel,"aria-pressed":"false"});if(imgsize<80){var smallSprite=imgSample.find(".smallspriteplayer");smallSprite.css("display","inline-block");smallSprite.css("width","20px");smallSprite.css("margin","auto");smallSprite.find(".audio-sample-cta").css("background-image","url("+$("#spriteBtnSmall").attr("href")+")");attachEventHandlers(imgSample.find(AUDIBLE_SAMPLE_PLAYER_CONTAINER),imgSample.find(".smallspriteplayer .audio-sample-link-small"))}else{if(imgsize<175||t4series.length){var mediumSprite=imgSample.find(".mediumspriteplayer");mediumSprite.css("display","inline");if(spTargetGoodReads()){mediumSprite.find(".audio-sample-cta").css("background-image","url("+$("#grSpriteBtnSmall").attr("href")+")")}else{mediumSprite.find(".audio-sample-cta").css("background-image","url("+$("#spriteBtnSmall").attr("href")+")")}if(imgsize>=150){mediumSprite.find(".audio-sample-link-small").css("margin-left","30px")}attachEventHandlers(imgSample.find(AUDIBLE_SAMPLE_PLAYER_CONTAINER),imgSample.find(".mediumspriteplayer .audio-sample-link-small"))}else{var largeSprite=imgSample.find(".largespriteplayer");largeSprite.css("display","inline");largeSprite.find(".audio-sample-cta").css("background-image","url("+$("#spriteBtn").attr("href")+")");if(imgsize==300){largeSprite.find(".audio-sample-link").css("margin-left","60px")}attachEventHandlers(imgSample.find(AUDIBLE_SAMPLE_PLAYER_CONTAINER),imgSample.find(".largespriteplayer .audio-sample-link"))}}}}}function setResting(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_PLAY_IMAGE)}function setLoading(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_SPINNING_IMAGE)}function setPlaying(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_PAUSE_IMAGE)}function setActivePlay(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_ACTIVE_PLAY_IMAGE)}function setOffPlay(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_OFF_PLAY_IMAGE)}function setHoverPlay(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_HOVER_PLAY_IMAGE)}function setActiveStop(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_ACTIVE_STOP_IMAGE)}function setOffStop(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_OFF_STOP_IMAGE)}function setHoverStop(uniqueId){setSampleSrc(uniqueId,AUDIBLE_SAMPLE_HOVER_STOP_IMAGE)}return{getSample:getSample,setResting:setResting,setSampleSrc:setSampleSrc,setLoading:setLoading,setPlaying:setPlaying,stopSample:stopSample,pauseSample:pauseSample,toggle:toggle,setSampleBoxSize:setSampleBoxSize}};var audibleSampleManager=new Audible.SampleManager()}function audioSampleHtml5(){if(typeof Audible=="undefined"){Audible={}}Audible.Sample=function(uniqueId,asin,url,audibleSampleManager,originId){var _asin=asin;var _uniqueId=uniqueId;var _url=url;var _audibleSampleManager=audibleSampleManager;var _isPlaying=false;var _isPaused=false;var endedhandlercache=null;var playinghandler=null;var AUDIO_NODE_ID="_audible_audio_node_id_";var sampleText="";function getAudio(){var id=AUDIO_NODE_ID+_asin;var el;if($("#"+id).length<=0){el=document.createElement("AUDIO");el.id=id;el.style.display="none";document.body.appendChild(el)}return $("#"+id)}function isPlaying(){return _isPlaying}function isPaused(){return _isPaused}function setPlaying(b){_isPlaying=b}function setPaused(b){_isPaused=b}function getAsin(){return _asin}function getId(){return _uniqueId}function play(asin,reftag){var as=_audibleSampleManager;var a=getAudio();if(a.length<=0){return}_isPlaying=true;_isPaused=false;if(parseInt(a.get(0).currentTime)==0){as.setLoading(_uniqueId);var endedhandler=function(e){as.setResting(_uniqueId);_countDownFinish();updateElementsDisplay(_uniqueId,true);updateAccessibilityAttributes(_uniqueId,true);_isPlaying=false;_isPaused=false};endedhandlercache=endedhandler;a.bind("ended",endedhandler);a.attr("src",_url);a.get(0).play();var playing=function(){as.setPlaying(_uniqueId);_countDown();_isPlaying=true;_isPaused=false};a.bind("playing",playing);playinghandler=playing}else{a.get(0).play()}updateElementsDisplay(_uniqueId,false);a.get(0).addEventListener("timeupdate",updateProgress,false);sampleText=$($(".sample_countdown_"+_uniqueId)[0]).text();if(sampleText==""){sampleText=$("#sample_countdown_"+_uniqueId).text()}if(reftag){if(typeof s_enabled!="undefined"){try{s_playSample(asin,"")}catch(e){csm.logJSErrors(e,"/","s_playSample","ERROR");logSamplePlayerError(pageAction,asin,e.name+": "+e.message)}}callMetricsApp(reftag)}}function setEndDisplay(sp,t,c){if(sp.length&&sp.parent().get(0).style.display!=="none"){if(_isPlaying){sp.find(".audio-sample-cta").toggleClass("paused activated")}else{if(_isPaused){sp.find(".audio-sample-cta").toggleClass("activated")}}var spText=sp.find(".audio-sample-text");if(spText){spText.text(t);spText.css("color",c);var countDown=$(".sample-countdown");countDown.hide();spText.show()}}}function updateElementsDisplay(uniqueId,endedOrStopped){var isGRSample=spTargetGoodReads();if(endedOrStopped){var inactiveColor="#777";var spriteplay=$("#largesprite_"+uniqueId);setEndDisplay(spriteplay,audio_play_big,inactiveColor);if(!isGRSample){var mediumsprite=$("#mediumsprite_"+uniqueId);setEndDisplay(mediumsprite,audio_play,inactiveColor)}else{var inactiveColorGR="#181818";var mediumsprite=$("#mediumsprite_"+uniqueId);setEndDisplay(mediumsprite,audio_listen,inactiveColorGR)}var smallsprite=$("#smallsprite_"+uniqueId);setEndDisplay(smallsprite,"",inactiveColor)}else{var spriteplay=$("#largesprite_"+uniqueId);if(spriteplay.find(".audio-sample-text").length){spriteplay.find(".audio-sample-text").css("color","#00aeef")}var mediumsprite=$("#mediumsprite_"+uniqueId);if(mediumsprite.find(".audio-sample-text").length){if(!isGRSample){mediumsprite.find(".audio-sample-text").css("color","#00aeef")}}}}function pause(){_isPlaying=false;_isPaused=true;var a=getAudio();if(a.length<=0){return}a.get(0).pause()}function stop(){if(!(_isPlaying||_isPaused)){return}var a=getAudio();if(a.length<=0){return}a.get(0).pause();a.get(0).currentTime=0;a.unbind("ended",endedhandlercache);a.unbind("playing",playinghandler);_countDownFinish();updateElementsDisplay(_uniqueId,true);updateAccessibilityAttributes(_uniqueId,true);_isPlaying=false;_isPaused=false}function updateProgress(){var progress=$("#progress_"+uniqueId).get(0);if(progress){var value=0;var a=getAudio().get(0);if(a.currentTime>0){value=Math.floor((100/a.duration)*a.currentTime)}progress.style.width=value+"%"}}function _countDown(){getAudio().bind("timeupdate",function(){if(_isPlaying){var duration=parseInt(this.duration),currentTime=parseInt(this.currentTime),timeLeft=duration-currentTime,s,m;s=currentTime%60;m=Math.floor(currentTime/60)%60;if(isFinite(duration)){s=timeLeft%60;m=Math.floor(timeLeft/60)%60}s=s<10?"0"+s:s;if(!(isNaN(parseFloat(s))||isNaN(parseFloat(m)))){_updateCountDownText(m+":"+s)}}})}function _countDownFinish(){_updateCountDownText(sampleText)}function _updateCountDownText(newText){$(".sample_countdown_"+_uniqueId).each(function(){$(this).text(newText)});var el=document.getElementById("sample_countdown_"+_uniqueId);if(!el){return}$(el).text(newText)}function toggle(asin,reftag){if(this.isPlaying()){pause()}else{play(asin,reftag)}}return{isPlaying:isPlaying,setPlaying:setPlaying,isPaused:isPaused,setPaused:setPaused,getAsin:getAsin,getId:getId,play:play,pause:pause,stop:stop,toggle:toggle}}}function setGoodReadsOverrides(){var samplePlayLabel=$(".mediumspriteplayer .audio-sample-text");var samplePlayerLink=$(".mediumspriteplayer .audio-sample-link-small");var playing=$("#gr_string_sample_playing").val();var paused=$("#gr_string_sample_paused").val();var pause=$("#gr_string_sample_pause").val();var play=$("#gr_string_sample_play").val();samplePlayerLink.hover(function(){var currentValue=$(".mediumspriteplayer .audio-sample-text");if(currentValue.text()==playing){currentValue.text(pause)}else{if(currentValue.text()==paused){currentValue.text(play)}}},function(){var currentValue=$(".mediumspriteplayer .audio-sample-text");if(currentValue.text()==pause){currentValue.text(playing)}else{if(currentValue.text()==play){currentValue.text(paused)}}});samplePlayLabel.text(audio_listen)}function setGoodReadsOverridesFlyout(){var requestOrigin=$("#gr_request_origin").val();$(".audible-sample-link").on("click",function(evt){var samplePlayerInitialized=$(".mediumspriteplayer .audio-sample-text").text();var listenString=$("#gr_string_sample_playing").val();if(samplePlayerInitialized==listenString){window.parent.window.postMessage({func:"showAudibleSampleFlyout",params:[""]},requestOrigin)}else{window.parent.window.postMessage({func:"hideAudibleSampleFlyout",params:[""]},requestOrigin)}})}function spTargetGoodReads(){var grSamplePlayer=$(".gr_sample_player_override");if(grSamplePlayer.length){return 1}else{return 0}}function audioSampleNone(){if(typeof Audible=="undefined"){Audible={}}Audible.Sample=function(uniqueId,asin,url,audibleSampleManager){var _asin=asin;var _uniqueId=uniqueId;var _url=url;var _audibleSampleManager=audibleSampleManager;var _isPlaying=false;function isPlaying(){return _isPlaying}function setPlaying(b){_isPlaying=b}function getAsin(){return _asin}function getId(){return _uniqueId}function toggle(){document.location=_url}return{isPlaying:isPlaying,setPlaying:setPlaying,getAsin:getAsin,getId:getId,toggle:toggle}}}var flashMovie;var activePlayers=new Array();var playIDs=new Array();var playerInstance=0;function playerObj(id){this.isPaused=false;this.id=id}function pauseAllPlayers(){if(playIDs.length>0){for(p=0;p<playIDs.length;p++){if(!activePlayers[playIDs[p]].isPaused){pauseSample(playIDs[p])}}}}function playSample(playId,reftag,asin){flashMovie=document.getElementById("flashcontent"+playId);if(playIDs.length>0){for(p=0;p<playIDs.length;p++){if(!activePlayers[playIDs[p]].isPaused){resetSample(playIDs[p])}}}flashMovie.playSample();flashMovie.getPlayerID(playId);if(!activePlayers[playId]){playIDs[playerInstance]=playId;activePlayers[playId]=new playerObj(playId);playerInstance++}else{if(activePlayers[playId].isPaused){activePlayers[playId].isPaused=false}}toggleButtons(playId);document.getElementById("playbutton"+playId).onclick=function(){pauseSample(playId)};if($("#adbl_sample_text_"+playId).length>0){$("#adbl_sample_text_"+playId).hide();$("#adbl_paused_text_"+playId).hide()}if(reftag){if(typeof s_enabled!="undefined"){try{s_playSample(asin,"")}catch(e){csm.logJSErrors(e,"/","s_playSample","ERROR");logSamplePlayerError(pageAction,asin,e.name+": "+e.message)}}callMetricsApp(reftag)}}function pauseSample(playId){var flashMovieId=flashMovie.id;if(flashMovieId.match(playId)!=null){flashMovie.pauseSample();flashMovie.getPlayerID(playId);if(activePlayers[playId]){activePlayers[playId].isPaused=true}}toggleButtons(playId);document.getElementById("playbutton"+playId).onclick=function(){playSample(playId)};if($("#adbl_paused_text_"+playId).length>0){$("#adbl_paused_text_"+playId).show()}}function resetSample(playId){document.getElementById("flashcontent"+playId).resetSample();document.getElementById("playbutton"+playIDs[p]).onclick=function(){playSample(playId)};$("#playbutton_img"+playId).show();$("#pausebutton_img"+playId).hide();if($("#adbl_sample_text_"+playId).length>0){$("#adbl_sample_text_"+playId).show()}}function toggleGreenOrange(playId){if($("#playbutton_img"+playId).css("display")!="none"||$("#playbutton_orange_img"+playId).css("display")!="none"){$("#playbutton_orange_img"+playId).toggle();$("#playbutton_img"+playId).toggle()}else{$("#pausebutton_orange_img"+playId).toggle();$("#pausebutton_img"+playId).toggle()}}function toggleButtons(playId){if($("#playbutton_img"+playId).css("display")!="none"||$("#playbutton_orange_img"+playId).css("display")!="none"){$("#playbutton_orange_img"+playId).hide();$("#playbutton_img"+playId).hide();$("#pausebutton_orange_img"+playId).show()}else{$("#pausebutton_orange_img"+playId).hide();$("#pausebutton_img"+playId).hide();$("#playbutton_orange_img"+playId).show()}}$(".adbl-sample-cont").ready(function(){if(typeof pdSamplePlayerTreatment1=="function"){pdSamplePlayerTreatment1()}if(typeof pdSamplePlayerTreatment2=="function"){pdSamplePlayerTreatment2()}});function callMetricsApp(reftag){var dest="/ajax-refmarker/ref="+reftag;var postData={};$.post(dest,postData,function(data,textStatus){})}function logSamplePlayerError(pageAction,asin,errorMsg){$.ajax({url:"/javascript-errors",cache:false,dataType:"json",data:{action:"logSamplePlayerError",asin:currentAsin,error:errorMsg,appAction:pageAction.getAction(),appActionToken:pageAction.getToken()},type:"POST",statusCode:{401:function(xhr){location.reload()},405:function(xhr){location.reload()}},success:function(data){}})}var sPlayerGlobals={playSample:playSample,pauseSample:pauseSample,pauseAllPlayers:pauseAllPlayers,toggleGreenOrange:toggleGreenOrange,playIDs:playIDs,enableSamplePlayer:enableSamplePlayer};$.extend(window,sPlayerGlobals);return sPlayerGlobals});define("jquery-ui-1.8.min",["ftx/lib/jquery-current"],function(jQuery){
/*


 * jQuery UI 1.8
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 * 
 * Amazon elects to use this software under the MIT license.
 */
jQuery.ui||(function(a){a.ui={version:"1.8",plugin:{add:function(c,d,f){var e=a.ui[c].prototype;for(var b in f){e.plugins[b]=e.plugins[b]||[];e.plugins[b].push([d,f[b]])}},call:function(b,d,c){var f=b.plugins[d];if(!f||!b.element[0].parentNode){return}for(var e=0;e<f.length;e++){if(b.options[f[e][0]]){f[e][1].apply(b.element,c)}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(e,c){if(a(e).css("overflow")=="hidden"){return false}var b=(c&&c=="left")?"scrollLeft":"scrollTop",d=false;if(e[b]>0){return true}e[b]=1;d=(e[b]>0);e[b]=0;return d},isOverAxis:function(c,b,d){return(c>b)&&(c<(b+d))},isOver:function(g,c,f,e,b,d){return a.ui.isOverAxis(g,f,b)&&a.ui.isOverAxis(c,e,d)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();(c&&c.call(d))},b)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var b;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){b=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.css(this,"position",1))&&(/(auto|scroll)/).test(a.css(this,"overflow",1)+a.css(this,"overflow-y",1)+a.css(this,"overflow-x",1))}).eq(0)}else{b=this.parents().filter(function(){return(/(auto|scroll)/).test(a.css(this,"overflow",1)+a.css(this,"overflow-y",1)+a.css(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!b.length?a(document):b},zIndex:function(e){if(e!==undefined){return this.css("zIndex",e)}if(this.length){var c=a(this[0]),b,d;while(c.length&&c[0]!==document){b=c.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){d=parseInt(c.css("zIndex"));if(!isNaN(d)&&d!=0){return d}}c=c.parent()}}return 0}});a.extend(a.expr[":"],{data:function(d,c,b){return !!a.data(d,b[3])},focusable:function(c){var d=c.nodeName.toLowerCase(),b=a.attr(c,"tabindex");return(/input|select|textarea|button|object/.test(d)?!c.disabled:"a"==d||"area"==d?c.href||!isNaN(b):!isNaN(b))&&!a(c)["area"==d?"parents":"closest"](":hidden").length},tabbable:function(c){var b=a.attr(c,"tabindex");return(isNaN(b)||b>=0)&&a(c).is(":focusable")}})})(jQuery);
/*
 * jQuery UI Widget 1.8
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b){var a=b.fn.remove;b.fn.remove=function(c,d){return this.each(function(){if(!d){if(!c||b.filter(c,[this]).length){b("*",this).add(this).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),c,d)})};b.widget=function(d,f,c){var e=d.split(".")[0],h;d=d.split(".")[1];h=e+"-"+d;if(!c){c=f;f=b.Widget}b.expr[":"][h]=function(i){return !!b.data(i,d)};b[e]=b[e]||{};b[e][d]=function(i,j){if(arguments.length){this._createWidget(i,j)}};var g=new f();g.options=b.extend({},g.options);b[e][d].prototype=b.extend(true,g,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:h},c);b.widget.bridge(d,b[e][d])};b.widget.bridge=function(d,c){b.fn[d]=function(g){var e=typeof g==="string",f=Array.prototype.slice.call(arguments,1),h=this;g=!e&&f.length?b.extend.apply(null,[true,g].concat(f)):g;if(e&&g.substring(0,1)==="_"){return h}if(e){this.each(function(){var i=b.data(this,d),j=i&&b.isFunction(i[g])?i[g].apply(i,f):i;if(j!==i&&j!==undefined){h=j;return false}})}else{this.each(function(){var i=b.data(this,d);if(i){if(g){i.option(g)}i._init()}else{b.data(this,d,new c(g,this))}})}return h}};b.Widget=function(c,d){if(arguments.length){this._createWidget(c,d)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,e){this.element=b(e).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(e)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled")},widget:function(){return this.element},option:function(e,f){var d=e,c=this;if(arguments.length===0){return b.extend({},c.options)}if(typeof e==="string"){if(f===undefined){return this.options[e]}d={};d[e]=f}b.each(d,function(g,h){c._setOption(g,h)});return c},_setOption:function(c,d){this.options[c]=d;if(c==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",d)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,e,f){var h=this.options[d];e=b.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();f=f||{};if(e.originalEvent){for(var c=b.event.props.length,g;c;){g=b.event.props[--c];e[g]=e.originalEvent[g]}}this.element.trigger(e,f);return !(b.isFunction(h)&&h.call(this.element[0],e,f)===false||e.isDefaultPrevented())}}})(jQuery);
/*
 * jQuery UI Mouse 1.8
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(d.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(d));this._mouseDownEvent=d;var c=this,e=(d.which==1),b=(typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false);if(!e||b||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(d)!==false);if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(f){return c._mouseMove(f)};this._mouseUpDelegate=function(f){return c._mouseUp(f)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(a.browser.safari||d.preventDefault());d.originalEvent.mouseHandled=true;return true},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,b)!==false);(this._mouseStarted?this._mouseDrag(b):this._mouseUp(b))}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(b.target==this._mouseDownEvent.target);this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return(Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance)},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return true}})})(jQuery);(function(f){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position,b=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return a.apply(this,arguments)}i=f.extend({},i);var l=f(i.of),n=(i.collision||"flip").split(" "),m=i.offset?i.offset.split(" "):[0,0],k,h,j;if(i.of.nodeType===9){k=l.width();h=l.height();j={top:0,left:0}}else{if(i.of.scrollTo&&i.of.document){k=l.width();h=l.height();j={top:l.scrollTop(),left:l.scrollLeft()}}else{if(i.of.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=l.outerWidth();h=l.outerHeight();j=l.offset()}}}f.each(["my","at"],function(){var o=(i[this]||"").split(" ");if(o.length===1){o=c.test(o[0])?o.concat([g]):d.test(o[0])?[e].concat(o):[e,g]}o[0]=c.test(o[0])?o[0]:e;o[1]=d.test(o[1])?o[1]:g;i[this]=o});if(n.length===1){n[1]=n[0]}m[0]=parseInt(m[0],10)||0;if(m.length===1){m[1]=m[0]}m[1]=parseInt(m[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===e){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===g){j.top+=h/2}}j.left+=m[0];j.top+=m[1];return this.each(function(){var r=f(this),q=r.outerWidth(),p=r.outerHeight(),o=f.extend({},j);if(i.my[0]==="right"){o.left-=q}else{if(i.my[0]===e){o.left-=q/2}}if(i.my[1]==="bottom"){o.top-=p}else{if(i.my[1]===g){o.top-=p/2}}f.each(["left","top"],function(t,s){if(f.ui.position[n[t]]){f.ui.position[n[t]][s](o,{targetWidth:k,targetHeight:h,elemWidth:q,elemHeight:p,offset:m,my:i.my,at:i.at})}});if(f.fn.bgiframe){r.bgiframe()}r.offset(f.extend(o,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=h.left+i.elemWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(0,h.left)},top:function(h,i){var k=f(window),j=h.top+i.elemHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(0,h.top)}},flip:{left:function(i,j){if(j.at[0]==="center"){return}var l=f(window),k=i.left+j.elemWidth-l.width()-l.scrollLeft(),h=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,m=-2*j.offset[0];i.left+=i.left<0?h+j.targetWidth+m:k>0?h-j.targetWidth+m:0},top:function(i,k){if(k.at[1]==="center"){return}var m=f(window),l=i.top+k.elemHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=i.top<0?h+k.targetHeight+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.css(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.css(l,"top",true),10)||0,m=parseInt(f.css(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return b.call(this)}}}(jQuery));(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(b);if(!this.handle){return false}return true},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;(c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt));if(c.containment){this._setContainment()}if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();if(this._trigger("drag",b,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b)}return false},_mouseStop:function(c){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,c)}if(this.dropped){d=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false}if((this.options.revert=="invalid"&&!d)||(this.options.revert=="valid"&&d)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d))){var b=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(b._trigger("stop",c)!==false){b._clear()}})}else{if(this._trigger("stop",c)!==false){this._clear()}}return false},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target){c=true}});return c},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c])):(d.helper=="clone"?this.element.clone():this.element);if(!b.parents("body").length){b.appendTo((d.appendTo=="parent"?this.element[0].parentNode:d.appendTo))}if(b[0]!=this.element[0]&&!(/(fixed|absolute)/).test(b.css("position"))){b.css("position","absolute")}return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(e.containment)&&e.containment.constructor!=Array){var c=a(e.containment)[0];if(!c){return}var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(e.containment.constructor==Array){this.containment=e.containment}}},_convertPositionTo:function(f,h){if(!h){h=this.position}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))}},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);if(b=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8"});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,e){var d=a(this).data("draggable"),f=d.options,b=a.extend({},e,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var g=a.data(this,"sortable");if(g&&!g.options.disabled){d.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",c,b)}})},stop:function(c,e){var d=a(this).data("draggable"),b=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,b)}})},drag:function(c,f){var e=a(this).data("draggable"),b=this;var d=function(i){var n=this.offset.click.top,m=this.offset.click.left;var g=this.positionAbs.top,k=this.positionAbs.left;var j=i.height,l=i.width;var p=i.top,h=i.left;return a.ui.isOver(g+n,k+m,p,h,j,l)};a.each(e.sortables,function(g){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(b).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};c.target=this.instance.currentItem[0];this.instance._mouseCapture(c,true);this.instance._mouseStart(c,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",c);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(c)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",c,this.instance._uiHash(this.instance));this.instance._mouseStop(c,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",c);e.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(c,d){var b=a("body"),e=a(this).data("draggable").options;if(b.css("cursor")){e._cursor=b.css("cursor")}b.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._cursor){a("body").css("cursor",d._cursor)}}});a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){var d=a(this).data("draggable").options;a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(b,c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("opacity")){e._opacity=b.css("opacity")}b.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._opacity){a(c.helper).css("opacity",d._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(c,d){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()}},drag:function(d,e){var c=a(this).data("draggable"),f=c.options,b=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x"){if((c.overflowOffset.top+c.scrollParent[0].offsetHeight)-d.pageY<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop+f.scrollSpeed}else{if(d.pageY-c.overflowOffset.top<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop-f.scrollSpeed}}}if(!f.axis||f.axis!="y"){if((c.overflowOffset.left+c.scrollParent[0].offsetWidth)-d.pageX<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft+f.scrollSpeed}else{if(d.pageX-c.overflowOffset.left<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft-f.scrollSpeed}}}}else{if(!f.axis||f.axis!="x"){if(d.pageY-a(document).scrollTop()<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed)}else{if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed)}}}if(!f.axis||f.axis!="y"){if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed)}else{if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}}}}if(b!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(c,d)}}});a.ui.plugin.add("draggable","snap",{start:function(c,d){var b=a(this).data("draggable"),e=b.options;b.snapElements=[];a(e.snap.constructor!=String?(e.snap.items||":data(draggable)"):e.snap).each(function(){var g=a(this);var f=g.offset();if(this!=b.element[0]){b.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left})}})},drag:function(u,p){var g=a(this).data("draggable"),q=g.options;var y=q.snapTolerance;var x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(var v=g.snapElements.length-1;v>=0;v--){var s=g.snapElements[v].left,n=s+g.snapElements[v].width,m=g.snapElements[v].top,A=m+g.snapElements[v].height;if(!((s-y<x&&x<n+y&&m-y<f&&f<A+y)||(s-y<x&&x<n+y&&m-y<e&&e<A+y)||(s-y<w&&w<n+y&&m-y<f&&f<A+y)||(s-y<w&&w<n+y&&m-y<e&&e<A+y))){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=false;continue}if(q.snapMode!="inner"){var c=Math.abs(m-e)<=y;var z=Math.abs(A-f)<=y;var j=Math.abs(s-w)<=y;var k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}var h=(c||z||j||k);if(q.snapMode!="outer"){var c=Math.abs(m-f)<=y;var z=Math.abs(A-e)<=y;var j=Math.abs(s-x)<=y;var k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.ui.plugin.add("draggable","stack",{start:function(c,d){var f=a(this).data("draggable").options;var e=a.makeArray(a(f.stack)).sort(function(h,g){return(parseInt(a(h).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(!e.length){return}var b=parseInt(e[0].style.zIndex)||0;a(e).each(function(g){this.style.zIndex=b+g});this[0].style.zIndex=b+e.length}});a.ui.plugin.add("draggable","zIndex",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("zIndex")){e._zIndex=b.css("zIndex")}b.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;if(d._zIndex){a(c.helper).css("zIndex",d._zIndex)}}})})(jQuery);(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var c=this.options,b=c.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(b)?b:function(e){return e.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[c.scope]=a.ui.ddmanager.droppables[c.scope]||[];a.ui.ddmanager.droppables[c.scope].push(this);(c.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++){if(b[c]==this){b.splice(c,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,c){if(b=="accept"){this.accept=a.isFunction(c)?c:function(e){return e.is(c)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(b&&this._trigger("activate",c,this.ui(b)))},_deactivate:function(c){var b=a.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(b&&this._trigger("deactivate",c,this.ui(b)))},_over:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",c,this.ui(b))}},_out:function(c){var b=a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",c,this.ui(b))}},_drop:function(c,d){var b=d||a.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return false}var e=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=a.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==b.options.scope&&f.accept.call(f.element[0],(b.currentItem||b.element))&&a.ui.intersect(b,a.extend(f,{offset:f.element.offset()}),f.options.tolerance)){e=true;return false}});if(e){return false}if(this.accept.call(this.element[0],(b.currentItem||b.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",c,this.ui(b));return this.element}return false},ui:function(b){return{draggable:(b.currentItem||b.element),helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8"});a.ui.intersect=function(q,j,o){if(!j.offset){return false}var e=(q.positionAbs||q.position.absolute).left,d=e+q.helperProportions.width,n=(q.positionAbs||q.position.absolute).top,m=n+q.helperProportions.height;var g=j.offset.left,c=g+j.proportions.width,p=j.offset.top,k=p+j.proportions.height;switch(o){case"fit":return(g<e&&d<c&&p<n&&m<k);break;case"intersect":return(g<e+(q.helperProportions.width/2)&&d-(q.helperProportions.width/2)<c&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);break;case"pointer":var h=((q.positionAbs||q.position.absolute).left+(q.clickOffset||q.offset.click).left),i=((q.positionAbs||q.position.absolute).top+(q.clickOffset||q.offset.click).top),f=a.ui.isOver(i,h,p,g,j.proportions.height,j.proportions.width);return f;break;case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((e>=g&&e<=c)||(d>=g&&d<=c)||(e<g&&d>c));break;default:return false;break}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,g){var b=a.ui.ddmanager.droppables[e.options.scope]||[];var f=g?g.type:null;var h=(e.currentItem||e.element).find(":data(droppable)").andSelf();droppablesLoop:for(var d=0;d<b.length;d++){if(b[d].options.disabled||(e&&!b[d].accept.call(b[d].element[0],(e.currentItem||e.element)))){continue}for(var c=0;c<h.length;c++){if(h[c]==b[d].element[0]){b[d].proportions.height=0;continue droppablesLoop}}b[d].visible=b[d].element.css("display")!="none";if(!b[d].visible){continue}b[d].offset=b[d].element.offset();b[d].proportions={width:b[d].element[0].offsetWidth,height:b[d].element[0].offsetHeight};if(f=="mousedown"){b[d]._activate.call(b[d],g)}}},drop:function(b,c){var d=false;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)){d=d||this._drop.call(this,c)}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(b.currentItem||b.element))){this.isout=1;this.isover=0;this._deactivate.call(this,c)}});return d},drag:function(b,c){if(b.options.refreshPositions){a.ui.ddmanager.prepareOffsets(b,c)}a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var e=a.ui.intersect(b,this,this.options.tolerance);var g=!e&&this.isover==1?"isout":(e&&this.isover==0?"isover":null);if(!g){return}var f;if(this.options.greedy){var d=this.element.parents(":data(droppable):eq(0)");if(d.length){f=a.data(d[0],"droppable");f.greedyChild=(g=="isover"?1:0)}}if(f&&g=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[g]=1;this[g=="isout"?"isover":"isout"]=0;this[g=="isover"?"_over":"_out"].call(this,c);if(f&&g=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}})}}})(jQuery);(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var e=this,j=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(j.aspectRatio),aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&c.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=j.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var k=this.handles.split(",");this.handles={};for(var f=0;f<k.length;f++){var h=c.trim(k[f]),d="ui-resizable-"+h;var g=c('<div class="ui-resizable-handle '+d+'"></div>');if(/sw|se|ne|nw/.test(h)){g.css({zIndex:++j.zIndex})}if("se"==h){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[h]=".ui-resizable-"+h;this.element.append(g)}}this._renderAxis=function(p){p=p||this.element;for(var m in this.handles){if(this.handles[m].constructor==String){this.handles[m]=c(this.handles[m],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=c(this.handles[m],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(m)?n.outerHeight():n.outerWidth();var l=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");p.css(l,o);this._proportionallyResize()}if(!c(this.handles[m]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!e.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}e.axis=i&&i[1]?i[1]:"se"}});if(j.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").hover(function(){c(this).removeClass("ui-resizable-autohide");e._handles.show()},function(){if(!e.resizing){c(this).addClass("ui-resizable-autohide");e._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){c(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(e){var f=false;for(var d in this.handles){if(c(this.handles[d])[0]==e.target){f=true}}return !this.options.disabled&&f},_mouseStart:function(f){var i=this.options,e=this.element.position(),d=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(d.is(".ui-draggable")||(/absolute/).test(d.css("position"))){d.css({position:"absolute",top:e.top,left:e.left})}if(c.browser.opera&&(/relative/).test(d.css("position"))){d.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var j=b(this.helper.css("left")),g=b(this.helper.css("top"));if(i.containment){j+=c(i.containment).scrollLeft()||0;g+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:j,top:g};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:j,top:g};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:f.pageX,top:f.pageY};this.aspectRatio=(typeof i.aspectRatio=="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var h=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",h=="auto"?this.axis+"-resize":h);d.addClass("ui-resizable-resizing");this._propagate("start",f);return true},_mouseDrag:function(d){var g=this.helper,f=this.options,l={},p=this,i=this.originalMousePosition,m=this.axis;var q=(d.pageX-i.left)||0,n=(d.pageY-i.top)||0;var h=this._change[m];if(!h){return false}var k=h.apply(this,[d,q,n]),j=c.browser.msie&&c.browser.version<7,e=this.sizeDiff;if(this._aspectRatio||d.shiftKey){k=this._updateRatio(k,d)}k=this._respectSize(k,d);this._propagate("resize",d);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(k);this._trigger("resize",d,this.ui());return false},_mouseStop:function(g){this.resizing=false;var h=this.options,l=this;if(this._helper){var f=this._proportionallyResizeElements,d=f.length&&(/textarea/i).test(f[0].nodeName),e=d&&c.ui.hasScroll(f[0],"left")?0:l.sizeDiff.height,j=d?0:l.sizeDiff.width;var m={width:(l.size.width-j),height:(l.size.height-e)},i=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,k=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!h.animate){this.element.css(c.extend(m,{top:k,left:i}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",g);if(this._helper){this.helper.remove()}return false},_updateCache:function(d){var e=this.options;this.offset=this.helper.offset();if(a(d.left)){this.position.left=d.left}if(a(d.top)){this.position.top=d.top}if(a(d.height)){this.size.height=d.height}if(a(d.width)){this.size.width=d.width}},_updateRatio:function(g,f){var h=this.options,i=this.position,e=this.size,d=this.axis;if(g.height){g.width=(e.height*this.aspectRatio)}else{if(g.width){g.height=(e.width/this.aspectRatio)}}if(d=="sw"){g.left=i.left+(e.width-g.width);g.top=null}if(d=="nw"){g.top=i.top+(e.height-g.height);g.left=i.left+(e.width-g.width)}return g},_respectSize:function(k,f){var i=this.helper,h=this.options,q=this._aspectRatio||f.shiftKey,p=this.axis,s=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),g=a(k.width)&&h.minWidth&&(h.minWidth>k.width),r=a(k.height)&&h.minHeight&&(h.minHeight>k.height);if(g){k.width=h.minWidth}if(r){k.height=h.minHeight}if(s){k.width=h.maxWidth}if(l){k.height=h.maxHeight}var e=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height;var j=/sw|nw|w/.test(p),d=/nw|ne|n/.test(p);if(g&&j){k.left=e-h.minWidth}if(s&&j){k.left=e-h.maxWidth}if(r&&d){k.top=n-h.minHeight}if(l&&d){k.top=n-h.maxHeight}var m=!k.width&&!k.height;if(m&&!k.left&&k.top){k.top=null}else{if(m&&!k.top&&k.left){k.left=null}}return k},_proportionallyResize:function(){var j=this.options;if(!this._proportionallyResizeElements.length){return}var f=this.helper||this.element;for(var e=0;e<this._proportionallyResizeElements.length;e++){var g=this._proportionallyResizeElements[e];if(!this.borderDif){var d=[g.css("borderTopWidth"),g.css("borderRightWidth"),g.css("borderBottomWidth"),g.css("borderLeftWidth")],h=[g.css("paddingTop"),g.css("paddingRight"),g.css("paddingBottom"),g.css("paddingLeft")];this.borderDif=c.map(d,function(k,m){var l=parseInt(k,10)||0,n=parseInt(h[m],10)||0;return l+n})}if(c.browser.msie&&!(!(c(f).is(":hidden")||c(f).parents(":hidden").length))){continue}g.css({height:(f.height()-this.borderDif[0]-this.borderDif[2])||0,width:(f.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,h=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var d=c.browser.msie&&c.browser.version<7,f=(d?1:0),g=(d?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++h.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e,d){return{width:this.originalSize.width+e}},w:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(g,e,d){var i=this.options,f=this.originalSize,h=this.originalPosition;return{top:h.top+d,height:f.height-d}},s:function(f,e,d){return{height:this.originalSize.height+d}},se:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},sw:function(f,e,d){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,e,d]))},ne:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},nw:function(f,e,d){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,e,d]))}},_propagate:function(e,d){c.ui.plugin.call(this,e,[d,this.ui()]);(e!="resize"&&this._trigger(e,d,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8"});c.ui.plugin.add("resizable","alsoResize",{start:function(e,f){var d=c(this).data("resizable"),h=d.options;var g=function(i){c(i).each(function(){c(this).data("resizable-alsoresize",{width:parseInt(c(this).width(),10),height:parseInt(c(this).height(),10),left:parseInt(c(this).css("left"),10),top:parseInt(c(this).css("top"),10)})})};if(typeof(h.alsoResize)=="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{c.each(h.alsoResize,function(i,j){g(i)})}}else{g(h.alsoResize)}},resize:function(f,h){var e=c(this).data("resizable"),i=e.options,g=e.originalSize,k=e.originalPosition;var j={height:(e.size.height-g.height)||0,width:(e.size.width-g.width)||0,top:(e.position.top-k.top)||0,left:(e.position.left-k.left)||0},d=function(l,m){c(l).each(function(){var p=c(this),q=c(this).data("resizable-alsoresize"),o={},n=m&&m.length?m:["width","height","top","left"];c.each(n||["width","height","top","left"],function(r,t){var s=(q[t]||0)+(j[t]||0);if(s&&s>=0){o[t]=s||null}});if(/relative/.test(p.css("position"))&&c.browser.opera){e._revertToRelativePosition=true;p.css({position:"absolute",top:"auto",left:"auto"})}p.css(o)})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.nodeType){c.each(i.alsoResize,function(l,m){d(l,m)})}else{d(i.alsoResize)}},stop:function(e,f){var d=c(this).data("resizable");if(d._revertToRelativePosition&&c.browser.opera){d._revertToRelativePosition=false;el.css({position:"relative"})}c(this).removeData("resizable-alsoresize-start")}});c.ui.plugin.add("resizable","animate",{stop:function(h,m){var n=c(this).data("resizable"),i=n.options;var g=n._proportionallyResizeElements,d=g.length&&(/textarea/i).test(g[0].nodeName),e=d&&c.ui.hasScroll(g[0],"left")?0:n.sizeDiff.height,k=d?0:n.sizeDiff.width;var f={width:(n.size.width-k),height:(n.size.height-e)},j=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,l=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;n.element.animate(c.extend(f,l&&j?{top:l,left:j}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(e,q){var s=c(this).data("resizable"),i=s.options,k=s.element;var f=i.containment,j=(f instanceof c)?f.get(0):(/parent/.test(f))?k.parent().get(0):f;if(!j){return}s.containerElement=c(j);if(/document/.test(f)||f==document){s.containerOffset={left:0,top:0};s.containerPosition={left:0,top:0};s.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var m=c(j),h=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(m.css("padding"+o))});s.containerOffset=m.offset();s.containerPosition=m.position();s.containerSize={height:(m.innerHeight()-h[3]),width:(m.innerWidth()-h[1])};var n=s.containerOffset,d=s.containerSize.height,l=s.containerSize.width,g=(c.ui.hasScroll(j,"left")?j.scrollWidth:l),r=(c.ui.hasScroll(j)?j.scrollHeight:d);s.parentData={element:j,left:n.left,top:n.top,width:g,height:r}}},resize:function(f,p){var s=c(this).data("resizable"),h=s.options,e=s.containerSize,n=s.containerOffset,l=s.size,m=s.position,q=s._aspectRatio||f.shiftKey,d={top:0,left:0},g=s.containerElement;if(g[0]!=document&&(/static/).test(g.css("position"))){d=n}if(m.left<(s._helper?n.left:0)){s.size.width=s.size.width+(s._helper?(s.position.left-n.left):(s.position.left-d.left));if(q){s.size.height=s.size.width/h.aspectRatio}s.position.left=h.helper?n.left:0}if(m.top<(s._helper?n.top:0)){s.size.height=s.size.height+(s._helper?(s.position.top-n.top):s.position.top);if(q){s.size.width=s.size.height*h.aspectRatio}s.position.top=s._helper?n.top:0}s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top;var k=Math.abs((s._helper?s.offset.left-d.left:(s.offset.left-d.left))+s.sizeDiff.width),r=Math.abs((s._helper?s.offset.top-d.top:(s.offset.top-n.top))+s.sizeDiff.height);var j=s.containerElement.get(0)==s.element.parent().get(0),i=/relative|absolute/.test(s.containerElement.css("position"));if(j&&i){k-=s.parentData.left}if(k+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-k;if(q){s.size.height=s.size.width/s.aspectRatio}}if(r+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-r;if(q){s.size.width=s.size.height*s.aspectRatio}}},stop:function(e,m){var p=c(this).data("resizable"),f=p.options,k=p.position,l=p.containerOffset,d=p.containerPosition,g=p.containerElement;var i=c(p.helper),q=i.offset(),n=i.outerWidth()-p.sizeDiff.width,j=i.outerHeight()-p.sizeDiff.height;if(p._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}if(p._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:q.left-d.left-l.left,width:n,height:j})}}});c.ui.plugin.add("resizable","ghost",{start:function(f,g){var d=c(this).data("resizable"),h=d.options,e=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof h.ghost=="string"?h.ghost:"");d.ghost.appendTo(d.helper)},resize:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost){d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})}},stop:function(e,f){var d=c(this).data("resizable"),g=d.options;if(d.ghost&&d.helper){d.helper.get(0).removeChild(d.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(d,l){var n=c(this).data("resizable"),g=n.options,j=n.size,h=n.originalSize,i=n.originalPosition,m=n.axis,k=g._aspectRatio||d.shiftKey;g.grid=typeof g.grid=="number"?[g.grid,g.grid]:g.grid;var f=Math.round((j.width-h.width)/(g.grid[0]||1))*(g.grid[0]||1),e=Math.round((j.height-h.height)/(g.grid[1]||1))*(g.grid[1]||1);if(/^(se|s|e)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e}else{if(/^(ne)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e}else{if(/^(sw)$/.test(m)){n.size.width=h.width+f;n.size.height=h.height+e;n.position.left=i.left-f}else{n.size.width=h.width+f;n.size.height=h.height+e;n.position.top=i.top-e;n.position.left=i.left-f}}}}});var b=function(d){return parseInt(d,10)||0};var a=function(d){return !isNaN(parseInt(d,10))}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.each(function(){var d=a(this);var e=d.offset();a.data(this,"selectable-item",{element:this,$element:d,left:e.left,top:e.top,right:e.left+d.outerWidth(),bottom:e.top+d.outerHeight(),startselected:false,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(d){var b=this;this.opos=[d.pageX,d.pageY];if(this.options.disabled){return}var c=this.options;this.selectees=a(c.filter,this.element[0]);this._trigger("start",d);a(c.appendTo).append(this.helper);this.helper.css({"z-index":100,position:"absolute",left:d.clientX,top:d.clientY,width:0,height:0});if(c.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var e=a.data(this,"selectable-item");e.startselected=true;if(!d.metaKey){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;b._trigger("unselecting",d,{unselecting:e.element})}});a(d.target).parents().andSelf().each(function(){var e=a.data(this,"selectable-item");if(e){e.$element.removeClass("ui-unselecting").addClass("ui-selecting");e.unselecting=false;e.selecting=true;e.selected=true;b._trigger("selecting",d,{selecting:e.element});return false}})},_mouseDrag:function(i){var c=this;this.dragged=true;if(this.options.disabled){return}var e=this.options;var d=this.opos[0],h=this.opos[1],b=i.pageX,g=i.pageY;if(d>b){var f=b;b=d;d=f}if(h>g){var f=g;g=h;h=f}this.helper.css({left:d,top:h,width:b-d,height:g-h});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!j||j.element==c.element[0]){return}var k=false;if(e.tolerance=="touch"){k=(!(j.left>b||j.right<d||j.top>g||j.bottom<h))}else{if(e.tolerance=="fit"){k=(j.left>d&&j.right<b&&j.top>h&&j.bottom<g)}}if(k){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",i,{selecting:j.element})}}else{if(j.selecting){if(i.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",i,{unselecting:j.element})}}if(j.selected){if(!i.metaKey&&!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",i,{unselecting:j.element})}}}});return false},_mouseStop:function(d){var b=this;this.dragged=false;var c=this.options;a(".ui-unselecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("ui-unselecting");e.unselecting=false;e.startselected=false;b._trigger("unselected",d,{unselected:e.element})});a(".ui-selecting",this.element[0]).each(function(){var e=a.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected");e.selecting=false;e.selected=true;e.startselected=true;b._trigger("selected",d,{selected:e.element})});this._trigger("stop",d);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8"})})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}return this},_mouseCapture:function(e,f){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(e);var d=null,c=this,b=a(e.target).parents().each(function(){if(a.data(this,"sortable-item")==c){d=a(this);return false}});if(a.data(e.target,"sortable-item")==c){d=a(e.target)}if(!d){return false}if(this.options.handle&&!f){var g=false;a(this.options.handle,d).find("*").andSelf().each(function(){if(this==e.target){g=true}});if(!g){return false}}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(e,f,b){var g=this.options,c=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;(g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(g.containment){this._setContainment()}if(g.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",g.cursor)}if(g.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",g.opacity)}if(g.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",g.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!b){for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("activate",e,c._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}if(a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(f){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var g=this.options,b=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-f.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+g.scrollSpeed}else{if(f.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-g.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-f.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(f.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft-g.scrollSpeed}}}else{if(f.pageY-a(document).scrollTop()<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(f.pageY-a(document).scrollTop())<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}if(f.pageX-a(document).scrollLeft()<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(f.pageX-a(document).scrollLeft())<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}if(b!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,f)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d],c=e.item[0],h=this._intersectsWithPointer(e);if(!h){continue}if(c!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=c&&!a.ui.contains(this.placeholder[0],c)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],c):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(e)){this._rearrange(f,e)}else{break}this._trigger("change",f,this._uiHash());break}}this._contactContainers(f);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,f)}this._trigger("sort",f,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(c,d){if(!c){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,c)}if(this.options.revert){var b=this;var e=b.placeholder.offset();b.reverting=true;a(this.helper).animate({left:e.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else{this._clear(c,d)}return false},cancel:function(){var b=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,b._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,b._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem)}else{a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};a(b).each(function(){var e=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||(/(.+)[-=_](.+)/));if(e){c.push((d.key||e[1]+"[]")+"="+(d.key&&d.expression?e[1]:e[2]))}});return c.join("&")},toArray:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};b.each(function(){c.push(a(d.item||this).attr(d.attribute||"id")||"")});return c},_intersectsWith:function(m){var e=this.positionAbs.left,d=e+this.helperProportions.width,k=this.positionAbs.top,j=k+this.helperProportions.height;var f=m.left,c=f+m.width,n=m.top,i=n+m.height;var o=this.offset.click.top,h=this.offset.click.left;var g=(k+o)>n&&(k+o)<i&&(e+h)>f&&(e+h)<c;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"])){return g}else{return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&n<k+(this.helperProportions.height/2)&&j-(this.helperProportions.height/2)<i)}},_intersectsWithPointer:function(d){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),c=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),g=e&&c,b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(!g){return false}return this.floating?(((f&&f=="right")||b=="down")?2:1):(b&&(b=="down"?2:1))},_intersectsWithSides:function(e){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+(e.height/2),e.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+(e.width/2),e.width),b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(this.floating&&f){return((f=="right"&&d)||(f=="left"&&!d))}else{return b&&((b=="down"&&c)||(b=="up"&&!c))}},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var l=this;var g=[];var e=[];var h=this._connectWith();if(h&&b){for(var d=h.length-1;d>=0;d--){var k=a(h[d]);for(var c=k.length-1;c>=0;c--){var f=a.data(k[c],"sortable");if(f&&f!=this&&!f.options.disabled){e.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var d=e.length-1;d>=0;d--){e[d][0].each(function(){g.push(this)})}return a(g)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data(sortable-item)");for(var c=0;c<this.items.length;c++){for(var b=0;b<d.length;b++){if(d[b]==this.items[c].item[0]){this.items.splice(c,1)}}}},_refreshItems:function(b){this.items=[];this.containers=[this];var h=this.items;var p=this;var f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];var l=this._connectWith();if(l){for(var e=l.length-1;e>=0;e--){var m=a(l[e]);for(var d=m.length-1;d>=0;d--){var g=a.data(m[d],"sortable");if(g&&g!=this&&!g.options.disabled){f.push([a.isFunction(g.options.items)?g.options.items.call(g.element[0],b,{item:this.currentItem}):a(g.options.items,g.element),g]);this.containers.push(g)}}}}for(var e=f.length-1;e>=0;e--){var k=f[e][1];var c=f[e][0];for(var d=0,n=c.length;d<n;d++){var o=a(c[d]);o.data("sortable-item",k);h.push({item:o,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d];var c=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!b){e.width=c.outerWidth();e.height=c.outerHeight()}var f=c.offset();e.left=f.left;e.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var d=this.containers.length-1;d>=0;d--){var f=this.containers[d].element.offset();this.containers[d].containerCache.left=f.left;this.containers[d].containerCache.top=f.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}}return this},_createPlaceholder:function(d){var b=d||this,e=b.options;if(!e.placeholder||e.placeholder.constructor==String){var c=e.placeholder;e.placeholder={element:function(){var f=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!c){f.style.visibility="hidden"}return f},update:function(f,g){if(c&&!e.forcePlaceholderSize){return}if(!g.height()){g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10))}if(!g.width()){g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}}b.placeholder=a(e.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);e.placeholder.update(b,b.placeholder)},_contactContainers:function(b){var d=null,k=null;for(var f=this.containers.length-1;f>=0;f--){if(a.ui.contains(this.currentItem[0],this.containers[f].element[0])){continue}if(this._intersectsWith(this.containers[f].containerCache)){if(d&&a.ui.contains(this.containers[f].element[0],d.element[0])){continue}d=this.containers[f];k=f}else{if(this.containers[f].containerCache.over){this.containers[f]._trigger("out",b,this._uiHash(this));this.containers[f].containerCache.over=0}}}if(!d){return}if(this.containers.length===1){this.containers[k]._trigger("over",b,this._uiHash(this));this.containers[k].containerCache.over=1}else{if(this.currentContainer!=this.containers[k]){var h=10000;var g=null;var c=this.positionAbs[this.containers[k].floating?"left":"top"];for(var e=this.items.length-1;e>=0;e--){if(!a.ui.contains(this.containers[k].element[0],this.items[e].item[0])){continue}var l=this.items[e][this.containers[k].floating?"left":"top"];if(Math.abs(l-c)<h){h=Math.abs(l-c);g=this.items[e]}}if(!g&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[k];g?this._rearrange(b,g,null,true):this._rearrange(b,null,this.containers[k].element,true);this._trigger("change",b,this._uiHash());this.containers[k]._trigger("change",b,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[k]._trigger("over",b,this._uiHash(this));this.containers[k].containerCache.over=1}}},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c,this.currentItem])):(d.helper=="clone"?this.currentItem.clone():this.currentItem);if(!b.parents("body").length){a(d.appendTo!="parent"?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0])}if(b[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(b[0].style.width==""||d.forceHelperSize){b.width(this.currentItem.width())}if(b[0].style.height==""||d.forceHelperSize){b.height(this.currentItem.height())}return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(e.containment)){var c=a(e.containment)[0];var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,h){if(!h){h=this.position}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))}},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))}},_rearrange:function(g,f,c,e){c?c[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?f.item[0]:f.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var d=this,b=this.counter;window.setTimeout(function(){if(b==d.counter){d.refreshPositions(!e)}},0)},_clear:function(d,e){this.reverting=false;var f=[],b=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS){if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static"){this._storedCSS[c]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){f.push(function(g){this._trigger("receive",g,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e){f.push(function(g){this._trigger("update",g,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!e){f.push(function(g){this._trigger("remove",g,this._uiHash())})}for(var c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.containers[c].element[0],this.currentItem[0])&&!e){f.push((function(g){return function(h){g._trigger("receive",h,this._uiHash(this))}}).call(this,this.containers[c]));f.push((function(g){return function(h){g._trigger("update",h,this._uiHash(this))}}).call(this,this.containers[c]))}}}for(var c=this.containers.length-1;c>=0;c--){if(!e){f.push((function(g){return function(h){g._trigger("deactivate",h,this._uiHash(this))}}).call(this,this.containers[c]))}if(this.containers[c].containerCache.over){f.push((function(g){return function(h){g._trigger("out",h,this._uiHash(this))}}).call(this,this.containers[c]));this.containers[c].containerCache.over=0}}if(this._storedCursor){a("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",d,this._uiHash());for(var c=0;c<f.length;c++){f[c].call(this,d)}this._trigger("stop",d,this._uiHash())}return false}if(!e){this._trigger("beforeStop",d,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!e){for(var c=0;c<f.length;c++){f[c].call(this,d)}this._trigger("stop",d,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}});a.extend(a.ui.sortable,{version:"1.8"})})(jQuery);(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},_create:function(){var d=this.options,b=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix")}this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){a(this).removeClass("ui-state-focus")});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(d.navigation){var c=this.element.find("a").filter(d.navigationFilter);if(c.length){var e=c.closest(".ui-accordion-header");if(e.length){this.active=e}else{this.active=c.closest(".ui-accordion-content").prev()}}}this.active=this._findActive(this.active||d.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");this._createIcons();if(a.browser.msie){this.element.find("a").css("zoom","1")}this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(f){return b._keydown(f)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex","0")}else{this.active.attr("aria-expanded","true").attr("tabIndex","0")}if(!a.browser.safari){this.headers.find("a").attr("tabIndex","-1")}if(d.event){this.headers.bind((d.event)+".accordion",function(f){b._clickHandler.call(b,f,this);f.preventDefault()})}},_createIcons:function(){var b=this.options;if(b.icons){a("<span/>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var c=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(c.autoHeight||c.fillHeight){b.css("height","")}return this},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b=="active"){this.activate(c)}if(b=="icons"){this._destroyIcons();if(c){this._createIcons()}}},_keydown:function(e){var g=this.options,f=a.ui.keyCode;if(g.disabled||e.altKey||e.ctrlKey){return}var d=this.headers.length;var b=this.headers.index(e.target);var c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:this._clickHandler({target:e.target},e.target);e.preventDefault()}if(c){a(e.target).attr("tabIndex","-1");a(c).attr("tabIndex","0");c.focus();return false}return true},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var b=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",b)}this.headers.each(function(){c-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height())}).height(c)}}return this},activate:function(b){this.options.active=b;var c=this._findActive(b)[0];this._clickHandler({target:c},c);return this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,f){var d=this.options;if(d.disabled){return}if(!b.target){if(!d.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),e={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:h},c=(this.active=a([]));this._toggle(c,h,e);return}var g=a(b.currentTarget||f);var i=g[0]==this.active[0];d.active=d.collapsible&&i?false:a(".ui-accordion-header",this.element).index(g);if(this.running||(!d.collapsible&&i)){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);if(!i){g.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);g.next().addClass("ui-accordion-content-active")}var c=g.next(),h=this.active.next(),e={options:d,newHeader:i&&d.collapsible?a([]):g,oldHeader:this.active,newContent:i&&d.collapsible?a([]):c,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(g[0]);this.active=i?a([]):g;this._toggle(c,h,e,i,j);return},_toggle:function(b,i,g,j,k){var d=this.options,m=this;this.toShow=b;this.toHide=i;this.data=g;var c=function(){if(!m){return}return m._completed.apply(m,arguments)};this._trigger("changestart",null,this.data);this.running=i.size()===0?b.size():i.size();if(d.animated){var f={};if(d.collapsible&&j){f={toShow:a([]),toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace}}else{f={toShow:b,toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace}}if(!d.proxied){d.proxied=d.animated}if(!d.proxiedDuration){d.proxiedDuration=d.duration}d.animated=a.isFunction(d.proxied)?d.proxied(f):d.proxied;d.duration=a.isFunction(d.proxiedDuration)?d.proxiedDuration(f):d.proxiedDuration;var l=a.ui.accordion.animations,e=d.duration,h=d.animated;if(h&&!l[h]&&!a.easing[h]){h="slide"}if(!l[h]){l[h]=function(n){this.slide(n,{easing:h,duration:e||700})}}l[h](f)}else{if(d.collapsible&&j){b.toggle()}else{i.hide();b.show()}c(true)}i.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();b.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(b){var c=this.options;this.running=b?0:--this.running;if(this.running){return}if(c.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)}});a.extend(a.ui.accordion,{version:"1.8",animations:{slide:function(j,h){j=a.extend({easing:"swing",duration:300},j,h);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}if(!j.toShow.size()){j.toHide.animate({height:"hide"},j);return}var c=j.toShow.css("overflow"),g=0,d={},f={},e=["height","paddingTop","paddingBottom"],b;var i=j.toShow;b=i[0].style.width;i.width(parseInt(i.parent().width(),10)-parseInt(i.css("paddingLeft"),10)-parseInt(i.css("paddingRight"),10)-(parseInt(i.css("borderLeftWidth"),10)||0)-(parseInt(i.css("borderRightWidth"),10)||0));a.each(e,function(k,m){f[m]="hide";var l=(""+a.css(j.toShow[0],m)).match(/^([\d+-.]+)(.*)$/);d[m]={value:l[1],unit:l[2]||"px"}});j.toShow.css({height:0,overflow:"hidden"}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate(f,{step:function(k,l){if(l.prop=="height"){g=(l.end-l.start===0)?0:(l.now-l.start)/(l.end-l.start)}j.toShow[0].style[l.prop]=(g*d[l.prop].value)+d[l.prop].unit},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoHeight){j.toShow.css("height","")}j.toShow.css("width",b);j.toShow.css({overflow:c});j.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var b=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:b._move("previousPage",d);break;case e.PAGE_DOWN:b._move("nextPage",d);break;case e.UP:b._move("previous",d);d.preventDefault();break;case e.DOWN:b._move("next",d);d.preventDefault();break;case e.ENTER:if(b.menu.active){d.preventDefault()}case e.TAB:if(!b.menu.active){return}b.menu.select();break;case e.ESCAPE:b.element.val(b.term);b.close(d);break;case e.SHIFT:case e.CONTROL:case 18:break;default:clearTimeout(b.searching);b.searching=setTimeout(function(){b.search(null,d)},b.options.delay);break}}).bind("focus.autocomplete",function(){b.previous=b.element.val()}).bind("blur.autocomplete",function(d){clearTimeout(b.searching);b.closing=setTimeout(function(){b.close(d)},150)});this._initSource();this.response=function(){return b._response.apply(b,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo("body",c).menu({focus:function(e,f){var d=f.item.data("item.autocomplete");if(false!==b._trigger("focus",null,{item:d})){b.element.val(d.value)}},selected:function(e,f){var d=f.item.data("item.autocomplete");if(false!==b._trigger("select",e,{item:d})){b.element.val(d.value)}b.close(e);b.previous=b.element.val();if(b.element[0]!==c.activeElement){b.element.focus()}},blur:function(d,e){if(b.menu.element.is(":visible")){b.element.val(b.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(a.fn.bgiframe){this.menu.element.bgiframe()}},destroy:function(){this.element.removeClass("ui-autocomplete-input ui-widget ui-widget-content").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(b){a.Widget.prototype._setOption.apply(this,arguments);if(b==="source"){this._initSource()}},_initSource:function(){var c,b;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(e,d){var f=new RegExp(a.ui.autocomplete.escapeRegex(e.term),"i");d(a.grep(c,function(g){return f.test(g.label||g.value||g)}))}}else{if(typeof this.options.source==="string"){b=this.options.source;this.source=function(e,d){a.getJSON(b,e,d)}}else{this.source=this.options.source}}},search:function(c,b){c=c!=null?c:this.element.val();if(c.length<this.options.minLength){return this.close(b)}clearTimeout(this.closing);if(this._trigger("search")===false){return}return this._search(c)},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}if(this.previous!==this.element.val()){this._trigger("change",b)}},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1),d,e;this._renderMenu(c,b);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"});d=c.width("").width();e=this.element.width();c.width(Math.max(d,e))},_renderMenu:function(d,c){var b=this;a.each(c,function(e,f){b._renderItem(d,f)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append("<a>"+c.label+"</a>").appendTo(b)},_move:function(c,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c]()},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")}})}(jQuery));(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){c.preventDefault();b.select()});this.refresh()},refresh:function(){var c=this;var b=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");b.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(){c.activate(a(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(d){this.deactivate();if(this.hasScroll()){var e=d.offset().top-this.element.offset().top,b=this.element.attr("scrollTop"),c=this.element.height();if(e<0){this.element.attr("scrollTop",b+e)}else{if(e>c){this.element.attr("scrollTop",b+e-c+d.height())}}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",null,{item:d})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(){this.move("next","li:first")},previous:function(){this.move("prev","li:last")},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(d,c){if(!this.active){this.activate(this.element.children(c));return}var b=this.active[d]();if(b.length){this.activate(b)}else{this.activate(this.element.children(c))}},nextPage:function(){if(this.hasScroll()){if(!this.active||this.last()){this.activate(this.element.children(":first"));return}var d=this.active.offset().top,c=this.element.height(),b=this.element.children("li").filter(function(){var e=a(this).offset().top-d-c+a(this).height();return e<10&&e>-10});if(!b.length){b=this.element.children(":last")}this.activate(b)}else{this.activate(this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(){if(this.hasScroll()){if(!this.active||this.first()){this.activate(this.element.children(":last"));return}var c=this.active.offset().top,b=this.element.height();result=this.element.children("li").filter(function(){var d=a(this).offset().top-c+b-a(this).height();return d<10&&d>-10});if(!result.length){result=this.element.children(":first")}this.activate(result)}else{this.activate(this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(){this._trigger("selected",null,{item:this.active})}})}(jQuery));(function(f){var d,c="ui-button ui-widget ui-state-default ui-corner-all",b="ui-state-hover ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon ui-button-text-only",e=function(g){f(":ui-button",g.target.form).each(function(){var h=f(this).data("button");setTimeout(function(){h.refresh()},1)})},a=function(h){var g=h.name,i=h.form,j=f([]);if(g){if(i){j=f(i).find("[name='"+g+"']")}else{j=f("[name='"+g+"']",h.ownerDocument).filter(function(){return !this.form})}}return j};f.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",e);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var g=this,i=this.options,j=this.type==="checkbox"||this.type==="radio",k="ui-state-hover"+(!j?" ui-state-active":""),h="ui-state-focus";if(i.label===null){i.label=this.buttonElement.html()}if(this.element.is(":disabled")){i.disabled=true}this.buttonElement.addClass(c).attr("role","button").bind("mouseenter.button",function(){if(i.disabled){return}f(this).addClass("ui-state-hover");if(this===d){f(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){if(i.disabled){return}f(this).removeClass(k)}).bind("focus.button",function(){f(this).addClass(h)}).bind("blur.button",function(){f(this).removeClass(h)});if(j){this.element.bind("change.button",function(){g.refresh()})}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(i.disabled){return false}f(this).toggleClass("ui-state-active");g.buttonElement.attr("aria-pressed",g.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(i.disabled){return false}f(this).addClass("ui-state-active");g.buttonElement.attr("aria-pressed",true);var l=g.element[0];a(l).not(l).map(function(){return f(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)})}else{this.buttonElement.bind("mousedown.button",function(){if(i.disabled){return false}f(this).addClass("ui-state-active");d=this;f(document).one("mouseup",function(){d=null})}).bind("mouseup.button",function(){if(i.disabled){return false}f(this).removeClass("ui-state-active")}).bind("keydown.button",function(l){if(i.disabled){return false}if(l.keyCode==f.ui.keyCode.SPACE||l.keyCode==f.ui.keyCode.ENTER){f(this).addClass("ui-state-active")}}).bind("keyup.button",function(){f(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(l){if(l.keyCode===f.ui.keyCode.SPACE){f(this).click()}})}}}this._setOption("disabled",i.disabled)},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox"}else{if(this.element.is(":radio")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("[for="+this.element.attr("id")+"]");this.element.addClass("ui-helper-hidden-accessible");var g=this.element.is(":checked");if(g){this.buttonElement.addClass("ui-state-active")}this.buttonElement.attr("aria-pressed",g)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(c+" "+b).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}f.Widget.prototype.destroy.call(this)},_setOption:function(g,h){f.Widget.prototype._setOption.apply(this,arguments);if(g==="disabled"){if(h){this.element.attr("disabled",true)}else{this.element.removeAttr("disabled")}}this._resetButton()},refresh:function(){var g=this.element.is(":disabled");if(g!==this.options.disabled){this._setOption("disabled",g)}if(this.type==="radio"){a(this.element[0]).each(function(){if(f(this).is(":checked")){f(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true)}else{f(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true)}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var j=this.buttonElement,i=f("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(j.empty()).text(),h=this.options.icons,g=h.primary&&h.secondary;if(h.primary||h.secondary){j.addClass("ui-button-text-icon"+(g?"s":""));if(h.primary){j.prepend("<span class='ui-button-icon-primary ui-icon "+h.primary+"'></span>")}if(h.secondary){j.append("<span class='ui-button-icon-secondary ui-icon "+h.secondary+"'></span>")}if(!this.options.text){j.addClass(g?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon");if(!this.hasTitle){j.attr("title",i)}}}else{j.addClass("ui-button-text-only")}}});f.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");this._init()},_init:function(){this.refresh()},_setOption:function(g,h){if(g==="disabled"){this.buttons.button("option",g,h)}f.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");f.Widget.prototype.destroy.call(this)}})}(jQuery));(function(b){var a="ui-dialog ui-widget ui-widget-content ui-corner-all ";b.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");var k=this,l=k.options,i=l.title||k.originalTitle||"&#160;",d=b.ui.dialog.getTitleId(k.element),j=(k.uiDialog=b("<div></div>")).appendTo(document.body).hide().addClass(a+l.dialogClass).css({zIndex:l.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(m){if(l.closeOnEscape&&m.keyCode&&m.keyCode===b.ui.keyCode.ESCAPE){k.close(m);m.preventDefault()}}).attr({role:"dialog","aria-labelledby":d}).mousedown(function(m){k.moveToTop(false,m)}),f=k.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(j),e=(k.uiDialogTitlebar=b("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(j),h=b('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(m){k.close(m);return false}).appendTo(e),g=(k.uiDialogTitlebarCloseText=b("<span></span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(h),c=b("<span></span>").addClass("ui-dialog-title").attr("id",d).html(i).prependTo(e);if(b.isFunction(l.beforeclose)&&!b.isFunction(l.beforeClose)){l.beforeClose=l.beforeclose}e.find("*").add(e).disableSelection();if(l.draggable&&b.fn.draggable){k._makeDraggable()}if(l.resizable&&b.fn.resizable){k._makeResizable()}k._createButtons(l.buttons);k._isOpen=false;if(b.fn.bgiframe){j.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var c=this;if(c.overlay){c.overlay.destroy()}c.uiDialog.hide();c.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");c.uiDialog.remove();if(c.originalTitle){c.element.attr("title",c.originalTitle)}return c},widget:function(){return this.uiDialog},close:function(e){var c=this,d;if(false===c._trigger("beforeClose",e)){return}if(c.overlay){c.overlay.destroy()}c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide){c.uiDialog.hide(c.options.hide,function(){c._trigger("close",e)})}else{c.uiDialog.hide();c._trigger("close",e)}b.ui.dialog.overlay.resize();if(c.options.modal){d=0;b(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){d=Math.max(d,b(this).css("z-index"))}});b.ui.dialog.maxZ=d}return c},isOpen:function(){return this._isOpen},moveToTop:function(g,f){var c=this,e=c.options,d;if((e.modal&&!g)||(!e.stack&&!e.modal)){return c._trigger("focus",f)}if(e.zIndex>b.ui.dialog.maxZ){b.ui.dialog.maxZ=e.zIndex}if(c.overlay){b.ui.dialog.maxZ+=1;c.overlay.$el.css("z-index",b.ui.dialog.overlay.maxZ=b.ui.dialog.maxZ)}d={scrollTop:c.element.attr("scrollTop"),scrollLeft:c.element.attr("scrollLeft")};b.ui.dialog.maxZ+=1;c.uiDialog.css("z-index",b.ui.dialog.maxZ);c.element.attr(d);c._trigger("focus",f);return c},open:function(){if(this._isOpen){return}var d=this,e=d.options,c=d.uiDialog;d.overlay=e.modal?new b.ui.dialog.overlay(d):null;if(c.next().length){c.appendTo("body")}d._size();d._position(e.position);c.show(e.show);d.moveToTop(true);if(e.modal){c.bind("keypress.ui-dialog",function(h){if(h.keyCode!==b.ui.keyCode.TAB){return}var g=b(":tabbable",this),i=g.filter(":first"),f=g.filter(":last");if(h.target===f[0]&&!h.shiftKey){i.focus(1);return false}else{if(h.target===i[0]&&h.shiftKey){f.focus(1);return false}}})}b([]).add(c.find(".ui-dialog-content :tabbable:first")).add(c.find(".ui-dialog-buttonpane :tabbable:first")).add(c).filter(":first").focus();d._trigger("open");d._isOpen=true;return d},_createButtons:function(f){var e=this,c=false,d=b("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");e.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof f==="object"&&f!==null){b.each(f,function(){return !(c=true)})}if(c){b.each(f,function(g,i){var h=b('<button type="button"></button>').text(g).click(function(){i.apply(e.element[0],arguments)}).appendTo(d);if(b.fn.button){h.button()}});d.appendTo(e.uiDialog)}},_makeDraggable:function(){var c=this,f=c.options,g=b(document),e;function d(h){return{position:h.position,offset:h.offset}}c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(h,i){e=f.height==="auto"?"auto":b(this).height();b(this).height(b(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",h,d(i))},drag:function(h,i){c._trigger("drag",h,d(i))},stop:function(h,i){f.position=[i.position.left-g.scrollLeft(),i.position.top-g.scrollTop()];b(this).removeClass("ui-dialog-dragging").height(e);c._trigger("dragStop",h,d(i));b.ui.dialog.overlay.resize()}})},_makeResizable:function(h){h=(h===undefined?this.options.resizable:h);var d=this,g=d.options,c=d.uiDialog.css("position"),f=(typeof h==="string"?h:"n,e,s,w,se,sw,ne,nw");function e(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:d._minHeight(),handles:f,start:function(i,j){b(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",i,e(j))},resize:function(i,j){d._trigger("resize",i,e(j))},stop:function(i,j){b(this).removeClass("ui-dialog-resizing");g.height=b(this).height();g.width=b(this).width();d._trigger("resizeStop",i,e(j));b.ui.dialog.overlay.resize()}}).css("position",c).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var c=this.options;if(c.height==="auto"){return c.minHeight}else{return Math.min(c.minHeight,c.height)}},_position:function(d){var e=[],f=[0,0],c;d=d||b.ui.dialog.prototype.options.position;if(typeof d==="string"||(typeof d==="object"&&"0" in d)){e=d.split?d.split(" "):[d[0],d[1]];if(e.length===1){e[1]=e[0]}b.each(["left","top"],function(h,g){if(+e[h]===e[h]){f[h]=e[h];e[h]=g}})}else{if(typeof d==="object"){if("left" in d){e[0]="left";f[0]=d.left}else{if("right" in d){e[0]="right";f[0]=-d.right}}if("top" in d){e[1]="top";f[1]=d.top}else{if("bottom" in d){e[1]="bottom";f[1]=-d.bottom}}}}c=this.uiDialog.is(":visible");if(!c){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position({my:e.join(" "),at:e.join(" "),offset:f.join(" "),of:window,collision:"fit",using:function(h){var g=b(this).css(h).offset().top;if(g<0){b(this).css("top",h.top-g)}}});if(!c){this.uiDialog.hide()}},_setOption:function(f,g){var d=this,c=d.uiDialog,h=c.is(":data(resizable)"),e=false;switch(f){case"beforeclose":f="beforeClose";break;case"buttons":d._createButtons(g);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+g);break;case"dialogClass":c.removeClass(d.options.dialogClass).addClass(a+g);break;case"disabled":if(g){c.addClass("ui-dialog-disabled")}else{c.removeClass("ui-dialog-disabled")}break;case"draggable":if(g){d._makeDraggable()}else{c.draggable("destroy")}break;case"height":e=true;break;case"maxHeight":if(h){c.resizable("option","maxHeight",g)}e=true;break;case"maxWidth":if(h){c.resizable("option","maxWidth",g)}e=true;break;case"minHeight":if(h){c.resizable("option","minHeight",g)}e=true;break;case"minWidth":if(h){c.resizable("option","minWidth",g)}e=true;break;case"position":d._position(g);break;case"resizable":if(h&&!g){c.resizable("destroy")}if(h&&typeof g==="string"){c.resizable("option","handles",g)}if(!h&&g!==false){d._makeResizable(g)}break;case"title":b(".ui-dialog-title",d.uiDialogTitlebar).html(""+(g||"&#160;"));break;case"width":e=true;break}b.Widget.prototype._setOption.apply(d,arguments);if(e){d._size()}},_size:function(){var d=this.options,c;this.element.css("width","auto").hide();c=this.uiDialog.css({height:"auto",width:d.width}).height();this.element.css(d.height==="auto"?{minHeight:Math.max(d.minHeight-c,0),height:"auto"}:{minHeight:0,height:Math.max(d.height-c,0)}).show();if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});b.extend(b.ui.dialog,{version:"1.8",uuid:0,maxZ:0,getTitleId:function(c){var d=c.attr("id");if(!d){this.uuid+=1;d=this.uuid}return"ui-dialog-title-"+d},overlay:function(c){this.$el=b.ui.dialog.overlay.create(c)}});b.extend(b.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:b.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(c){return c+".dialog-overlay"}).join(" "),create:function(d){if(this.instances.length===0){setTimeout(function(){if(b.ui.dialog.overlay.instances.length){b(document).bind(b.ui.dialog.overlay.events,function(e){return(b(e.target).zIndex()>=b.ui.dialog.overlay.maxZ)})}},1);b(document).bind("keydown.dialog-overlay",function(e){if(d.options.closeOnEscape&&e.keyCode&&e.keyCode===b.ui.keyCode.ESCAPE){d.close(e);e.preventDefault()}});b(window).bind("resize.dialog-overlay",b.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||b("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(b.fn.bgiframe){c.bgiframe()}this.instances.push(c);return c},destroy:function(c){this.oldInstances.push(this.instances.splice(b.inArray(c,this.instances),1)[0]);if(this.instances.length===0){b([document,window]).unbind(".dialog-overlay")}c.remove();var d=0;b.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var d,c;if(b.browser.msie&&b.browser.version<7){d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(d<c){return b(window).height()+"px"}else{return d+"px"}}else{return b(document).height()+"px"}},width:function(){var c,d;if(b.browser.msie&&b.browser.version<7){c=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);d=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(c<d){return b(window).width()+"px"}else{return c+"px"}}else{return b(document).width()+"px"}},resize:function(){var c=b([]);b.each(b.ui.dialog.overlay.instances,function(){c=c.add(this)});c.css({width:0,height:0}).css({width:b.ui.dialog.overlay.width(),height:b.ui.dialog.overlay.height()})}});b.extend(b.ui.dialog.overlay.prototype,{destroy:function(){b.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));(function(b){var a=5;b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");if(d.disabled){this.element.addClass("ui-slider-disabled ui-disabled")}this.range=b([]);if(d.range){if(d.range===true){this.range=b("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!=2){d.values=[d.values[0],d.values[0]]}}else{this.range=b("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range=="min"||d.range=="max"){this.range.addClass("ui-slider-range-"+d.range)}this.range.addClass("ui-widget-header")}if(b(".ui-slider-handle",this.element).length==0){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}if(d.values&&d.values.length){while(b(".ui-slider-handle",this.element).length<d.values.length){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}}this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){if(!d.disabled){b(this).addClass("ui-state-hover")}},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(!d.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(e){b(this).data("index.ui-slider-handle",e)});this.handles.keydown(function(j){var g=true;var f=b(this).data("index.ui-slider-handle");if(c.options.disabled){return}switch(j.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:g=false;if(!c._keySliding){c._keySliding=true;b(this).addClass("ui-state-active");c._start(j,f)}break}var h,e,i=c._step();if(c.options.values&&c.options.values.length){h=e=c.values(f)}else{h=e=c.value()}switch(j.keyCode){case b.ui.keyCode.HOME:e=c._valueMin();break;case b.ui.keyCode.END:e=c._valueMax();break;case b.ui.keyCode.PAGE_UP:e=h+((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.PAGE_DOWN:e=h-((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(h==c._valueMax()){return}e=h+i;break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(h==c._valueMin()){return}e=h-i;break}c._slide(j,f,e);return g}).keyup(function(f){var e=b(this).data("index.ui-slider-handle");if(c._keySliding){c._keySliding=false;c._stop(f,e);c._change(f,e);b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(e){var f=this.options;if(f.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var i={x:e.pageX,y:e.pageY};var k=this._normValueFromMouse(i);var d=this._valueMax()-this._valueMin()+1,g;var l=this,j;this.handles.each(function(m){var n=Math.abs(k-l.values(m));if(d>n){d=n;g=b(this);j=m}});if(f.range==true&&this.values(1)==f.min){g=b(this.handles[++j])}this._start(e,j);this._mouseSliding=true;l._handleIndex=j;g.addClass("ui-state-active").focus();var h=g.offset();var c=!b(e.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:e.pageX-h.left-(g.width()/2),top:e.pageY-h.top-(g.height()/2)-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};k=this._normValueFromMouse(i);this._slide(e,j,k);this._animateOff=true;return true},_mouseStart:function(c){return true},_mouseDrag:function(e){var c={x:e.pageX,y:e.pageY};var d=this._normValueFromMouse(c);this._slide(e,this._handleIndex,d);return false},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var d,i;if("horizontal"==this.orientation){d=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}var g=(i/d);if(g>1){g=1}if(g<0){g=0}if("vertical"==this.orientation){g=1-g}var f=this._valueMax()-this._valueMin(),j=g*f,c=j%this.options.step,h=this._valueMin()+j-c;if(c>(this.options.step/2)){h+=this.options.step}return parseFloat(h.toFixed(5))},_start:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("start",e,c)},_slide:function(g,f,e){var h=this.handles[f];if(this.options.values&&this.options.values.length){var c=this.values(f?0:1);if((this.options.values.length==2&&this.options.range===true)&&((f==0&&e>c)||(f==1&&e<c))){e=c}if(e!=this.values(f)){var d=this.values();d[f]=e;var i=this._trigger("slide",g,{handle:this.handles[f],value:e,values:d});var c=this.values(f?0:1);if(i!==false){this.values(f,e,true)}}}else{if(e!=this.value()){var i=this._trigger("slide",g,{handle:this.handles[f],value:e});if(i!==false){this.value(e)}}}},_stop:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("stop",e,c)},_change:function(e,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("change",e,c)}},value:function(c){if(arguments.length){this.options.value=this._trimValue(c);this._refreshValue();this._change(null,0)}return this._value()},values:function(e,h){if(arguments.length>1){this.options.values[e]=this._trimValue(h);this._refreshValue();this._change(null,e)}if(arguments.length){if(b.isArray(arguments[0])){var g=this.options.values,d=arguments[0];for(var f=0,c=g.length;f<c;f++){g[f]=this._trimValue(d[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(d,e){var c,f=0;if(jQuery.isArray(this.options.values)){f=this.options.values.length}b.Widget.prototype._setOption.apply(this,arguments);switch(d){case"disabled":if(e){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(c=0;c<f;c++){this._change(null,c)}this._animateOff=false;break}},_step:function(){var c=this.options.step;return c},_value:function(){var c=this.options.value;c=this._trimValue(c);return c},_values:function(d){if(arguments.length){var g=this.options.values[d];g=this._trimValue(g);return g}else{var f=this.options.values.slice();for(var e=0,c=f.length;e<c;e++){f[e]=this._trimValue(f[e])}return f}},_trimValue:function(c){if(c<this._valueMin()){c=this._valueMin()}if(c>this._valueMax()){c=this._valueMax()}return c},_valueMin:function(){var c=this.options.min;return c},_valueMax:function(){var c=this.options.max;return c},_refreshValue:function(){var g=this.options.range,e=this.options,m=this;var d=(!this._animateOff)?e.animate:false;if(this.options.values&&this.options.values.length){var j,i;this.handles.each(function(q,o){var p=(m.values(q)-m._valueMin())/(m._valueMax()-m._valueMin())*100;var n={};n[m.orientation=="horizontal"?"left":"bottom"]=p+"%";b(this).stop(1,1)[d?"animate":"css"](n,e.animate);if(m.options.range===true){if(m.orientation=="horizontal"){(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({left:p+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({width:(p-lastValPercent)+"%"},{queue:false,duration:e.animate})}else{(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({bottom:(p)+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({height:(p-lastValPercent)+"%"},{queue:false,duration:e.animate})}}lastValPercent=p})}else{var k=this.value(),h=this._valueMin(),l=this._valueMax(),f=l!=h?(k-h)/(l-h)*100:0;var c={};c[m.orientation=="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[d?"animate":"css"](c,e.animate);(g=="min")&&(this.orientation=="horizontal")&&this.range.stop(1,1)[d?"animate":"css"]({width:f+"%"},e.animate);(g=="max")&&(this.orientation=="horizontal")&&this.range[d?"animate":"css"]({width:(100-f)+"%"},{queue:false,duration:e.animate});(g=="min")&&(this.orientation=="vertical")&&this.range.stop(1,1)[d?"animate":"css"]({height:f+"%"},e.animate);(g=="max")&&(this.orientation=="vertical")&&this.range[d?"animate":"css"]({height:(100-f)+"%"},{queue:false,duration:e.animate})}}});b.extend(b.ui.slider,{version:"1.8"})})(jQuery);(function(c){var b=0,a=0;c.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true)},_setOption:function(d,e){if(d=="selected"){if(this.options.collapsible&&e==this.options.selected){return}this.select(e)}else{this.options[d]=e;this._tabify()}},_tabId:function(d){return d.title&&d.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+(++b)},_sanitizeSelector:function(d){return d.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+(++a));return c.cookie.apply(null,[d].concat(c.makeArray(arguments)))},_ui:function(e,d){return{tab:e,panel:d,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=c(this);d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(q){this.list=this.element.find("ol,ul").eq(0);this.lis=c("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return c("a",this)[0]});this.panels=c([]);var r=this,f=this.options;var e=/^#.+/;this.anchors.each(function(u,o){var s=c(o).attr("href");var v=s.split("#")[0],w;if(v&&(v===location.toString().split("#")[0]||(w=c("base")[0])&&v===w.href)){s=o.hash;o.href=s}if(e.test(s)){r.panels=r.panels.add(r._sanitizeSelector(s))}else{if(s!="#"){c.data(o,"href.tabs",s);c.data(o,"load.tabs",s.replace(/#.*$/,""));var y=r._tabId(o);o.href="#"+y;var x=c("#"+y);if(!x.length){x=c(f.panelTemplate).attr("id",y).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[u-1]||r.list);x.data("destroy.tabs",true)}r.panels=r.panels.add(x)}else{f.disabled.push(u)}}});if(q){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(f.selected===undefined){if(location.hash){this.anchors.each(function(s,o){if(o.hash==location.hash){f.selected=s;return false}})}if(typeof f.selected!="number"&&f.cookie){f.selected=parseInt(r._cookie(),10)}if(typeof f.selected!="number"&&this.lis.filter(".ui-tabs-selected").length){f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}f.selected=f.selected||(this.lis.length?0:-1)}else{if(f.selected===null){f.selected=-1}}f.selected=((f.selected>=0&&this.anchors[f.selected])||f.selected<0)?f.selected:0;f.disabled=c.unique(f.disabled.concat(c.map(this.lis.filter(".ui-state-disabled"),function(s,o){return r.lis.index(s)}))).sort();if(c.inArray(f.selected,f.disabled)!=-1){f.disabled.splice(c.inArray(f.selected,f.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(f.selected>=0&&this.anchors.length){this.panels.eq(f.selected).removeClass("ui-tabs-hide");this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active");r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[f.selected],r.panels[f.selected]))});this.load(f.selected)}c(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs");r.lis=r.anchors=r.panels=null})}else{f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(f.cookie){this._cookie(f.selected,f.cookie)}for(var j=0,p;(p=this.lis[j]);j++){c(p)[c.inArray(j,f.disabled)!=-1&&!c(p).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(f.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(f.event!="mouseover"){var h=function(o,i){if(i.is(":not(.ui-state-disabled)")){i.addClass("ui-state-"+o)}};var l=function(o,i){i.removeClass("ui-state-"+o)};this.lis.bind("mouseover.tabs",function(){h("hover",c(this))});this.lis.bind("mouseout.tabs",function(){l("hover",c(this))});this.anchors.bind("focus.tabs",function(){h("focus",c(this).closest("li"))});this.anchors.bind("blur.tabs",function(){l("focus",c(this).closest("li"))})}var d,k;if(f.fx){if(c.isArray(f.fx)){d=f.fx[0];k=f.fx[1]}else{d=k=f.fx}}function g(i,o){i.css({display:""});if(!c.support.opacity&&o.opacity){i[0].style.removeAttribute("filter")}}var m=k?function(i,o){c(i).closest("li").addClass("ui-tabs-selected ui-state-active");o.hide().removeClass("ui-tabs-hide").animate(k,k.duration||"normal",function(){g(o,k);r._trigger("show",null,r._ui(i,o[0]))})}:function(i,o){c(i).closest("li").addClass("ui-tabs-selected ui-state-active");o.removeClass("ui-tabs-hide");r._trigger("show",null,r._ui(i,o[0]))};var n=d?function(o,i){i.animate(d,d.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active");i.addClass("ui-tabs-hide");g(i,d);r.element.dequeue("tabs")})}:function(o,i,s){r.lis.removeClass("ui-tabs-selected ui-state-active");i.addClass("ui-tabs-hide");r.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var o=this,u=c(this).closest("li"),i=r.panels.filter(":not(.ui-tabs-hide)"),s=c(r._sanitizeSelector(this.hash));if((u.hasClass("ui-tabs-selected")&&!f.collapsible)||u.hasClass("ui-state-disabled")||u.hasClass("ui-state-processing")||r._trigger("select",null,r._ui(this,s[0]))===false){this.blur();return false}f.selected=r.anchors.index(this);r.abort();if(f.collapsible){if(u.hasClass("ui-tabs-selected")){f.selected=-1;if(f.cookie){r._cookie(f.selected,f.cookie)}r.element.queue("tabs",function(){n(o,i)}).dequeue("tabs");this.blur();return false}else{if(!i.length){if(f.cookie){r._cookie(f.selected,f.cookie)}r.element.queue("tabs",function(){m(o,s)});r.load(r.anchors.index(this));this.blur();return false}}}if(f.cookie){r._cookie(f.selected,f.cookie)}if(s.length){if(i.length){r.element.queue("tabs",function(){n(o,i)})}r.element.queue("tabs",function(){m(o,s)});r.load(r.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(c.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var d=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=c.data(this,"href.tabs");if(e){this.href=e}var f=c(this).unbind(".tabs");c.each(["href","load","cache"],function(g,h){f.removeData(h+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(c.data(this,"destroy.tabs")){c(this).remove()}else{c(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(d.cookie){this._cookie(null,d.cookie)}return this},add:function(g,f,e){if(e===undefined){e=this.anchors.length}var d=this,i=this.options,k=c(i.tabTemplate.replace(/#\{href\}/g,g).replace(/#\{label\}/g,f)),j=!g.indexOf("#")?g.replace("#",""):this._tabId(c("a",k)[0]);k.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var h=c("#"+j);if(!h.length){h=c(i.panelTemplate).attr("id",j).data("destroy.tabs",true)}h.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(e>=this.lis.length){k.appendTo(this.list);h.appendTo(this.list[0].parentNode)}else{k.insertBefore(this.lis[e]);h.insertBefore(this.panels[e])}i.disabled=c.map(i.disabled,function(m,l){return m>=e?++m:m});this._tabify();if(this.anchors.length==1){i.selected=0;k.addClass("ui-tabs-selected ui-state-active");h.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[0],d.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[e],this.panels[e]));return this},remove:function(d){var f=this.options,g=this.lis.eq(d).remove(),e=this.panels.eq(d).remove();if(g.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(d+(d+1<this.anchors.length?1:-1))}f.disabled=c.map(c.grep(f.disabled,function(j,h){return j!=d}),function(j,h){return j>=d?--j:j});this._tabify();this._trigger("remove",null,this._ui(g.find("a")[0],e[0]));return this},enable:function(d){var e=this.options;if(c.inArray(d,e.disabled)==-1){return}this.lis.eq(d).removeClass("ui-state-disabled");e.disabled=c.grep(e.disabled,function(g,f){return g!=d});this._trigger("enable",null,this._ui(this.anchors[d],this.panels[d]));return this},disable:function(e){var d=this,f=this.options;if(e!=f.selected){this.lis.eq(e).addClass("ui-state-disabled");f.disabled.push(e);f.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}return this},select:function(d){if(typeof d=="string"){d=this.anchors.index(this.anchors.filter("[href$="+d+"]"))}else{if(d===null){d=-1}}if(d==-1&&this.options.collapsible){d=this.options.selected}this.anchors.eq(d).trigger(this.options.event+".tabs");return this},load:function(g){var e=this,i=this.options,d=this.anchors.eq(g)[0],f=c.data(d,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&c.data(d,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(g).addClass("ui-state-processing");if(i.spinner){var h=c("span",d);h.data("label.tabs",h.html()).html(i.spinner)}this.xhr=c.ajax(c.extend({},i.ajaxOptions,{url:f,success:function(k,j){c(e._sanitizeSelector(d.hash)).html(k);e._cleanup();if(i.cache){c.data(d,"cache.tabs",true)}e._trigger("load",null,e._ui(e.anchors[g],e.panels[g]));try{i.ajaxOptions.success(k,j)}catch(l){}},error:function(l,j,k){e._cleanup();e._trigger("load",null,e._ui(e.anchors[g],e.panels[g]));try{i.ajaxOptions.error(l,j,g,d)}catch(k){}}}));e.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(e,d){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});c.extend(c.ui.tabs,{version:"1.8"});c.extend(c.ui.tabs.prototype,{rotation:null,rotate:function(f,h){var d=this,i=this.options;var e=d._rotate||(d._rotate=function(j){clearTimeout(d.rotation);d.rotation=setTimeout(function(){var k=i.selected;d.select(++k<d.anchors.length?k:0)},f);if(j){j.stopPropagation()}});var g=d._unrotate||(d._unrotate=!h?function(j){if(j.clientX){d.rotate(null)}}:function(j){t=i.selected;e()});if(f){this.element.bind("tabsshow",e);this.anchors.bind(i.event+".tabs",g);e()}else{clearTimeout(d.rotation);this.element.unbind("tabsshow",e);this.anchors.unbind(i.event+".tabs",g);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function($){$.extend($.ui,{datepicker:{version:"1.8"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){target.id="dp"+(++this.uuid)}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker()}else{$.datepicker._showDatepicker(input[0])}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst)},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+(++this.uuid);this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);extendRemove(inst.settings,settings);this._attachments($(target),inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass,inst.dpDiv).add($("td."+$.datepicker._currentClass,inst.dpDiv));if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{$.datepicker._hideDatepicker()}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(event){$.datepicker.log(event)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return}var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true)}var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})};inst.dpDiv.zIndex($(input).zIndex()+10000);if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var self=this;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst);this._curInst=null};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target);if($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie){inst.input.focus()}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;return i+1}}throw"Unknown name at position "+iValue};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return}var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};date=(date==null?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=="Invalid Date"?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0)}return this._daylightSavingAdjust(date)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+inst.id+"',"+printDate.getMonth()+","+printDate.getFullYear()+', this);return false;"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}html+="</select>"}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8";window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(a){a.widget("ui.progressbar",{options:{value:0},_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===undefined){return this._value()}this._setOption("value",b);return this},_setOption:function(b,c){switch(b){case"value":this.options.value=c;this._refreshValue();this._trigger("change");break}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}if(b<this._valueMin()){b=this._valueMin()}if(b>this._valueMax()){b=this._valueMax()}return b},_valueMin:function(){return 0},_valueMax:function(){return 100},_refreshValue:function(){var b=this.value();this.valueDiv[b===this._valueMax()?"addClass":"removeClass"]("ui-corner-right").width(b+"%");this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.8"})})(jQuery);jQuery.effects||(function(g){g.effects={};g.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(l,k){g.fx.step[k]=function(m){if(!m.colorInit){m.start=j(m.elem,k);m.end=i(m.end);m.colorInit=true}m.elem.style[k]="rgb("+Math.max(Math.min(parseInt((m.pos*(m.end[0]-m.start[0]))+m.start[0],10),255),0)+","+Math.max(Math.min(parseInt((m.pos*(m.end[1]-m.start[1]))+m.start[1],10),255),0)+","+Math.max(Math.min(parseInt((m.pos*(m.end[2]-m.start[2]))+m.start[2],10),255),0)+")"}});function i(l){var k;if(l&&l.constructor==Array&&l.length==3){return l}if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(l)){return[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10)]}if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(l)){return[parseFloat(k[1])*2.55,parseFloat(k[2])*2.55,parseFloat(k[3])*2.55]}if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(l)){return[parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16)]}if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(l)){return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)]}if(k=/rgba\(0, 0, 0, 0\)/.exec(l)){return a.transparent}return a[g.trim(l).toLowerCase()]}function j(m,k){var l;do{l=g.css(m,k);if(l!=""&&l!="transparent"||g.nodeName(m,"body")){break}k="backgroundColor"}while(m=m.parentNode);return i(l)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var e=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function f(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,o={},l,m;if(n&&n.length&&n[0]&&n[n[0]]){var k=n.length;while(k--){l=n[k];if(typeof n[l]=="string"){m=l.replace(/\-(\w)/g,function(p,q){return q.toUpperCase()});o[m]=n[l]}}}else{for(l in n){if(typeof n[l]==="string"){o[l]=n[l]}}}return o}function b(l){var k,m;for(k in l){m=l[k];if(m==null||g.isFunction(m)||k in c||(/scrollbar/).test(k)||(!(/color/i).test(k)&&isNaN(parseFloat(m)))){delete l[k]}}return l}function h(k,m){var n={_:0},l;for(l in m){if(k[l]!=m[l]){n[l]=m[l]}}return n}g.effects.animateClass=function(k,l,n,m){if(g.isFunction(n)){m=n;n=null}return this.each(function(){var r=g(this),o=r.attr("style")||" ",s=b(f.call(this)),q,p=r.attr("className");g.each(e,function(t,u){if(k[u]){r[u+"Class"](k[u])}});q=b(f.call(this));r.attr("className",p);r.animate(h(s,q),l,n,function(){g.each(e,function(t,u){if(k[u]){r[u+"Class"](k[u])}});if(typeof r.attr("style")=="object"){r.attr("style").cssText="";r.attr("style").cssText=o}else{r.attr("style",o)}if(m){m.apply(this,arguments)}})})};g.fn.extend({_addClass:g.fn.addClass,addClass:function(l,k,n,m){return k?g.effects.animateClass.apply(this,[{add:l},k,n,m]):this._addClass(l)},_removeClass:g.fn.removeClass,removeClass:function(l,k,n,m){return k?g.effects.animateClass.apply(this,[{remove:l},k,n,m]):this._removeClass(l)},_toggleClass:g.fn.toggleClass,toggleClass:function(m,l,k,o,n){if(typeof l=="boolean"||l===undefined){if(!k){return this._toggleClass(m,l)}else{return g.effects.animateClass.apply(this,[(l?{add:m}:{remove:m}),k,o,n])}}else{return g.effects.animateClass.apply(this,[{toggle:m},l,k,o])}},switchClass:function(k,m,l,o,n){return g.effects.animateClass.apply(this,[{add:m,remove:k},l,o,n])}});g.extend(g.effects,{version:"1.8",save:function(l,m){for(var k=0;k<m.length;k++){if(m[k]!==null){l.data("ec.storage."+m[k],l[0].style[m[k]])}}},restore:function(l,m){for(var k=0;k<m.length;k++){if(m[k]!==null){l.css(m[k],l.data("ec.storage."+m[k]))}}},setMode:function(k,l){if(l=="toggle"){l=k.is(":hidden")?"show":"hide"}return l},getBaseline:function(l,m){var n,k;switch(l[0]){case"top":n=0;break;case"middle":n=0.5;break;case"bottom":n=1;break;default:n=l[0]/m.height}switch(l[1]){case"left":k=0;break;case"center":k=0.5;break;case"right":k=1;break;default:k=l[1]/m.width}return{x:k,y:n}},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()}var l={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")},m=g("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});k.wrap(m);m=k.parent();if(k.css("position")=="static"){m.css({position:"relative"});k.css({position:"relative"})}else{g.extend(l,{position:k.css("position"),zIndex:k.css("z-index")});g.each(["top","left","bottom","right"],function(n,o){l[o]=k.css(o);if(isNaN(parseInt(l[o],10))){l[o]="auto"}});k.css({position:"relative",top:0,left:0})}return m.css(l).show()},removeWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent().replaceWith(k)}return k},setTransition:function(l,n,k,m){m=m||{};g.each(n,function(p,o){unit=l.cssUnit(o);if(unit[0]>0){m[o]=unit[0]*k+unit[1]}});return m}});function d(l,k,m,n){if(typeof l=="object"){n=k;m=null;k=l;l=k.effect}if(g.isFunction(k)){n=k;m=null;k={}}if(g.isFunction(m)){n=m;m=null}if(typeof k=="number"||g.fx.speeds[k]){n=m;m=k;k={}}k=k||{};m=m||k.duration;m=g.fx.off?0:typeof m=="number"?m:g.fx.speeds[m]||g.fx.speeds._default;n=n||k.complete;return[l,k,m,n]}g.fn.extend({effect:function(n,m,p,q){var l=d.apply(this,arguments),o={options:l[1],duration:l[2],callback:l[3]},k=g.effects[n];return k&&!g.fx.off?k.call(this,o):this},_show:g.fn.show,show:function(l){if(!l||typeof l=="number"||g.fx.speeds[l]){return this._show.apply(this,arguments)}else{var k=d.apply(this,arguments);k[1].mode="show";return this.effect.apply(this,k)}},_hide:g.fn.hide,hide:function(l){if(!l||typeof l=="number"||g.fx.speeds[l]){return this._hide.apply(this,arguments)}else{var k=d.apply(this,arguments);k[1].mode="hide";return this.effect.apply(this,k)}},__toggle:g.fn.toggle,toggle:function(l){if(!l||typeof l=="number"||g.fx.speeds[l]||typeof l=="boolean"||g.isFunction(l)){return this.__toggle.apply(this,arguments)}else{var k=d.apply(this,arguments);k[1].mode="toggle";return this.effect.apply(this,k)}},cssUnit:function(k){var l=this.css(k),m=[];g.each(["em","px","%","pt"],function(n,o){if(l.indexOf(o)>0){m=[parseFloat(l),o]}});return m}});g.easing.jswing=g.easing.swing;g.extend(g.easing,{def:"easeOutQuad",swing:function(l,m,k,o,n){return g.easing[g.easing.def](l,m,k,o,n)},easeInQuad:function(l,m,k,o,n){return o*(m/=n)*m+k},easeOutQuad:function(l,m,k,o,n){return -o*(m/=n)*(m-2)+k},easeInOutQuad:function(l,m,k,o,n){if((m/=n/2)<1){return o/2*m*m+k}return -o/2*((--m)*(m-2)-1)+k},easeInCubic:function(l,m,k,o,n){return o*(m/=n)*m*m+k},easeOutCubic:function(l,m,k,o,n){return o*((m=m/n-1)*m*m+1)+k},easeInOutCubic:function(l,m,k,o,n){if((m/=n/2)<1){return o/2*m*m*m+k}return o/2*((m-=2)*m*m+2)+k},easeInQuart:function(l,m,k,o,n){return o*(m/=n)*m*m*m+k},easeOutQuart:function(l,m,k,o,n){return -o*((m=m/n-1)*m*m*m-1)+k},easeInOutQuart:function(l,m,k,o,n){if((m/=n/2)<1){return o/2*m*m*m*m+k}return -o/2*((m-=2)*m*m*m-2)+k},easeInQuint:function(l,m,k,o,n){return o*(m/=n)*m*m*m*m+k},easeOutQuint:function(l,m,k,o,n){return o*((m=m/n-1)*m*m*m*m+1)+k},easeInOutQuint:function(l,m,k,o,n){if((m/=n/2)<1){return o/2*m*m*m*m*m+k}return o/2*((m-=2)*m*m*m*m+2)+k},easeInSine:function(l,m,k,o,n){return -o*Math.cos(m/n*(Math.PI/2))+o+k},easeOutSine:function(l,m,k,o,n){return o*Math.sin(m/n*(Math.PI/2))+k},easeInOutSine:function(l,m,k,o,n){return -o/2*(Math.cos(Math.PI*m/n)-1)+k},easeInExpo:function(l,m,k,o,n){return(m==0)?k:o*Math.pow(2,10*(m/n-1))+k},easeOutExpo:function(l,m,k,o,n){return(m==n)?k+o:o*(-Math.pow(2,-10*m/n)+1)+k},easeInOutExpo:function(l,m,k,o,n){if(m==0){return k}if(m==n){return k+o}if((m/=n/2)<1){return o/2*Math.pow(2,10*(m-1))+k}return o/2*(-Math.pow(2,-10*--m)+2)+k},easeInCirc:function(l,m,k,o,n){return -o*(Math.sqrt(1-(m/=n)*m)-1)+k},easeOutCirc:function(l,m,k,o,n){return o*Math.sqrt(1-(m=m/n-1)*m)+k},easeInOutCirc:function(l,m,k,o,n){if((m/=n/2)<1){return -o/2*(Math.sqrt(1-m*m)-1)+k}return o/2*(Math.sqrt(1-(m-=2)*m)+1)+k},easeInElastic:function(l,n,k,u,r){var o=1.70158;var q=0;var m=u;if(n==0){return k}if((n/=r)==1){return k+u}if(!q){q=r*0.3}if(m<Math.abs(u)){m=u;var o=q/4}else{var o=q/(2*Math.PI)*Math.asin(u/m)}return -(m*Math.pow(2,10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/q))+k},easeOutElastic:function(l,n,k,u,r){var o=1.70158;var q=0;var m=u;if(n==0){return k}if((n/=r)==1){return k+u}if(!q){q=r*0.3}if(m<Math.abs(u)){m=u;var o=q/4}else{var o=q/(2*Math.PI)*Math.asin(u/m)}return m*Math.pow(2,-10*n)*Math.sin((n*r-o)*(2*Math.PI)/q)+u+k},easeInOutElastic:function(l,n,k,u,r){var o=1.70158;var q=0;var m=u;if(n==0){return k}if((n/=r/2)==2){return k+u}if(!q){q=r*(0.3*1.5)}if(m<Math.abs(u)){m=u;var o=q/4}else{var o=q/(2*Math.PI)*Math.asin(u/m)}if(n<1){return -0.5*(m*Math.pow(2,10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/q))+k}return m*Math.pow(2,-10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/q)*0.5+u+k},easeInBack:function(l,m,k,p,o,n){if(n==undefined){n=1.70158}return p*(m/=o)*m*((n+1)*m-n)+k},easeOutBack:function(l,m,k,p,o,n){if(n==undefined){n=1.70158}return p*((m=m/o-1)*m*((n+1)*m+n)+1)+k},easeInOutBack:function(l,m,k,p,o,n){if(n==undefined){n=1.70158}if((m/=o/2)<1){return p/2*(m*m*(((n*=(1.525))+1)*m-n))+k}return p/2*((m-=2)*m*(((n*=(1.525))+1)*m+n)+2)+k},easeInBounce:function(l,m,k,o,n){return o-g.easing.easeOutBounce(l,n-m,0,o,n)+k},easeOutBounce:function(l,m,k,o,n){if((m/=n)<(1/2.75)){return o*(7.5625*m*m)+k}else{if(m<(2/2.75)){return o*(7.5625*(m-=(1.5/2.75))*m+0.75)+k}else{if(m<(2.5/2.75)){return o*(7.5625*(m-=(2.25/2.75))*m+0.9375)+k}else{return o*(7.5625*(m-=(2.625/2.75))*m+0.984375)+k}}}},easeInOutBounce:function(l,m,k,o,n){if(m<n/2){return g.easing.easeInBounce(l,m*2,0,o,n)*0.5+k}return g.easing.easeOutBounce(l,m*2-n,0,o,n)*0.5+o*0.5+k}})})(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var d=a(this),c=["position","top","left"];var h=a.effects.setMode(d,b.options.mode||"hide");var g=b.options.direction||"vertical";a.effects.save(d,c);d.show();var j=a.effects.createWrapper(d).css({overflow:"hidden"});var e=(g=="vertical")?"height":"width";var i=(g=="vertical")?j.height():j.width();if(h=="show"){j.css(e,0)}var f={};f[e]=h=="show"?i:0;j.animate(f,b.duration,b.options.easing,function(){if(h=="hide"){d.hide()}a.effects.restore(d,c);a.effects.removeWrapper(d);if(b.callback){b.callback.apply(d[0],arguments)}d.dequeue()})})}})(jQuery);(function(a){a.effects.bounce=function(b){return this.queue(function(){var e=a(this),l=["position","top","left"];var k=a.effects.setMode(e,b.options.mode||"effect");var n=b.options.direction||"up";var c=b.options.distance||20;var d=b.options.times||5;var g=b.duration||250;if(/show|hide/.test(k)){l.push("opacity")}a.effects.save(e,l);e.show();a.effects.createWrapper(e);var f=(n=="up"||n=="down")?"top":"left";var p=(n=="up"||n=="left")?"pos":"neg";var c=b.options.distance||(f=="top"?e.outerHeight({margin:true})/3:e.outerWidth({margin:true})/3);if(k=="show"){e.css("opacity",0).css(f,p=="pos"?-c:c)}if(k=="hide"){c=c/(d*2)}if(k!="hide"){d--}if(k=="show"){var h={opacity:1};h[f]=(p=="pos"?"+=":"-=")+c;e.animate(h,g/2,b.options.easing);c=c/2;d--}for(var j=0;j<d;j++){var o={},m={};o[f]=(p=="pos"?"-=":"+=")+c;m[f]=(p=="pos"?"+=":"-=")+c;e.animate(o,g/2,b.options.easing).animate(m,g/2,b.options.easing);c=(k=="hide")?c*2:c/2}if(k=="hide"){var h={opacity:0};h[f]=(p=="pos"?"-=":"+=")+c;e.animate(h,g/2,b.options.easing,function(){e.hide();a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}})}else{var o={},m={};o[f]=(p=="pos"?"-=":"+=")+c;m[f]=(p=="pos"?"+=":"-=")+c;e.animate(o,g/2,b.options.easing).animate(m,g/2,b.options.easing,function(){a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}})}e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);(function(a){a.effects.clip=function(b){return this.queue(function(){var f=a(this),j=["position","top","left","height","width"];var i=a.effects.setMode(f,b.options.mode||"hide");var k=b.options.direction||"vertical";a.effects.save(f,j);f.show();var c=a.effects.createWrapper(f).css({overflow:"hidden"});var e=f[0].tagName=="IMG"?c:f;var g={size:(k=="vertical")?"height":"width",position:(k=="vertical")?"top":"left"};var d=(k=="vertical")?e.height():e.width();if(i=="show"){e.css(g.size,0);e.css(g.position,d/2)}var h={};h[g.size]=i=="show"?d:0;h[g.position]=i=="show"?0:d/2;e.animate(h,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){f.hide()}a.effects.restore(f,j);a.effects.removeWrapper(f);if(b.callback){b.callback.apply(f[0],arguments)}f.dequeue()}})})}})(jQuery);(function(a){a.effects.drop=function(b){return this.queue(function(){var e=a(this),d=["position","top","left","opacity"];var i=a.effects.setMode(e,b.options.mode||"hide");var h=b.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e);var f=(h=="up"||h=="down")?"top":"left";var c=(h=="up"||h=="left")?"pos":"neg";var j=b.options.distance||(f=="top"?e.outerHeight({margin:true})/2:e.outerWidth({margin:true})/2);if(i=="show"){e.css("opacity",0).css(f,c=="pos"?-j:j)}var g={opacity:i=="show"?1:0};g[f]=(i=="show"?(c=="pos"?"+=":"-="):(c=="pos"?"-=":"+="))+j;e.animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){e.hide()}a.effects.restore(e,d);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);(function(a){a.effects.explode=function(b){return this.queue(function(){var k=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;var e=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?(a(this).is(":visible")?"hide":"show"):b.options.mode;var h=a(this).show().css("visibility","hidden");var l=h.offset();l.top-=parseInt(h.css("marginTop"),10)||0;l.left-=parseInt(h.css("marginLeft"),10)||0;var g=h.outerWidth(true);var c=h.outerHeight(true);for(var f=0;f<k;f++){for(var d=0;d<e;d++){h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-d*(g/e),top:-f*(c/k)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/e,height:c/k,left:l.left+d*(g/e)+(b.options.mode=="show"?(d-Math.floor(e/2))*(g/e):0),top:l.top+f*(c/k)+(b.options.mode=="show"?(f-Math.floor(k/2))*(c/k):0),opacity:b.options.mode=="show"?0:1}).animate({left:l.left+d*(g/e)+(b.options.mode=="show"?0:(d-Math.floor(e/2))*(g/e)),top:l.top+f*(c/k)+(b.options.mode=="show"?0:(f-Math.floor(k/2))*(c/k)),opacity:b.options.mode=="show"?1:0},b.duration||500)}}setTimeout(function(){b.options.mode=="show"?h.css({visibility:"visible"}):h.css({visibility:"visible"}).hide();if(b.callback){b.callback.apply(h[0])}h.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);(function(a){a.effects.fold=function(b){return this.queue(function(){var e=a(this),k=["position","top","left"];var h=a.effects.setMode(e,b.options.mode||"hide");var o=b.options.size||15;var n=!(!b.options.horizFirst);var g=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(e,k);e.show();var d=a.effects.createWrapper(e).css({overflow:"hidden"});var i=((h=="show")!=n);var f=i?["width","height"]:["height","width"];var c=i?[d.width(),d.height()]:[d.height(),d.width()];var j=/([0-9]+)%/.exec(o);if(j){o=parseInt(j[1],10)/100*c[h=="hide"?0:1]}if(h=="show"){d.css(n?{height:0,width:o}:{height:o,width:0})}var m={},l={};m[f[0]]=h=="show"?c[0]:o;l[f[1]]=h=="show"?c[1]:0;d.animate(m,g,b.options.easing).animate(l,g,b.options.easing,function(){if(h=="hide"){e.hide()}a.effects.restore(e,k);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(e[0],arguments)}e.dequeue()})})}})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var d=a(this),c=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.options.mode||"show"),e={backgroundColor:d.css("backgroundColor")};if(f=="hide"){e.opacity=0}a.effects.save(d,c);d.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(e,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){(f=="hide"&&d.hide());a.effects.restore(d,c);(f=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"));(b.callback&&b.callback.apply(this,arguments));d.dequeue()}})})}})(jQuery);(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"show");times=((b.options.times||5)*2)-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=d.is(":visible"),animateTo=0;if(!isVisible){d.css("opacity",0).show();animateTo=1}if((e=="hide"&&isVisible)||(e=="show"&&!isVisible)){times--}for(var c=0;c<times;c++){d.animate({opacity:animateTo},duration,b.options.easing);animateTo=(animateTo+1)%2}d.animate({opacity:animateTo},duration,b.options.easing,function(){if(animateTo==0){d.hide()}(b.callback&&b.callback.apply(this,arguments))});d.queue("fx",function(){d.dequeue()}).dequeue()})}})(jQuery);(function(a){a.effects.puff=function(b){return this.queue(function(){var f=a(this),g=a.effects.setMode(f,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,d=e/100,c={height:f.height(),width:f.width()};a.extend(b.options,{fade:true,mode:g,percent:g=="hide"?e:100,from:g=="hide"?c:{height:c.height*d,width:c.width*d}});f.effect("scale",b.options,b.duration,b.callback);f.dequeue()})};a.effects.scale=function(b){return this.queue(function(){var g=a(this);var d=a.extend(true,{},b.options);var j=a.effects.setMode(g,b.options.mode||"effect");var h=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:(j=="hide"?0:100));var i=b.options.direction||"both";var c=b.options.origin;if(j!="effect"){d.origin=c||["middle","center"];d.restore=true}var f={height:g.height(),width:g.width()};g.from=b.options.from||(j=="show"?{height:0,width:0}:f);var e={y:i!="horizontal"?(h/100):1,x:i!="vertical"?(h/100):1};g.to={height:f.height*e.y,width:f.width*e.x};if(b.options.fade){if(j=="show"){g.from.opacity=0;g.to.opacity=1}if(j=="hide"){g.from.opacity=1;g.to.opacity=0}}d.from=g.from;d.to=g.to;d.mode=j;g.effect("size",d,b.duration,b.callback);g.dequeue()})};a.effects.size=function(b){return this.queue(function(){var c=a(this),n=["position","top","left","width","height","overflow","opacity"];var m=["position","top","left","overflow","opacity"];var j=["width","height","overflow"];var p=["fontSize"];var k=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var g=a.effects.setMode(c,b.options.mode||"effect");var i=b.options.restore||false;var e=b.options.scale||"both";var o=b.options.origin;var d={height:c.height(),width:c.width()};c.from=b.options.from||d;c.to=b.options.to||d;if(o){var h=a.effects.getBaseline(o,d);c.from.top=(d.height-c.from.height)*h.y;c.from.left=(d.width-c.from.width)*h.x;c.to.top=(d.height-c.to.height)*h.y;c.to.left=(d.width-c.to.width)*h.x}var l={from:{y:c.from.height/d.height,x:c.from.width/d.width},to:{y:c.to.height/d.height,x:c.to.width/d.width}};if(e=="box"||e=="both"){if(l.from.y!=l.to.y){n=n.concat(k);c.from=a.effects.setTransition(c,k,l.from.y,c.from);c.to=a.effects.setTransition(c,k,l.to.y,c.to)}if(l.from.x!=l.to.x){n=n.concat(f);c.from=a.effects.setTransition(c,f,l.from.x,c.from);c.to=a.effects.setTransition(c,f,l.to.x,c.to)}}if(e=="content"||e=="both"){if(l.from.y!=l.to.y){n=n.concat(p);c.from=a.effects.setTransition(c,p,l.from.y,c.from);c.to=a.effects.setTransition(c,p,l.to.y,c.to)}}a.effects.save(c,i?n:m);c.show();a.effects.createWrapper(c);c.css("overflow","hidden").css(c.from);if(e=="content"||e=="both"){k=k.concat(["marginTop","marginBottom"]).concat(p);f=f.concat(["marginLeft","marginRight"]);j=n.concat(k).concat(f);c.find("*[width]").each(function(){child=a(this);if(i){a.effects.save(child,j)}var q={height:child.height(),width:child.width()};child.from={height:q.height*l.from.y,width:q.width*l.from.x};child.to={height:q.height*l.to.y,width:q.width*l.to.x};if(l.from.y!=l.to.y){child.from=a.effects.setTransition(child,k,l.from.y,child.from);child.to=a.effects.setTransition(child,k,l.to.y,child.to)}if(l.from.x!=l.to.x){child.from=a.effects.setTransition(child,f,l.from.x,child.from);child.to=a.effects.setTransition(child,f,l.to.x,child.to)}child.css(child.from);child.animate(child.to,b.duration,b.options.easing,function(){if(i){a.effects.restore(child,j)}})})}c.animate(c.to,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(c.to.opacity===0){c.css("opacity",c.from.opacity)}if(g=="hide"){c.hide()}a.effects.restore(c,i?n:m);a.effects.removeWrapper(c);if(b.callback){b.callback.apply(this,arguments)}c.dequeue()}})})}})(jQuery);(function(a){a.effects.shake=function(b){return this.queue(function(){var e=a(this),l=["position","top","left"];var k=a.effects.setMode(e,b.options.mode||"effect");var n=b.options.direction||"left";var c=b.options.distance||20;var d=b.options.times||3;var g=b.duration||b.options.duration||140;a.effects.save(e,l);e.show();a.effects.createWrapper(e);var f=(n=="up"||n=="down")?"top":"left";var p=(n=="up"||n=="left")?"pos":"neg";var h={},o={},m={};h[f]=(p=="pos"?"-=":"+=")+c;o[f]=(p=="pos"?"+=":"-=")+c*2;m[f]=(p=="pos"?"-=":"+=")+c*2;e.animate(h,g,b.options.easing);for(var j=1;j<d;j++){e.animate(o,g,b.options.easing).animate(m,g,b.options.easing)}e.animate(o,g,b.options.easing).animate(h,g/2,b.options.easing,function(){a.effects.restore(e,l);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}});e.queue("fx",function(){e.dequeue()});e.dequeue()})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var e=a(this),d=["position","top","left"];var i=a.effects.setMode(e,b.options.mode||"show");var h=b.options.direction||"left";a.effects.save(e,d);e.show();a.effects.createWrapper(e).css({overflow:"hidden"});var f=(h=="up"||h=="down")?"top":"left";var c=(h=="up"||h=="left")?"pos":"neg";var j=b.options.distance||(f=="top"?e.outerHeight({margin:true}):e.outerWidth({margin:true}));if(i=="show"){e.css(f,c=="pos"?-j:j)}var g={};g[f]=(i=="show"?(c=="pos"?"+=":"-="):(c=="pos"?"-=":"+="))+j;e.animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(i=="hide"){e.hide()}a.effects.restore(e,d);a.effects.removeWrapper(e);if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);(function(a){a.effects.transfer=function(b){return this.queue(function(){var f=a(this),h=a(b.options.to),e=h.offset(),g={top:e.top,left:e.left,height:h.innerHeight(),width:h.innerWidth()},d=f.offset(),c=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:d.top,left:d.left,height:f.innerHeight(),width:f.innerWidth(),position:"absolute"}).animate(g,b.duration,b.options.easing,function(){c.remove();(b.callback&&b.callback.apply(f[0],arguments));f.dequeue()})})}})(jQuery)});define("jquery.cycle.all",["ftx/lib/jquery-current"],function($,undefined){var ver="2.9999";if($.support==undefined){$.support={opacity:!($.browser.msie)}}function debug(s){$.fn.cycle.debug&&log(s)}function log(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}$.expr[":"].paused=function(el){return el.cyclePause};$.fn.cycle=function(options,arg2){var o={s:this.selector,c:this.context};if(this.length===0&&options!="stop"){if(!$.isReady&&o.s){log("DOM not ready, queuing slideshow");$(function(){$(o.s,o.c).cycle(options,arg2)});return this}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var opts=handleArguments(this,options,arg2);if(opts===false){return}opts.updateActivePagerLink=opts.updateActivePagerLink||$.fn.cycle.updateActivePagerLink;if(this.cycleTimeout){clearTimeout(this.cycleTimeout)}this.cycleTimeout=this.cyclePause=0;var $cont=$(this);var $slides=opts.slideExpr?$(opts.slideExpr,this):$cont.children();var els=$slides.get();var opts2=buildOptions($cont,$slides,els,opts,o);if(opts2===false){return}if(els.length<2){log("terminating; too few slides: "+els.length);return}var startTime=opts2.continuous?10:getTimeout(els[opts2.currSlide],els[opts2.nextSlide],opts2,!opts2.backwards);if(startTime){startTime+=(opts2.delay||0);if(startTime<10){startTime=10}debug("first timeout: "+startTime);this.cycleTimeout=setTimeout(function(){go(els,opts2,0,!opts.backwards)},startTime)}})};function triggerPause(cont,byHover,onPager){var opts=$(cont).data("cycle.opts");var paused=!!cont.cyclePause;if(paused&&opts.paused){opts.paused(cont,opts,byHover,onPager)}else{if(!paused&&opts.resumed){opts.resumed(cont,opts,byHover,onPager)}}}function handleArguments(cont,options,arg2){if(cont.cycleStop==undefined){cont.cycleStop=0}if(options===undefined||options===null){options={}}if(options.constructor==String){switch(options){case"destroy":case"stop":var opts=$(cont).data("cycle.opts");if(!opts){return false}cont.cycleStop++;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout)}cont.cycleTimeout=0;opts.elements&&$(opts.elements).stop();$(cont).removeData("cycle.opts");if(options=="destroy"){destroy(opts)}return false;case"toggle":cont.cyclePause=(cont.cyclePause===1)?0:1;checkInstantResume(cont.cyclePause,arg2,cont);triggerPause(cont);return false;case"pause":cont.cyclePause=1;triggerPause(cont);return false;case"resume":cont.cyclePause=0;checkInstantResume(false,arg2,cont);triggerPause(cont);return false;case"prev":case"next":var opts=$(cont).data("cycle.opts");if(!opts){log('options not found, "prev/next" ignored');return false}$.fn.cycle[options](opts);return false;default:options={fx:options}}return options}else{if(options.constructor==Number){var num=options;options=$(cont).data("cycle.opts");if(!options){log("options not found, can not advance slide");return false}if(num<0||num>=options.elements.length){log("invalid slide index: "+num);return false}options.nextSlide=num;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0}if(typeof arg2=="string"){options.oneTimeFx=arg2}go(options.elements,options,1,num>=options.currSlide);return false}}return options;function checkInstantResume(isPaused,arg2,cont){if(!isPaused&&arg2===true){var options=$(cont).data("cycle.opts");if(!options){log("options not found, can not resume");return false}if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0}go(options.elements,options,1,!options.backwards)}}}function removeFilter(el,opts){if(!$.support.opacity&&opts.cleartype&&el.style.filter){try{el.style.removeAttribute("filter")}catch(smother){}}}function destroy(opts){if(opts.next){$(opts.next).unbind(opts.prevNextEvent)}if(opts.prev){$(opts.prev).unbind(opts.prevNextEvent)}if(opts.pager||opts.pagerAnchorBuilder){$.each(opts.pagerAnchors||[],function(){this.unbind().remove()})}opts.pagerAnchors=null;if(opts.destroy){opts.destroy(opts)}}function buildOptions($cont,$slides,els,options,o){var startingSlideSpecified;var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});var meta=$.isFunction($cont.data)?$cont.data(opts.metaAttr):null;if(meta){opts=$.extend(opts,meta)}if(opts.autostop){opts.countdown=opts.autostopCount||els.length}var cont=$cont[0];$cont.data("cycle.opts",opts);opts.$cont=$cont;opts.stopCount=cont.cycleStop;opts.elements=els;opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];if(!$.support.opacity&&opts.cleartype){opts.after.push(function(){removeFilter(this,opts)})}if(opts.continuous){opts.after.push(function(){go(els,opts,0,!opts.backwards)})}saveOriginalOpts(opts);if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($slides)}if($cont.css("position")=="static"){$cont.css("position","relative")}if(opts.width){$cont.width(opts.width)}if(opts.height&&opts.height!="auto"){$cont.height(opts.height)}if(opts.startingSlide!=undefined){opts.startingSlide=parseInt(opts.startingSlide,10);if(opts.startingSlide>=els.length||opts.startSlide<0){opts.startingSlide=0}else{startingSlideSpecified=true}}else{if(opts.backwards){opts.startingSlide=els.length-1}else{opts.startingSlide=0}}if(opts.random){opts.randomMap=[];for(var i=0;i<els.length;i++){opts.randomMap.push(i)}opts.randomMap.sort(function(a,b){return Math.random()-0.5});if(startingSlideSpecified){for(var cnt=0;cnt<els.length;cnt++){if(opts.startingSlide==opts.randomMap[cnt]){opts.randomIndex=cnt}}}else{opts.randomIndex=1;opts.startingSlide=opts.randomMap[1]}}else{if(opts.startingSlide>=els.length){opts.startingSlide=0}}opts.currSlide=opts.startingSlide||0;var first=opts.startingSlide;$slides.css({position:"absolute",top:0,left:0}).hide().each(function(i){var z;if(opts.backwards){z=first?i<=first?els.length+(i-first):first-i:els.length-i}else{z=first?i>=first?els.length-(i-first):first-i:els.length-i}$(this).css("z-index",z)});$(els[first]).css("opacity",1).show();removeFilter(els[first],opts);if(opts.fit){if(!opts.aspect){if(opts.width){$slides.width(opts.width)}if(opts.height&&opts.height!="auto"){$slides.height(opts.height)}}else{$slides.each(function(){var $slide=$(this);var ratio=(opts.aspect===true)?$slide.width()/$slide.height():opts.aspect;if(opts.width&&$slide.width()!=opts.width){$slide.width(opts.width);$slide.height(opts.width/ratio)}if(opts.height&&$slide.height()<opts.height){$slide.height(opts.height);$slide.width(opts.height*ratio)}})}}if(opts.center&&((!opts.fit)||opts.aspect)){$slides.each(function(){var $slide=$(this);$slide.css({"margin-left":opts.width?((opts.width-$slide.width())/2)+"px":0,"margin-top":opts.height?((opts.height-$slide.height())/2)+"px":0})})}if(opts.center&&!opts.fit&&!opts.slideResize){$slides.each(function(){var $slide=$(this);$slide.css({"margin-left":opts.width?((opts.width-$slide.width())/2)+"px":0,"margin-top":opts.height?((opts.height-$slide.height())/2)+"px":0})})}var reshape=opts.containerResize&&!$cont.innerHeight();if(reshape){var maxw=0,maxh=0;for(var j=0;j<els.length;j++){var $e=$(els[j]),e=$e[0],w=$e.outerWidth(),h=$e.outerHeight();if(!w){w=e.offsetWidth||e.width||$e.attr("width")}if(!h){h=e.offsetHeight||e.height||$e.attr("height")}maxw=w>maxw?w:maxw;maxh=h>maxh?h:maxh}if(maxw>0&&maxh>0){$cont.css({width:maxw+"px",height:maxh+"px"})}}var pauseFlag=false;if(opts.pause){$cont.hover(function(){pauseFlag=true;this.cyclePause++;triggerPause(cont,true)},function(){pauseFlag&&this.cyclePause--;triggerPause(cont,true)})}if(supportMultiTransitions(opts)===false){return false}var requeue=false;options.requeueAttempts=options.requeueAttempts||0;$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:($el.height()||this.offsetHeight||this.height||$el.attr("height")||0);this.cycleW=(opts.fit&&opts.width)?opts.width:($el.width()||this.offsetWidth||this.width||$el.attr("width")||0);if($el.is("img")){var loadingIE=($.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var loadingFF=($.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var loadingOp=($.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var loadingOther=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(loadingIE||loadingFF||loadingOp||loadingOther){if(o.s&&opts.requeueOnImageNotLoaded&&++options.requeueAttempts<100){log(options.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){$(o.s,o.c).cycle(options)},opts.requeueTimeout);requeue=true;return false}else{log("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}}return true});if(requeue){return false}opts.cssBefore=opts.cssBefore||{};opts.cssAfter=opts.cssAfter||{};opts.cssFirst=opts.cssFirst||{};opts.animIn=opts.animIn||{};opts.animOut=opts.animOut||{};$slides.not(":eq("+first+")").css(opts.cssBefore);$($slides[first]).css(opts.cssFirst);if(opts.timeout){opts.timeout=parseInt(opts.timeout,10);if(opts.speed.constructor==String){opts.speed=$.fx.speeds[opts.speed]||parseInt(opts.speed,10)}if(!opts.sync){opts.speed=opts.speed/2}var buffer=opts.fx=="none"?0:opts.fx=="shuffle"?500:250;while((opts.timeout-opts.speed)<buffer){opts.timeout+=opts.speed}}if(opts.easing){opts.easeIn=opts.easeOut=opts.easing}if(!opts.speedIn){opts.speedIn=opts.speed}if(!opts.speedOut){opts.speedOut=opts.speed}opts.slideCount=els.length;opts.currSlide=opts.lastSlide=first;if(opts.random){if(++opts.randomIndex==els.length){opts.randomIndex=0}opts.nextSlide=opts.randomMap[opts.randomIndex]}else{if(opts.backwards){opts.nextSlide=opts.startingSlide==0?(els.length-1):opts.startingSlide-1}else{opts.nextSlide=opts.startingSlide>=(els.length-1)?0:opts.startingSlide+1}}if(!opts.multiFx){var init=$.fn.cycle.transitions[opts.fx];if($.isFunction(init)){init($cont,$slides,opts)}else{if(opts.fx!="custom"&&!opts.multiFx){log("unknown transition: "+opts.fx,"; slideshow terminating");return false}}}var e0=$slides[first];if(!opts.skipInitializationCallbacks){if(opts.before.length){opts.before[0].apply(e0,[e0,e0,opts,true])}if(opts.after.length){opts.after[0].apply(e0,[e0,e0,opts,true])}}if(opts.next){$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,1)})}if(opts.prev){$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,0)})}if(opts.pager||opts.pagerAnchorBuilder){buildPager(els,opts)}exposeAddSlide(opts,els);return opts}function saveOriginalOpts(opts){opts.original={before:[],after:[]};opts.original.cssBefore=$.extend({},opts.cssBefore);opts.original.cssAfter=$.extend({},opts.cssAfter);opts.original.animIn=$.extend({},opts.animIn);opts.original.animOut=$.extend({},opts.animOut);$.each(opts.before,function(){opts.original.before.push(this)});$.each(opts.after,function(){opts.original.after.push(this)})}function supportMultiTransitions(opts){var i,tx,txs=$.fn.cycle.transitions;if(opts.fx.indexOf(",")>0){opts.multiFx=true;opts.fxs=opts.fx.replace(/\s*/g,"").split(",");for(i=0;i<opts.fxs.length;i++){var fx=opts.fxs[i];tx=txs[fx];if(!tx||!txs.hasOwnProperty(fx)||!$.isFunction(tx)){log("discarding unknown transition: ",fx);opts.fxs.splice(i,1);i--}}if(!opts.fxs.length){log("No valid transitions named; slideshow terminating.");return false}}else{if(opts.fx=="all"){opts.multiFx=true;opts.fxs=[];for(p in txs){tx=txs[p];if(txs.hasOwnProperty(p)&&$.isFunction(tx)){opts.fxs.push(p)}}}}if(opts.multiFx&&opts.randomizeEffects){var r1=Math.floor(Math.random()*20)+30;for(i=0;i<r1;i++){var r2=Math.floor(Math.random()*opts.fxs.length);opts.fxs.push(opts.fxs.splice(r2,1)[0])}debug("randomized fx sequence: ",opts.fxs)}return true}function exposeAddSlide(opts,els){opts.addSlide=function(newSlide,prepend){var $s=$(newSlide),s=$s[0];if(!opts.autostopCount){opts.countdown++}els[prepend?"unshift":"push"](s);if(opts.els){opts.els[prepend?"unshift":"push"](s)}opts.slideCount=els.length;if(opts.random){opts.randomMap.push(opts.slideCount-1);opts.randomMap.sort(function(a,b){return Math.random()-0.5})}$s.css("position","absolute");$s[prepend?"prependTo":"appendTo"](opts.$cont);if(prepend){opts.currSlide++;opts.nextSlide++}if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($s)}if(opts.fit&&opts.width){$s.width(opts.width)}if(opts.fit&&opts.height&&opts.height!="auto"){$s.height(opts.height)}s.cycleH=(opts.fit&&opts.height)?opts.height:$s.height();s.cycleW=(opts.fit&&opts.width)?opts.width:$s.width();$s.css(opts.cssBefore);if(opts.pager||opts.pagerAnchorBuilder){$.fn.cycle.createPagerAnchor(els.length-1,s,$(opts.pager),els,opts)}if($.isFunction(opts.onAddSlide)){opts.onAddSlide($s)}else{$s.hide()}}}$.fn.cycle.resetState=function(opts,fx){fx=fx||opts.fx;opts.before=[];opts.after=[];opts.cssBefore=$.extend({},opts.original.cssBefore);opts.cssAfter=$.extend({},opts.original.cssAfter);opts.animIn=$.extend({},opts.original.animIn);opts.animOut=$.extend({},opts.original.animOut);opts.fxFn=null;$.each(opts.original.before,function(){opts.before.push(this)});$.each(opts.original.after,function(){opts.after.push(this)});var init=$.fn.cycle.transitions[fx];if($.isFunction(init)){init(opts.$cont,$(opts.elements),opts)}};function go(els,opts,manual,fwd){if(manual&&opts.busy&&opts.manualTrump){debug("manualTrump in go(), stopping active transition");$(els).stop(true,true);opts.busy=0}if(opts.busy){debug("transition active, ignoring new tx request");return}var p=opts.$cont[0],curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleStop!=opts.stopCount||p.cycleTimeout===0&&!manual){return}if(!manual&&!p.cyclePause&&!opts.bounce&&((opts.autostop&&(--opts.countdown<=0))||(opts.nowrap&&!opts.random&&opts.nextSlide<opts.currSlide))){if(opts.end){opts.end(opts)}return}var changed=false;if((manual||!p.cyclePause)&&(opts.nextSlide!=opts.currSlide)){changed=true;var fx=opts.fx;curr.cycleH=curr.cycleH||$(curr).height();curr.cycleW=curr.cycleW||$(curr).width();next.cycleH=next.cycleH||$(next).height();next.cycleW=next.cycleW||$(next).width();if(opts.multiFx){if(fwd&&(opts.lastFx==undefined||++opts.lastFx>=opts.fxs.length)){opts.lastFx=0}else{if(!fwd&&(opts.lastFx==undefined||--opts.lastFx<0)){opts.lastFx=opts.fxs.length-1}}fx=opts.fxs[opts.lastFx]}if(opts.oneTimeFx){fx=opts.oneTimeFx;opts.oneTimeFx=null}$.fn.cycle.resetState(opts,fx);if(opts.before.length){$.each(opts.before,function(i,o){if(p.cycleStop!=opts.stopCount){return}o.apply(next,[curr,next,opts,fwd])})}var after=function(){opts.busy=0;$.each(opts.after,function(i,o){if(p.cycleStop!=opts.stopCount){return}o.apply(next,[curr,next,opts,fwd])});if(!p.cycleStop){queueNext()}};debug("tx firing("+fx+"); currSlide: "+opts.currSlide+"; nextSlide: "+opts.nextSlide);opts.busy=1;if(opts.fxFn){opts.fxFn(curr,next,opts,after,fwd,manual&&opts.fastOnEvent)}else{if($.isFunction($.fn.cycle[opts.fx])){$.fn.cycle[opts.fx](curr,next,opts,after,fwd,manual&&opts.fastOnEvent)}else{$.fn.cycle.custom(curr,next,opts,after,fwd,manual&&opts.fastOnEvent)}}}else{queueNext()}if(changed||opts.nextSlide==opts.currSlide){opts.lastSlide=opts.currSlide;if(opts.random){opts.currSlide=opts.nextSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;opts.randomMap.sort(function(a,b){return Math.random()-0.5})}opts.nextSlide=opts.randomMap[opts.randomIndex];if(opts.nextSlide==opts.currSlide){opts.nextSlide=(opts.currSlide==opts.slideCount-1)?0:opts.currSlide+1}}else{if(opts.backwards){var roll=(opts.nextSlide-1)<0;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=1;opts.currSlide=0}else{opts.nextSlide=roll?(els.length-1):opts.nextSlide-1;opts.currSlide=roll?0:opts.nextSlide+1}}else{var roll=(opts.nextSlide+1)==els.length;if(roll&&opts.bounce){opts.backwards=!opts.backwards;opts.nextSlide=els.length-2;opts.currSlide=els.length-1}else{opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1}}}}if(changed&&opts.pager){opts.updateActivePagerLink(opts.pager,opts.currSlide,opts.activePagerClass)}function queueNext(){var ms=0,timeout=opts.timeout;if(opts.timeout&&!opts.continuous){ms=getTimeout(els[opts.currSlide],els[opts.nextSlide],opts,fwd);if(opts.fx=="shuffle"){ms-=opts.speedOut}}else{if(opts.continuous&&p.cyclePause){ms=10}}if(ms>0){p.cycleTimeout=setTimeout(function(){go(els,opts,0,!opts.backwards)},ms)}}}$.fn.cycle.updateActivePagerLink=function(pager,currSlide,clsName){$(pager).each(function(){$(this).children().removeClass(clsName).eq(currSlide).addClass(clsName)})};function getTimeout(curr,next,opts,fwd){if(opts.timeoutFn){var t=opts.timeoutFn.call(curr,curr,next,opts,fwd);while(opts.fx!="none"&&(t-opts.speed)<250){t+=opts.speed}debug("calculated timeout: "+t+"; speed: "+opts.speed);if(t!==false){return t}}return opts.timeout}$.fn.cycle.next=function(opts){advance(opts,1)};$.fn.cycle.prev=function(opts){advance(opts,0)};function advance(opts,moveForward){var val=moveForward?1:-1;var els=opts.elements;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0}if(opts.random&&val<0){opts.randomIndex--;if(--opts.randomIndex==-2){opts.randomIndex=els.length-2}else{if(opts.randomIndex==-1){opts.randomIndex=els.length-1}}opts.nextSlide=opts.randomMap[opts.randomIndex]}else{if(opts.random){opts.nextSlide=opts.randomMap[opts.randomIndex]}else{opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){if(opts.nowrap){return false}opts.nextSlide=els.length-1}else{if(opts.nextSlide>=els.length){if(opts.nowrap){return false}opts.nextSlide=0}}}}var cb=opts.onPrevNextEvent||opts.prevNextClick;if($.isFunction(cb)){cb(val>0,opts.nextSlide,els[opts.nextSlide])}go(els,opts,1,moveForward);return false}function buildPager(els,opts){var $p=$(opts.pager);$.each(els,function(i,o){$.fn.cycle.createPagerAnchor(i,o,$p,els,opts)});opts.updateActivePagerLink(opts.pager,opts.startingSlide,opts.activePagerClass)}$.fn.cycle.createPagerAnchor=function(i,el,$p,els,opts){var a;if($.isFunction(opts.pagerAnchorBuilder)){a=opts.pagerAnchorBuilder(i,el);debug("pagerAnchorBuilder("+i+", el) returned: "+a)}else{a='<a href="#">'+(i+1)+"</a>"}if(!a){return}var $a=$(a);if($a.parents("body").length===0){var arr=[];if($p.length>1){$p.each(function(){var $clone=$a.clone(true);$(this).append($clone);arr.push($clone[0])});$a=$(arr)}else{$a.appendTo($p)}}opts.pagerAnchors=opts.pagerAnchors||[];opts.pagerAnchors.push($a);var pagerFn=function(e){e.preventDefault();opts.nextSlide=i;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0}var cb=opts.onPagerEvent||opts.pagerClick;if($.isFunction(cb)){cb(opts.nextSlide,els[opts.nextSlide])}go(els,opts,1,opts.currSlide<i)};if(/mouseenter|mouseover/i.test(opts.pagerEvent)){$a.hover(pagerFn,function(){})}else{$a.bind(opts.pagerEvent,pagerFn)}if(!/^click/.test(opts.pagerEvent)&&!opts.allowPagerClickBubble){$a.bind("click.cycle",function(){return false})}var cont=opts.$cont[0];var pauseFlag=false;if(opts.pauseOnPagerHover){$a.hover(function(){pauseFlag=true;cont.cyclePause++;triggerPause(cont,true,true)},function(){pauseFlag&&cont.cyclePause--;triggerPause(cont,true,true)})}};$.fn.cycle.hopsFromLast=function(opts,fwd){var hops,l=opts.lastSlide,c=opts.currSlide;if(fwd){hops=c>l?c-l:opts.slideCount-l}else{hops=c<l?l-c:l+opts.slideCount-c}return hops};function clearTypeFix($slides){debug("applying clearType background-color hack");function hex(s){s=parseInt(s,10).toString(16);return s.length<2?"0"+s:s}function getBg(e){for(;e&&e.nodeName.toLowerCase()!="html";e=e.parentNode){var v=$.css(e,"background-color");if(v&&v.indexOf("rgb")>=0){var rgb=v.match(/\d+/g);return"#"+hex(rgb[0])+hex(rgb[1])+hex(rgb[2])}if(v&&v!="transparent"){return v}}return"#ffffff"}$slides.each(function(){$(this).css("background-color",getBg(this))})}$.fn.cycle.commonReset=function(curr,next,opts,w,h,rev){$(opts.elements).not(curr).hide();if(typeof opts.cssBefore.opacity=="undefined"){opts.cssBefore.opacity=1}opts.cssBefore.display="block";if(opts.slideResize&&w!==false&&next.cycleW>0){opts.cssBefore.width=next.cycleW}if(opts.slideResize&&h!==false&&next.cycleH>0){opts.cssBefore.height=next.cycleH}opts.cssAfter=opts.cssAfter||{};opts.cssAfter.display="none";$(curr).css("zIndex",opts.slideCount+(rev===true?1:0));$(next).css("zIndex",opts.slideCount+(rev===true?0:1))};$.fn.cycle.custom=function(curr,next,opts,cb,fwd,speedOverride){var $l=$(curr),$n=$(next);var speedIn=opts.speedIn,speedOut=opts.speedOut,easeIn=opts.easeIn,easeOut=opts.easeOut;$n.css(opts.cssBefore);if(speedOverride){if(typeof speedOverride=="number"){speedIn=speedOut=speedOverride}else{speedIn=speedOut=1}easeIn=easeOut=null}var fn=function(){$n.animate(opts.animIn,speedIn,easeIn,function(){cb()})};$l.animate(opts.animOut,speedOut,easeOut,function(){$l.css(opts.cssAfter);if(!opts.sync){fn()}});if(opts.sync){fn()}};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css("opacity",0);opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.opacity=0});opts.animIn={opacity:1};opts.animOut={opacity:0};opts.cssBefore={top:0,left:0}}};$.fn.cycle.ver=function(){return ver};$.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:false,animIn:null,animOut:null,aspect:false,autostop:0,autostopCount:0,backwards:false,before:null,center:null,cleartype:!$.support.opacity,cleartypeNoBg:false,containerResize:1,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:true,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",random:0,randomizeEffects:1,requeueOnImageNotLoaded:true,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:false,slideExpr:null,slideResize:1,speed:1000,speedIn:null,speedOut:null,startingSlide:undefined,sync:1,timeout:4000,timeoutFn:null,updateActivePagerLink:null,width:null};
/*
	* jQuery Cycle Plugin Transition Definitions
	* This script is a plugin for the jQuery Cycle Plugin
	* Examples and documentation at: http://malsup.com/jquery/cycle/
	* Copyright (c) 2007-2010 M. Alsup
	* Version: 2.73
	* Dual licensed under the MIT and GPL licenses:
	* http://www.opensource.org/licenses/mit-license.php
	* http://www.gnu.org/licenses/gpl.html
	*/
$.fn.cycle.transitions.none=function($cont,$slides,opts){opts.fxFn=function(curr,next,opts,after){$(next).show();$(curr).hide();after()}};$.fn.cycle.transitions.fadeout=function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css({display:"block",opacity:1});opts.before.push(function(curr,next,opts,w,h,rev){$(curr).css("zIndex",opts.slideCount+(!rev===true?1:0));$(next).css("zIndex",opts.slideCount+(!rev===true?0:1))});opts.animIn.opacity=1;opts.animOut.opacity=0;opts.cssBefore.opacity=1;opts.cssBefore.display="block";opts.cssAfter.zIndex=0};$.fn.cycle.transitions.scrollUp=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssBefore.top=h;opts.cssBefore.left=0;opts.cssFirst.top=0;opts.animIn.top=0;opts.animOut.top=-h};$.fn.cycle.transitions.scrollDown=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssFirst.top=0;opts.cssBefore.top=-h;opts.cssBefore.left=0;opts.animIn.top=0;opts.animOut.top=h};$.fn.cycle.transitions.scrollLeft=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst.left=0;opts.cssBefore.left=w;opts.cssBefore.top=0;opts.animIn.left=0;opts.animOut.left=0-w};$.fn.cycle.transitions.scrollRight=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst.left=0;opts.cssBefore.left=-w;opts.cssBefore.top=0;opts.animIn.left=0;opts.animOut.left=w};$.fn.cycle.transitions.scrollHorz=function($cont,$slides,opts){$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts,fwd){if(opts.rev){fwd=!fwd}$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.left=fwd?(next.cycleW-1):(1-next.cycleW);opts.animOut.left=fwd?-curr.cycleW:curr.cycleW});opts.cssFirst.left=0;opts.cssBefore.top=0;opts.animIn.left=0;opts.animOut.top=0};$.fn.cycle.transitions.scrollVert=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push(function(curr,next,opts,fwd){if(opts.rev){fwd=!fwd}$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.top=fwd?(1-next.cycleH):(next.cycleH-1);opts.animOut.top=fwd?curr.cycleH:-curr.cycleH});opts.cssFirst.top=0;opts.cssBefore.left=0;opts.animIn.top=0;opts.animOut.left=0};$.fn.cycle.transitions.slideX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW});opts.cssBefore.left=0;opts.cssBefore.top=0;opts.cssBefore.width=0;opts.animIn.width="show";opts.animOut.width=0};$.fn.cycle.transitions.slideY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH});opts.cssBefore.left=0;opts.cssBefore.top=0;opts.cssBefore.height=0;opts.animIn.height="show";opts.animOut.height=0};$.fn.cycle.transitions.shuffle=function($cont,$slides,opts){var i,w=$cont.css("overflow","visible").width();$slides.css({left:0,top:0});opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true)});if(!opts.speedAdjusted){opts.speed=opts.speed/2;opts.speedAdjusted=true}opts.random=0;opts.shuffle=opts.shuffle||{left:-w,top:15};opts.els=[];for(i=0;i<$slides.length;i++){opts.els.push($slides[i])}for(i=0;i<opts.currSlide;i++){opts.els.push(opts.els.shift())}opts.fxFn=function(curr,next,opts,cb,fwd){if(opts.rev){fwd=!fwd}var $el=fwd?$(curr):$(next);$(next).css(opts.cssBefore);var count=opts.slideCount;$el.animate(opts.shuffle,opts.speedIn,opts.easeIn,function(){var hops=$.fn.cycle.hopsFromLast(opts,fwd);for(var k=0;k<hops;k++){fwd?opts.els.push(opts.els.shift()):opts.els.unshift(opts.els.pop())}if(fwd){for(var i=0,len=opts.els.length;i<len;i++){$(opts.els[i]).css("z-index",len-i+count)}}else{var z=$(curr).css("z-index");$el.css("z-index",parseInt(z,10)+1+count)}$el.animate({left:0,top:0},opts.speedOut,opts.easeOut,function(){$(fwd?this:curr).hide();if(cb){cb()}})})};$.extend(opts.cssBefore,{display:"block",opacity:1,top:0,left:0})};$.fn.cycle.transitions.turnUp=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=next.cycleH;opts.animIn.height=next.cycleH;opts.animOut.width=next.cycleW});opts.cssFirst.top=0;opts.cssBefore.left=0;opts.cssBefore.height=0;opts.animIn.top=0;opts.animOut.height=0};$.fn.cycle.transitions.turnDown=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH});opts.cssFirst.top=0;opts.cssBefore.left=0;opts.cssBefore.top=0;opts.cssBefore.height=0;opts.animOut.height=0};$.fn.cycle.transitions.turnLeft=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=next.cycleW;opts.animIn.width=next.cycleW});opts.cssBefore.top=0;opts.cssBefore.width=0;opts.animIn.left=0;opts.animOut.width=0};$.fn.cycle.transitions.turnRight=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW});$.extend(opts.cssBefore,{top:0,left:0,width:0});opts.animIn.left=0;opts.animOut.width=0};$.fn.cycle.transitions.zoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false,true);opts.cssBefore.top=next.cycleH/2;opts.cssBefore.left=next.cycleW/2;$.extend(opts.animIn,{top:0,left:0,width:next.cycleW,height:next.cycleH});$.extend(opts.animOut,{width:0,height:0,top:curr.cycleH/2,left:curr.cycleW/2})});opts.cssFirst.top=0;opts.cssFirst.left=0;opts.cssBefore.width=0;opts.cssBefore.height=0};$.fn.cycle.transitions.fadeZoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false);opts.cssBefore.left=next.cycleW/2;opts.cssBefore.top=next.cycleH/2;$.extend(opts.animIn,{top:0,left:0,width:next.cycleW,height:next.cycleH})});opts.cssBefore.width=0;opts.cssBefore.height=0;opts.animOut.opacity=0};$.fn.cycle.transitions.blindX=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW});opts.cssBefore.left=w;opts.cssBefore.top=0;opts.animIn.left=0;opts.animOut.left=w};$.fn.cycle.transitions.blindY=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH});opts.cssBefore.top=h;opts.cssBefore.left=0;opts.animIn.top=0;opts.animOut.top=h};$.fn.cycle.transitions.blindZ=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();var w=$cont.width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH});opts.cssBefore.top=h;opts.cssBefore.left=w;opts.animIn.top=0;opts.animIn.left=0;opts.animOut.top=h;opts.animOut.left=w};$.fn.cycle.transitions.growX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=this.cycleW/2;opts.animIn.left=0;opts.animIn.width=this.cycleW;opts.animOut.left=0});opts.cssBefore.top=0;opts.cssBefore.width=0};$.fn.cycle.transitions.growY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=this.cycleH/2;opts.animIn.top=0;opts.animIn.height=this.cycleH;opts.animOut.top=0});opts.cssBefore.height=0;opts.cssBefore.left=0};$.fn.cycle.transitions.curtainX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true,true);opts.cssBefore.left=next.cycleW/2;opts.animIn.left=0;opts.animIn.width=this.cycleW;opts.animOut.left=curr.cycleW/2;opts.animOut.width=0});opts.cssBefore.top=0;opts.cssBefore.width=0};$.fn.cycle.transitions.curtainY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false,true);opts.cssBefore.top=next.cycleH/2;opts.animIn.top=0;opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH/2;opts.animOut.height=0});opts.cssBefore.height=0;opts.cssBefore.left=0};$.fn.cycle.transitions.cover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);if(d=="right"){opts.cssBefore.left=-w}else{if(d=="up"){opts.cssBefore.top=h}else{if(d=="down"){opts.cssBefore.top=-h}else{opts.cssBefore.left=w}}}});opts.animIn.left=0;opts.animIn.top=0;opts.cssBefore.top=0;opts.cssBefore.left=0};$.fn.cycle.transitions.uncover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(d=="right"){opts.animOut.left=w}else{if(d=="up"){opts.animOut.top=-h}else{if(d=="down"){opts.animOut.top=h}else{opts.animOut.left=-w}}}});opts.animIn.left=0;opts.animIn.top=0;opts.cssBefore.top=0;opts.cssBefore.left=0};$.fn.cycle.transitions.toss=function($cont,$slides,opts){var w=$cont.css("overflow","visible").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(!opts.animOut.left&&!opts.animOut.top){$.extend(opts.animOut,{left:w*2,top:-h/2,opacity:0})}else{opts.animOut.opacity=0}});opts.cssBefore.left=0;opts.cssBefore.top=0;opts.animIn.left=0};$.fn.cycle.transitions.wipe=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.cssBefore=opts.cssBefore||{};var clip;if(opts.clip){if(/l2r/.test(opts.clip)){clip="rect(0px 0px "+h+"px 0px)"}else{if(/r2l/.test(opts.clip)){clip="rect(0px "+w+"px "+h+"px "+w+"px)"}else{if(/t2b/.test(opts.clip)){clip="rect(0px "+w+"px 0px 0px)"}else{if(/b2t/.test(opts.clip)){clip="rect("+h+"px "+w+"px "+h+"px 0px)"}else{if(/zoom/.test(opts.clip)){var top=parseInt(h/2,10);var left=parseInt(w/2,10);clip="rect("+top+"px "+left+"px "+top+"px "+left+"px)"}}}}}}opts.cssBefore.clip=opts.cssBefore.clip||clip||"rect(0px 0px 0px 0px)";var d=opts.cssBefore.clip.match(/(\d+)/g);var t=parseInt(d[0],10),r=parseInt(d[1],10),b=parseInt(d[2],10),l=parseInt(d[3],10);opts.before.push(function(curr,next,opts){if(curr==next){return}var $curr=$(curr),$next=$(next);$.fn.cycle.commonReset(curr,next,opts,true,true,false);opts.cssAfter.display="block";var step=1,count=parseInt((opts.speedIn/13),10)-1;(function f(){var tt=t?t-parseInt(step*(t/count),10):0;var ll=l?l-parseInt(step*(l/count),10):0;var bb=b<h?b+parseInt(step*((h-b)/count||1),10):h;var rr=r<w?r+parseInt(step*((w-r)/count||1),10):w;$next.css({clip:"rect("+tt+"px "+rr+"px "+bb+"px "+ll+"px)"});(step++<=count)?setTimeout(f,13):$curr.css("display","none")})()});$.extend(opts.cssBefore,{display:"block",opacity:1,top:0,left:0});opts.animIn={left:0};opts.animOut={left:0}}});define("elastislide",["ftx/lib/jquery-current"],function($,undefined){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(settings){$.extend(config,settings)}this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener("touchmove",onTouchMove);startX=null;isMoving=false}function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault()}if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft()}else{config.wipeRight()}}else{if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeDown()}else{config.wipeUp()}}}}}function onTouchStart(e){if(e.touches.length==1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener("touchmove",onTouchMove,false)}}if("ontouchstart" in document.documentElement){this.addEventListener("touchstart",onTouchStart,false)}});return this};$.elastislide=function(options,element){this.$el=$(element);this._init(options)};$.elastislide.defaults={speed:450,easing:"",imageW:190,margin:3,border:1,minItems:1,current:0,onClick:function(){return false}};$.elastislide.prototype={_init:function(options){this.options=$.extend(true,{},$.elastislide.defaults,options);this.$slider=this.$el.find("ul");this.$items=this.$slider.children("li");this.itemsCount=this.$items.length;this.$esCarousel=this.$slider.parent();this._validateOptions();this._configure();this._addControls();this._initEvents();this.$slider.show();this._slideToCurrent(false)},_validateOptions:function(){if(this.options.speed<0){this.options.speed=450}if(this.options.margin<0){this.options.margin=4}if(this.options.border<0){this.options.border=1}if(this.options.minItems<1||this.options.minItems>this.itemsCount){this.options.minItems=1}if(this.options.current>this.itemsCount-1){this.options.current=0}},_configure:function(){this.current=this.options.current;this.visibleWidth=this.$esCarousel.width();if(this.visibleWidth<this.options.minItems*(this.options.imageW+2*this.options.border)+(this.options.minItems-1)*this.options.margin){this._setDim((this.visibleWidth-(this.options.minItems-1)*this.options.margin)/this.options.minItems);this._setCurrentValues();this.fitCount=this.options.minItems}else{this._setDim();this._setCurrentValues()}this.$slider.css({width:this.sliderW})},_setDim:function(elW){this.$items.css({marginRight:this.options.margin,width:(elW)?elW:this.options.imageW+2*this.options.border}).children("a").css({borderWidth:this.options.border})},_setCurrentValues:function(){this.itemW=this.$items.outerWidth(true);this.sliderW=this.itemW*this.itemsCount;this.visibleWidth=this.$esCarousel.width();this.fitCount=Math.round(this.visibleWidth/this.itemW)},_addControls:function(){this.$navNext=$('<span class="es-nav-next">Next</span>');this.$navPrev=$('<span class="es-nav-prev">Previous</span>');$('<div class="es-nav"/>').append(this.$navPrev).append(this.$navNext).appendTo(this.$el);this._toggleControls()},_toggleControls:function(dir,status){if(dir&&status){if(status===1){(dir==="right")?this.$navNext.removeClass("disabled"):this.$navPrev.removeClass("disabled")}else{(dir==="right")?this.$navNext.addClass("disabled"):this.$navPrev.addClass("disabled")}}if(this.current===this.itemsCount-1||this.fitCount>=this.itemsCount){this.$navNext.hide();this.$navPrev.hide()}else{this.$navNext.show();this.$navPrev.show()}},_initEvents:function(){var instance=this;$(window).bind("resize.elastislide",function(event){instance._setCurrentValues();if(instance.visibleWidth<instance.options.minItems*(instance.options.imageW+2*instance.options.border)+(instance.options.minItems-1)*instance.options.margin){instance._setDim((instance.visibleWidth-(instance.options.minItems-1)*instance.options.margin)/instance.options.minItems);instance._setCurrentValues();instance.fitCount=instance.options.minItems}else{instance._setDim();instance._setCurrentValues()}instance.$slider.css({width:instance.sliderW+10});clearTimeout(instance.resetTimeout);instance.resetTimeout=setTimeout(function(){instance._slideToCurrent()},200)});this.$navNext.bind("click.elastislide",function(event){instance._slide("right")});this.$navPrev.bind("click.elastislide",function(event){instance._slide("left")});this.$items.bind("click.elastislide",function(event){instance.options.onClick($(this))});instance.$slider.touchwipe({wipeLeft:function(){instance._slide("right")},wipeRight:function(){instance._slide("left")}})},_slide:function(dir,val,anim,callback){if(this.$slider.is(":animated")){return false}var ml=parseFloat(this.$slider.css("margin-left"));if(val===undefined){var amount=this.fitCount*this.itemW,val;if(amount<0){return false}if(dir==="right"&&this.sliderW-(Math.abs(ml)+amount)<this.visibleWidth){amount=this.sliderW-(Math.abs(ml)+this.visibleWidth)-this.options.margin;this._toggleControls("right",-1);this._toggleControls("left",1)}else{if(dir==="left"&&Math.abs(ml)-amount<0){amount=Math.abs(ml);this._toggleControls("left",-1);this._toggleControls("right",1)}else{var fml;(dir==="right")?fml=Math.abs(ml)+this.options.margin+Math.abs(amount):fml=Math.abs(ml)-this.options.margin-Math.abs(amount);if(fml>0){this._toggleControls("left",1)}else{this._toggleControls("left",-1)}if(fml<this.sliderW-this.visibleWidth){this._toggleControls("right",1)}else{this._toggleControls("right",-1)}}}(dir==="right")?val="-="+amount:val="+="+amount}else{var fml=Math.abs(val);if(Math.max(this.sliderW,this.visibleWidth)-fml<this.visibleWidth){val=-(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth);if(val!==0){val+=this.options.margin}this._toggleControls("right",-1);fml=Math.abs(val)}if(fml>0){this._toggleControls("left",1)}else{this._toggleControls("left",-1)}if(Math.max(this.sliderW,this.visibleWidth)-this.visibleWidth>fml+this.options.margin){this._toggleControls("right",1)}else{this._toggleControls("right",-1)}}$.fn.applyStyle=(anim===undefined)?$.fn.animate:$.fn.css;var sliderCSS={marginLeft:val};var instance=this;this.$slider.applyStyle(sliderCSS,$.extend(true,[],{duration:this.options.speed,easing:this.options.easing,complete:function(){if(callback){callback.call()}}}))},_slideToCurrent:function(anim){var amount=this.current*this.itemW;this._slide("",-amount,anim)},add:function($newelems,callback){this.$items=this.$items.add($newelems);this.itemsCount=this.$items.length;this._setDim();this._setCurrentValues();this.$slider.css({width:this.sliderW});this._slideToCurrent();if(callback){callback.call($newelems)}},destroy:function(callback){this._destroy(callback)},_destroy:function(callback){this.$el.unbind(".elastislide").removeData("elastislide");$(window).unbind(".elastislide");if(callback){callback.call()}}};var logError=function(message){if(this.console){console.error(message)}};$.fn.elastislide=function(options){if(typeof options==="string"){var args=Array.prototype.slice.call(arguments);this.each(function(){var instance=$.data(this,"elastislide");if(!instance){logError("cannot call methods on elastislide prior to initialization; attempted to call method '"+options+"'");return}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for elastislide instance");return}instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,"elastislide");if(!instance){$.data(this,"elastislide",new $.elastislide(options,this))}})}return this}});define("hollywood",["ftx/lib/jquery-current","newsampleplayer","jquery-ui-1.8.min","jquery.cycle.all","elastislide"],function($,samplePlayer){$(document).ready(function(){$(".modal-profile").animate({opacity:0},0);$(".quote").animate({opacity:0,top:"-=24px"},0);$(".divider").animate({opacity:0,width:1},0);$(".name").animate({opacity:0,right:"+=16px"},0);$(".title").animate({opacity:0,right:"-=16px"},0);$(".audiobox").animate({opacity:0,bottom:"-=24px"},0);$(".videobox").animate({opacity:0,bottom:"-=24px"},0);$(".social").animate({opacity:0,bottom:"-=12px"},0);$("#hollywood-carousel .es-carousel-wrapper").elastislide({imageW:190,margin:1,minItems:1})});$(window).load((function(){$(".modal-profile").delay(200).animate({opacity:1},800);$(".quote").delay(700).animate({opacity:1,top:"+=24px"},900);$(".divider").delay(1200).animate({opacity:1,width:"120px"},1000);$(".name").delay(1600).animate({opacity:1,right:"-=16px"},1000,"linear");$(".title").delay(1700).animate({opacity:1,right:"+=16px"},1100,"linear");$(".audiobox").delay(2100).animate({opacity:1,bottom:"+=24px"},700);$(".videobox").delay(2300).animate({opacity:1,bottom:"+=24px"},600);$(".social").delay(2600).animate({opacity:1,bottom:"+=12px"},900)}));$(".post-fb").click(function(){window.open("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href))});$(".post-tw").click(function(){window.open("http://twitter.com/home?status="+encodeURIComponent(window.location.href))});$("#next, #prev").click(function(){$("#a-list_slideshow").cycle("resume")});$(document).ready(function(){$(".sample-player").click(function(){$("#a-list_slideshow").cycle("toggle",true)});var slideshow=$("#a-list_slideshow").cycle({fx:"scrollHorz",speed:1200,fastOnEvent:1100,delay:0,timeout:6600,next:"#next",prev:"#prev",easing:"easeInOutExpo",pauseOnPagerHover:true,pager:"#mtnav",pagerAnchorBuilder:function(index,el){return'<a href="#">&bull;</a>'},slideExpr:"li",pagerEvent:null,before:onBefore,after:onAfter});function onBefore(){$(".dots").animate({opacity:0},250);$(".performs").animate({opacity:0,top:"-=12px"},240);$(".title").animate({opacity:0,top:"-=4px"},230);$(".player").animate({opacity:0},220);$("#next").animate({opacity:0,right:"-=30px"},190);$("#prev").animate({opacity:0,left:"-=30px"},190);samplePlayer.pauseAllPlayers()}function onAfter(){$(".dots").animate({opacity:0.9},1400);$(".performs").delay(400).animate({opacity:1,top:"+=12px"},800);$(".title").delay(1000).animate({opacity:1,top:"+=4px"},800);$(".player").delay(1400).animate({opacity:1},800);$("#next").delay(1400).animate({opacity:0.6,right:"+=30px"},500);$("#prev").delay(1400).animate({opacity:0.6,left:"+=30px"},500)}$("#next, #prev").hover(function(){$(this).animate({opacity:1},300)},function(){$(this).animate({opacity:0.6},300)})});$(window).load((function(){$("#a-list_slideshow").delay(200).animate({opacity:1},800)}));$(".performer").hover(function(){$(this).children(".ribbon").animate({top:"-=6px"},{queue:true,duration:80,easing:"easeInQuad"})},function(){$(this).children(".ribbon").animate({top:"+=6px"},{queue:true,duration:250,easing:"easeOutQuad"})})});
/*
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 * 
 * Audible chooses to use the MIT license
 * 
 */
define("ftx/lib/jquery.cookie",["ftx/lib/jquery-current"],function($){var pluses=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");for(var i=0,parts;(parts=cookies[i]&&cookies[i].split("="));i++){if(decode(parts.shift())===key){var cookie=decode(parts.join("="));return config.json?JSON.parse(cookie):cookie}}return null};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true}return false}});define("ftx/browser-detect",["ftx/lib/jquery-current","ftx/lib/jquery.cookie"],function($){var browserAgent=(navigator.userAgent).toLowerCase();var browser="";var version="";var os="";var tempArray=[];var locale="";var isMobile=false;var isIETouchEnabled=false;var isTouchEnabled=undefined;if(browserAgent.length!==0){if(browserAgent.match(/(ipod|iphone|ipad|android|silk)/i)){isMobile=true}else{if(browserAgent.indexOf("firefox")!=-1){browser="MOZ";version=browserAgent.slice(browserAgent.indexOf("firefox")).split("/")[1].split(".")[0]}else{if(browserAgent.indexOf("msie")!=-1||browserAgent.match(/trident.*rv/)){browser="IE";if(browserAgent.indexOf("msie")!=-1){version=document.documentMode}else{version=browserAgent.slice(browserAgent.indexOf("rv:")+3).split(".")[0]}if(browserAgent.indexOf("touch")!=-1){isIETouchEnabled=true}}else{if(browserAgent.indexOf("chrome")!=-1){browser="CHR";version=browserAgent.slice(browserAgent.indexOf("chrome")).split("/")[1].split(".")[0]}else{if(browserAgent.indexOf("opera")!=-1){browser="OPR";version=browserAgent.slice(browserAgent.indexOf("opera")).split("/")[1].split(".")[0]}else{if(browserAgent.indexOf("safari")!=-1){browser="SAF";version=browserAgent.slice(browserAgent.indexOf("safari")).split("/")[1].split(".")[0]}else{isMobile=true}}}}}}if(browserAgent.indexOf("mac os x")!=-1){os="OSX"}else{if(browserAgent.indexOf("windows")!=-1){os="WIN"}else{if(browserAgent.indexOf("linux")!=-1){os="LINUX"}else{if(browserAgent.indexOf("mac")!=-1){os="MAC"}}}}}locale=$.cookie("localeName");return{classString:browser+" "+browser+""+version+" "+os+" "+locale,browser:browser,version:version,locale:locale,os:os,isMobile:isMobile,isIETouchEnabled:isIETouchEnabled,setHTMLClasses:function(){$("html").addClass(this.classString)},isTouchEnabled:function(){if(isTouchEnabled===undefined){isTouchEnabled=("ontouchstart" in window)}return isTouchEnabled}}});define("flyout",["ftx/lib/jquery-current","ftx/browser-detect"],function($,bd){AdblEnv=(function(){var _defaultPadding=20;function getEnvironmentSetup(){var env={rightLimit:$(window).width()-_defaultPadding,bottomLimit:$(window).height()+$(window).scrollTop()-_defaultPadding,topLimit:$(window).scrollTop(),leftLimit:$(window).scrollLeft()};return env}return{getEnvironmentSetup:getEnvironmentSetup}})();AdblFlyoutEnv=(function(_Env){var _defaultLeftOffsetOnRight=10;var _defaultLeftOffsetOnLeft=-30;return{getFlyoutSetup:function(flyout,element,cfg){var elem={width:element.width(),topOffset:element.offset().top,leftOffset:element.offset().left};var fly={width:$(flyout).width(),height:$(flyout).height(),defaultLeft:elem.leftOffset+elem.width+_defaultLeftOffsetOnRight+cfg.left,defaultTop:elem.topOffset-cfg.top};var env=_Env.getEnvironmentSetup();return{flyout:fly,element:elem,env:env}},defaultLeftOffsetOnRight:_defaultLeftOffsetOnRight,defaultLeftOffsetOnLeft:_defaultLeftOffsetOnLeft}})(AdblEnv);AdblFlyout=(function(env){var _adbl_cloneId="modalCloneLocation";var _flyoutDiv;var _log_counter=0;function getFlyoutDiv(){if(typeof _flyoutDiv!=="undefined"){return _flyoutDiv}$("body").append("<div id="+_adbl_cloneId+" style='display:none'></div>");_flyoutDiv=$("#"+_adbl_cloneId);return _flyoutDiv}function calculatePosition(flyout,element,cfg){var fs=env.getFlyoutSetup(flyout,element,cfg);var flyoutWidth=fs.flyout.width;var flyoutHeight=fs.flyout.height;var elemLeftOffset=fs.element.leftOffset;var left=fs.flyout.defaultLeft;var defaultRightPoint=fs.flyout.defaultLeft+fs.flyout.width;var rightLimit=fs.env.rightLimit;var bottomLimit=fs.env.bottomLimit;var topLimit=fs.env.topLimit;var leftLimit=fs.env.leftLimit;var top=fs.flyout.defaultTop;var bottomFlyoutPoint=top+flyoutHeight;if(defaultRightPoint>rightLimit){var leftTemp=elemLeftOffset-flyoutWidth+env.defaultLeftOffsetOnLeft;if(leftTemp>=leftLimit){left=leftTemp}if(cfg.overlapElement&&(left+fs.flyout.width)<elemLeftOffset){left=fs.flyout.defaultLeft-(defaultRightPoint-rightLimit-env.defaultLeftOffsetOnLeft)}}if(bottomFlyoutPoint>bottomLimit){top=top-(bottomFlyoutPoint-bottomLimit)}if(top<topLimit){top=topLimit}return{top:top,left:left}}function showFlyout(element,evt,config,isClone){var target=$(evt.target);var clone=null;if(bd.isMobile&&element){var pdLink=element.find(".socialTile-pdLink");if(pdLink&&pdLink.length>0){pdLink.show();element.find(".socialTile-pdTitleLink").show();element.find(".socialTile-summary h3").hide()}}if(typeof isClone=="undefined"||isClone==null||isClone){var cfg=$.extend({top:0,left:0,overlapElement:false},config);clone=$(element).clone(true);var modalWindow=getFlyoutDiv();modalWindow.empty().append(clone);modalWindow.css({display:"block",visibility:"hidden"});var position=calculatePosition(clone,target,cfg);if(clone.css("display")=="none"){clone.css("display","block")}modalWindow.css({top:position.top,left:position.left,visibility:"visible",position:"absolute"})}else{if(!target.is(":visible")){target=target.parent()}var cfg=$.extend({top:element.height(),left:-1*target.width()-(element.width()/2),overlapElement:false},config);var position=calculatePosition(element,target,cfg);element.css({position:"absolute"});if(element.css("display")=="none"){element.css("display","block")}element.css({visibility:"visible"});offset={top:position.top,left:position.left};element.offset(offset)}}function hideFlyout(){$("#"+_adbl_cloneId).hide()}return{showFlyout:showFlyout,hideFlyout:hideFlyout,location:_adbl_cloneId,env:env}})(AdblFlyoutEnv);return AdblFlyout});define("audible-utils",[],function(){var pageRefMappings={adbl_pg_detail:"det_",adbl_pg_profile:"pr_",adbl_pg_cat:"cat_",adbl_pg_search:"sr_",adbl_pg_bs:"mp_bs_","adbl-pg-browse":"mp_browse",adbl_pg_nyt:"mp_nyt_",adbl_pg_nr:"mp_nr_",adbl_pg_home:"hp_",adbl_pg_library:"lib_",adbl_pg_wl:"wl_"};var _default_page="undef_";var _refTagAttr="data-refTag";var _adbl_pg="_none_";var jQueryScriptRegex=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;function _stripScripts(text){return text.replace(jQueryScriptRegex,"")}function getPageRefPrefix(){var page=(_adbl_pg=="_none_")?_adbl_pg=$("body").attr("id"):_adbl_pg;var pageRefMapping=pageRefMappings[page];if(pageRefMapping==undefined){pageRefMapping=_default_page}return pageRefMapping}function generateBaseTag(element,defaultTag){if(typeof defaultTag==="undefined"){defaultTag=""}var refTagAttr=$(element).attr(_refTagAttr);var root=(refTagAttr==undefined)?defaultTag:refTagAttr;var prefix=getPageRefPrefix();if(root.indexOf(prefix)==0){return root}return prefix+root}function callMetricsApp(element,optionalSuffix,optionalDefaultTag){var suffix=(optionalSuffix===undefined)?"":optionalSuffix;var reftag=generateBaseTag(element,optionalDefaultTag)+suffix;var dest="/ajax-refmarker/ref="+reftag;var postData={};$.post(dest,postData,function(data,textStatus){})}function coordinatesWithinElement(pageX,pageY,element){if(!pageX||!pageY||!element){return false}return(pageX>element.position().left&&pageX<element.position().left+element.width()&&pageY>element.position().top&&pageY<element.position().top+element.height())}var _flyoutTimer;function _activateRefmarkerTimer(element,optionalSuffix,optionaldefaultTag,callback){_deactivateRefmarkerTimer();_flyoutTimer=setTimeout(function(){callMetricsApp(element,optionalSuffix,optionaldefaultTag);if(callback&&typeof(callback)==="function"){callback()}},1000)}function _deactivateRefmarkerTimer(){clearTimeout(_flyoutTimer)}return{generateBaseTag:generateBaseTag,callMetricsApp:callMetricsApp,coordinatesWithinElement:coordinatesWithinElement,activateRefmarkerTimer:_activateRefmarkerTimer,deactivateRefmarkerTimer:_deactivateRefmarkerTimer,stripScripts:_stripScripts,loadingHtml:"<div class='adbl-more-loading' style='padding-top:20px;width:100%;text-align:center'><img src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif' /></div>"}});define("productFlyout",["ftx/lib/jquery-current","flyout","audible-utils","logger","client-side-metrics-jslogging","ftx/browser-detect"],function($,flyoutLib,util,Logger,csm,bd){function getOldOverlayDiv(target){var prodClassNames=["adbl-prod-long","adbl-prod-short","adbl-prod-result","adbl-prod-item","adbl-mod-content"];for(var i=0;i<prodClassNames.length;i++){var prodImages=target.parents("."+prodClassNames[i]);if(prodImages.length>0){return prodImages.children(".adbl-prod-overlay")}}return $([])}function getOverlayDiv(target){var tileContent=target.parents(".adbl-flyout-cont-marker").find(".adbl-flyout-marker");if(tileContent.size()>0){return tileContent}if(target.hasClass("adbl-prod-social-image")){tileContent=target.parents("li").find(".adbl-prod-social-overlay");if(tileContent.size()==0){tileContent=target.parents(".adbl-social-flyout-cont").find(".adbl-prod-social-overlay")}}else{if(target.hasClass("adbl-prod-image")){tileContent=target.parents("li").find(".adbl-prod-social-overlay")}else{if(target.hasClass("adbl-base-profile-img")){tileContent=target.parents("li").find(".adbl-userTile")}else{if(target.hasClass("adbl-flyout-icon")){tileContent=target.parent().find(".adbl-prod-social-overlay");if(tileContent.length==0){tileContent=target.parent().find(".adbl-prod-overlay")}}else{if(target.hasClass("adbl-prod-title")){tileContent=target.parent().find(".adbl-prod-overlay")}}}}}Logger.log("found tile: "+tileContent);return tileContent}function getWFSOverlayDiv(target){var asin=target.parents(".adbl-wfs-flyout-cont-marker").find(".adbl-wfs-flyout-click-trigger-marker").find(".adbl-wfs-flyout-click-trigger-marker").attr("data-asin");if(asin!=null){return $(".adbl-wireless-popup").parent().find(".adbl-wfs-overlay-asin-"+asin)}var tileContent=target.parents(".adbl-wfs-flyout-cont-marker").find(".adbl-wfs-flyout-marker");if(tileContent.length>0){return tileContent}var overlay=target.parents(".adbl-wfs-flyout-marker");return overlay}function chooseOverlayDiv(event){var target=$(event.target);var flyout=getOverlayDiv(target);var flyoutToUse=(flyout.length>0)?flyout:getOldOverlayDiv(target);return flyoutToUse}function chooseWFSOverlayDiv(event){var target=$(event.target);var flyout=getWFSOverlayDiv(target);return flyout}function showProductFlyout(event){var flyoutToUse=chooseOverlayDiv(event);if(flyoutToUse.length>0){var config={};var leftOffset=flyoutToUse.data("leftOffset");if(typeof leftOffset!=="undefined"){config.left=leftOffset}flyoutLib.showFlyout(flyoutToUse,event,config);util.activateRefmarkerTimer(flyoutToUse,"","prodFlyout",sitecatalystTracker);return true}else{return false}}function showWFSFlyout(event){if(typeof $(event.target).attr("class")!="undefined"&&$(event.target).attr("class").indexOf("adbl-wfs-flyout-click-close-trigger-marker")>=0){return false}if(($(event.target).is("a")&&(typeof $(event.target).attr("class")=="undefined"||$(event.target).attr("class").indexOf("adbl-wfs-flyout-click-trigger-marker")<0))||(typeof $(event.target).attr("class")!="undefined"&&$(event.target).attr("class").indexOf("adbl-lib-wfs-flyout-buybox-text")>=0)){return true}var flyoutToUse=chooseWFSOverlayDiv(event);if(flyoutToUse.length>0&&!flyoutToUse.is(":visible")){$(".adbl-wfs-flyout-marker:visible").hide();flyoutToUse.find(".adbl-help-icon-hover").hide();var config={overlapElement:true};flyoutLib.showFlyout(flyoutToUse,event,config,false);util.activateRefmarkerTimer(flyoutToUse,"","wfsFlyout",sitecatalystTracker);return true}else{return false}}function sitecatalystTracker(){if(typeof s_enabled!="undefined"){try{s_productImgHover()}catch(e){csm.logJSErrors(e,"/","s_productImgHover","ERROR")}}}function hideProductFlyout(){flyoutLib.hideFlyout();util.deactivateRefmarkerTimer()}function hideWFSFlyout(event){var flyoutToUse=chooseWFSOverlayDiv(event);if(flyoutToUse.length>0){flyoutToUse.hide()}util.deactivateRefmarkerTimer()}$().ready(function(){function productFlyoutHover(event){var type=event.type;if(type=="mouseenter"){showProductFlyout(event)}else{if(bd.isMobile){if(!util.coordinatesWithinElement(event.pageX,event.pageY,$("#"+flyoutLib.location))){hideProductFlyout()}}else{hideProductFlyout()}}}function wfsFlyoutHover(event){var type=event.type;if(type=="mouseenter"){showTip=window.setTimeout(function(){showWFSFlyout(event)},500)}else{window.clearTimeout(showTip);closeTip=window.setTimeout(function(){hideWFSFlyout(event)},200)}}function wfsFlyoutOpen(event){var type=event.type;if(type=="mouseenter"){window.clearTimeout(closeTip)}else{hideWFSFlyout(event)}}$("#adbl_page_content").delegate(".adbl-prod-image, .adbl-flyout-icon, .adbl-flyout-trigger-marker","mouseenter mouseleave",productFlyoutHover);$("#adbl_page_content").delegate(".adbl-wfs-flyout-trigger-marker","mouseenter mouseleave",wfsFlyoutHover);$("#adbl_page_content").delegate(".adbl-wfs-enabled-container","mouseenter",wfsFlyoutOpen);$("#adbl_page_content").delegate(".adbl-wfs-enabled-container","mouseleave",wfsFlyoutOpen);$("#adbl_page_content").delegate(".adbl-wfs-flyout-click-trigger-marker","click",showWFSFlyout);$("#adbl_page_content").delegate(".adbl-wfs-flyout-click-close-trigger-marker","click",hideWFSFlyout)});return{}});define("ftx/A9JSONClient",[],function(){var fullUrl;var noCacheIE;var headLoc;var scriptId;var scriptObj;var scriptCounter=1;var callService=function(url){fullUrl=url;noCacheIE="&noCacheIE="+(new Date()).getTime();headLoc=document.getElementsByTagName("head").item(0);scriptId="JscriptId"+scriptCounter++;buildScriptTag();addScriptTag()};var buildScriptTag=function(){scriptObj=document.createElement("script");scriptObj.setAttribute("type","text/javascript");scriptObj.setAttribute("charset","utf-8");scriptObj.setAttribute("src",fullUrl+noCacheIE);scriptObj.setAttribute("id",scriptId)};var removeScriptTag=function(){try{headLoc.removeChild(scriptObj)}catch(e){}};var addScriptTag=function(){headLoc.appendChild(scriptObj)};return{callSuggestionsService:callService,cleanup:removeScriptTag}});define("ftx/autocomplete-amd",["ftx/lib/jquery-current","ftx/A9JSONClient","i18n!nls/localizedstrings"],function($,A9,localizedstrings){var searchBox;var formElement;var hiddenInput;var submitButton;var disabledSubmitButtonImage;var names;var values;var noMatchesDivId;var imeEnabled=false;var enableMultiWordSearch=false;var suggestionServiceHost;var mktID;var supportedCategories;var updateCompletionFunction;var categoryDropDown;var inDepartmentText;var searchSuggestionsText=unescape(localizedstrings.search_suggestionsText);var useSpellCorrection;var useInlineCategories;var crtSel=-1;var suggestionList=[];var curSize=0;var curText="";var curTextSel="";var hideDelayTimerId=null;var searchSuggestionTimerId=null;var maxSuggestions=10;var maxCategorySuggestions=4;var suggestRequest=null;var suggestionsLoaded=false;var suggestDiv=null;var firstSuggestionFoundIndex=-1;var sugDivPrefix="issDiv";var clientId=localizedstrings.search_clientId;var marketplaceId=localizedstrings.search_acMktid;var searchAlias=localizedstrings.search_alias;var defaultAction="";var defaultDropDownVal;var insertedDropDownVal;var delayedDOMUpdate=false;var defaultSubmitButtonImage;var enableSubmitButtonImageToggling;var preprocessURL=null;var staticContent=false;var initStaticSearchSuggest=function(searchBoxSelector,formSelector,hiddenInputSelector,submitButtonSelector,disabledSubmitButtonImg,suggestionNames,suggestionValues,noMatchesId,ime,multiWordSearch,preprocURL){staticContent=true;searchBox=$(searchBoxSelector);formElement=$(formSelector);if(hiddenInputSelector){hiddenInput=$(hiddenInputSelector)}if(submitButtonSelector){submitButton=$(submitButtonSelector);submitButton.attr("disabled","disabled");defaultSubmitButtonImage=submitButton.attr("src")}names=suggestionNames;values=suggestionValues;noMatchesDivId=noMatchesId;imeEnabled=ime;enableMultiWordSearch=multiWordSearch;disabledSubmitButtonImage=disabledSubmitButtonImg;preprocessURL=preprocURL;enableSubmitButtonImageToggling=(defaultSubmitButtonImage&&disabledSubmitButtonImage)?1:0;searchBox.removeAttr("style");initSuggestions()};var initDynamicSearchSuggest=function(searchBoxSelector,formSelector,categoryDropDownSelector,serviceHost,marketplace,categories,suggestionsAvailableEventHandler,departmentText,suggestionsText,enableSpellCorrection,enableInlineSuggestions){staticContent=false;searchBox=$(searchBoxSelector);formElement=$(formSelector);defaultAction=formElement.attr("action");suggestionServiceHost=serviceHost;mktID=marketplace;imeEnabled=(mktID==6||mktID==3240);supportedCategories=categories;updateCompletionFunction=suggestionsAvailableEventHandler;inDepartmentText=departmentText;searchSuggestionsText=suggestionsText;useSpellCorrection=enableSpellCorrection;useInlineCategories=enableInlineSuggestions;initSuggestions()};var initSuggestions=function(){if(suggestionsLoaded){return}if(searchBox.length>0){curText=searchBox.val();searchBox.attr("autocomplete","off").keydown(onKeyDownEvent).keyup(onKeyUpEvent).keypress(onKeyPressedEvent).blur(onFocusLost);$(window).resize(onWindowResized);suggestionsLoaded=true}if(imeEnabled){window.setInterval(function(){var val=searchBox.val();if(val!=curText&&val!=curTextSel){curText=val;computeSuggestions()}},20)}};var initEmpty=function(event){};var onKeyDownEvent=function(event){var key=event.keyCode;switch(key){case 40:moveDown();event.stopPropagation();break;case 38:moveUp();event.stopPropagation();break}};var onKeyUpEvent=function(event){var key=event.keyCode;switch(key){case 13:if(!imeEnabled){hideSuggestionsDiv()}break;case 40:break;case 38:break;case 37:break;case 39:break;default:var val=searchBox.val();if(val!=curText){curText=val;computeSuggestions()}break}};var onKeyPressedEvent=function(event){if(event.keyCode==27&&getSearchSuggest().style.display!="none"){setSuggestionHideTimeout();crtSel=-1;updateCrtSuggestion();return false}if(event.keyCode==13&&submitButton&&submitButton.attr("disabled")){return false}};var onFocusLost=function(event){setSuggestionHideTimeout()};var onWindowResized=function(){var ss=getSearchSuggest();ss.style.width=searchBox.outerWidth()-3+"px";ss.style.left=searchBox.position().left};var moveDown=function(){if(curSize<=0){return}try{unhighlightCurrentSuggestion();if(crtSel>=curSize-1){crtSel=-1}else{++crtSel}highlightCurrentSuggestion(true)}catch(ex){}};var moveUp=function(){if(curSize<=0){return}try{unhighlightCurrentSuggestion();if(crtSel<0){crtSel=curSize-1}else{--crtSel}highlightCurrentSuggestion(true)}catch(ex){}};var findMatchesBin=function(){firstSuggestionFoundIndex=-1;var low=0;var high=names.length-1;var mid=-1;var dataPrefix="";var crtPrefix=curText.toLowerCase();while(low<=high){mid=(low+high)/2;mid=Math.floor(mid);dataPrefix=(names[mid].substr(0,curText.length)).toLowerCase();if(dataPrefix<crtPrefix){low=mid+1;continue}if(dataPrefix>crtPrefix){high=mid-1;continue}if(dataPrefix==crtPrefix){firstSuggestionFoundIndex=mid;high=mid-1;continue}}if(firstSuggestionFoundIndex!=-1){var i=firstSuggestionFoundIndex;do{var sg=new Object();sg.keyword=names[i++];suggestionList.push(sg)}while(names[i]&&(names[i].substr(0,curText.length)).toLowerCase()==crtPrefix)}curSize=suggestionList.length};var findMatchesSeq=function(){suggestionList=[];firstSuggestionFoundIndex=-1;var crtPrefix=curText.toLowerCase();var rexp=new RegExp("(^|(?:\\s))"+crtPrefix,"i");var i=0;var sg;for(i=0;i<names.length;i++){if(names[i].match(rexp)){sg=new Object();sg.keyword=names[i];suggestionList.push(sg);if(firstSuggestionFoundIndex==-1){firstSuggestionFoundIndex=i}}}curSize=suggestionList.length};var updateSuggestions=function(){curText=searchBox.val();if(curText.length==0){hideSuggestionsDiv();hideNoMatches();return}if(enableMultiWordSearch){findMatchesSeq()}else{findMatchesBin()}displaySuggestions(curText);checkForExactMatch()};var checkForExactMatch=function(){if(exactMatchFound()){if(hiddenInput&&hiddenInput.length>0){hiddenInput.attr("value",values[firstSuggestionFoundIndex])}else{updateForm(firstSuggestionFoundIndex)}submitButton.attr("disabled","")}else{submitButton.attr("disabled","disabled")}};var exactMatchFound=function(){return(suggestionList.length>0&&suggestionList[0].keyword.toLowerCase()==curText.toLowerCase())};var displaySuggestions=function(crtPrefix){var ss=getSearchSuggest();ss.innerHTML="";hideNoMatches();ss.style.display="";var sugDivId;var lineText;var line;for(i=0;i<curSize;++i){line=suggestionList[i];sugDivId=sugDivPrefix+i;var marginStyle="";if(line.alias){lineText=getFormattedCategoryLine(line,crtPrefix);if(!useInlineCategories){marginStyle=' style="margin-left:12px;"'}}else{lineText=getFormattedSuggestionLine(line.keyword,crtPrefix)}var suggest='<div id="'+sugDivId+'" class="suggest_link"'+marginStyle+">"+lineText+"</div>";ss.innerHTML+=suggest}var advCls="advSr";if(suggestionList.length>0){advCls+=" topBorder"}var suggest='<div id="advsr" class="'+advCls+'"> <a href="/advsr">'+unescape(localizedstrings.advanced_search)+"</a></div>";ss.innerHTML+=suggest;if(categoryDropDown&&categoryDropDown.size()>0){defaultDropDownVal=categoryDropDown.val()}for(i=0;i<curSize;++i){sugDivId=sugDivPrefix+i;$("#"+sugDivId).mouseover(suggestOver).mouseout(suggestOut).click(setSearchByIndex)}};var showNoMatches=function(){if(noMatchesDivId){var ss=getSearchSuggest();ss.innerHTML="";var nmDiv=$("#"+noMatchesDivId);$(ss).append(nmDiv.clone().attr("class","suggest_link").css({display:"block"}));$(ss).show();if(enableSubmitButtonImageToggling){submitButton.attr("src",disabledSubmitButtonImage)}}else{hideSuggestionsDiv()}};var hideNoMatches=function(){if(noMatchesDivId){$("#"+noMatchesDivId).hide();if(enableSubmitButtonImageToggling){submitButton.attr("src",defaultSubmitButtonImage)}}};var setSearchByIndex=function(){var divId=this.id;crtSel=divId.substr(6);updateCrtSuggestion();getSearchSuggest().innerHTML="";if(!delayedDOMUpdate){formElement.submit()}else{window.setTimeout(function(){formElement.submit()},10)}};var updateCrtSuggestion=function(){var val=curText;var alias,categoryName;if(crtSel>=0){var s=suggestionList[crtSel];val=s.keyword;alias=s.alias;categoryName=s.categoryName}searchBox.val(val);curTextSel=val;if(staticContent){setSearch(crtSel)}else{updateCategoryDropDown(alias,categoryName);setDynamicSearch(crtSel,alias)}};var setSearch=function(indexInList){if(indexInList>=0){var valuesIndex=parseInt(firstSuggestionFoundIndex)+parseInt(indexInList);if(hiddenInput&&hiddenInput.length>0){hiddenInput.attr("value",values[valuesIndex])}else{updateForm(valuesIndex)}submitButton.attr("disabled","")}else{checkForExactMatch()}};var setDynamicSearch=function(indexInList,alias){var prefixElems=$("input[name^=sprefix]");if(indexInList>=0){var issMode;if(alias){issMode="ss_c"}else{if(useSpellCorrection&&getPrefixPos(suggestionList[indexInList].keyword,curText)==-1){issMode="ss_sc"}else{issMode="ss_i"}}var refMarker="nb_sb_"+issMode+"_"+indexInList+"_"+curText.length;formElement.append('<input type=hidden name=sprefixRefmarker value="'+refMarker+'" />');if(prefixElems.length>0){prefixElems.attr("value",curText)}else{formElement.append('<input type=hidden name=sprefix value="'+curText+'" />')}}else{prefixElems.remove()}};var suggestOver=function(event){this.style.cursor="default";unhighlightCurrentSuggestion();crtSel=this.id.substr(6);highlightCurrentSuggestion(false)};var suggestOut=function(el,event){unhighlightSuggestion($(this))};var highlightSuggestion=function(suggestion){suggestion.removeClass("suggest_link");suggestion.addClass("suggest_link_over")};var unhighlightSuggestion=function(suggestion){suggestion.removeClass("suggest_link_over");suggestion.addClass("suggest_link")};var highlightCurrentSuggestion=function(updateSearchBox){if(updateSearchBox){updateCrtSuggestion()}var selection=$("#"+sugDivPrefix+crtSel);if(selection.size()>0){highlightSuggestion(selection)}};var unhighlightCurrentSuggestion=function(){var selection=$("#"+sugDivPrefix+crtSel);if(selection.size()>0){unhighlightSuggestion(selection)}};var updateCategoryDropDown=function(alias,categoryName){if(!categoryDropDown){return}var dropDownValToRemove=insertedDropDownVal;var val;if(alias){val="search-alias="+alias}else{val=defaultDropDownVal}if(val==insertedDropDownVal||defaultDropDownVal==insertedDropDownVal){dropDownValToRemove=null}if(alias){var sel=categoryDropDown.find('option[value="'+val+'"]');insertedDropDownVal=null;if(sel.size()==0){categoryDropDown.append('<option value="'+val+'">'+categoryName+"</option>");insertedDropDownVal=val}}try{delayedDOMUpdate=false;if($(".dropdownContents")){changeDropdownSelection(val,categoryName,true)}categoryDropDown.val(val)}catch(e){delayedDOMUpdate=true}if(dropDownValToRemove){categoryDropDown.find('option[value="'+dropDownValToRemove+'"]').remove()}};var getPrefixPos=function(curSuggestion,crtPrefix){var lcPrefix=crtPrefix.toLowerCase();var lcSuggestion=curSuggestion.toLowerCase();return lcSuggestion.indexOf(lcPrefix)};var getFormattedSuggestionLine=function(curSuggestion,crtPrefix){var start=getPrefixPos(curSuggestion,crtPrefix);if(start==-1){return curSuggestion}var len=crtPrefix.length;return curSuggestion.substr(0,start)+"<b>"+curSuggestion.substr(start,len)+"</b>"+curSuggestion.substr(start+len)};var getFormattedCategoryLine=function(categoryLine,crtPrefix){if(!inDepartmentText||inDepartmentText.length==0){return categoryLine.categoryName}var departmentText=inDepartmentText.replace(/{department}/g,categoryLine.categoryName);if(useInlineCategories){departmentText=getFormattedSuggestionLine(categoryLine.keyword,crtPrefix)+' <span class="suggest_category">'+departmentText+"<span>"}return departmentText};var setSuggestionHideTimeout=function(){hideDelayTimerId=setTimeout(function(){return(function(){hideDelayTimerId=null;hideSuggestionsDiv()})}(),300)};var computeSuggestions=function(){if(staticContent){suggestionList=[];updateSuggestions();searchSuggestionTimerId=null;crtSel=-1}else{setSearchSuggestionTimeout()}};var setSearchSuggestionTimeout=function(){if(searchSuggestionTimerId){clearTimeout(searchSuggestionTimerId);searchSuggestionTimerId=null}searchSuggestionTimerId=setTimeout(function(){return(function(){searchJSONSuggest();searchSuggestionTimerId=null;crtSel=-1})}(),100)};var getSuggestionsDivTitle=function(){if(searchSuggestionsText){return searchSuggestionsText}return"Search suggestions"};var hideSuggestionsDiv=function(){curSize=0;var ss=getSearchSuggest();ss.innerHTML="";ss.style.display="none";crtSel=-1};var updateForm=function(index){var url=values[index];if(url==""){url=location.href}var formData=getFormParams(url);cleanForm();populateForm(formData)};var getFormParams=function(url){var formData=new Object;if(preprocessURL){url=preprocessURL(url)}var splitUrl=url.split("?");formData.uri=splitUrl[0];formData.formParams=[];var query=splitUrl[1];var params=query.split("&");for(var i=0;i<params.length;i++){var pair=params[i].split("=");var param=new Object;param.name=pair[0];param.value=pair[1].replace(/\+/g," ");formData.formParams.push(param)}return formData};var cleanForm=function(){formElement.find(".frmDynamic").remove()};var populateForm=function(formData){formElement.attr("action",formData.uri);for(var i=0;i<formData.formParams.length;i++){var param=formData.formParams[i];formElement.append('<input class="frmDynamic" type="hidden" name="'+param.name+'" value="'+unescape(param.value)+'"/>')}};var createSuggestionDiv=function(searchBoxElem){var suggestionDiv=document.createElement("div");suggestionDiv.className="search_suggestion_div";suggestionDiv.style.left=searchBoxElem.position().left+"px";suggestionDiv.style.top=searchBoxElem.position().top+searchBoxElem.outerHeight()+-2+"px";suggestionDiv.style.width=searchBoxElem.outerWidth()+"px";suggestionDiv.style.display="none";suggestionDiv.id="srch_sggst";searchBoxElem.after(suggestionDiv);return suggestionDiv};var getSearchSuggest=function(){if(!suggestDiv){suggestDiv=createSuggestionDiv(searchBox)}return suggestDiv};var supportedSearchAlias=function(alias){var found=0;if(supportedCategories){for(i=0;i<supportedCategories.length;i++){if(alias==supportedCategories[i]){found=1;break}}}return found};var combineSuggestions=function(crtSuggestions,crtCategorySuggestions){var combinedList=[];var i=0;var j=0;var n=crtSuggestions.length;var m=crtCategorySuggestions.length;while(i+j<maxSuggestions&&i<n){var sg=new Object();sg.keyword=crtSuggestions[i];combinedList.push(sg);if(i==0&&m>0){while(j<m&&j<maxCategorySuggestions){sg=new Object();sg.keyword=crtSuggestions[i];sg.alias=crtCategorySuggestions[j].alias;sg.categoryName=crtCategorySuggestions[j].name;combinedList.push(sg);++j}}++i}curSize=combinedList.length;return combinedList};var searchJSONSuggest=function(){if(suggestRequest){suggestRequest.cleanup()}curText=searchBox.val();if(curText.length==0){hideSuggestionsDiv();return}var str=encodeURIComponent(curText);var suggestUrl=window.parent.document.location.protocol+"//"+suggestionServiceHost+"?method=completion&q="+str+"&search-alias="+searchAlias+"&client="+clientId+"&mkt="+marketplaceId+"&x="+updateCompletionFunction;if(useSpellCorrection){suggestUrl+="&sc=1"}suggestRequest=A9;suggestRequest.callSuggestionsService(suggestUrl)};var clearautocomplete=function(){var acResultsDiv=$("#srch_sggst");acResultsDiv.html("");acResultsDiv.hide()};var updateCompletion=function(){if(suggestRequest){suggestRequest.cleanup();suggestRequest=null}var crtPrefix=completion[0];var crtSuggestions=completion[1];var crtCategorySuggestions=[];if(completion.length>2){var extraData=completion[2];if(extraData!=null&&extraData.length>0&&extraData[0].nodes!=null){crtCategorySuggestions=extraData[0].nodes}}suggestionList=combineSuggestions(crtSuggestions,crtCategorySuggestions);displaySuggestions(crtPrefix)};return{initStaticSuggestions:initStaticSearchSuggest,initDynamicSuggestions:initDynamicSearchSuggest,updateAutoCompletion:updateCompletion,init:initEmpty}});define("write-error",["ftx/lib/jquery-current"],function($){return{write:function(errorMsg,container){if($(".adbl-error").length>0){$(".adbl-error").html(errorMsg)}else{var errorContainer=(container!=null&&container.length>0)?container:$("#adbl_center_column");errorContainer.prepend('<div class="adbl-error">'+errorMsg+"</div>")}}}});define("page-action",["ftx/lib/jquery-current"],function($){return{getAction:function(){return $('input[name="appAction"]').val()},getToken:function(){return $('input[name="appActionToken"]').val()}}});define("cart-item-count-monitor",["ftx/lib/jquery-current"],function($){return{updateCartItemCount:function(val){var cartNumObj=$("#mast-member-cart-num");cartNumObj.html(val);if(val>0){cartNumObj.show()}else{cartNumObj.hide()}}}});var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();if(typeof define==="function"&&define.amd){define("swfobject",[],function(){return swfobject})}define("ajax-refmarker",["ftx/lib/jquery-current","logger"],function($,logger){function callAudibleAjaxRefmarker(ele){if(ele.length>0){var ref=ele.data("refmarker");if(ref.length>0){var url="/ajax-refmarker"+$.trim(ref);$.get(url).done(function(){logger.log("recording refmarker success:"+url)}).fail(function(){logger.log("recording refmarker error:"+url)})}}}function buildRefMarker(featureCode,slotCode,counter){if(arguments.length<1){logger.log("buildRefMarker: feature code is required.");return""}else{var parts=["a",(buildPageCodeFromUrl())];if(typeof slotCode==="string"){parts.push(slotCode)}if(typeof counter==="string"){parts.push(counter)}parts.push(featureCode);return parts.join("_").substring(0,32)}}function buildRefMarkerAndRecord(){postRefMarker(buildRefMarker.apply(undefined,arguments))}function buildPageCodeFromUrl(){var path=window.location.pathname;path=path.replace(/(\/ref[^&]+)/,"");var refMarker=path.replace("/","");refMarker=refMarker.replace(/\//g,"_");if($.trim(refMarker)===""){refMarker="home"}return refMarker}function postRefMarker(ref){if(ref.length>0){var url="/ajax-refmarker"+(ref.indexOf("/ref=")!=-1?"":"/ref=")+$.trim(ref);$.get(url).done(function(){logger.log("recording refmarker success:"+url)}).fail(function(){logger.log("recording refmarker error:"+url)})}}return{record:callAudibleAjaxRefmarker,buildPageCode:buildPageCodeFromUrl,buildAndRecord:buildRefMarkerAndRecord,post:postRefMarker,build:buildRefMarker}});define("audible-global-new",["ftx/lib/jquery-current","client-side-metrics-jslogging","i18n!nls/localizedstrings","isValid","ftx/autocomplete-amd","write-error","page-action","cart-item-count-monitor","swfobject","ajax-refmarker"],function($,csmJsLogging,localstrings,isValid,AutoComplete,writeError,pageAction,cartItemCountMonitor,swf,ajaxRefmarker){window.onerror=csmJsLogging.setLogging;var isPopupOpened=false;var popupArgs="";var exitLinkFollowed=false;var prevEleFocus;var LOADING_STR=unescape(localstrings.audible_global_loading);var ccValidationParams={adbl_address_line_1:{maxLen:64,minLen:1,type:"string"},adbl_address_line_2:{maxLen:64,minLen:1,type:"string"},adbl_address_line_1_optional:{optional:true,maxLen:64,minLen:1,type:"string"},adbl_address_line_2_optional:{optional:true,maxLen:64,minLen:1,type:"string"},adbl_cc_name:{type:"alpha",maxLen:50},adbl_cc_type:{type:"alpha",maxLen:50},adbl_cc_num:{type:"credit-card"},adbl_month:{label:unescape(localstrings.audible_global_month)},adbl_year:{label:unescape(localstrings.audible_global_year)},adbl_state:{},adbl_zip:{type:"zipcode",maxLen:10},adbl_city:{type:"alpha",maxLen:64},adbl_country:{},adbl_phone:{type:"phone"},adbl_phone_optional:{optional:true,type:"phone"}};var baValidationParams={addBankAccountNumber:{type:"bank",maxLen:11},addBankAccountRoutingNumber:{type:"bankRouting",maxLen:8},acctHolderName:{type:"alpha",maxLen:50},bankCountry:{},adbl_address_line_1:{maxLen:64,minLen:1,type:"string"},adbl_address_line_2:{maxLen:64,minLen:1,type:"string"},adbl_address_line_1_optional:{optional:true,maxLen:64,minLen:1,type:"string"},adbl_address_line_2_optional:{optional:true,maxLen:64,minLen:1,type:"string"},adbl_zip:{type:"zipcode",maxLen:10},adbl_city:{type:"alpha",maxLen:64},adbl_state:{},adbl_country:{},adbl_phone:{type:"phone"},adbl_phone_optional:{optional:true,type:"phone"}};function closePopup(){if(popupArgs){$("#"+popupArgs.containerId).css("display","none");isPopupOpened=false;$("body").off("click",".adbl-preorder-cart-no-popup, .adbl-add-cart-no-popup",addToShoppingCartFromPopup)}}function outsideClickHandler(evt){var target=$(evt.target);if(isPopupOpened&&!target.hasClass(popupArgs.clsOriginal)&&!target.hasClass(popupArgs.clsTabImg)&&!(target.parents("."+popupArgs.clsBottom).length>0)&&!target.hasClass(popupArgs.clsBottom)){closePopup()}}function openCartPopup(){isPopupOpened=true;if(popupArgs){var cssProperties=getCartPopupCSSProps();if($("#"+popupArgs.containerId).length==0){var strBuilder=[];strBuilder.push('<div id="'+popupArgs.containerId+'">');strBuilder.push('<div class="'+popupArgs.clsTop+'">');strBuilder.push('<span class="'+popupArgs.clsTabBg+'">');strBuilder.push('<span class="'+popupArgs.clsBlank+'"></span></span>');strBuilder.push('</div><div class="'+popupArgs.clsBottom+'">');strBuilder.push('<a href="javascript:void(0)" class="'+popupArgs.clsCloseBtn+'"></a>');strBuilder.push('<div id="'+popupArgs.contentId+'">');strBuilder.push(popupArgs.content+"</div></div></div>");$(strBuilder.join("")).appendTo("body").css(cssProperties)}else{$("#"+popupArgs.contentId).html(popupArgs.content);$("#"+popupArgs.containerId).css(cssProperties);$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsBlank+'"></span>')}}}function getCartPopupCSSProps(){var targetLocation;targetLocation=popupArgs.srcBtn.offset();targetLocation.top=targetLocation.top-(popupArgs.containerOffsetY?popupArgs.containerOffsetY:10);targetLocation.left=targetLocation.left-(popupArgs.containerOffsetX?popupArgs.containerOffsetX:70);var cssProperties={display:"block",position:"absolute",top:targetLocation.top,left:targetLocation.left,"z-index":2000};return cssProperties}function fixCartPopupPositionOnResize(evt){if($("#"+popupArgs.containerId).length>0&&isPopupOpened){$("#"+popupArgs.containerId).css(getCartPopupCSSProps())}}function checkForExistingPopup(){if(isPopupOpened){closePopup()}}function isMiddleMouseClickEvent(evt){return evt.which==2}function preorderShortAddToShoppingCart(evt){if(isMiddleMouseClickEvent(evt)){return false}checkForExistingPopup();var target=$(evt.target);var clsOriginal=target.attr("class");popupArgs={srcBtn:target,clsTop:"adbl-preorder-popup-top",clsTabBg:"adbl-preorder-short-bg",clsTabImg:"adbl-in-cart-po-short",clsBottom:"adbl-cart-popup-po-bottom",clsCloseBtn:"adbl-popup-po-close",clsOriginal:clsOriginal,containerId:"adbl-cart-popup-po-short",contentId:"adbl_cart_popup_po_short_content",containerOffsetX:("90"),containerOffsetY:"8",content:LOADING_STR,clsBlank:"adbl-empty-btn-popup-short"};if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddItemToCart(target)},0);return false}function preorderWideAddToShoppingCart(evt){if(isMiddleMouseClickEvent(evt)){return false}checkForExistingPopup();var target=$(evt.target);var clsOriginal=target.attr("class");popupArgs={srcBtn:target,clsTop:"adbl-preorder-popup-top",clsTabBg:"adbl-preorder-wide-bg",clsTabImg:"adbl-in-cart-po-wide",clsBottom:"adbl-cart-popup-po-bottom",clsCloseBtn:"adbl-popup-po-close",clsOriginal:clsOriginal,containerId:"adbl-cart-popup-po-wide",contentId:"adbl_cart_popup_po_wide_content",containerOffsetX:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"67":"69"),containerOffsetY:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"9":"13"),content:LOADING_STR,clsBlank:"adbl-empty-btn-popup-short"};if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddItemToCart(target)},0);return false}function addToShoppingCart(evt){if(isMiddleMouseClickEvent(evt)){return false}checkForExistingPopup();var target=$(evt.target);var clsOriginal=target.attr("class");popupArgs={srcBtn:target,clsTop:"adbl-cart-popup-top",clsTabBg:"adbl-add-cart-bg",clsTabImg:"adbl-in-cart",clsBottom:"adbl-cart-popup-bottom",clsCloseBtn:"adbl-popup-close",clsOriginal:clsOriginal,containerId:"adbl_cart_popup",contentId:"adbl_cart_popup_content",containerOffsetX:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"67":"69"),containerOffsetY:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"9":"13"),content:LOADING_STR,clsBlank:"adbl-empty-btn-popup"};if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddItemToCart(target)},0);return false}function addToShoppingCartFromPopup(evt){evt.preventDefault();var target=$(evt.target);$("#"+popupArgs.contentId).find(".adbl-popup-msg").each(function(){$(this).html(unescape(localstrings.audible_global_adding))});ajaxAddItemToCart(target,true)}function buyShort(evt){var target=$(evt.target);var extraParam="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken();target.attr("href",target.attr("href")+extraParam)}function ajaxAddItemToCart(targetElm,useExistingPopup){var targetBtn=targetElm.context.className;if(targetBtn=="adbl-in-cart"||targetBtn=="adbl-in-cart-short"||targetBtn=="adbl-in-cart-long"){content=unescape(localstrings.audible_global_alreadyAddToCart);$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsTabImg+'"></span>');showInCart();if(useExistingPopup){$("#"+popupArgs.contentId).find(".adbl-popup-msg").each(function(){$(this).html(content)})}else{content='<div class="adbl-popup-msg">'+content+"</div>";content+='<div class="adbl-link-cont"><a href="/mycart" class="adbl-link">'+unescape(localstrings.audible_global_viewCart)+"</a></div>";$("#"+popupArgs.contentId).html(content)}return}var dest=targetElm.attr("href")||"";dest+="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken();$.get(dest,function(data,textStatus){var showError=false;var content="";if(textStatus=="success"){var giftLink=$(targetElm).parents(".adbl-prod-add-cont").find(".adbl-gift-link");if(giftLink.length==1){giftLink.remove()}try{var respObj;if(typeof data=="object"){respObj=data}else{respObj=eval("("+data+")")}}catch(ex){showError=true}if(respObj.status=="success"){content=unescape(localstrings.audible_global_addToCart);$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsTabImg+'"></span>');showInCart();if(typeof s_enabled!="undefined"){try{s_cartAdd(getURLParameter(dest,"asin"),"","",getURLParameterIncludingPath(dest,"ref"),"standard")}catch(e){csmJsLogging.logJSErrors(e,targetElm.attr("href"),"s_cartAdd","ERROR")}}}else{if(respObj.status=="duplicate"){content=unescape(localstrings.audible_global_alreadyAddToCart);$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsTabImg+'"></span>');showInCart()}else{if(respObj.status=="purchased"){content=unescape(localstrings.audible_global_purchased);$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsOriginal+'"></span>')}else{if(respObj.status=="redirect"){window.location.href=respObj.redirectUrl;return}else{showError=true}}}}}else{showError=true}if(showError){content=unescape(localstrings.audible_global_unableToAdd)}if(useExistingPopup){$("#"+popupArgs.contentId).find(".adbl-popup-msg").each(function(){$(this).html(content)})}else{content='<div class="adbl-popup-msg">'+content+"</div>";content+='<div class="adbl-link-cont"><a href="/mycart" class="adbl-link">'+unescape(localstrings.audible_global_viewCart)+"</a></div>";$("#"+popupArgs.contentId).html(content)}if(respObj.status=="success"){var itemtext="Item";cartItemCountMonitor.updateCartItemCount(respObj.numItems);if(respObj.numItems>1){itemtext="Items"}$(".adbl-cart-desc").html("("+respObj.numItems+" "+itemtext+")")}})}function showInCart(){popupArgs.srcBtn.removeClass(popupArgs.clsOriginal);popupArgs.srcBtn.addClass(popupArgs.clsTabImg)}function isCartPopupOpen(targetElem){return($("#"+popupArgs.containerId).is(":visible"))}function addToCartShort(evt){if(isMiddleMouseClickEvent(evt)){return false}var target=$(evt.target);checkForExistingPopup();popupArgs={srcBtn:target,clsTop:"adbl-cart-popup-top",clsTabBg:"adbl-cart-short-bg",clsTabImg:"adbl-in-cart-short",clsBottom:"adbl-cart-popup-bottom",clsCloseBtn:"adbl-popup-close",clsOriginal:"adbl-cart-short",containerId:"adbl_cart_popup_short",contentId:"adbl_cart_popup_content_short",containerOffsetX:("90"),containerOffsetY:"8",content:LOADING_STR,clsBlank:"adbl-empty-btn-popup-short"};if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddItemToCart(target)},0);return false}function addToCartLong(evt){checkForExistingPopup();var target=$(evt.target);if(target.hasClass("adbl-cart-long")||target.hasClass("adbl-in-cart-long")){popupArgs={srcBtn:target,clsTop:"adbl-cart-popup-top",clsTabBg:"adbl-cart-long-bg",clsTabImg:"adbl-in-cart-long",clsBottom:"adbl-cart-popup-bottom",clsCloseBtn:"adbl-popup-close",clsOriginal:"adbl-cart-long",containerId:"adbl_cart_popup_long",contentId:"adbl_cart_popup_content_long",containerOffsetX:("32"),containerOffsetY:"11",content:LOADING_STR,clsBlank:"adbl-empty-btn-popup-long"}}else{if(target.hasClass("adbl-cart-long-firstchapter")||target.hasClass("adbl-in-cart-long-firstchapter")){popupArgs={srcBtn:target,clsTop:"adbl-cart-popup-top",clsTabBg:"adbl-add-cart-bg",clsTabImg:"adbl-in-cart-long-firstchapter",clsBottom:"adbl-cart-popup-bottom",clsCloseBtn:"adbl-popup-close",clsOriginal:"adbl-cart-long-firstchapter",containerId:"adbl_cart_popup",contentId:"adbl_cart_popup_content",containerOffsetX:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"67":"69"),containerOffsetY:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"9":"13"),content:LOADING_STR,clsBlank:"adbl-empty-btn-popup"}}}if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddItemToCart(target)},0);return false}function addToWishList(evt){if(isMiddleMouseClickEvent(evt)){return false}evt.preventDefault();checkForExistingPopup();var target=$(evt.target);popupArgs={srcBtn:target,clsTop:"adbl-wish-list-popup-top",clsTabBg:"adbl-add-wish-list-bg",clsTabImg:"adbl-in-wish-list",clsBottom:"adbl-wish-list-popup-bottom",clsCloseBtn:"adbl-wish-list-popup-close",clsOriginal:"adbl-add-wish-list",containerId:"adbl_wish_list_popup",contentId:"adbl_wish_list_popup_content",containerOffsetX:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"67":"69"),containerOffsetY:(($.browser.msie&&($.browser.version.substring(0,1)<8))?"9":"14"),content:LOADING_STR,clsBlank:"adbl-empty-btn-popup"};openCartPopup();window.setTimeout(function(){ajaxAddToWishList(target)},0);return false}function ajaxAddToWishList(target){var dest=target.attr("href")||"";var asin=getURLParameter(dest,"asin");dest+="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken()+"&totalAsinsPerPage=4";$.get(dest,function(data,statusText){if(data){try{var dataObj=eval("("+data+")");content=buildWishListPopupContent(dataObj,asin,3)}catch(ex){content=buildWishListErrorContent()}$("#"+popupArgs.contentId).html(content);$("body").on("click",".adbl-preorder-cart-no-popup, .adbl-add-cart-no-popup",addToShoppingCartFromPopup)}})}function buildWishListErrorContent(){var cont=['<div class="adbl-popup-msg">'];cont.push(unescape(localstrings.audible_global_errorAddingToWishlist));cont.push("</div>");return cont.join("")}function buildWishListPopupContent(data,asinJustAdded,noItemsToDisplay){var cont=['<div class="adbl-popup-msg">'];if(data.status){if(data.status=="Success"){cont.push(unescape(localstrings.audible_global_addToWishlist));$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsTabImg+'"></span>');showInCart();if(typeof s_enabled!="undefined"){try{s_addToWishList(asinJustAdded)}catch(e){csmJsLogging.logJSErrors(e,"/wishlistajax","s_addToWishList","ERROR")}}}else{if(data.status=="Duplicate"){cont.push(unescape(localstrings.audible_global_alreadyAddToWishlist));$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsTabImg+'"></span>');showInCart()}else{if(data.status=="IsInLibrary"){cont.push(unescape(localstrings.audible_global_alreadyInLibrary));$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsOriginal+'"></span>')}else{if(data.status=="noGeo"){cont.push(unescape(localstrings.audible_global_notAuthorizedToSell));$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsOriginal+'"></span>')}else{if(data.status=="Failure"){cont.push(unescape(localstrings.audible_global_errorAddingToWishlist));$("."+popupArgs.clsTabBg).html('<span class="'+popupArgs.clsOriginal+'"></span>')}}}}}cont.push("</div>");cont.push('<a class="adbl-view-wish-list adbl-link" href="/wl">'+unescape(localstrings.audible_global_goToWishlist)+"</a>");if(data.current&&$.isArray(data.current)){var minNumberOfItems;if(data.status=="Duplicate"){minNumberOfItems=1}else{if(data.status=="Success"){minNumberOfItems=1}else{minNumberOfItems=0}}if(data.current.length>minNumberOfItems){cont.push('<div class="adbl-recent-wish-list">');cont.push(unescape(localstrings.audible_global_recentlyAddedTitles));cont.push('<ul class="adbl-popup-titles">');var itemsDisplayed=0;for(var i=0;i<data.current.length;i++){if(data.current[i].asin!=asinJustAdded){if(data.current[i].title){var prodTitle=data.current[i].title.split(":")[0];cont.push("<li>");if(data.current[i].preOrderable){cont.push('<a href="/ajaxcart?cartAction=addItem&asin='+data.current[i].asin+'" class="adbl-preorder-cart-no-popup"></a>')}else{cont.push('<a href="/ajaxcart?cartAction=addItem&asin='+data.current[i].asin+'" class="adbl-add-cart-no-popup"></a>')}cont.push('<a class="adbl-popup-title adbl-link" href="/pd/'+data.current[i].asin+'">'+prodTitle+"</a>");cont.push("</li>");itemsDisplayed++}}if(itemsDisplayed>=noItemsToDisplay){break}}cont.push("</ul>");cont.push("</div>")}}}return cont.join("")}function addToWishListShort(evt){if(isMiddleMouseClickEvent(evt)){return false}var target=$(evt.target);checkForExistingPopup();var clsOriginal=target.attr("class");popupArgs={srcBtn:target,clsTop:"adbl-wish-list-popup-top",clsTabBg:"adbl-list-short-bg",clsTabImg:"adbl-in-list-short",clsBottom:"adbl-wish-list-popup-bottom",clsCloseBtn:"adbl-wish-list-popup-close",clsOriginal:clsOriginal,containerId:"adbl_list_popup_short",contentId:"adbl_list_popup_content_short",containerOffsetX:("90"),containerOffsetY:"8",content:LOADING_STR,clsBlank:"adbl-empty-btn-popup-short"};if(isCartPopupOpen()){return false}openCartPopup();window.setTimeout(function(){ajaxAddToWishList(target)},0);return false}function showFlyout(element,evt){var topLimit=document.documentElement.scrollTop;var top=evt.pageY-element.height()-45;top=(top<topLimit)?topLimit:top;var diffWidth=$("body").css("width").replace("px","")-$("#adbl_page_content").css("width").replace("px","");var diffX;if(diffWidth>100){diffX=diffWidth/2}else{diffX=10;if($.browser.msie){diffX=70}}var newLeft=evt.pageX-diffX;var rightEdge=newLeft+element.width();var pageContentRightEdge=$("#adbl_page_content").position().left+$("#adbl_page_content").width();if($.browser.msie){pageContentRightEdge-=30}if(rightEdge>pageContentRightEdge){newLeft=pageContentRightEdge-element.width();if(!$.browser.msie){newLeft-=30}}var cssProps={top:top,left:newLeft,display:"block"};element.css(cssProps)}function showGiftMembershipFlyout(element,evt){var top=$(".adbl-gift-info").position().top+10;var left=$(".adbl-gift-info").position().left-150;var target=$(".adbl-membership-info-flyout");var cssProps={top:top,left:left,display:"block",visibility:"visible"};target.css(cssProps);return false}function showAccountDetailsFlyout(element,evt){var accountDetailsLink=".adbl-account-help-links .adbl-link-RightNav2";var top=$(accountDetailsLink).offset().top;var left=$(accountDetailsLink).offset().left;var target=$(".account-details-flyout");$("<div />").attr("id","account-details-flyout-arrow").appendTo(".account-details-flyout").html("<img src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/test/rohiti/beak_5.png'/>").css({position:"absolute","z-index":"1010",top:"10px",left:"335px"});top=top-3;left=left-358;var cssProps={top:top,left:left,display:"block",visibility:"visible",position:"absolute"};target.css(cssProps);target.appendTo("body")}function hideAccountDetailsFlyout(){var target=$(".account-details-flyout");target.css("display","none");return false}function hideFlyout(element){element.css("display","none")}function checkForOverlapAndHideFlyout(evt,prodOverlay){if(!$(evt.relatedTarget).hasClass("adbl-prod-overlay")&&!$(evt.relatedTarget).parents().hasClass("adbl-prod-overlay")){hideFlyout(prodOverlay)}else{$(prodOverlay).bind("mouseout",function(e){if(e.relatedTarget!=evt.target){hideFlyout(prodOverlay)}})}}function hideGiftMembershipFlyout(){var target=$(".adbl-membership-info-flyout");target.css("display","none");return false}function displayMoreItems(evt){evt.preventDefault();var target=$(evt.target);if(target[0].tagName.toLowerCase()!=="a"){target=target.parent()}var spanElm=target.children("span");spanElm.text(unescape(localstrings.navigation_fewer));target.parent().parent().find("li.adbl-more-item").each(function(){$(this).css("display","block")});window.setTimeout(function(){spanElm.removeClass("adbl-more-text");spanElm.addClass("adbl-less-text");target.removeClass("adbl-link-more-items");target.addClass("adbl-link-few-items")},500);return false}function displayFewerItems(evt,msg){evt.preventDefault();var target=$(evt.target);if(target[0].tagName.toLowerCase()!=="a"){target=target.parent()}var spanElm=target.children("span");spanElm.text(unescape(localstrings.navigation_more));target.parent().parent().find("li.adbl-more-item").each(function(){$(this).css("display","none")});window.setTimeout(function(){spanElm.removeClass("adbl-less-text");spanElm.addClass("adbl-more-text");target.removeClass("adbl-link-few-items");target.addClass("adbl-link-more-items")},500);return false}var showWFSIconFlyout=function(leftOffset){var wfsReftagTriggered=false;return function(event,leftOffset){target=$(event.currentTarget);tileContent=target.find(".adbl-wfs-icon-overlay");leftOffset=leftOffset||172;var top=target.position().top-15;var left=target.position().left+leftOffset;var cssProps={top:top,left:left,display:"block"};if(!wfsReftagTriggered){$.ajax({url:"/advsr/ref=det_wsrch_lrnmr_1"});wfsReftagTriggered=true}tileContent.css(cssProps);return false}}();function hideWFSIconFlyout(event){target=$(event.currentTarget);tileContent=target.find(".adbl-wfs-icon-overlay");tileContent.css("display","none");return false}function callSiteCounterAjaxApp(){var $sitecounter=$("#adbl_site_counter");if($sitecounter.length>0){var pageIdent=$sitecounter.attr("data-id");if(pageIdent){$.ajax({url:"/sitecounterajax?target="+pageIdent,cache:false,success:function(data){$sitecounter.html(data)}})}}}function animateFlashModule(){var FLASH_MOD_INTERVAL=8000;var flashModTimer;var curMod=1;var totalMods;function fadeOutCallback(){var newIndex=((curMod+1)<(totalMods+1))?curMod+1:1;var goToMod=$(".adbl-flash-other-frames-link").text();if(goToMod){$("#adbl_flash_mod_"+curMod).fadeOut("slow",function(){$("#adbl_flash_mod_"+newIndex).fadeIn("slow",function(){curMod=newIndex})})}var goToZing=$(".bottom-nav .off").data("index");if(goToZing){$("#adbl_flash_mod_"+curMod).fadeOut(300,"linear",function(){$("#adbl_flash_mod_"+newIndex).fadeIn(300,"linear")});$("#adbl-flash-nav-"+curMod).fadeOut(300,"linear",function(){$(".bottom-nav").children().each(function(index){if(index==newIndex-1){$(this).removeClass("off").addClass("on")}else{$(this).removeClass("on").addClass("off")}});$("#adbl-flash-nav-"+newIndex).fadeIn(300,"linear",function(){curMod=newIndex})})}}function stopAnimation(evt){var target=$(evt.target);window.clearInterval(flashModTimer);var goToMod=target.text();if(goToMod){window.setTimeout(function(){$("#adbl_flash_mod_"+curMod).fadeOut("slow",function(){$("#adbl_flash_mod_"+goToMod).fadeIn("slow",function(){curMod=goToMod})})},500)}var goToZing=target.data("index");if(!goToZing&&(target.hasClass("bg-image")||target.hasClass("btn-cont"))){if(target.hasClass("btn-cont")){target=target.find(".bg-image")}if(target.hasClass("back-btn-img")){goToZing=((curMod-1)>0)?curMod-1:totalMods}else{goToZing=((curMod+1)<(totalMods+1))?curMod+1:1}window.setTimeout(function(){$("#adbl_flash_mod_"+curMod).fadeOut(300,"linear",function(){$("#adbl_flash_mod_"+goToZing).fadeIn(300,"linear")});$("#adbl-flash-nav-"+curMod).fadeOut(300,"linear",function(){$(".bottom-nav").children().each(function(index){if(index==goToZing-1){$(this).removeClass("off").addClass("on")}else{$(this).removeClass("on").addClass("off")}});$("#adbl-flash-nav-"+goToZing).fadeIn(300,"linear",function(){curMod=goToZing})})},500)}if(goToZing&&goToZing!=curMod){window.setTimeout(function(){$("#adbl_flash_mod_"+curMod).fadeOut(300,"linear",function(){$("#adbl_flash_mod_"+goToZing).fadeIn(300,"linear")});$("#adbl-flash-nav-"+curMod).fadeOut(300,"linear",function(){target.parent().children().removeClass("on").addClass("off");target.removeClass("off").addClass("on");$("#adbl-flash-nav-"+goToZing).fadeIn(300,"linear",function(){curMod=goToZing})})},500)}if(target.hasClass("daily-deal-icon")){goToZing=target.parent().data("index");window.setTimeout(function(){$("#adbl_flash_mod_"+curMod).fadeOut(300,"linear",function(){$("#adbl_flash_mod_"+goToZing).fadeIn(300,"linear")});$("#adbl-flash-nav-"+curMod).fadeOut(300,"linear",function(){target.parent().parent().children().removeClass("on").addClass("off");target.parent().removeClass("off").addClass("on");$("#adbl-flash-nav-"+goToZing).fadeIn(300,"linear",function(){curMod=goToZing})})},500)}}totalMods=$(".adbl-flash-mod").length;$(".adbl-flash-other-frames-link").on("click",stopAnimation);$(".bottom-nav .off").on("click",stopAnimation);$(".bottom-nav").children().each(function(index){if(index==0){$(this).removeClass("off").addClass("on")}});$(".adbl-flash-mod-cont .scroller-btn a").on("click",stopAnimation);$("#adbl_flash_mod_"+curMod).fadeIn("slow",function(){});$("#adbl-flash-nav-"+curMod).fadeIn("slow",function(){});flashModTimer=window.setInterval(function(){if(isScrolledIntoView($(".adbl-flash-mod-cont"))){fadeOutCallback()}},FLASH_MOD_INTERVAL);function isScrolledIntoView(elem){var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();return((elemBottom>=docViewTop)&&(elemTop<=docViewBottom)&&(elemBottom<=docViewBottom)&&(elemTop>=docViewTop))}}function checkForEnterAndSubmitForm(evt){if(evt.keyCode==13){var target=$(evt.target);while(target.get(0).tagName!="FORM"){target=target.parent()}var formId=target.attr("id");$('form[id="'+formId+'"]').submit()}}function autocompletesearch(id){var issHost="completion.amazon.com/search/complete";var issMktid="91470";var issSearchAliases=["audible"];AutoComplete.initDynamicSuggestions(id,"form[name=adbl_basic_search]","",issHost,issMktid,issSearchAliases,"updateISSCompletion","","Search suggestions",1,0)}window.updateISSCompletion=function(){AutoComplete.updateAutoCompletion()};function enableRecentHistoryFooterEvent(){$(".module_footerHistory h3 span").live("mouseover",function(evt){mouseOverFooterWhatIsThis(evt)}).live("mouseout",function(evt){mouseOutFooterWhatIsThis(evt)}).live("click",function(evt){evt.preventDefault()});$(".module_footerHistory li.more a").click(function(event){event.preventDefault();$(".module_footerHistory li.less").addClass("showLess");$(".showMore").show();adjustRecentHistoryFooterMoreByResolution();$(this).parent().hide();$("#adbl-recent-history").data("style","expand")});$(".module_footerHistory li.less a").click(function(event){event.preventDefault();$(this).parent().removeClass("showLess");$(".showMore").hide();$(".module_footerHistory li.more").show();adjustRecentHistoryFooterByResolution();$("#adbl-recent-history").data("style","collapse")});$(".module_footerHistory a.removeReplace").click(function(event){event.preventDefault();$(".editRecommendation").each(function(){$(this).attr("style","display:none")});var leftFlyoutEdge=event.pageX-$(this).next().width();if(leftFlyoutEdge<0){$(this).next().attr("style","left:-220px")}$(this).next().show();if(leftFlyoutEdge<0){$(this).next().find(".arrow").hide()}});$(".module_footerHistory a.closeLarge").click(function(event){event.preventDefault();$(this).parent().hide()});$(".adbl-rhf-clearhistory").click(function(event){event.preventDefault();var dest="/recenthistoryajax";var postData={target:"clearhistory"};recentHistoryFooterAjax(dest,postData)});$(".recentViewed").find(".close").each(function(){$(this).click(function(event){event.preventDefault();var dest="/recenthistoryajax";var postData={target:"removevieweditem",asin:$(this).attr("href")};recentHistoryFooterAjax(dest,postData)})});$(".module_footerHistory .recommendations .close").each(function(){$(this).click(function(event){event.preventDefault();var dest="/recenthistoryajax";var postData={target:"notinterested",asin:$(this).attr("href")};recentHistoryFooterAjax(dest,postData)})});$(".adbl-rhf-reccancel").each(function(){$(this).click(function(event){event.preventDefault();$(this).parent().hide()})});$(".adbl-rhf-editrecomms").each(function(){$(this).click(function(event){event.preventDefault();var parent=$(this).parents(".editRecommendation").filter(":first");var dest="/recenthistoryajax?target=managerecs";var ownIt=parent.find(".adbl-rhf-recownit");dest+=("&asin="+ownIt.attr("name"));if(ownIt.prop("checked")){dest+="&owned=yes"}var noInterested=parent.find(".adbl-rhf-recnotinterest");if(noInterested.prop("checked")){dest+="&notinterested=yes"}var removeExplanationList=parent.find(".adbl-rhf-recremoveexpl");removeExplanationList.each(function(index){if($(this).prop("checked")){dest+=("&removeAsin"+index+"="+$(this).attr("name"))}});var postData={};recentHistoryFooterAjax(dest,postData)})});$(".adbl-rhf-turnoff").click(function(event){event.preventDefault();var dest="/recenthistoryajax";var postData={target:"turnoff"};recentHistoryFooterAjax(dest,postData)});$(".adbl-rhf-turnon").click(function(event){event.preventDefault();var dest="/recenthistoryajax";var postData={target:"turnon"};recentHistoryFooterAjax(dest,postData)});$(".recentSearches .bookContainer .close").each(function(){$(this).click(function(event){event.preventDefault();var dest="/recenthistoryajax";var searchtext=$(this).attr("href");var postData={target:"removesearchitem",searchterm:searchtext};recentHistoryFooterAjax(dest,postData)})})}function adjustRecentHistoryFooterByResolution(){if(screen.width=="1024"){$(".recommendations li").each(function(index){if(index>2){$(this).attr("style","display:none")}})}}function adjustRecentHistoryFooterMoreByResolution(){$(".recommendations li").each(function(index){if(index==8){if(screen.width=="1024"){$(this).attr("style","display:block")}else{$(this).attr("style","display:none")}}if(index==3){if(screen.width=="1024"){$(this).attr("style","display:block")}}})}function ajaxToLoadRecentHistoryFooter(){var dest="/recenthistoryajax";var parentNode=$("#adbl-recent-history");var shortURL=window.location.pathname.split("/")[1]||"";var postData={target:"onload",pageURL:shortURL,appAction:pageAction.getAction(),appActionToken:pageAction.getToken()};var waitingSign="<img alt='product image' class='adbl-prod-image adbl-rhf-waiting' src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif' style='margin-left:45%'/>";if($.browser.msie){waitingSign="<img alt='product image' class='adbl-prod-image adbl-rhf-waiting' src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif' style='margin-left:0'/>"}if(shortURL.indexOf("morerecenthistory")===0){dest="/morerecenthistoryajax?page=1";parentNode=$("#center-1")}if(parentNode.length>0){var hasProgressLoader=(parentNode.find(".adbl-rhf-waiting").length>0);var finishedLoading=parentNode.attr("role")==="document";if(!hasProgressLoader&&!finishedLoading){parentNode.html(waitingSign);$.post(dest,postData,function dataLoaded(data,textStatus){var newdiv=parentNode;newdiv.attr("role","document");newdiv.attr("aria-live","polite");newdiv.attr("aria-atomic","true");newdiv.attr("relevant","additions");newdiv.attr("tabindex","0");newdiv.html(data);newdiv.show();enableSamplePlayer($(".module_footerHistory"));if($("#adbl-recent-history").length>0){adjustRecentHistoryFooterByResolution();$("#adbl-recent-history").data("style","collapse")}else{if($(".module_footerHistory").length>0){$(".adbl-pagination .adbl-page-index a").click(function(event){event.preventDefault();event.stopPropagation();var dest=$(this).attr("href");var postData={target:"onload",appAction:pageAction.getAction(),appActionToken:pageAction.getToken()};recentHistoryFooterAjax(dest,postData)})}}enableRecentHistoryFooterEvent()})}}}function onAmazonChatAvailable(waitTime){var amazonChatElement=$(".amazonChat");if($("#csNumber").length){$("#csNumber").css("color","#999999")}$(".amazonChat").show();if($("#acctMsgInfo")){$("#acctMsgInfo").addClass("left-three-fourth")}var waitTimeTolerance=amazonChatElement.data("waitTime");waitTime=0;if(waitTime>waitTimeTolerance){onAmazonChatClosed()}}function onAmazonChatClosed(){$(".amazonChat").hide();if($("#acctMsgInfo")){$("#acctMsgInfo").removeClass("left-three-fourth")}}function onAmazonChatError(){$(".amazonChat").hide();if($("#acctMsgInfo")){$("#acctMsgInfo").removeClass("left-three-fourth")}}function isAmazonChatAvailable(){var amazonChatElement=$(".amazonChat");if(amazonChatElement.length&&amazonChatElement.data("chat-js")!=null){$.getScript(amazonChatElement.data("chat-js"),function(){var options={serviceEnv:amazonChatElement.data("env"),serviceGeo:amazonChatElement.data("geo"),c2cId:amazonChatElement.data("c2cid"),timezone:amazonChatElement.data("timezone"),locale:amazonChatElement.data("language")+amazonChatElement.data("country"),onOutOfHours:onAmazonChatClosed,onNoAgents:onAmazonChatClosed,onDisabled:onAmazonChatClosed,onError:onAmazonChatError,onAvailable:onAmazonChatAvailable};if(typeof amzn!="undefined"){var c2cStatusChecker=new amzn.c2c.C2CStatusChecker(options);c2cStatusChecker.checkNow()}})}}function openAmazonChatPopup(evt,refMarker,args,name){var target=$(evt.target);ajaxRefmarker.record(target);name=name!=null?name:"amazonChatPopup";args=args!=null?args:"width=550, height=450, menubar=no, resizable=yes, location=no, scrollbars=no, status=yes";url="https://"+window.location.host+"/amazon-chat";amazonChatPopupWin=window.open(url,name,args);amazonChatPopupWin.focus()}function activateSamplePlayer(elm){var prefix="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/";if(location.protocol=="https:"){prefix="https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/"}var swfFile=prefix+"images/creative/flash/sample_player/audible_sample_player_v7_accessibility.swf";if(jQuery.browser.msie){swfFile=prefix+"images/creative/flash/sample_player/audible_sample_player_v7_accessibility_IE9_v2.swf"}var params={movie:swfFile,quality:"high",wmode:"transparent",salign:"TL",bgcolor:"#000000",menu:"true",allowScriptAccess:"always"};var flashvarsCombination=elm.find(".sampleURL").html();var flashvars={sampleURL:flashvarsCombination.split("+")[0]};var flashContentId=flashvarsCombination.split("+")[1];swfobject.embedSWF(swfFile,flashContentId,"60","15","10.0.0","",flashvars,params);$(".sample-player").click(function(e){e.preventDefault()})}function recentHistoryFooterAjax(dest,postData){var waitingSign="<img alt='product image' class='adbl-prod-image' src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader._V192250452_.gif' style='margin-left:45%'/>";if($.browser.msie){waitingSign="<img alt='product image' class='adbl-prod-image' src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader._V192250452_.gif' style='margin-left:30%'/>"}var parentElm;if($("#adbl-recent-history").length>0){$("#adbl-recent-history").html(waitingSign);parentElm=$("#adbl-recent-history")}else{if($(".module_footerHistory").length>0){if(dest.indexOf("morerecenthistoryajax")!=-1){}else{dest="/morerecenthistoryajax"}$("#center-1").html(waitingSign);parentElm=$("#center-1")}}postData.appAction=pageAction.getAction();postData.appActionToken=pageAction.getToken();$.post(dest,postData,function dataLoaded(data,textStatus){parentElm.html(data);enableSamplePlayer($(".module_footerHistory"));adjustRecentHistoryFooterByResolution();enableRecentHistoryFooterEvent();if($("#adbl-recent-history").data("style")=="expand"){$(".module_footerHistory li.more a").trigger("click")}if($("#adbl-recent-history").length==0&&$(".module_footerHistory").length>0){$(".adbl-pagination .adbl-page-index a").click(function(event){event.preventDefault();event.stopPropagation();var dest=$(this).attr("href");var postData={target:"onload"};recentHistoryFooterAjax(dest,postData)})}})}function mouseOverFooterWhatIsThis(evt){var target=$(evt.target);var prodOverlay=$(".adbl-rhf-whatsThis");$("#adbl_top_slots").attr("style","z-index:1");if(typeof prodOverlay!="undefined"){$("#adbl_page_content").children(".adbl-rhf-whatsThis").each(function(){$(this).remove()});prodOverlay1=prodOverlay.clone();prodOverlay1.appendTo("#adbl_page_content");var cssProps={top:target.offset().top-70,left:evt.pageX,display:"block"};prodOverlay1.attr("class","module_footerHistory adbl-rhf-whatsThis");prodOverlay1.css("text-align","left");prodOverlay1.css("z-index","3");prodOverlay1.css("position","absolute");prodOverlay1.css("width","175px");prodOverlay1.css(cssProps);prodOverlay1.attr("TABINDEX","-1");prodOverlay1.focus()}}function mouseOutFooterWhatIsThis(evt){var target=$(evt.target);$("#adbl_page_content").children(".adbl-rhf-whatsThis").each(function(){$(this).remove()})}function adjustBarkerDisplay(){var avalBal=$(".adbl-top-user-info").find("ul").find('li[class="adbl-avail-bal"]');if($(".adbl-top-user-info").find("ul").children("li").length==5){if(avalBal!=null){$(".adbl-account-help-links").append(avalBal.css("display","block"))}}else{if(avalBal!=null){avalBal.css("display","block")}}}function initializeCreditFlyout(){$(".creditLinkFlyOut").bind("mouseover",function(){if($("#creditFlyout").length==0){var whatAreCreditsImageUrl="";switch(window.location.protocol){case"https:":whatAreCreditsImageUrl=localstrings.whatAreCreditsSecureImageUrl;break;default:whatAreCreditsImageUrl=localstrings.whatAreCreditsInSecureImageUrl;break}$("body").append('<div id="creditFlyout"><img src="'+whatAreCreditsImageUrl+'" alt="'+localstrings.whatAreCreditsImageAltText+'" /></div>')}var linkWidth=$(this).width();var offset=$(this).offset();$("#creditFlyout").css({top:(offset.top-65),left:(offset.left+20)}).show()});$(".creditLinkFlyOut").bind("mouseout",function(){$("#creditFlyout").hide()});$(".creditLinkFlyOut").bind("click",function(e){e.preventDefault()})}var overlayCreated=false;var dialogCont;function validateFormInput(params){var inputResults={};$("input, select, textarea").each(function(){var elm=$(this);if(elm.attr("id") in params){var inputGood=true;var isBadCCExpDate=false;var param=params[elm.attr("id")];var isAlreadyFlagged=inputResults[elm.attr("id")];if(isAlreadyFlagged==null||isAlreadyFlagged.isGood==true){inputResults[elm.attr("id")]={isGood:true}}var val=elm.val();if(!elm.is(":disabled")){if(!val){if(!param.optional){inputGood=false}}else{if(param.type){switch(param.type){case"string":if(param.maxLen&&(val.length>param.maxLen)){inputGood=false}break;case"alpha":if((param.maxLen&&(val.length>param.maxLen))||!isValid.Alphabetic(val)){inputGood=false}break;case"select":if(!val){inputGood=false}break;case"number":if(!$.isNumeric(val)){inputGood=false}else{if(param.range&&param.range.row&&param.range.high){if(!(param.range.low<=Number(val)<=param.range.high)){inputGood=false}}else{if(param.maxLen){inputGood=val.length<=param.maxLen}}}break;case"email":if(!isValid.Email(val)){inputGood=false}break;case"phone":if(!isValid.PhoneNumber(val)){inputGood=false}break;case"password":var minLen=param.minLen||"";var maxLen=param.maxLen||"";if(!isValid.Password(val,minLen,maxLen)){inputGood=false}break;case"credit-card":var ccTypeSelected=$("#adbl_cc_type");if(!isValid.CreditCard(val,ccTypeSelected.val())){inputGood=false;break}var month=$("#adbl_month").val();var year=$("#adbl_year").val();if(month&&year){if(!isValid.CCExpDate(month,year)){isBadCCExpDate=true}break}case"edit-cc":var month=$("#adbl_month").val();var year=$("#adbl_year").val();if(month&&year){if(!isValid.CCExpDate(month,year)){isBadCCExpDate=true}break}case"bank":if(!isValid.Bank(val)){inputGood=false}break;case"bankRouting":if(!isValid.BankRouting(val)){inputGood=false}break;case"zipcode":if(!isValid.ZipCode(val)){inputGood=false}break}}}}if(!inputGood){inputResults[elm.attr("id")].isGood=false}if(isBadCCExpDate){inputResults.adbl_month={isGood:false,labelElm:param.label||""};inputResults.adbl_year={isGood:false,labelElm:param.label||""}}}});$("select").each(function(){var elm=$(this);if(elm.attr("id") in params){var param=params[elm.attr("id")];if(!inputResults[elm.attr("id")]){inputResults[elm.attr("id")]={isGood:true,labelElm:param.label||"",invalidOptionValue:param.invalidOption}}if(!param.optional){if(!elm.val()||elm.val()==-1||elm.val()==param.invalidOption){inputResults[elm.attr("id")].isGood=false}}}});return inputResults}function resetPage(selector,func){$(selector).removeAttr("disabled");$(selector).css("cursor","auto");if(typeof func!=="undefined"){func()}}function getInputByName(name){return $("input[name='"+name+"'], select[name='"+name+"']").val()}function addCCChangeStates(evt){changeStates(evt,"#adbl_state",'label[for="adbl_state"]')}function changeStates(evt,pInputSelector,pLabelSelector){var dest="/getStates";var countryCode=$(evt.target).val();var postData={country:countryCode};var vInputSelector=pInputSelector;var vLabelSelector=pLabelSelector;$.post(dest,postData,function(data){var resp=$.trim(data);if(resp&&resp!="Error"&&resp.indexOf("adbl_state")!=-1){if($(vInputSelector).length==0){$(vLabelSelector).after(resp)}else{$(vInputSelector).replaceWith(resp)}$(vInputSelector).parent().show()}else{$(vInputSelector).parent().hide()}})}function checkForBetaCCErrors(){var errorMessage=$("input[name='adbl-error-message']").val();if(errorMessage!=""){$(".adbl-beta h4").css("display","block");$(".adbl-beta h4").val()==errorMessage;$("input[name='adbl-error-message']").attr("value","")}}function saveClaimCodeChanges(evt){evt.preventDefault();var isClaimCodeFilled=($("#adbl_claim_code").val())?true:false;var postChanges=true;if(!isClaimCodeFilled){$(".adbl-error-msg").text(unescape(localstrings.audilbe-global_enterAccessCode));$(".adbl-beta .adbl-error-msg").css("display","block");postChanges=false}if(!isClaimCodeFilled){$('label[for="adbl_claim_code"]').addClass("error")}else{$('label[for="adbl_claim_code"]').removeClass("error")}if(postChanges){$('form[id="adbl_beta_claim"]').submit()}}function betaSignin(evt){evt.preventDefault();var validationParams={adbl_username:{type:"string"},adbl_password:{type:"password"}};validateAndSubmitForm(validationParams,"adbl_sign_in")}function validateAndSubmitForm(validationParams,formId,buttonToDisable){if(validateForm(formId,validationParams)){if(buttonToDisable){$(buttonToDisable).attr("disabled","disabled");$(buttonToDisable).css("cursor","wait")}$('form[id="'+formId+'"]')[0].submit()}}function showAdblFeedbackPage(){$.ajax({url:"/betafb-ajax",cache:false,success:function(html){if($("#adbl_overlay_feedback_content").size()<=0){$('<div id="adbl_overlay_feedback_content" class="adbl-dlg-bd">'+html+"</div>").appendTo("body")}else{$("#adbl_overlay_feedback_content").html(html)}var coors=getOverlayCoor($("#adbl_overlay_feedback_content"));$("#adbl_overlay_feedback_content").css({left:coors[0],top:coors[1]});showOverlay($("#adbl_overlay_feedback_content"));$("#adbl_beta_feedback").submit(function(e){$("#adbl_overlay_feedback_content").css({display:"none"});var checkFeedbackForm=saveFeedbackChanges(e);if(checkFeedbackForm){var feedbackPostUrl=$("#adbl_beta_feedback").attr("action");$("input[name='adbl-error-message']").attr("value","");var feedbackForm=$('form[id="adbl_beta_feedback"]');$.post(feedbackPostUrl,{adbl_user_email:$("#adbl_user_email").val(),adbl_feedbackType:$("#adbl_feedbackType").val(),adbl_user_comments:$("#adbl_user_comments").val(),appActionToken:$("input[name='appActionToken']").val(),appAction:$("input[name='appAction']").val(),emailSent:$("input[name='emailSent']").val(),adblPageAction:feedbackForm.children('input[name="adblPageAction"]').val()},function(html){$("#adbl_overlay_feedback_content").html(html);$("#adbl_overlay_feedback_content").css({left:coors[0],top:coors[1]});showOverlay($("#adbl_overlay_feedback_content"))},"text")}else{$("#adbl_overlay_feedback_content .adbl-error-msg").show();$("#adbl_overlay_feedback_content").css({display:"block"})}return false})}});return false}var poweredByBox='<div class="adbl-powered-by-box"><span class="adbl-whats-this">'+unescape(localstrings.audible_global_whatIsThis)+"</span>"+unescape(localstrings.audible_global_asAnAmazonCompany)+"</div>";var poweredByElement=$(poweredByBox);var hideEvtAttached=false;function displayPoweredByPopup(evt){evt.preventDefault();var target=$(evt.target);var targetLocation;targetLocation=target.offset();var offset=target.width();var cssProperties={display:"block",position:"absolute",top:targetLocation.top-15,left:targetLocation.left+offset+15};poweredByElement.appendTo("body").css(cssProperties);evt.stopPropagation()}function hidePoweredByPopup(evt){if($(".adbl-powered-by-box").css("display")=="block"){var cssProperties={display:"none"};poweredByElement.css(cssProperties)}}function fnGetRefTag(eleId){return $("#"+eleId).attr("data-ref-tag")}function fnFireRefTag(tag,sync){try{if(!tag){return}if(!sync){sync=false}$.ajax({url:"/ajax-refmarker/ref="+tag,async:!sync,type:"GET"})}catch(e){}}function getOverlayCoor(target){var windowWidth=$(window).width();var windowHeight=$(window).height();var overlayWidth=target.width();var overlayHeight=target.height();var overlayLeft=((windowWidth-overlayWidth)>0)?(windowWidth-overlayWidth)/2:"0px";var overlayTop=((windowHeight-overlayHeight)>0)?(windowHeight-overlayHeight)/2:"0px";return[overlayLeft,overlayTop]}function enableSamplePlayer(elm){if(elm.find(".mediumspriteplayer").length&&hasHtml5Audio()){var imgSample=elm.find(".adbl-prod-image-sample-cont, .adbl-prod-image-cont");if(imgSample.length){var img=imgSample.find('img.adbl-prod-image, img.adbl-prod-img, img[alt="product image"]');if(img.length){var imgSrc=img[0].src.match(/\._SL[0-9]{2,}_\./g);if(imgSrc===null){imgSrc=img[0].src.match(/no_image_s_[0-9]{2,}_image/g)}var imgSize=null;if(imgSrc!=null){imgSize=parseInt(imgSrc[0].match(/[0-9]{2,}/g))}else{imgSrc=img[0].src.match(/no_image_detail_image/g);if(imgSrc===null){imgSrc=img[0].src.match(/no_image_med_image/g)}if(imgSrc!=null){imgSize=img[0].width}}if($.isNumeric(imgSize)){if(imgSize>=175){elm.find(".largespriteplayer").each(function(){$(this).css("display","inline");$(this).find(".audio-sample-cta").css("background-image","url("+$("#spriteBtn").attr("href")+")")})}else{if(imgSize<80){elm.find(".smallspriteplayer").each(function(){$(this).css("display","inline-block");$(this).css("width","20px");$(this).css("margin","auto");$(this).find(".audio-sample-cta").css("background-image","url("+$("#spriteBtnSmall").attr("href")+")")})}else{elm.find(".mediumspriteplayer").each(function(){$(this).css("display","inline");$(this).find(".audio-sample-cta").css("background-image","url("+$("#spriteBtnSmall").attr("href")+")")})}}}}}}else{elm.find(".flashcontentcontainer").each(function(){$(this).css("display","block");activateSamplePlayer($(this))})}}function hasHtml5Audio(){var myAudio=document.createElement("audio");var isIphone3=String(navigator.userAgent).indexOf("iPhone OS 3")!=-1;if(isIphone3){return false}var canPlayMp3=(!!myAudio.canPlayType)&&myAudio.canPlayType("audio/mpeg")&&(""!=myAudio.canPlayType("audio/mpeg"));return canPlayMp3}function getURLParameter(ref,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(ref);if(results==null){return""}else{return results[1]}}function getURLParameterIncludingPath(ref,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?/&]"+name+"=([^&\\?/#]*)";var regex=new RegExp(regexS);var results=regex.exec(ref);if(results==null){return""}else{return results[1]}}function showOverlay(dialogElm){var overlayElm;dialogCont=dialogElm;if(!overlayCreated){$('<div id="adbl_overlay_parent"><div id="adbl_overlay"></div></div>').remove().appendTo("body");overlayElm=$("#adbl_overlay");overlayElm.width($(document).width());overlayElm.height($(document).height());dialogCont.remove().appendTo("body");overlayCreated=true}else{overlayElm=$("#adbl_overlay")}overlayElm.css("display","block");dialogCont.css("display","block");$(".adbl-close-dlg").bind("click",hideOverlay);$(".adbl-close-button").bind("click",hideOverlay)}function validateForm(formId,validationParams){var inputResults=validateFormInput(validationParams);var invalidLabels={};var numOfInvalidEntries=0;for(var elmId in inputResults){var labelElmId=inputResults[elmId].labelElm||elmId;var labelElm=$("#"+formId+' label[for="'+labelElmId+'"]');if(inputResults[elmId].isGood&&!invalidLabels[labelElm.text()]){if(labelElm.length>0&&labelElm.is(":visible")){labelElm.removeClass("adbl-err")}}else{var labelElmFound=false;if(labelElm.length>0&&labelElm.is(":visible")){labelElmFound=true;if(!invalidLabels[labelElm.text()]){numOfInvalidEntries++;invalidLabels[labelElm.text()]="1";labelElm.addClass("adbl-err")}}if(elmId in validationParams){var inputLabel=validationParams[elmId].label||"";if(inputLabel){if(!invalidLabels[inputLabel]){if(labelElmFound){delete invalidLabels[labelElm.text()]}else{numOfInvalidEntries++}invalidLabels[inputLabel]="1"}}}}}var i=0;var errorMsgTemp="";for(var labelId in invalidLabels){errorMsgTemp+=labelId.replace(/\([\s\w]*\)/,"");if(i==(numOfInvalidEntries-1)){errorMsgTemp+=" "}else{errorMsgTemp+=", "}i++}if(i>0){if((validationParams.lpSendData!=null)&&(typeof lpSendData==="function")){lpSendData("page",validationParams.lpSendData.type,validationParams.lpSendData.value)}var errorMsg=unescape(localstrings.audible_global_errorMessage);errorMsg+=errorMsgTemp;writeError.write(errorMsg,validationParams.errorContainer||null);return false}else{return true}}function validateAddressAndSubmitForm(formId,validationParams,submitButtonSelector,func,formId2){$(submitButtonSelector).attr("disabled","disabled");$(submitButtonSelector).css("cursor","wait");var formToValidate=(typeof formId2!=="undefined")?formId2:formId;if(getInputByName("addBankAccountNumber")&&isValid.isIbanBankAccount(getInputByName("addBankAccountNumber"))){if($("#bankAccountFormat")){$("#bankAccountFormat").val("IBAN")}}if(validateForm(formToValidate,validationParams)){$.ajax({url:"/validate-addr",data:{name:getInputByName("name"),address1:getInputByName("address1"),address2:getInputByName("address2"),state:getInputByName("state"),zip:getInputByName("zip"),city:getInputByName("city"),country:getInputByName("country"),phone:getInputByName("phone"),appAction:getInputByName("appAction"),appActionToken:getInputByName("appActionToken")},complete:function(msg){if(!msg||!msg.responseText||msg.responseText.indexOf("address-validation-cont")==-1){$("#"+formId)[0].submit()}else{resetPage(submitButtonSelector,func);showSuggestionsModal(msg.responseText,formId)}}})}else{populateSiteCatalystVariables(formToValidate);resetPage(submitButtonSelector,func)}}function populateSiteCatalystVariables(formToValidate){var fieldList={adbl_cc_type:{scTagName:"cc type"},adbl_cc_num:{scTagName:"cc no."},adbl_cc_name:{scTagName:"cc name"},adbl_month:{scTagName:"expr date"},adbl_address_line_1:{scTagName:"address"},adbl_address_line_2:{scTagName:"address"},adbl_state:{scTagName:"state"},adbl_zip:{scTagName:"zipcode",},adbl_city:{scTagName:"city",},adbl_phone:{scTagName:"phone",},acctHolderName:{scTagName:"ba holder name",},addBankAccountNumber:{scTagName:"ba number",},addBankAccountRoutingNumber:{scTagName:"ba routing number",}};var siteCatalystErrors="";var isCCError=$("#cc-input").is(":visible");var errorItem=isCCError?"CC":"BA";$(".adbl-err").each(function(i,obj){name=$(this).attr("for");value=$("#"+formToValidate).find("#"+name).val();if(name&&name in fieldList){var param=fieldList[name];if(value){siteCatalystErrors+=errorItem+":invld "+param.scTagName+"|"}else{siteCatalystErrors+=errorItem+":missing "+param.scTagName+"|"}}});if(siteCatalystErrors.length>0&&typeof s_enabled!="undefined"){siteCatalystErrors=siteCatalystErrors.substr(0,siteCatalystErrors.length-1);try{s_formErrors(siteCatalystErrors)}catch(e){csmJsLogging.logJSErrors(e,"/validate-addr","s_formErrors","ERROR")}}}function popupWindow(url,appParameters,windowName,windowParameters,locx,locy){var appParams=appParameters||"";var winName=windowName||"";var winParams=windowParameters||"resizable=yes,toolbar=yes,location=no,menubar=yes,scrollbars=yes,status=yes,width=500,height=400";if(!locx){locx=(window.screen.width/2)-(75+10)}if(!locy){locy=(window.screen.height/2)-(100+50)}newWin=window.open(url+appParameters,windowName,windowParameters);newWin.moveTo(locx,locy)}function lowerResolution(){$("body.old").addClass("screen1024")}function raiseResolution(){$("body.old").removeClass("screen1024")}function mouseOverFlyoutIcon(evt){var target=$(evt.target);var prodOverlay=target.parent().children(".adbl-prod-overlay");target.css("cursor","pointer");if(prodOverlay.size()!=0){var config={enableRefTag:true};showFlyout(prodOverlay,evt,config)}}function mouseOutFlyoutIcon(evt){var target=$(evt.target);var prodOverlay=target.parent().children(".adbl-prod-overlay");checkForOverlapAndHideFlyout(evt,prodOverlay)}function hideOverlay(evt){evt.preventDefault();$(".adbl-close-dlg").unbind("click",hideOverlay);dialogCont.css("display","none");$("#adbl_overlay").css("display","none");$("#adbl_page_content").trigger("overlayClosed")}function showAudibleFeedbackDialog(){showOverlay($(".adbl-dialog"))}function doFormSubmit(formId,validationParams){$("#"+formId).submit(function(evt){return validateForm(formId,validationParams)})}function addCCForm(){if($("#adbl_country").val()!="US"){ccValidationParams.adbl_zip["type"]="zipcode"}$(".adbl-save-cc").click(function(evt){evt.preventDefault();validationParams=getPaymentValidationParams();validateAddressAndSubmitForm("adbl_add_cc",validationParams,".adbl-save-cc")});$("#adbl_country").change(addCCChangeStates);$("#banktab").click(togglePayments);$("#cardtab").click(togglePayments);$("#cc-input, #ba-input").filter(function(index){return"none"==$(this).css("display")}).find(":input").prop("disabled",true)}function getPaymentValidationParams(){if("bankaccount"==$('.adbl_add_cc input[name="paymentType"]').val()){validationParams=baValidationParams}else{validationParams=ccValidationParams}validationParams.lpSendData={type:"paymentInfoError",value:"1"};return validationParams}function togglePayments(evt){paymentTypeInput=$('.adbl_add_cc input[name="paymentType"]');switch($(evt.target).attr("id")){case"banktab":document.getElementById("cardtab").className="tab-off";document.getElementById("banktab").className="tab-on";offElm="#cc-input, #add_cc_btn";onElm="#ba-input, #add_ba_btn";paymentTypeInput.val("bankaccount");break;case"cardtab":document.getElementById("banktab").className="tab-off";document.getElementById("cardtab").className="tab-on";offElm="#ba-input, #add_ba_btn";onElm="#cc-input, #add_cc_btn";paymentTypeInput.val("creditcard");break}$(onElm).find(":input").prop("disabled",false);$(offElm).find(":input").prop("disabled",true);$(offElm).css("display","none");$(onElm).css("display","block")}function getQueryParam(paramName){var queryString=document.location.href.split("?")[1];var queryParams=!queryString?[]:queryString.split("&");for(var index=0;index<queryParams.length;index++){var param=queryParams[index].split("=");if(param[0]===paramName){return param[1]}}return}function popupFormats(evt){evt.preventDefault();popupWindow("http://"+document.location.host+"/audioformats","","audibleformats","resizable=yes,scrollbars=yes,toolbar=no,location=no,menubar=no,scrollbars=yes,status=no,width=625,height=620","","")}function saveFeedbackChanges(evt){evt.preventDefault();var isEmailFilled=($.trim($("#adbl_user_email").val()))?true:false;var isFeedbackTypeSelected=($("#adbl_feedbackType").val()!=0)?true:false;var isCommentFilled=($.trim($("#adbl_user_comments").val()))?true:false;var postChanges=true;if(!isCommentFilled){$(".adbl-beta h4").css("display","block");postChanges=false}if(!isCommentFilled){$('label[for="adbl_user_comments"]').addClass("error")}else{$('label[for="adbl_user_comments"]').removeClass("error")}return postChanges}function fnSetLinkFollowed(){exitLinkFollowed=true}function fnFireRefTagOfElement(eleId,sync){var refTag=fnGetRefTag(eleId);fnFireRefTag(refTag,sync)}function setPreviousElementFocus(evt){prevEleFocus=$(evt.target)}function getPreviousElementFocus(){prevEleFocus.focus()}function getUrlVars(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1]}return vars}function centerElement(selector){var elem=$(selector);var top=($(window).height()-elem.outerHeight())/2+$(window).scrollTop();var left=($(window).width()-elem.outerWidth())/2+$(window).scrollLeft();elem.css({top:top+"px",left:left+"px"})}function showSuggestionsModal(overlay,formId){if($(addrValOverlayContainer).length!=0){$(addrValOverlayContainer).replaceWith(overlay)}else{$("body").append(overlay)}$(addrValOverlayContainer).attr("formid",formId);centerElement(addrValContainer);$(addrValContainer).fadeIn(300,finishLoadingAddrValSugModal)}function onSelectCreditCardDropDown(){var ccSelect=$("#adbl_cc_type");var iconContainer=$(".adbl-cc-images-cont");if(!ccSelect||!iconContainer){return}showSelectedCreditCardIcon(ccSelect,iconContainer);ccSelect.change(function(e){var selected=$(this).find(":selected");var icons=iconContainer.find("span");for(var i=0;i<=icons.length-1;i++){var icon=icons.eq(i);if(!icon.hasClass("deselected")){icon.addClass("deselected")}}selectIcon(selected,iconContainer)});function showSelectedCreditCardIcon(ccSelect,iconContainer){var selected=ccSelect.find(":selected");selectIcon(selected,iconContainer)}function selectIcon(selected,iconContainer){if(selected.val()){var ccImageFound=iconContainer.find(".adbl-cc-"+selected.val().toLowerCase());if(ccImageFound.length==0){iconContainer.find(".adbl-cc-discover").removeClass("deselected")}else{ccImageFound.removeClass("deselected")}}}}var AudibleGlobalAPI={addCCForm:addCCForm,betaSignin:betaSignin,ccValidationParams:ccValidationParams,changeStates:changeStates,doFormSubmit:doFormSubmit,enableSamplePlayer:enableSamplePlayer,fnFireRefTagOfElement:fnFireRefTagOfElement,fnSetLinkFollowed:fnSetLinkFollowed,getPaymentValidationParams:getPaymentValidationParams,getPreviousElementFocus:getPreviousElementFocus,getURLParameter:getURLParameter,getURLParameterIncludingPath:getURLParameterIncludingPath,getUrlVars:getUrlVars,hideOverlay:hideOverlay,lowerResolution:lowerResolution,mouseOverFlyoutIcon:mouseOverFlyoutIcon,mouseOutFlyoutIcon:mouseOutFlyoutIcon,popupFormats:popupFormats,popupWindow:popupWindow,raiseResolution:raiseResolution,saveClaimCodeChanges:saveClaimCodeChanges,setPreviousElementFocus:setPreviousElementFocus,showOverlay:showOverlay,showAudibleFeedbackDialog:showAudibleFeedbackDialog,validateAndSubmitForm:validateAndSubmitForm,validateForm:validateForm,validateAddressAndSubmitForm:validateAddressAndSubmitForm,getQueryParam:getQueryParam,onSelectCreditCardDropDown:onSelectCreditCardDropDown};$(function(){$("#country_select").change(function(evt){var newLocale=$("#country_select option:selected")[0].value;if(newLocale.length==2){changeLocale(newLocale)}});$("body").on("click",outsideClickHandler);$("body").on("click",hidePoweredByPopup);$("body").on("click",".adbl-show-feedback",showAdblFeedbackPage);$("body").on("click",".adbl-popup-po-close, .adbl-popup-close, .adbl-wish-list-popup-close",closePopup);$("#adbl_page_content").on("click",".adbl-preorder-wide, .adbl-in-cart-po-wide",preorderWideAddToShoppingCart);$("#adbl_page_content").on("click",".adbl-preorder-short, .adbl-in-cart-po-short",preorderShortAddToShoppingCart);$("#adbl_page_content").on("click",".adbl-add-cart, .adbl-in-cart",addToShoppingCart);$("#adbl_page_content").on("click",".adbl-add-wish-list, .adbl-in-wish-list",addToWishList);$("#adbl_page_content").on("click",".adbl-cart-short, .adbl-in-cart-short",addToCartShort);$("#adbl_page_content").on("click",".adbl-wish-list-short, .adbl-in-list-short",addToWishListShort);$("#adbl_page_content").on("click",".adbl-cart-long, .adbl-cart-long-firstchapter, .adbl-in-cart-long, .adbl-in-cart-long-firstchapter",addToCartLong);$("#adbl_top_slots").on("mousemove",".adbl-gift-info",showGiftMembershipFlyout);$("#adbl_top_slots").on("mouseout",".adbl-gift-info",hideGiftMembershipFlyout);$("#adbl_center_column, #adbl_at_center_column, #adbl_preorder_recommendations").on("click",".adbl-link-more-items, .adbl-more-text",displayMoreItems);$("#adbl_center_column, #adbl_at_center_column, #adbl_preorder_recommendations").on("click",".adbl-link-few-items, .adbl-less-text",displayFewerItems);$("div.adbl-wfs-icon").on("mousemove",".wfs_link, .wfs_link_text",showWFSIconFlyout);$("div.adbl-wfs-icon").on("mouseout",".wfs_link, .wfs_link_text",hideWFSIconFlyout);$("div#account-details-close-btn a").on("click",".account-details-flyout",hideAccountDetailsFlyout);if($(".adbl-buy-short").length>0){$(".adbl-buy-short").click(buyShort)}if($(".account-details-flyout").length>0){showAccountDetailsFlyout()}$(".adbl-powered-by-link").click(displayPoweredByPopup);if($(".adbl-flash-mod").length>1){animateFlashModule()}$('input[type="password"]').keyup(checkForEnterAndSubmitForm);$(window).resize(fixCartPopupPositionOnResize);if($("#adbl_search_input").length>0){autocompletesearch("#adbl_search_input")}else{if($("#adbl_search_term").length>0){autocompletesearch("#adbl_search_term")}}$("#adbl_search_term").val(unescape(localstrings.audible_global_searchForMore));$("#adbl_search_term").focus(function(){if($("#adbl_search_term").val()==unescape(localstrings.audible_global_searchForMore)){$(this).val("")}});$("#adbl_search_term").blur(function(){if($("#adbl_search_term").val()==""){$("#adbl_search_term").val(unescape(localstrings.audible_global_searchForMore))}});initializeCreditFlyout();adjustBarkerDisplay();window.setTimeout(callSiteCounterAjaxApp,300);ajaxToLoadRecentHistoryFooter();$(".alert-info .close").click(function(e){e.preventDefault();$(this).parent().hide()});if($(".adbl-top-user-info").length!=0){$.get("/extra-credit/validate",function(data){if(data==="true"){appendExtraCreditLinkToBarker()}})}csmJsLogging.set("File : audible-global-new , Method : isAmazonChatAvailable()","Amazon chat not available");isAmazonChatAvailable();csmJsLogging.set("Dont Log after this point as csmJsLogging setters not added","DISABLE_CSM_LOG_FLAG");$(".amznChatNowButton").click(openAmazonChatPopup);$(".amazonChatLink").click(openAmazonChatPopup);$(".adbl-beta-claimcode-submit").click(saveClaimCodeChanges);$(".adbl-beta-signin-submit").click(betaSignin);$("#adbl_page_content").bind("overlayClosed",function(e){});var emailSent=$("#emailSent").val();if(emailSent=="true"){showAudibleFeedbackDialog()}checkForBetaCCErrors();$("#adbl_user_comments").each(function(){var length=$(this).val().length;$(this).keyup(function(){var new_length=$(this).val().length;if(new_length>1000){$(this).val($(this).val().substring(0,1000))}})});if($("#adbl_overlay_thankyou_content").size()>0){var coors=getOverlayCoor($("#adbl_overlay_thankyou_content"));$("#adbl_overlay_thankyou_content").css({left:coors[0],top:coors[1],display:""});showOverlay($("#adbl_overlay_thankyou_content"))}});$(".flashPromoContent").click(function(evt){var track=$(this).find('input[name="track"]').val();var customerId=$(this).find('input[name="customerId"]').val();var eleId=$(this).find("div").attr("id");var r=Math.random()*1000000;var t=0;var paramList="orderId="+r+",orderTotal="+t+",productPurchasedId="+customerId});(function(){try{var exitPageRefEle=$("#exitPageRefTag");if(!exitPageRefEle){return}var exitPageRefTag=exitPageRefEle.attr("data-ref-tag");if(!exitPageRefTag){return}window.onunload=function(){if(!exitLinkFollowed){fnFireRefTag(exitPageRefTag,true)}}}catch(e){}})();return AudibleGlobalAPI});define("search",["ftx/lib/jquery-current","audible-global-new"],function($,AdblGlobal){var pageContPos;$(function(){$("#adbl_adv_search").submit(advSearchSubmit);$("#adbl_choose_sort").change(selectResultOptions);$("#adbl_sort_cat").change(sortByCategories);$("#adbl_sort_prog_type").change(sortByProgType);$("#adbl_view_unabridged").click(flipViewUnabridgedFilter);$(".adbl-more .adbl-link").mouseover(showMorePopup);$(".adbl-more .adbl-link").mouseout(hideMorePopup);$(".adbl-formats-link").click(AdblGlobal.popupFormats)});function advSearchSubmit(){var keyword=$.trim($("#adbl_keywords").val());$("#adbl_keywords").val(keyword);return true}function selectResultOptions(){if($("#adbl_res_per_page option:selected").size()>0){var resultsPerPage=$("#adbl_res_per_page option:selected")[0].value}if($("#adbl_res_per_page option:selected").size()>0){var sortBy=$("#adbl_choose_sort option:selected")[0].value}}function sortByCategories(evt){evt.preventDefault();var target=$(evt.target)}function sortByProgType(evt){evt.preventDefault();var target=$(evt.target)}function flipViewUnabridgedFilter(evt){var target=$(evt.target)}var orgParentElm;var morePopupElm;function showMorePopup(evt){var target=$(evt.target);orgParentElm=target.parent().parent();morePopupElm=orgParentElm.children(".adbl-more-popup");morePopupElm.css("display","block");morePopupElm.remove().appendTo("#adbl_page_content");var targetPos=target.offset();pageContPos=$("#adbl_page_content").offset();var destY=targetPos.top+15-pageContPos.top;var destX=targetPos.left-10-pageContPos.left;morePopupElm.css("left",destX);morePopupElm.css("top",destY);morePopupElm.bind("mouseout",hideMorePopup)}function hideMorePopup(evt){var relTarget=$(evt.relatedTarget);var doHide=true;relTarget.parents().andSelf().each(function(){if($(this).hasClass("adbl-more-popup")){doHide=false}});if(doHide){morePopupElm.remove().appendTo(orgParentElm);morePopupElm.css("display","none")}}function showPopup(evt){$(evt.target).css("display","block")}});define("facebook",["ftx/lib/jquery-current","i18n!nls/localizedstrings"],function($,localstrings){var callbacks=[];var addFBCallback=function(callback){callbacks.push(callback)};window.fbAsyncInit=function(){for(var i=0;i<callbacks.length;i++){callbacks[i]()}var appId=""+$(document.body).data("fbAppId");FB.init({appId:appId,status:true,cookie:true,xfbml:true,oauth:true,version:"v2.0"})};(function(d){if(!d.getElementById("fb-root")){var fbRoot=d.createElement("div");fbRoot.id="fb-root";d.getElementsByTagName("body")[0].appendChild(fbRoot)}var js,id="facebook-jssdk";if(d.getElementById(id)){return}js=d.createElement("script");js.id=id;js.async=true;js.src=localstrings.facebook_jsurl;d.getElementsByTagName("head")[0].appendChild(js)}(document));return{addFBCallback:addFBCallback}});define("audible-badgeville",["ftx/lib/jquery-current","facebook"],function($,fb){var mp_img_loc="http://g-ec2.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/landing/newbiechallenge/";var mp_img_name={checkbox_empty:"NewbieChall_box.jpg",checkbox_full:"NewbieChall_checkmark.png",start_here:"NewbieChall_starthere.png"};var mp_not_eligible_div="<div id='aud_missionProgress_error'>Sorry, at this time you are not eligible for this offer. If you have any questions, please contact us at 1-888-283-5051 and we'll gladly assist you. We are available 24 hours a day, every day.</div>";function getImg(imgType,cssClass){if(imgType&&mp_img_name&&mp_img_name[imgType]){if(cssClass){return'<img src="'+mp_img_loc+mp_img_name[imgType]+'" class="'+cssClass+'" />'}else{return'<img src="'+mp_img_loc+mp_img_name[imgType]+'" />'}}return""}function missionProgress(onMissionProgressPage){var mpPageQS="";var refMarker="/ref=nc_stripe_ajax";if(onMissionProgressPage){mpPageQS="&mp=1";refMarker="/ref=nc_mp";$("#aud_missionProgress_loading").append('<img src="http://g-ec2.images-amazon.com/images/G/01/x-locale/common/loading/spinner_large_no-border.gif" />')}$.ajax({type:"get",cache:false,url:"/gamification-ajax"+refMarker+"?task=GET_MISSION_PROGRESS"+mpPageQS,success:function(r){var data=r.data;if(data){if(onMissionProgressPage){missionProgressPage(data)}else{if($("#badgeville_top_stripe")){missionProgressStripe(data)}}}else{if(onMissionProgressPage){$("#aud_missionProgress_loading").replaceWith(mp_not_eligible_div)}}},error:function(error){if(onMissionProgressPage){$("#aud_missionProgress_loading").replaceWith(mp_not_eligible_div)}}})}function missionProgressStripe(data){var target=$("#badgeville_top_stripe");var baseImagePath=target.find("input[name='baseImagePath']").val();var baseImageExtension=target.find("input[name='baseImageExtension']").val();var rewardCounter=0;for(i=0;i<data.reward_definitions.length;i++){rewardCounter=data.reward_counters[data.reward_definitions[i].id]>0?rewardCounter+1:rewardCounter}if(data&&data.reward_counters&&baseImagePath&&baseImageExtension){var rowHtml=[];var linkUrl=target.find("input[name='linkUrl']").val();if(linkUrl){rowHtml.push("<a class='link' href=\""+linkUrl+'/ref=nc_stripe_click">')}var isMissionComplete=rewardCounter===data.reward_definitions.length;var isMissionStarted=(rewardCounter>1);if(!isMissionStarted){rowHtml.push("<div class='nc_cont nc_cont_notstarted'>")}else{if(!isMissionComplete){rowHtml.push("<div class='nc_cont'>")}else{rowHtml.push("<div class='nc_cont nc_cont_complete'>")}}rowHtml.push("<img class='img' src=\""+baseImagePath+rewardCounter+"of"+data.reward_definitions.length+baseImageExtension+'"/>');rowHtml.push("</div>");if(linkUrl){rowHtml.push("</a>")}target.append(rowHtml.join(""));target.find(".nc_cont").slideDown(150)}}function missionProgressPage(data){var targetDiv=$("#missionSteps");var refMarkerPrefix="/ref=nc_mp_step_";var rewardCounter=0;var rowHtml=[];for(i=0;i<data.reward_definitions.length;i++){var isRewardComplete=data.reward_counters[data.reward_definitions[i].id]>0?true:false;var divClass="missionStep";if(i==0){divClass+=" firstStep"}if(i==data.reward_definitions.length-1){divClass+=" lastStep"}rowHtml.push("<div class='"+divClass+"'>");if(isRewardComplete){rewardCounter++;rowHtml.push("<span class='stepCheck'>"+getImg("checkbox_full")+"</span>");rowHtml.push("<span class='reward'><span class='rewardName rewardNameComplete'>"+data.reward_definitions[i].name+"</span>")}else{rowHtml.push("<span class='stepCheck'>"+getImg("checkbox_empty")+"</span>");var rewardName="";var refMarker=refMarkerPrefix+i;if(data.reward_definitions[i].tags.length>0&&data.reward_definitions[i].tags.indexOf("/")===0){var ncAction=data.reward_definitions[i].tags.indexOf("?")===-1?"?nc_action=true":"&nc_action=true";rewardName="<a href='"+data.reward_definitions[i].tags+refMarker+i+ncAction+"'>"+data.reward_definitions[i].name+" ></a>"}else{rewardName=data.reward_definitions[i].name}if(data.reward_definitions[i].hint&&data.reward_definitions[i].hint.length>0){rowHtml.push("<span class='reward adbl-flyout-cont-marker'><span class='rewardName rewardNameIncomplete adbl-flyout-trigger-marker'>"+rewardName+"</span>");rowHtml.push("<span class='adbl-flyout-marker'>");rowHtml.push("<span class='adbl-prod-social-overlay missionStepTooltip'>"+data.reward_definitions[i].hint+"</span>");rowHtml.push("</span></span>")}else{rowHtml.push("<span class='reward'><span class='rewardName rewardNameIncomplete'>"+rewardName+"</span></span>")}}rowHtml.push("</div>")}var html=rowHtml.join("");targetDiv.append(html);var baseImagePath=$("#aud_missionProgress_img").find("input[name='baseImagePath']").val();var baseImageExtension=$("#aud_missionProgress_img").find("input[name='baseImageExtension']").val();if(baseImagePath&&baseImageExtension){$("#aud_missionProgress_img").prepend('<img src="'+baseImagePath+rewardCounter+"of"+data.reward_definitions.length+baseImageExtension+'"/>')}if(rewardCounter===data.reward_definitions.length){var socialIcons=$("#aud_missionProgress_socialIcons");var facebookSpan=socialIcons.find(".facebook-share");if(facebookSpan){var facebookShareImg=facebookSpan.find("input[name='facebookShareImg']").val();var facebookObj={method:"feed",link:facebookSpan.find("input[name='facebookLink']").val(),name:facebookSpan.find("input[name='facebookHeadline']").val(),description:facebookSpan.find("input[name='facebookDescription']").val(),picture:facebookSpan.find("input[name='facebookPictureLink']").val()};if(facebookShareImg&&facebookObj.link&&(facebookObj.name||facebookObj.description)){facebookSpan.append('<img class="facebook-share-btn" src="'+facebookShareImg+'" />');facebookSpan.find(".facebook-share-btn").click(function(){FB.ui(facebookObj)})}}socialIcons.show()}$("#aud_missionProgress_loading").hide();$("#aud_missionProgress_cont").show()}function creditVideoWatched(src){if(src){$.ajax({type:"get",cache:false,url:"/gamification-ajax?task=WATCHED_VIDEO&videoid="+src,success:function(data){},error:function(error){}})}}function init(){var stripeExists=$("#badgeville_top_stripe").length>0;var onMissionProgressPage=$("#aud_missionProgress").length>0;if(stripeExists||onMissionProgressPage){missionProgress(onMissionProgressPage)}}return{creditVideoWatched:creditVideoWatched,init:init}});define("video-modal",["ftx/lib/jquery-current","audible-badgeville","audible-global-new"],function($,badgeville,AdblGlobal){$(function(){$(".int-modal-brick").click(showVideoModal);$(".merch_modal").click(showVideoModal);$(document).on("click",".int-modal-link",closeVideo);$(document).on("click","#int-overlay",closeVideo);$(window).resize(resizeVideoModal);if(AdblGlobal.getQueryParam("nc_action")==="true"){if($(".int-modal-brick")){$(".int-modal-brick").trigger("click")}else{$(".merch_modal").trigger("click")}}});var MERCH_MODAL_DEFAULT_WIDTH=450;var MERCH_MODAL_DEFAULT_HEIGHT=295;var MODAL_DEFAULT_WIDTH=630;var MODAL_DEFAULT_HEIGHT=390;var $overlay_wrapper;var $box_wrapper;function getVideoContent(tgt,isMerchModal){if(isMerchModal){return $("#"+tgt.attr("id")+"_video").html()}return tgt.parent().parent().find("#int_merch_modal_overlay").html()}function isGlobalWidthDefined(){return !(typeof modalWidth=="undefined")}function isGlobalHeightDefined(){return !(typeof modalHeight=="undefined")}function getWidth(tgt,isMerchModal){if(isGlobalWidthDefined()){return modalWidth}if(isMerchModal){return tgt.attr("data-width")||MERCH_MODAL_DEFAULT_WIDTH}return $("#int_merch_modal_overlay").attr("data-modal-width")||MODAL_DEFAULT_WIDTH}function getHeight(tgt,isMerchModal){if(isGlobalHeightDefined()){return modalHeight}if(isMerchModal){return tgt.attr("data-height")||MERCH_MODAL_DEFAULT_HEIGHT}return $("#int_merch_modal_overlay").attr("data-modal-height")||MODAL_DEFAULT_HEIGHT}function createOverlay(){$overlay_wrapper=$("<div />").attr("id","int-overlay").attr("tabindex","-1").appendTo("body")}function showOverlay(){if(!$overlay_wrapper){createOverlay()}$overlay_wrapper.css({width:$(document).width()+"px",height:$(document).height()+"px"}).show()}function createModalBox(){$box_wrapper=$("<div />").attr("id","int-container").attr("tabindex","0").appendTo("body")}function showModalBox(content,width,height){if(!$box_wrapper){createModalBox()}$box_wrapper.remove().appendTo("body").css({left:(($(window).width()-width)/2)+"px",top:($(window).scrollTop()+100)+"px"}).html(content).hide().fadeIn(300).focus()}function addAutoPlay(){var youtube_iframe=$box_wrapper.find(".int-modal-video-iframe");if(youtube_iframe.length){var videoSource=youtube_iframe.attr("src");if(videoSource.indexOf("?")===-1){youtube_iframe.attr("src",videoSource+"?autoplay=1")}else{if(videoSource.indexOf("autoplay")==-1){youtube_iframe.attr("src",videoSource+"&autoplay=1")}}}}function creditVideoWatched(){var youtube_iframe=$box_wrapper.find(".int-modal-video-iframe");if(youtube_iframe){var src=youtube_iframe.attr("src");if(src){var i=src.lastIndexOf("/")+1;var j=src.lastIndexOf("?");if(j>0){src=src.substr(i,j-i)}else{src=src.substr(i)}badgeville.creditVideoWatched(src)}}}function showVideoModal(e){e.preventDefault();AdblGlobal.setPreviousElementFocus(e);var tgt=$(this);var isMerchModal=tgt.hasClass("merch_modal");var $doc=$(document);showOverlay();showModalBox(getVideoContent(tgt,isMerchModal),getWidth(tgt,isMerchModal),getHeight(tgt,isMerchModal));addAutoPlay();creditVideoWatched()}function closeVideo(e){e.preventDefault();$overlay_wrapper.hide();$box_wrapper.hide().remove();AdblGlobal.getPreviousElementFocus()}function resizeVideoModal(){if($("#int-container").length){$("#int-overlay").css({width:$(window).width()+"px",height:$(document).height()+"px"});$("#int-container").css({left:(($(window).width()-$box_wrapper.width())/2)+"px",top:($(window).scrollTop()+100)+"px"})}}var videoModalGlobals={showVideoModal:showVideoModal};$.extend(window,videoModalGlobals);return videoModalGlobals});define("gift-module",["ftx/lib/jquery-current","i18n!nls/localizedstrings","swfobject","audible-global-new","cart-item-count-monitor","jquery-ui-1.8.min","isValid","page-action","client-side-metrics-jslogging"],function($,localstrings,swfobject,AdblGlobal,cartItemCountMonitor,jqueryui,isValid,pageAction,csm){$(function(){if($(".gift_landing_redeembox").val()==""){$(".gift_landing_redeembox").val(unescape(localstrings.gift_module_enterCode))}$(".gift_landing_redeembox").focus(function(){if($(".gift_landing_redeembox").val()==unescape(localstrings.gift_module_enterCode)){$(this).val("")}});$(".gift_landing_redeembox").blur(function(){if($(".gift_landing_redeembox").val()==""){$(".gift_landing_redeembox").val(unescape(localstrings.gift_module_enterCode))}});$(".adbl-gift-link").show();$(document).on("click",".adbl-gift-link a",function(evt){evt.preventDefault();evt.stopPropagation();ajaxToGetGiftModule($(this).attr("href"))});enablePrintPopup()});function getGmtDay(){var local_d=new Date();local_d.setHours(0,0,0,0);return local_d}function ajaxToGetGiftModule(dest){var waitingSign="<img alt='"+localstrings.gift_module_productImage+"' class='adbl-prod-image' src='http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif' style='margin-left:45%'/>";var dest=dest;var target="init-module";if(window.location.pathname.indexOf("/mycart")==0){target="viewCartGift"}appAction=pageAction.getAction();appActionToken=pageAction.getToken();var postData={target:target,appAction:appAction,appActionToken:appActionToken};if($(".giftParent").length>0){$(".giftParent").remove()}var bodytag=document.getElementsByTagName("body")[0];var parentDom=document.createElement("div");parentDom.setAttribute("class","giftParent");bodytag.appendChild(parentDom);var parentNode=$(parentDom);$.post(dest,postData,function dataLoaded(data,textStatus){if($("#module_gift").length>0){$("#module_gift").remove()}var newdiv=parentNode;newdiv.attr("role","document");newdiv.attr("aria-live","polite");newdiv.attr("aria-atomic","true");newdiv.attr("relevant","additions");newdiv.html(data);$("#giftinfodetails input[name='dest']").attr("value",dest);$("#adbl_page_content").css({"z-index":"0"});$(".giftContainer").css({"z-index":"2",background:"#FFFFFF"});var windowWidth=$(window).width();var windowHeight=$(window).height();var popupHeight=$(".giftContainer").height();var popupWidth=$(".giftContainer").width();$(".giftContainer").css({position:"absolute",top:($(window).scrollTop()+20)+"px",left:windowWidth/2-popupWidth/2});$(".giftContainerWarning").css({top:($(window).scrollTop()+200)+"px"});$(".giftContainer").attr("tabIndex","0");$(".adbl-calendar-icon").prev().click(function(){$(this).attr("class","date");$("#dateFormatError").hide();$(this).attr("value","")});var deliveryDateField=$(".delivery").find(".date");var deliveryDateFieldDefaultValue=$(deliveryDateField).attr("data-default-value");$(".adbl-calendar-icon").click(function(evt){var dateValue=$(deliveryDateField).val();if(dateValue==deliveryDateFieldDefaultValue){updateCalendar("","")}else{var dateFieldObj=$.datepicker.parseDate(localstrings.marketplaceDateFormat,dateValue);var month=dateFieldObj.getMonth();var year=dateFieldObj.getFullYear();var d=getGmtDay();var currentMonth=d.getUTCMonth();var currentYear=d.getUTCFullYear();if(month<=currentMonth&&year==currentYear){updateCalendar("","")}else{updateCalendar(year,month)}}$(".calendar").fadeIn("fast");bindEventToDayCells();$(this).prev().attr("class","date");$("#dateFormatError").hide()});$(".calendarClose").click(function(evt){evt.preventDefault();evt.stopPropagation();$(".calendar").fadeOut("fast")});$(".adbl-calendar-month").change(function(){var month=$(".adbl-calendar-month").val();var year=$(".adbl-calendar-year").val();updateCalendar(year,month);bindEventToDayCells()});$(".adbl-calendar-year").change(function(){var month=$(".adbl-calendar-month").val();var year=$(".adbl-calendar-year").val();updateCalendar(year,month);bindEventToDayCells()});var d=getGmtDay();var currentDate=d.getUTCDate();var currentMonth=d.getUTCMonth();var currentYear=d.getUTCFullYear();var futureDate=$("#giftinfodetails input[name='futureDate']").attr("value");var deliveryDateGMT=$("#deliverygmt").html()*1;if(futureDate=="true"){var gmt_dDay=new Date(deliveryDateGMT);var NextDate=new Date(currentYear,currentMonth,currentDate+1);var NextDateFormattedValue=$.datepicker.formatDate(localstrings.marketplaceDateFormat,NextDate);$(deliveryDateField).attr("value",NextDateFormattedValue)}else{if(deliveryDateGMT==0&&futureDate=="false"){$(deliveryDateField).attr("value",deliveryDateFieldDefaultValue)}else{if(deliveryDateGMT!=1){var gmt_dDay=new Date(deliveryDateGMT);var year=gmt_dDay.getUTCFullYear();var month=gmt_dDay.getUTCMonth()*1+1;var date=gmt_dDay.getUTCDate();var deliveryDateGMTFormattedValue=$.datepicker.formatDate(localstrings.marketplaceDateFormat,gmt_dDay);$(deliveryDateField).attr("value",deliveryDateGMTFormattedValue)}}}$(".adbl-calendar-month").find("option").each(function(index,element){if($(element).attr("value")==currentMonth){$(element).attr("selected","true")}});$(".adbl-calendar-year").find("option").each(function(index,element){if(index==0){$(element).attr("selected","true")}$(element).html(currentYear*1+index*1);$(element).attr("value",currentYear*1+index*1)});if($("#purchasedViewDelivery").length>0){if($("#purchaseViewDeliveryGmt").length>0){var gmt=$("#purchaseViewDeliveryGmt").html()*1;if(gmt&&gmt==0){$("#purchasedViewDelivery").html(localstrings.gift_module_immediately)}else{if(gmt&&gmt==1){$("#purchasedViewDelivery").html(localstrings.gift_module_print)}else{if(gmt){var gmt_d=new Date(gmt);var year=gmt_d.getFullYear()*1;var month=gmt_d.getMonth()*1+1;var date=gmt_d.getDate();$("#purchasedViewDelivery").html($.datepicker.formatDate(localstrings.marketplaceDateFormat,gmt_d))}}}}}$(".giftContainer").children(".close").click(function(evt){evt.preventDefault();evt.stopPropagation();hideOverlay()});$(".btnWhite input[type='submit']").click(function(evt){evt.preventDefault();evt.stopPropagation();hideOverlay()});if($(".adbl-calendar-today").length>0){$(".adbl-calendar-today").click(function(evt){evt.preventDefault();evt.stopPropagation();var d=getGmtDay();var day=d.getUTCDate();var month=d.getUTCMonth()*1+1;var year=d.getUTCFullYear();var GMTFormattedValue=$.datepicker.formatDate(localstrings.marketplaceDateFormat,getGmtDay());$(deliveryDateField).attr("value",GMTFormattedValue);$(".calendarClose").trigger("click")})}$(".adbl-gift-themeId").change(function(){ajaxToGetTheme($(this).val(),$(".adbl-giftprod-asin").attr("id"))});$(".adbl-gift-tnc").click(function(evt){evt.preventDefault();ajaxToGetTnC()});clickToSelectImg();$(".adbl-gift-recipientlist").click(function(evt){$(this).attr("class","adbl-gift-recipientlist");$("#recipientFormatError").hide();if($(".recepient").data("edit")!=1){$(this).attr("value","");$(this).attr("style","color:#000000");$(".recepient").data("edit",1)}});$(".adbl-gift-recipientlist").focus(function(evt){$(this).attr("class","adbl-gift-recipientlist");$("#recipientFormatError").hide();var defaultMsg=$(".recepient input").attr("data-default-value");var recipientList1=$(".recepient input").attr("value");var trimList=$.trim(recipientList1);if(trimList==defaultMsg){$(".recepient").data("edit",2)}if($(".recepient").data("edit")!=1){$(this).attr("value","");$(this).attr("style","color:#000000");$(".recepient").data("edit",1)}});$(".adbl-gift-sender").click(function(evt){$(this).attr("class","adbl-gift-sender");$("#senderFormatError").hide();var giftSender=$(".sender input").attr("value");var trimValue=$.trim(giftSender);if(trimValue==unescape(localstrings.gift_module_enterName)){$(".sender").data("edit",2)}if($(".sender").data("edit")!=1){$(this).attr("value","");$(this).attr("style","color:#000000");$(".sender").data("edit",1)}});$(".adbl-gift-sender").focus(function(evt){$(this).attr("class","adbl-gift-sender");$("#senderFormatError").hide();if($(".sender").data("edit")!=1){$(this).attr("value","");$(this).attr("style","color:#000000");$(".sender").data("edit",1)}});$(".adbl-gift-sender").keyup(function(){validateAndShowPreviewButton()});$(".adbl-gift-recipientlist").keyup(function(){validateAndShowPreviewButton()});$(".adbl-gift-imagetext").keydown(function(){var message=$(".adbl-gift-imagetext textarea").attr("value");message=$.trim(message);if(message.length>300){message=$.trim(message).substring(0,300);$(".adbl-gift-imagetext textarea").attr("value",message)}var total=unescape(localstrings.gift_module_limitChar)+(300-$.trim(message).length)+unescape(localstrings.gift_module_charRemaining);$(".giftStyle .remain").html(total)});$("#deliveryByEmail").click(function(){$(".adbl-gift-emailpolicy").show();$(".adbl-gift-printpolicy").hide();$(deliveryDateField).attr("value",deliveryDateFieldDefaultValue);$("#senderFormatError").hide();$("#recipientFormatError").hide();$(".adbl-calendar-icon").unbind("click");$(".adbl-calendar-icon").click(function(evt){updateCalendar("","");$(".calendar").fadeIn("fast");bindEventToDayCells()});validateAndShowPreviewButton();if($(".recepient").data("edit")!=1){$(".recepient input").attr("value",$(".recepient input").attr("data-default-value"))}});$("#deliveryByPrint").click(function(){disableDateInputField();$(".adbl-gift-emailpolicy").hide();$(".adbl-gift-printpolicy").show();$(".adbl-calendar-icon").unbind("click");deliveryDateField.attr("value","");var sender=$(".sender input").attr("value");var recipientList=$(".recepient input").attr("value");if(recipientList.length>1){$("#recipientFormatError").hide()}if(sender.length>1){$("#senderFormatError").hide()}validateAndShowPreviewButton();if($(".recepient").data("edit")!=1){$(".recepient input").attr("value",unescape(localstrings.gift_module_print_default_name))}});$("#previewWarningCancel").click(function(evt){evt.preventDefault();evt.stopPropagation();hideOverlay()});if(window.location.pathname.indexOf("/mycart")==0||window.location.pathname.indexOf("/purchased-gift")==0){$(".recepient").data("edit",1);$(".sender").data("edit",1);$(".adbl-gift-sender").attr("style","color:#000000");$(".adbl-gift-recipientlist").attr("style","color:#000000");validateAndShowPreviewButton()}$(".adbl-gift-imagetext").trigger("keydown");if($.browser.msie){if($(".giftContainerWarning").length<1){$(".giftContainer").css("min-height","600px")}$(".giftContainerPreview").css("min-height","600px")}var deliveryType="print";if($("#deliveryByEmail").prop("checked")){deliveryType="email"}if(deliveryType=="print"){$(".adbl-calendar-icon").unbind("click");disableDateInputField()}if($("#previewScrImgUrl").length>0){var previewURL=$("#previewScrGiftImgUrl").attr("src");if(window.location.pathname.indexOf("/mycart")==0||window.location.pathname.indexOf("/purchased-gift")==0||window.location.pathname.indexOf("/gift-landing")==0){previewURL=previewURL.replace("http://g-ecx.images-amazon.com","https://images-na.ssl-images-amazon.com")}var background="background: url("+previewURL+") no-repeat scroll 0 0 transparent;";$(".card").attr("style",background)}if($(".adbl-giftmembership-option").length>0){bindingGiftMembershipOptionEvent()}if($(".adbl-giftmembership-option-selected").length>0){var elm=$(".adbl-giftmembership-option-selected");elm.unbind("click");elm.click(function(evt){evt.preventDefault()})}})}function bindingGiftMembershipOptionEvent(){$(".adbl-giftmembership-option").each(function(){$(this).click(function(evt){evt.preventDefault();updateMbrshipInfo($(this))})})}function updateMbrshipInfo(elm){var mbrshipAsin=elm.attr("href");var title=elm.html();$(".cardContainer h2").html(title);$(".adbl-giftprod-asin").attr("id",mbrshipAsin);$(".adbl-giftmembership-option-selected .giftWrap").hide();$(".adbl-giftmembership-option-selected").attr("class","adbl-giftmembership-option");elm.attr("class","adbl-giftmembership-option-selected");elm.find(".giftWrap").show();elm.unbind("click");elm.click(function(evt){evt.preventDefault()});$(".adbl-giftprod-asin").attr("id",mbrshipAsin);bindingGiftMembershipOptionEvent();$("#giftMembershipTitle").html($("a.adbl-giftmembership-option-selected").attr("title"))}function getTodaysFormattedGMTDate(){return $.datepicker.formatDate(localstrings.marketplaceDateFormat,getGmtDay())}function hideOverlay(){$(".giftParent").fadeOut("fast");$(".module_gift").fadeOut("fast");$(".giftContainer").fadeOut("fast");$(".overlay").fadeOut("fast");$(".giftContainerPreview").fadeOut("fast")}function validateAndShowPreviewButton(){var showReview="no";var deliveryDateField=$(".delivery").find(".date");var defaultRecMsg=$(".recepient input").attr("data-default-value");var recipientList=$(".recepient input").attr("value");var trimRec=$.trim(recipientList);var sender=$(".sender input").attr("value");var trimSen=$.trim(sender);var message=$(".adbl-gift-imagetext textarea").attr("value");$(".adbl-gift-imagetext textarea").attr("value",message);if(trimRec==defaultRecMsg){$(".recepient").data("edit",2)}if(trimSen==unescape(localstrings.gift_module_enterName)){$(".sender").data("edit",2)}if($(".recepient").data("edit")==1&&($(".sender").data("edit")==1)){var message=$(".adbl-gift-imagetext textarea").attr("value");$(".adbl-gift-imagetext textarea").attr("value",message);$(".adbl-gift-imagetext textarea").attr("value",message);var datetosend="yes";if($("#deliveryByEmail").prop("checked")){deliveryDate=deliveryDateField.attr("value");if(deliveryDate.length<=1){datetosend="no"}}if(recipientList.length>1&&sender.length>1&&message.length>1&&datetosend=="yes"){showReview="yes"}}if(showReview=="yes"&&$("#adbl-gift-previewbutton").attr("class")!="btnOrange preview"){$("#adbl-gift-previewbutton").attr("class","btnOrange preview");assignGiftScreenTabIndex();$("#adbl-gift-previewbutton").click(function(evt){evt.preventDefault();evt.stopPropagation();validateAndShowPreview()})}else{if(showReview=="no"){$("#adbl-gift-previewbutton").attr("class","btnInactive");$("#adbl-gift-previewbutton").unbind("click")}}$("#adbl-gift-thankbutton").click(function(evt){evt.preventDefault();evt.stopPropagation();$(".giftContainer").hide();var windowWidth=$(window).width();var popupWidth=$(".giftContainerPreview").width();$(".giftContainerPreview").css({position:"absolute",top:($(window).scrollTop()+20)+"px",left:windowWidth/2-popupWidth/2});var content='<div id="gift-ribbon-thank-you"><div id="gift-ribbon-container"><div id="gift-ribbon"><img src="https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/flash/noflashimage/ADBLCRE_456_animate_ribbon.png" /></div></div><h3>'+unescape(localstrings.gift_module_giftOnItsWay)+"</h3></div>";$(".giftContainerPreview .giftMessage").html(content);var swfFile="https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/flash/modules/gift_modal/ADBLCRE_456_animate_ribbon.swf";var params={movie:swfFile,quality:"high",wmode:"transparent",salign:"TL",bgcolor:"#000000",menu:"true",allowScriptAccess:"always"};var flashvars={};swfobject.embedSWF(swfFile,"gift-ribbon","200","110","10.0.0","",flashvars,params);$(".giftInstr").hide();$(".previewDelivery").hide();$("#giftcompletebtn").attr("style","display:block");$("#giftcompletebtn span").html(localstrings.gift_module_done);$("#giftcompletebtn span").attr("title",localstrings.gift_module_done);$("#giftcompletebtn span").attr("alt",localstrings.gift_module_done);$("#adbl-gift-thankbutton").attr("style","display:none");$("#gifteditbtn").attr("style","display:none");$("#giftcancelbtn").attr("style","display:none");$(".giftContainerPreview").show()})}function enableDateInputField(){$(".deliveryType .date").removeAttr("disabled");$(".deliveryType .date").unbind("click");$(".deliveryType .date").click(function(){$(this).attr("class","date");$("#dateFormatError").hide();$(this).attr("value","")})}function disableDateInputField(){$(".deliveryType .date").attr("disabled","disabled")}function validateDateFormat(date){if(date&&typeof date!=="string"){return false}date=$.trim(date);var currentDay=getGmtDay();var currentYear=currentDay.getUTCFullYear();try{var dateFieldObj=$.datepicker.parseDate(localstrings.marketplaceDateFormat,date);var month=dateFieldObj.getMonth();var day=dateFieldObj.getDate();var year=dateFieldObj.getFullYear();if(month>=0&&month<=11&&day<=31&&day>=1&&year<(currentYear+2)&&year>(currentYear-1)){return true}}catch(E){}return false}function validateAndShowPreview(){var showPreview="yes";var deliveryDateField=$(".delivery").find(".date");var recipient=$(".recepient input").attr("value");var deliveryDateDefaultValue=deliveryDateField.attr("data-default-value");recipient=$.trim(recipient);var sender=$(".sender input").attr("value");sender=$.trim(sender);var message=$(".adbl-gift-imagetext textarea").attr("value");var dateFormat="yes";var recipientFormat="yes";var senderEmailFormat="yes";if($("#deliveryByEmail").prop("checked")){deliveryDate=deliveryDateField.attr("value");if(deliveryDate.length<=1){dateFormat="no"}else{if(deliveryDate!=deliveryDateDefaultValue){if(!validateDateFormat(deliveryDate)){dateFormat="no";deliveryDateField.attr("class","date error")}}}if(recipient.length<1||!isValid.Email(recipient)){recipientFormat="no";var curClass=$(".recepient input").attr("class");$(".recepient input").attr("class",curClass+" error");$("#recipientFormatError").html("<p>"+unescape(localstrings.gift_module_enterEmail)+"</p>")}}else{if(recipient.length<1||recipient.length>75){if(recipient.length<1){$("#recipientFormatError").html("<p>"+unescape(localstrings.gift_module_blankRecipientName)+"</p>")}if(recipient.length>75){$("#recipientFormatError").html("<p>"+unescape(localstrings.gift_module_noMoreThan)+"</p>")}recipientFormat="no";var curClass=$(".recepient input").attr("class");$(".recepient input").attr("class",curClass+" error")}}if(window.location.pathname.indexOf("/purchased-gift")==0){if(recipientFormat!="no"){if(recipient.indexOf(",")!=-1){$("#recipientFormatError").html("<p>"+unescape(localstrings.gift_module_onlyOneRecipient)+"</p>");recipientFormat="no";var curClass=$(".recepient input").attr("class");$(".recepient input").attr("class",curClass+" error")}}}if(sender.length<1||sender.length>75){if(sender.length<1){$("#senderFormatError").html("<p>"+unescape(localstrings.gift_module_blankPurchaseName)+"</p>")}if(sender.length>75){$("#senderFormatError").html("<p>"+unescape(localstrings.gift_module_noMoreThan)+"</p>")}senderEmailFormat="no";var curClass=$(".sender input").attr("class");$(".sender input").attr("class",curClass+" error")}if(message.length<1||dateFormat=="no"||recipientFormat=="no"||senderEmailFormat=="no"){showPreview="no";if(dateFormat=="no"){showErrorFlyout($(".adbl-calendar-icon"),"dateFormatError")}if(recipientFormat=="no"){showErrorFlyout($(".adbl-gift-recipientlist"),"recipientFormatError")}if(senderEmailFormat=="no"){showErrorFlyout($(".adbl-gift-sender"),"senderFormatError")}}if($(".adbl-giftmembership-option-selected").length>0){var membershipImageurl=$(".adbl-giftmembership-option-selected .adbl-prod-image img").attr("src");if(membershipImageurl){membershipImageurl=membershipImageurl.replace("60","80");if(window.location.protocol.indexOf("https")!=-1){membershipImageurl=membershipImageurl.replace("http://g-ecx.images-amazon.com","https://images-na.ssl-images-amazon.com")}var membershipImagealt=$(".adbl-giftmembership-option-selected").attr("alt");$(".previewCard .gift .adbl-membershipprev-img").attr("src",membershipImageurl).attr("alt",membershipImagealt).attr("style","float:none");$(".previewCard .gift span").html(membershipImagealt)}}if(showPreview=="yes"){showPreviewScreen()}}function showErrorFlyout(parentNode,errorMsgId){var className=parentNode.attr("class");className+=" error";parentNode.attr("class",className);$("#"+errorMsgId).show();var left=parentNode.offset().left-$(".giftContainer").offset().left+parentNode.width()+5;var top=parentNode.offset().top-$(".giftContainer").offset().top-$(".errorMsg").height()*1/2;var cssProps={top:top,left:left,display:"block",position:"absolute"};$("#"+errorMsgId).css(cssProps)}function clickToSelectImg(){$("#adbl-gift-img0").click(function(evt){evt.preventDefault();$("#adbl-gift-img1").attr("class","adbl-giftbg-img");$(this).attr("class","adbl-giftbg-selected")});$("#adbl-gift-img1").click(function(evt){evt.preventDefault();$("#adbl-gift-img0").attr("class","adbl-giftbg-img");$(this).attr("class","adbl-giftbg-selected")})}function assignPreviewScreenTabIndex(){$("#adbl-gift-previewbutton").attr("tabIndex","");$(".giftContainer").attr("tabIndex","");$(".giftDetails .terms").attr("tabIndex","");$(".giftDetails .giftContainerPreview").attr("tabIndex","0");$("#previewEdit").attr("tabIndex","1");$("#previewCancel").attr("tabIndex","2");$("#giftcompletebtn").attr("tabIndex","3");$("#adbl-button-backtogift").attr("tabIndex","")}function assignGiftScreenTabIndex(){$("#adbl-gift-previewbutton").attr("tabIndex","0");$(".giftContainer").attr("tabIndex","1");$(".giftDetails .terms").attr("tabIndex","");$(".giftDetails .giftContainerPreview").attr("tabIndex","");$("#previewEdit").attr("tabIndex","");$("#previewCancel").attr("tabIndex","");$("#giftcompletebtn").attr("tabIndex","");$("#adbl-button-backtogift").attr("tabIndex","")}function assignLegalScreenTabIndex(){$("#adbl-gift-previewbutton").attr("tabIndex","");$(".giftContainer").attr("tabIndex","");$(".giftDetails .terms").attr("tabIndex","0");$(".giftDetails .giftContainerPreview").attr("tabIndex","");$("#previewEdit").attr("tabIndex","");$("#previewCancel").attr("tabIndex","");$("#giftcompletebtn").attr("tabIndex","");$("#adbl-button-backtogift").attr("tabIndex","1")}function showPreviewScreen(){if(window.location.pathname.indexOf("/mycart")==0||window.location.pathname.indexOf("/purchased-gift")==0){var giftModuleSaveChanges=unescape(localstrings.gift_module_saveChanges);$("#giftcompletebtn span").html(giftModuleSaveChanges);$("#giftcompletebtn span").attr("title",giftModuleSaveChanges);$("#giftcompletebtn span").attr("alt",giftModuleSaveChanges);$("#giftcompletebtn").addClass("saveChanges")}else{$("#giftcompletebtn").removeClass("saveChanges")}assignPreviewScreenTabIndex();var previewURL=$(".adbl-giftbg-selected").find("#adblGiftbgPpreviewImg").attr("src");if(window.location.pathname.indexOf("/mycart")==0||window.location.pathname.indexOf("/purchased-gift")==0||window.location.pathname.indexOf("gift-landing")==0){previewURL=previewURL.replace("http://g-ecx.images-amazon.com","https://images-na.ssl-images-amazon.com")}var background="background: url("+previewURL+") no-repeat scroll 0 0 transparent;";$(".card").attr("style",background);var deliveryType="print";if($("#deliveryByEmail").prop("checked")){deliveryType="email"}var deliveryDate="";var deliveryDateField=$(".delivery").find(".date");deliveryDate=deliveryDateField.attr("value");var deliveryDateDefaultValue=deliveryDateField.attr("data-default-value");var local_d=getGmtDay();var gmt_d=getGmtDay();if(deliveryDate&&deliveryDate===getTodaysFormattedGMTDate()){deliveryDate=deliveryDateDefaultValue}if(deliveryDate&&deliveryDate!=deliveryDateDefaultValue){gmt_d=$.datepicker.parseDate(localstrings.marketplaceDateFormat,deliveryDate)}var gmt_d_time=gmt_d.getTime();if($(".giftContainerPreview").length>0){$(".giftContainerPreview").attr("tabIndex","0")}var recipient=$(".recepient input").attr("value");recipient=$.trim(recipient);var recipientCount=1;var sender=$(".sender input").attr("value");sender=$.trim(sender);var themeId=$(".adbl-gift-themeId").val();var imageId="0";if($(".adbl-giftbg-selected").attr("id")=="adbl-gift-img1"){imageId="1"}var message=$(".adbl-gift-imagetext textarea").attr("value");if(message){message=$.trim(message)}var asin=$(".adbl-giftprod-asin").attr("id");var cartGiftId=$("#giftinfodetails input[name='cartGiftId']").attr("value");var giftRecipientId=$("#giftinfodetails input[name='giftRecipientId']").attr("value");$("#giftinfodetails input[name='deliveryType']").attr("value",deliveryType);$("#giftinfodetails input[name='deliveryDate']").attr("value",deliveryDate);$("#giftinfodetails input[name='recipientList']").attr("value",recipient);$("#giftinfodetails input[name='sender']").attr("value",sender);$("#giftinfodetails input[name='themeId']").attr("value",themeId);$("#giftinfodetails input[name='imageId']").attr("value",imageId);$("#giftinfodetails input[name='message']").attr("value",message);$("#giftinfodetails input[name='asin']").attr("value",asin);$("#previewRecipient").html(recipient);$("#previewSender").text(sender);$(".previewMsg").text(message);if(deliveryType=="print"){$(".previewDelivery").html(localstrings.gift_module_sendThisGift+" <span class='red' >"+localstrings.gift_module_inPrint+".</span>")}if(deliveryType=="email"&&deliveryDate==deliveryDateDefaultValue){$(".previewDelivery").html(localstrings.gift_module_sendThisEmail+" <span class='red' >"+deliveryDateDefaultValue+".</span>")}if(deliveryType=="email"&&deliveryDate!=deliveryDateDefaultValue){var emailDelivery=localstrings.gift_module_yourGiftWillBeEmailedOn+" <span class='red' >"+deliveryDate+".</span>";$(".previewDelivery").html(emailDelivery)}$(".giftContainer").hide();var windowWidth=$(window).width();var popupWidth=$(".giftContainerPreview").width();$(".giftContainerPreview").css({position:"absolute",top:($(window).scrollTop()+20)+"px",left:windowWidth/2-popupWidth/2});$(".giftContainerPreview").show();$("#previewEdit").attr("style","padding-top:8px;height:29px");$("#previewCancel").click(function(evt){evt.preventDefault();evt.stopPropagation();hideOverlay()});$(".giftContainerPreview .close").click(function(evt){evt.preventDefault();evt.stopPropagation();$(".gift").hide("slow")});$("#previewEdit").click(function(evt){$(".giftContainer").show();$(".giftContainerPreview").hide();$(".addToCartErrorMsg").hide()});$("#giftcompletebtn").click(function(evt){evt.stopImmediatePropagation();evt.preventDefault();var dest=$("#giftinfodetails input[name='dest']").attr("value");dest=dest.split("&asin")[0];var target="addToCart";if(window.location.pathname.indexOf("/mycart")==0){target="editCart"}if(window.location.pathname.indexOf("/purchased-gift")==0||window.location.pathname.indexOf("/gift-landing")==0){target="editGiftHistory"}var deliveryTypeToSend=$("#giftinfodetails input[name='deliveryType']").attr("value");var messageToSend=$("#giftinfodetails input[name='message']").attr("value");var themeIdToSend=$("#giftinfodetails input[name='themeId']").attr("value");var imageIdToSend=$("#giftinfodetails input[name='imageId']").attr("value");var deliveryDate=$("#giftinfodetails input[name='deliveryDate']").attr("value");var senderToSend=$("#giftinfodetails input[name='sender']").attr("value");var recipientListToSend=$("#giftinfodetails input[name='recipientList']").attr("value");var asinToSend=$("#giftinfodetails input[name='asin']").attr("value");var cartGiftIdToSend=$("#giftinfodetails input[name='cartGiftId']").attr("value");var giftRecipientIdToSend=$("#giftinfodetails input[name='giftRecipientId']").attr("value");var local_d=getGmtDay();var gmt_d=getGmtDay();if(deliveryDate&&deliveryDate===getTodaysFormattedGMTDate()){deliveryDate=deliveryDateDefaultValue}if(deliveryDate&&deliveryDate!=deliveryDateDefaultValue){gmt_d=$.datepicker.parseDate(localstrings.marketplaceDateFormat,deliveryDate)}var gmt_d_timeToSend=gmt_d.getTime();if(messageToSend){messageToSend=$.trim(messageToSend)}if(senderToSend){senderToSend=$.trim(senderToSend)}if(recipientListToSend){recipientListToSend=$.trim(recipientListToSend)}appAction=pageAction.getAction();appActionToken=pageAction.getToken();var postData={target:target,deliveryType:deliveryTypeToSend,message:messageToSend,themeId:themeIdToSend,imageId:imageIdToSend,deliveryDate:gmt_d_timeToSend,sender:senderToSend,recipientList:recipientListToSend,asin:asinToSend,cartGiftId:cartGiftIdToSend,giftRecipientId:giftRecipientIdToSend,appAction:appAction,appActionToken:appActionToken};if(window.location.pathname.indexOf("/purchased-gift")==0||window.location.pathname.indexOf("/gift-landing")==0){dest=dest.replace("viewGiftHistory","editGiftHistory")}$(".addToCartErrorMsg").html("Please wait...");$.post(dest,postData,function dataLoaded(data,textStatus){if(data.indexOf("success")!=-1){if(data.indexOf("addToCart")!=-1||data.indexOf("editCartsuccess")!=-1){if(data.indexOf("addToCart")){updateCartItemCount(recipientCount)}var url="https://"+document.location.host;var target="/mycart";url+=target;if(typeof s_enabled!="undefined"){try{s_cartAdd(AdblGlobal.getURLParameter(dest,"asin"),"","",AdblGlobal.getURLParameterIncludingPath(dest,"ref"),"giveasgift")}catch(e){csm.logJSErrors(e,"/mycart","s_cartAdd","ERROR")}}if(data.indexOf("addToCart")!=-1){url+="?appActionToken="+encodeURIComponent($('input[name="appActionToken"]').attr("value"))+"&appAction="+encodeURIComponent($('input[name="appAction"]').attr("value"))+"&cartAction=addItem&deliveryType="+encodeURIComponent(postData.deliveryType)+"&message="+encodeURIComponent(postData.message)+"&themeId="+encodeURIComponent(postData.themeId)+"&imageId="+encodeURIComponent(postData.imageId)+"&deliveryDate="+encodeURIComponent(postData.deliveryDate)+"&sender="+encodeURIComponent(postData.sender)+"&recipientList="+encodeURIComponent(postData.recipientList)+"&asin="+encodeURIComponent(postData.asin)+"&cartGiftId="+encodeURIComponent(postData.cartGiftId)+"&giftRecipientId="+encodeURIComponent(postData.giftRecipientId)}window.location=url}if(window.location.pathname.indexOf("/purchased-gift")==0||window.location.pathname.indexOf("/gift-landing")==0){window.location=window.location}}else{$(".addToCartErrorMsg").html(data.split("failed")[1].split("\\.")[0]+".").show()}})})}function updateCartItemCount(recipientCount){var currentNum=$("#mast-member-cart-num").html();var cartCount=parseInt($.trim(currentNum));var val=cartCount+recipientCount;cartItemCountMonitor.updateCartItemCount(val)}function ajaxToGetTnC(){var dest="/get-giftmodule";appAction=pageAction.getAction();appActionToken=pageAction.getToken();var postData={target:"tnc",appAction:appAction,appActionToken:appActionToken};$.post(dest,postData,function dataLoaded(data,textStatus){var newdiv=$(".terms");newdiv.html(data);$(".giftStyle").hide();$(".delivery").hide();$(".adbl-gift-tnc").hide();$(".btnWhite").hide();$("#adbl-gift-previewbutton").hide();$(".terms").show();$("#adbl-button-backtogift").show();assignLegalScreenTabIndex();$("#adbl-button-backtogift").click(function(evt){evt.preventDefault();$(".giftStyle").show();$(".delivery").show();$(".adbl-gift-tnc").show();$(".btnWhite").show();$("#adbl-gift-previewbutton").show();$(".terms").hide();$("#adbl-button-backtogift").hide()})})}function ajaxToGetTheme(id,prodAsin){var dest="/get-giftmodule";appAction=pageAction.getAction();appActionToken=pageAction.getToken();var postData={target:"theme",themeId:id,asin:prodAsin,appAction:appAction,appActionToken:appActionToken};$.post(dest,postData,function dataLoaded(data,textStatus){var newdiv=$(".adbl-gift-imagetext");newdiv.html(data);clickToSelectImg();$(".adbl-gift-imagetext").trigger("keydown")})}function enablePrintPopup(){$(".gift-print").each(function(){$(this).unbind("click");$(this).click(function(evt){evt.preventDefault();evt.stopPropagation();var url="https://"+document.location.host+$(this).attr("href").replace(/\n/g,"");if(url.indexOf("?")!=-1){url+="&"}else{url+="?"}url+="appActionToken="+encodeURIComponent($('input[name="appActionToken"]').attr("value"))+"&appAction="+encodeURIComponent($('input[name="appAction"]').attr("value"));popupGiftWindow(url,"",localstrings.gift_module_print,"status=no,width=800,height=520","0","0")})})}function popupGiftWindow(url,appParameters,windowName,windowParameters,locx,locy){var appParams=appParameters||"";var winName=windowName||"";var winParams=windowParameters||"resizable=yes,toolbar=yes,location=no,menubar=yes,scrollbars=yes,status=yes,width=500,height=400";if(!locx){locx=(window.screen.width/2)-(75+10)}if(!locy){locy=(window.screen.height/2)-(100+50)}newWin=window.open(url+appParameters,windowName,"status=1, menubar=1, scrollbars=1, width=1020,height=520");newWin.moveTo(locx,locy)}function bindEventToDayCells(){$(".calendar").find(".active").each(function(index,element){$(element).click(function(){var month=$(".adbl-calendar-month").val();var year=$(".adbl-calendar-year").val();var day=$(element).html();var calendarDate=new Date(year,month,day);$(".delivery").find(".date").attr("value",$.datepicker.formatDate(localstrings.marketplaceDateFormat,calendarDate));$(".calendarClose").trigger("click")})});$(".calendar").find(".inactive").each(function(index,element){$(element).unbind("click")});$(".calendar").find(".blank").each(function(index,element){$(element).unbind("click")})}function updateCalendar(year,month){var d=getGmtDay();var todayInMonth=d.getUTCDate();var thisMonth;var thisYear;var firstDayOfThisMonth=1;var firstWeekDayOfThisMonth;var lastDayOfThisMonth;var lastWeekDayOfThisMonth;var isCurrentMonth="false";var isPastMonth="false";var isFutureMonthNextYear="false";var isCurrentMonthNextYear="false";var isNextYear="false";if(year==""&&month==""){thisMonth=d.getUTCMonth();thisYear=d.getUTCFullYear();isCurrentMonth="true"}else{thisMonth=month;thisYear=year;if(thisYear<d.getUTCFullYear()){isNextyear="true"}if(thisMonth==d.getUTCMonth()&&thisYear==d.getUTCFullYear()){isCurrentMonth="true"}else{if(thisMonth<d.getUTCMonth()&&thisYear==d.getUTCFullYear()){isPastMonth="true"}else{if(thisMonth>d.getUTCMonth()&&thisYear>d.getUTCFullYear()){isFutureMonthNextYear="true"}else{if(thisMonth==d.getUTCMonth()&&thisYear>d.getUTCFullYear()){isCurrentMonthNextYear="true"}}}}}var firstDay=new Date(thisYear,thisMonth,1);firstWeekDayOfThisMonth=firstDay.getDay();var lastDay=new Date(thisYear,thisMonth*1+1,0);lastDayOfThisMonth=lastDay.getDate();lastWeekDayOfThisMonth=lastDay.getDay();todayInMonth=todayInMonth+firstWeekDayOfThisMonth-1;lastDayOfThisMonth=lastDayOfThisMonth+firstWeekDayOfThisMonth-1;var counter=0;$(".calendar").find("tbody").find("tr").each(function(weekIndex,weekElement){var futureDate=$("#giftinfodetails input[name='futureDate']").attr("value");if(counter>lastDayOfThisMonth){$(weekElement).attr("style","display:none")}else{$(weekElement).attr("style","display:table-row");$(weekElement).find("td").each(function(weekDayIndex,weekDayElement){var thisDate=counter-firstWeekDayOfThisMonth+1;if(counter<firstWeekDayOfThisMonth){$(weekDayElement).attr("class","blank");$(weekDayElement).html("")}else{if(counter>lastDayOfThisMonth){$(weekDayElement).attr("class","blank");$(weekDayElement).html("")}else{if((isCurrentMonth=="true"&&counter>=firstWeekDayOfThisMonth&&counter<todayInMonth&&futureDate=="false")||isPastMonth=="true"||isFutureMonthNextYear=="true"||(isCurrentMonthNextYear=="true"&&counter>todayInMonth)){$(weekDayElement).attr("class","inactive");$(weekDayElement).html(thisDate)}else{if((isCurrentMonth=="true"&&counter>=firstWeekDayOfThisMonth&&counter<=todayInMonth&&futureDate=="true")||isPastMonth=="true"||isFutureMonthNextYear=="true"||(isCurrentMonthNextYear=="true"&&counter>todayInMonth)){$(weekDayElement).attr("class","inactive");$(weekDayElement).html(thisDate)}else{$(weekDayElement).attr("class","active");$(weekDayElement).html(thisDate)}}}}counter++})}});$(".adbl-calendar-month").get(0).selectedIndex=thisMonth;$(".adbl-calendar-year option[value="+thisYear+"]").attr("selected","selected")}});define("giftredemption",["ftx/lib/jquery-current","audible-utils","page-action","i18n!nls/localizedstrings","elastislide"],function($,util,pageAction,localstrings){$(function(){$(".adbl-gift-claimcode-submit").click(saveClaimCodeChanges);$(".adbl-gift-claimcode_l_submit").click(saveClaimCodeGMChanges);$(".adbl-select-gift").click(redeemSelectedGift)});$(document).ready(function(){checkForGiftCCErrors();displayRecomendations();$(".carousel").elastislide({imageW:95,margin:40,minItems:1})});$(".adbl-forgot-username").bind("mouseover",function(e){e.preventDefault();var pos=$(".adbl-forgot-username").position();$(".username-info").css("left",pos.left+270);$(".username-info").css("top",pos.top-30);$(".username-info").toggle()});$(".adbl-forgot-username").bind("mouseout",function(e){$(".username-info").hide()});function displayRecomendations(){if($("#getRecomendationsforAsin").length>0){var recoasin=$('input[name="asin"]').attr("value");var showMore=$('input[name="showMore"]').val();$("#getRecomendationsforAsin").html('<span class="tabajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif" /></span>');var url="/giftrecom/redemptionRecomedations?layoutId=1&selectedAsin="+recoasin+"&showMore="+showMore;$.ajax({url:url,cache:false,dataType:"html",success:handleSuccessCallBack})}}function handleSuccessCallBack(data){$("#getRecomendationsforAsin").html(data)}function checkForGiftCCErrors(){var errorMessage=$("input[name='adbl-error-message']").val();if(errorMessage!=""){$(".adbl-gift-redemption h4").css("display","block");$(".adbl-gift-redemption h4").val()==errorMessage}}function saveClaimCodeChanges(evt){evt.preventDefault();var active_element=$(this);if(active_element.hasClass("submitButtonClicked")){return}var isClaimCodeFilled=($("#giftClaimCode").val())?true:false;var postChanges=true;if(!isClaimCodeFilled){$(".adbl-error-msg").text(unescape(localstrings.giftredemption_enterClaimCode));$(".adbl-gift-redemption .adbl-error-msg").css("display","block");postChanges=false}if(!isClaimCodeFilled){$('label[for="giftClaimCode"]').addClass("error")}else{$('label[for="giftClaimCode"]').removeClass("error")}if(postChanges){var claimCode=$("#giftClaimCode").attr("value");claimCode=sanitizeMessage(claimCode);$("#giftClaimCode").attr("value",$.trim(claimCode));active_element.addClass("submitButtonClicked");$('form[id="adbl_redeem_gift"]').submit()}}function sanitizeMessage(message){return util.stripScripts(message)}function saveClaimCodeGMChanges(evt){evt.preventDefault();var active_element=$(this);if(active_element.hasClass("submitButtonClicked")){return}var claimCode=$.trim($("#giftClaimCode").val());var postChanges=true;if(claimCode==""||claimCode==unescape(localstrings.gift_module_enterCode)){$(".adbl-error-msg").text(unescape(localstrings.giftredemption_enterClaimCode));$(".adbl-gift-redemption .adbl-error-msg").css("display","block");$(".gift_landing_redeembox").css("border","2px solid #FF0000");postChanges=false}if(postChanges){$("#giftClaimCode").attr("value",claimCode);$('form[id="adbl_redeem_gift"]').attr("action","/gift-redemption?isGM=gm");active_element.addClass("submitButtonClicked");$('form[id="adbl_redeem_gift"]').submit()}}function redeemSelectedGift(evt){evt.preventDefault();var target=$(evt.target);var link=target.parent();var dest=link.attr("href")||"";dest+="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken();self.location.href=dest}});define("showmore",["ftx/lib/jquery-current"],function($){$(document).ready(function(){showMoreShowLess()});function showMoreShowLess(){$(".adbl-prod-desc .long_desc").hide();var toShowBind=".adbl-prod-desc span a.show, .adbl-prod-desc p a.show";var toHideBind=".adbl-prod-desc span a.hide, .adbl-prod-desc p a.hide";$(toShowBind).parent().show();$(toShowBind).click(function(evt){evt.preventDefault();$(this).hide();var parentdiv=$(this).parent().parent();$(parentdiv).find(".helips").hide();$(parentdiv).find(".long_desc").fadeIn()});$(toHideBind).click(function(evt){evt.preventDefault();var parentdiv=$(this).parent().parent();$(parentdiv).find(".long_desc").fadeOut(function(){$(this).parent().find(".helips").show();$(this).parent().find("a.show").show()})})}return{showMoreShowLess:showMoreShowLess}});define("tabdisplay",["ftx/lib/jquery-current","audible-global-new","showmore"],function($,AdblGlobal,showmore){var currentTab="tab1";var tempAjaxApp="";var isAudibleHug=false;var currentFrame;var scrollPage=2;var waiting=false;var $tabajaxloader;var $prodContainer;var scrollEnabled;function getLayout(){var layout=$('input[name="tabLayout"]').attr("value");return layout}function getAjaxApp(){var app=$('input[name="ajaxApp"]').attr("value");return app}function getAjaxFeaturedApp(){var ajaxforfeatured=$('input[name="ajaxforfeatured"]').attr("value");return ajaxforfeatured}function getfirstprod(){var fp=$('input[name="firstProd"]').attr("value");return fp}function getAjaxProductList(e){e.preventDefault();var ajaxApp=tempAjaxApp;if(ajaxApp==""){ajaxApp=getAjaxApp()}test($(this).attr("id"),ajaxApp)}function getAjaxSingleProduct(e){e.preventDefault();var ajaxApp=tempAjaxApp;if(ajaxApp==""){ajaxApp=getAjaxApp()}singleProd($(this).attr("id"),ajaxApp)}function getAjaxFeaturedGuest(e){e.preventDefault();var ajaxAppFeatured=getAjaxFeaturedApp();FeaturedGuest($(this).attr("id"),ajaxAppFeatured)}function test(id,ajaxApp){if(typeof id!="undefined"&&typeof getLayout()!="undefined"&&typeof ajaxApp!="undefined"&&ajaxApp.length>0){$("#adbl-landing-tabs li a").each(function(evt){$(this).removeClass("active")});$("#"+id+" a").addClass("active");if(scrollEnabled){$("#adbl_show_products").attr("data-whichtab",id);currentTab=id;scrollPage=2;$prodContainer.html("");$tabajaxloader.show()}else{$("#adbl_show_products").html('<span class="tabajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif" /></span>')}var url="/tabdisplay/"+ajaxApp+"?layoutId="+getLayout()+"&whichTab="+id+"&scrollPage="+1;$.ajax({url:url,cache:false,dataType:"html",success:handleSuccessCallBack})}}function handleSuccessCallBack(data){if(scrollEnabled){$tabajaxloader.hide();$prodContainer.append(data)}else{$prodContainer.html(data)}showmore.showMoreShowLess();bindExtraEventsToTabs();if($("#tablist").length>0){AdblGlobal.enableSamplePlayer($("#tablist"))}waiting=false}function singleProd(id,ajaxApp){if(typeof id!="undefined"&&id.length>0&&typeof ajaxApp!="undefined"){$("#adbl_single_product").html('<span class="ajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif"/></span>');var url="/tabdisplay/"+ajaxApp+"?layoutId=sp&selectedAsin="+id;$.ajax({url:url,cache:false,dataType:"html",success:handleSuccessCallBackLoL})}}function handleSuccessCallBackLoL(data){$("#adbl_single_product").html(data);showmore.showMoreShowLess();if($("#adbl_single_product").length>0){AdblGlobal.enableSamplePlayer($("#adbl_single_product"))}$(".sample-player").click(function(e){e.preventDefault()})}function FeaturedGuest(id,ajaxAppFeatured){if(typeof id!="undefined"&&id.length>0){$("#adbl_featured_guest").html('<span class="ajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif"/></span>');var url="/tabdisplay/"+ajaxAppFeatured+"?layoutId=featured&selectedPerson="+id;$.ajax({url:url,cache:false,dataType:"html",success:handleSuccessCallBackLoLCustom})}}function getOtherAudibleHugModules(e){var ajaxApp=$(e.currentTarget).find("input[name='ajaxApp']").attr("value");getOtherAudibleHugModulesExt(ajaxApp)}function getCustomTextModule(e){var ajaxApp=$(e.currentTarget).find("input[name='ajaxApp']").attr("value")}function getOtherAudibleHugModulesExt(ajaxApp){if(typeof ajaxApp!="undefined"){$("#adbl_featured_guest_tabs").html('<span class="ajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif"/></span>');var url="/tabdisplay/"+ajaxApp;$.ajax({url:url,cache:false,dataType:"html",success:function(data){handleSuccessCallBackLoLOther(data,ajaxApp)}});$("#adbl_featured_guest_text").html('<span class="ajaxloader"><img src="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/icons/progressLoader.gif"/></span>');var url="/audiblehug/"+ajaxApp;$.ajax({url:url,cache:false,dataType:"html",success:function(data){handleSuccessCallBackAdblHugText(data,ajaxApp)}})}}function handleSuccessCallBackAdblHugText(data,ajaxApp){$("#adbl_featured_guest_text").html(data);$("#adbl_featured_guest_text").show()}function handleSuccessCallBackLoLOther(data,ajaxApp){$("#adbl_featured_guest_tabs").html(data);showmore.showMoreShowLess();tempAjaxApp=ajaxApp;$("#adbl-landing-tabs li").bind("click",{ajaxApp:ajaxApp},getAjaxProductList);test("tab1",ajaxApp);setDefaultHighlight(ajaxApp)}function handleSuccessCallBackLoLCustom(data){$("#adbl_featured_guest").html(data);showmore.showMoreShowLess()}function bindAudibleHug(){$("#featured #simpleSliderWithPagination li").bind("click",getOtherAudibleHugModules);$("#featured #simpleSliderWithPagination li").bind("click",getCustomTextModule);isAudibleHug=true}function loadDefaultProfile(){var ajaxApp=AdblGlobal.getURLParameter(window.location,"profile");var featurePersonId="";$('input[name="ajaxApp"]').each(function(){if($(this).val()==ajaxApp){if($(this).parent().parent().is("li")){featurePersonId=$(this).parent().parent().attr("id")}}});FeaturedGuest(featurePersonId,getAjaxFeaturedApp());getOtherAudibleHugModulesExt(ajaxApp);currentFrame=getIndexOfDefaultFrame(ajaxApp)}function setDefaultHighlight(ajaxApp){$("#simpleSliderWithPagination li").removeClass("current");$(("input[name='ajaxApp']")).each(function(){if($(this).val()==ajaxApp){$(this).parent().parent().addClass("current")}})}function bindExtraEventsToTabs(){if(isAudibleHug){$("#tab1").click(function(){$("#adbl_featured_guest_text").show()});$("#tab2").click(function(){$("#adbl_featured_guest_text").hide()})}}function getIndexOfDefaultFrame(ajaxApp){var defaultIndex=0;$("#simpleSliderWithPagination li input[name=ajaxApp]").each(function(index){if($(this).val()==ajaxApp){defaultIndex=index;return false}});return defaultIndex}function registerInfiniteScrolling(){var $window=$(window);var $document=$(document);var data=$("#adbl_show_products");if(scrollEnabled){$window.scroll(function(){if(scrollPage<=data.data("sp")&&($window.scrollTop()+$window.height()>$document.height()-700)){if(waiting){return}var whichTab=data.data("whichtab");var url="/tabdisplay/"+getAjaxApp()+"?layoutId="+getLayout()+"&whichTab="+whichTab+"&scrollPage="+scrollPage;scrollPage++;waiting=true;$tabajaxloader.show();$.ajax({url:url,cache:false,dataType:"html",success:handleSuccessCallBack})}})}}$(function(){$tabajaxloader=$(".tabajaxloader");if($("#adbl_show_products").data("sp")>0){$prodContainer=$("#tablist");scrollEnabled=true}else{$prodContainer=$("#adbl_show_products");scrollEnabled=false}test("tab1",getAjaxApp());var firstproduct=getfirstprod();singleProd(firstproduct,getAjaxApp());loadDefaultProfile();registerInfiniteScrolling()});return{getAjaxProductList:getAjaxProductList,getAjaxSingleProduct:getAjaxSingleProduct,getAjaxFeaturedGuest:getAjaxFeaturedGuest,bindAudibleHug:bindAudibleHug,currentFrame:currentFrame}});define("jquery.timers-1.2",["ftx/lib/jquery-current"],function(jQuery){jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1000,das:10000,hs:100000,ks:1000000},timeParse:function(value){if(value==undefined||value==null){return null}var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseFloat(result[1]);var mult=this.powers[result[2]]||1;return num*mult}else{return value}},add:function(element,interval,label,fn,times){var counter=0;if(jQuery.isFunction(label)){if(!times){times=fn}fn=label;label=interval}interval=jQuery.timer.timeParse(interval);if(typeof interval!="number"||isNaN(interval)||interval<0){return}if(typeof times!="number"||isNaN(times)||times<0){times=0}times=times||0;var timers=jQuery.data(element,this.dataKey)||jQuery.data(element,this.dataKey,{});if(!timers[label]){timers[label]={}}fn.timerID=fn.timerID||this.guid++;var handler=function(){if((++counter>times&&times!==0)||fn.call(element,counter)===false){jQuery.timer.remove(element,label,fn)}};handler.timerID=fn.timerID;if(!timers[label][fn.timerID]){timers[label][fn.timerID]=window.setInterval(handler,interval)}this.global.push(element)},remove:function(element,label,fn){var timers=jQuery.data(element,this.dataKey),ret;if(timers){if(!label){for(label in timers){this.remove(element,label,fn)}}else{if(timers[label]){if(fn){if(fn.timerID){window.clearInterval(timers[label][fn.timerID]);delete timers[label][fn.timerID]}}else{for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn]}}for(ret in timers[label]){break}if(!ret){ret=null;delete timers[label]}}}for(ret in timers){break}if(!ret){jQuery.removeData(element,this.dataKey)}}}}});jQuery.fn.extend({everyTime:function(interval,label,fn,times){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times)})},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1)})},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn)})}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(index,item){jQuery.timer.remove(item)})})});define("jquery.galleryview-2.1.1",["ftx/lib/jquery-current","jquery.timers-1.2","tabdisplay"],function($,timers,tabs){var window_loaded=false;var windowResizeTimeoutId;$.fn.galleryView=function(options){var opts=$.extend($.fn.galleryView.defaults,options);var id;var iterator=0;var item_count=0;var slide_method;var theme_path;var paused=false;var gallery_width;var gallery_height;var pointer_height;var pointer_width;var strip_width;var strip_height;var wrapper_width;var f_frame_width;var f_frame_height;var frame_caption_size=20;var gallery_padding;var filmstrip_margin;var filmstrip_orientation;var $pagination_container;var currentPage;var totalPages;var frame_img_scale={};var panel_img_scale={};var img_h={};var img_w={};var scale_panel_images=true;var panel_nav_displayed=false;var j_gallery;var j_filmstrip;var j_frames;var j_frame_img_wrappers;var j_panels;var j_pointer;var originalMarkup;var photoElementId;var pageBehavior;function showItem(i){$(".nav-next-overlay",j_gallery).unbind("click");$(".nav-prev-overlay",j_gallery).unbind("click");$(".nav-next",j_gallery).unbind("click");$(".nav-prev",j_gallery).unbind("click");j_frames.unbind("click");if(opts.show_filmstrip){j_frames.removeClass("current").find("img").stop().animate({opacity:opts.frame_opacity},opts.transition_speed);if(tabs.currentFrame==""){j_frames.eq(i).addClass("current").find("img").stop().animate({opacity:1},opts.transition_speed)}else{j_frames.eq(tabs.currentFrame).addClass("current").find("img").stop().animate({opacity:1},opts.transition_speed)}}if(opts.show_panels&&opts.fade_panels){j_panels.fadeOut(opts.transition_speed).eq(i%item_count).fadeIn(opts.transition_speed,function(){if(!opts.show_filmstrip){$(".nav-prev-overlay",j_gallery).click(showPrevItem);$(".nav-next-overlay",j_gallery).click(showNextItem);$(".nav-prev",j_gallery).click(showPrevItem);$(".nav-next",j_gallery).click(showNextItem)}})}j_filmstrip.stop();var distance;var diststr;distance=getPos(j_frames[i]).left-(getPos(j_pointer[0]).left+(pointer_width/2)-(f_frame_width/2));diststr=(distance>=0?"-=":"+=")+Math.abs(distance)+"px";if(pageBehavior&&currentPage==totalPages){var shownOnLastPage=item_count-(strip_size*(currentPage-1));var offset;var firstOffset=null;while(shownOnLastPage<strip_size){offset=i+shownOnLastPage;if(null==firstOffset){firstOffset=offset}j_frames.eq(offset).css("visibility","hidden");shownOnLastPage++}}j_filmstrip.animate({left:diststr},opts.transition_speed,opts.easing,function(){if(pageBehavior&&currentPage<totalPages){j_frames.css("visibility","visible")}var old_i=i;var moveMe=false;if(i>item_count){i=i%item_count;iterator=i;moveMe=true}else{if(i<=(item_count-strip_size)){i=(i%item_count)+item_count;iterator=i;moveMe=true}}if(moveMe){if(pageBehavior&&currentPage==totalPages){var shownOnLastPage=item_count-(strip_size*(currentPage-1));var offset;while(shownOnLastPage<strip_size){offset=i+shownOnLastPage;j_frames.eq(offset).css("visibility","hidden");shownOnLastPage++}}j_filmstrip.css("left","-"+((f_frame_width+opts.frame_gap)*i)+"px")}if(old_i!=i){j_frames.eq(old_i).removeClass("current").find("img").css({opacity:opts.frame_opacity});j_frames.eq(i).addClass("current").find("img").css({opacity:1})}if(!opts.fade_panels){j_panels.hide().eq(i%item_count).show()}$(".nav-prev-overlay",j_gallery).click(showPrevItem);$(".nav-next-overlay",j_gallery).click(showNextItem);if(pageBehavior&&currentPage==totalPages){if(currentPage==1){$(".nav-next",j_gallery).css("opacity","0.3");$(".nav-next",j_gallery).click(function(){});$(".nav-prev",j_gallery).css("opacity","0.3");$(".nav-prev",j_gallery).click(function(){})}else{$(".nav-prev",j_gallery).show();$(".nav-prev",j_gallery).css("opacity","1.0");$(".nav-prev",j_gallery).click(showPrevItem);$(".nav-next",j_gallery).css("opacity","0.3");$(".nav-next",j_gallery).click(function(){})}}else{if(pageBehavior&&currentPage==1){$(".nav-next",j_gallery).show();$(".nav-next",j_gallery).css("opacity","1.0");$(".nav-next",j_gallery).click(showNextItem);$(".nav-prev",j_gallery).show();$(".nav-prev",j_gallery).css("opacity","0.3");$(".nav-prev",j_gallery).click(function(){})}else{$(".nav-prev",j_gallery).show();$(".nav-next",j_gallery).show();$(".nav-next",j_gallery).css("opacity","1.0");$(".nav-prev",j_gallery).css("opacity","1.0");$(".nav-prev",j_gallery).click(showPrevItem);$(".nav-next",j_gallery).click(showNextItem)}}enableFrameClicking()})}function extraWidth(el){if(!el){return 0}if(el.length==0){return 0}el=el.eq(0);var ew=0;ew+=getInt(el.css("paddingLeft"));ew+=getInt(el.css("paddingRight"));ew+=getInt(el.css("marginLeft"));ew+=getInt(el.css("marginRight"));ew+=getInt(el.css("borderLeftWidth"));ew+=getInt(el.css("borderRightWidth"));return ew}function extraHeight(el){if(!el){return 0}if(el.length==0){return 0}el=el.eq(0);var eh=0;eh+=getInt(el.css("paddingTop"));eh+=getInt(el.css("paddingBottom"));eh+=getInt(el.css("borderTopWidth"));eh+=getInt(el.css("borderBottomWidth"));return eh}function showNextItem(){$(document).stopTime("transition");if(pageBehavior){var counter=0;var reachedTheEnd=0;while(counter<strip_size){counter++;if(++iterator==j_frames.length){}if(iterator%item_count==item_count){reachedTheEnd=1}}currentPage+=1;$pagination_container.html("Page: "+currentPage+" of "+totalPages)}else{if(++iterator==j_frames.length){iterator=0}}showItem(iterator);if(opts.transition_interval&&!paused){$(document).everyTime(opts.transition_interval,"transition",function(){showNextItem()})}}function showPrevItem(){$(document).stopTime("transition");if(pageBehavior){var counter=0;while(counter<strip_size){counter++;if(--iterator<=0){break}}currentPage-=1;$pagination_container.html("Page: "+currentPage+" of "+totalPages)}else{if(--iterator<0){iterator=item_count-1}}showItem(iterator);if(opts.transition_interval&&!paused){$(document).everyTime(opts.transition_interval,"transition",function(){showNextItem()})}}function getPos(el){var left=0,top=0;var el_id=el.id;if(el.offsetParent){do{left+=el.offsetLeft;top+=el.offsetTop}while(el=el.offsetParent)}if(el_id==id){return{left:left,top:top}}else{var gPos=getPos(j_gallery[0]);var gLeft=gPos.left;var gTop=gPos.top;return{left:left-gLeft,top:top-gTop}}}function enableFrameClicking(){j_frames.each(function(i){$("#small #simpleSliderWithPagination li").bind("click",tabs.getAjaxSingleProduct);$("#featured #simpleSliderWithPagination li").bind("click",tabs.getAjaxFeaturedGuest);$("#adbl-landing-tabs li").bind("click",tabs.getAjaxProductList);tabs.bindAudibleHug();$(this).click(function(){j_frames.removeClass("current").find("img").stop().animate({opacity:opts.frame_opacity},opts.transition_speed);j_frames.eq(i).addClass("current").find("img").stop().animate({opacity:1},opts.transition_speed);tabs.currentFrame=i})})}function buildPanels(){j_panels.each(function(i){if($(".panel-overlay",this).length>0){$(this).append('<div class="overlay-background"></div>')}});if(!opts.show_filmstrip){$("<img />").addClass("nav-next").attr("src","http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/arrowNext.png").appendTo(j_gallery).css({position:"absolute",zIndex:"1100",cursor:"pointer",top:((opts.panel_height-22)/2)+gallery_padding+"px",right:"10px",display:"none"}).click(showNextItem);$("<img />").addClass("nav-prev").attr("src","/http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/arrowPrev.png").appendTo(j_gallery).css({position:"absolute",zIndex:"1100",cursor:"pointer",top:((opts.panel_height-22)/2)+gallery_padding+"px",left:"10px",display:"none"}).click(showPrevItem);$("<img />").addClass("nav-next-overlay").attr("src","http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/panel-nav-next.gif").appendTo(j_gallery).css({position:"absolute",zIndex:"1099",top:((opts.panel_height-22)/2)+gallery_padding-10+"px",right:"0",display:"none",cursor:"pointer",opacity:0.75}).click(showNextItem);$("<img />").addClass("nav-prev-overlay").attr("src","http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/panel-nav-prev.gif").appendTo(j_gallery).css({position:"absolute",zIndex:"1099",top:((opts.panel_height-22)/2)+gallery_padding-10+"px",left:"0",display:"none",cursor:"pointer",opacity:0.75}).click(showPrevItem)}j_panels.each(function(i){$(this).css({width:(opts.panel_width-extraWidth(j_panels))+"px",height:(opts.panel_height-extraHeight(j_panels))+"px",position:"absolute",overflow:"hidden",display:"none"});switch(opts.filmstrip_position){case"top":$(this).css({top:strip_height+Math.max(gallery_padding,filmstrip_margin)+"px",left:gallery_padding+"px"});break;case"left":$(this).css({top:gallery_padding+"px",left:strip_width+Math.max(gallery_padding,filmstrip_margin)+"px"});break;default:$(this).css({top:gallery_padding+"px",left:gallery_padding+"px"});break}});$(".panel-overlay",j_panels).css({position:"absolute",zIndex:"999",width:(opts.panel_width-extraWidth($(".panel-overlay",j_panels)))+"px",left:"0"});$(".overlay-background",j_panels).css({position:"absolute",zIndex:"998",width:opts.panel_width+"px",left:"0",opacity:opts.overlay_opacity});if(opts.overlay_position=="top"){$(".panel-overlay",j_panels).css("top",0);$(".overlay-background",j_panels).css("top",0)}else{$(".panel-overlay",j_panels).css("bottom",0);$(".overlay-background",j_panels).css("bottom",0)}$(".panel iframe",j_panels).css({width:opts.panel_width+"px",height:opts.panel_height+"px",border:"0"});if(scale_panel_images){$("img",j_panels).each(function(i){$(this).css({height:panel_img_scale[i%item_count]*img_h[i%item_count],width:panel_img_scale[i%item_count]*img_w[i%item_count],position:"relative",top:(opts.panel_height-(panel_img_scale[i%item_count]*img_h[i%item_count]))/2+"px",left:(opts.panel_width-(panel_img_scale[i%item_count]*img_w[i%item_count]))/2+"px"})})}}function buildFilmstrip(){j_filmstrip.wrap('<div class="strip_wrapper"></div>');if(slide_method=="strip"){j_frames.clone().appendTo(j_filmstrip);j_frames.clone().appendTo(j_filmstrip);j_frames=$("li",j_filmstrip)}if(opts.show_captions){j_frames.append('<div class="caption"></div>').each(function(i){if($(this).find("img").attr("title")){$(this).find(".caption").html($(this).find("img").attr("title"))}else{$(this).find(".caption").remove()}})}j_filmstrip.css({listStyle:"none",margin:"0",padding:"0",width:strip_width+"px",position:"absolute",zIndex:"900",top:(filmstrip_orientation=="vertical"&&slide_method=="strip"?-((f_frame_height+opts.frame_gap)*iterator):0)+"px",left:(filmstrip_orientation=="horizontal"&&slide_method=="strip"?-((f_frame_width+opts.frame_gap)*iterator):0)+"px",height:strip_height+"px"});j_frames.css({"float":"left",position:"relative",height:f_frame_height+(opts.show_captions?frame_caption_size:0)+"px",width:f_frame_width+"px",zIndex:"901",padding:"0",cursor:"pointer"});switch(opts.filmstrip_position){case"top":j_frames.css({marginBottom:filmstrip_margin+"px",marginRight:opts.frame_gap+"px"});break;case"bottom":j_frames.css({marginTop:filmstrip_margin+"px",marginRight:opts.frame_gap+"px"});break;case"left":j_frames.css({marginRight:filmstrip_margin+"px",marginBottom:opts.frame_gap+"px"});break;case"right":j_frames.css({marginLeft:filmstrip_margin+"px",marginBottom:opts.frame_gap+"px"});break}$(".img_wrap",j_frames).each(function(i){$(this).css({height:Math.min(opts.frame_height,img_h[i%item_count]*frame_img_scale[i%item_count])+"px",width:Math.min(opts.frame_width,img_w[i%item_count]*frame_img_scale[i%item_count])+"px",position:"relative",top:(opts.show_captions&&opts.filmstrip_position=="top"?frame_caption_size:0)+Math.max(0,(opts.frame_height-(frame_img_scale[i%item_count]*img_h[i%item_count]))/2)+"px",left:Math.max(0,(opts.frame_width-(frame_img_scale[i%item_count]*img_w[i%item_count]))/2)+"px",overflow:"hidden"})});$("img",j_frames).each(function(i){$(this).css({opacity:opts.frame_opacity,height:img_h[i%item_count]*frame_img_scale[i%item_count]+"px",width:img_w[i%item_count]*frame_img_scale[i%item_count]+"px",position:"relative",top:Math.min(0,(opts.frame_height-(frame_img_scale[i%item_count]*img_h[i%item_count]))/2)+"px",left:Math.min(0,(opts.frame_width-(frame_img_scale[i%item_count]*img_w[i%item_count]))/2)+"px"}).mouseover(function(){$(this).stop().animate({opacity:1},300)}).mouseout(function(){if(!$(this).parent().parent().hasClass("current")){$(this).stop().animate({opacity:opts.frame_opacity},300)}})});$(".strip_wrapper",j_gallery).css({position:"absolute",overflow:"hidden"});if(filmstrip_orientation=="horizontal"){$(".strip_wrapper",j_gallery).css({left:((gallery_width-wrapper_width)/2)+gallery_padding+"px",width:wrapper_width+"px",height:strip_height+"px"})}else{$(".strip_wrapper",j_gallery).css({left:(opts.filmstrip_position=="left"?Math.max(gallery_padding,filmstrip_margin)+"px":opts.panel_width+gallery_padding+"px"),top:Math.max(gallery_padding,opts.frame_gap)+"px",width:strip_width+"px",height:wrapper_height+"px"})}$(".caption",j_gallery).css({position:"absolute",top:(opts.filmstrip_position=="bottom"?f_frame_height:0)+"px",left:"0",margin:"0",width:f_frame_width+"px",padding:"0",height:frame_caption_size+"px",overflow:"hidden"});var pointer=$("<div></div>");pointer.addClass("pointer").appendTo(j_gallery).css({position:"absolute",zIndex:"1000",width:"0px",fontSize:"0px",lineHeight:"0%",borderTopWidth:pointer_height+"px",borderRightWidth:(pointer_width/2)+"px",borderBottomWidth:pointer_height+"px",borderLeftWidth:(pointer_width/2)+"px",borderStyle:"solid"});var transColor=$.browser.msie&&$.browser.version.substr(0,1)=="6"?"pink":"transparent";if(!opts.show_panels){pointer.css("borderColor",transColor)}switch(opts.filmstrip_position){case"top":pointer.css({bottom:(opts.panel_height-(pointer_height*2)+gallery_padding+filmstrip_margin)+"px",left:((gallery_width-wrapper_width)/2)+(slide_method=="strip"?0:((f_frame_width+opts.frame_gap)*iterator))+((f_frame_width/2)-(pointer_width/2))+gallery_padding+"px",borderBottomColor:transColor,borderRightColor:transColor,borderLeftColor:transColor});break;case"bottom":pointer.css({top:(opts.panel_height-(pointer_height*2)+gallery_padding+filmstrip_margin)+"px",left:((gallery_width-wrapper_width)/2)+(slide_method=="strip"?0:((f_frame_width+opts.frame_gap)*iterator))+((f_frame_width/2)-(pointer_width/2))+gallery_padding+"px",borderTopColor:transColor,borderRightColor:transColor,borderLeftColor:transColor});break;case"left":pointer.css({right:(opts.panel_width-pointer_width+gallery_padding+filmstrip_margin)+"px",top:(f_frame_height/2)-(pointer_height)+(slide_method=="strip"?0:((f_frame_height+opts.frame_gap)*iterator))+gallery_padding+"px",borderBottomColor:transColor,borderRightColor:transColor,borderTopColor:transColor});break;case"right":pointer.css({left:(opts.panel_width-pointer_width+gallery_padding+filmstrip_margin)+"px",top:(f_frame_height/2)-(pointer_height)+(slide_method=="strip"?0:((f_frame_height+opts.frame_gap)*iterator))+gallery_padding+"px",borderBottomColor:transColor,borderLeftColor:transColor,borderTopColor:transColor});break}j_pointer=$(".pointer",j_gallery);var navNext=$("<img />");navNext.addClass("nav-next").attr("src","http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/arrowNext.png").appendTo(j_gallery).css({position:"absolute",cursor:"pointer",display:"none"}).click(showNextItem);var navPrev=$("<img />");navPrev.addClass("nav-prev").attr("src","http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/site/modules/amber/arrowPrev.png").appendTo(j_gallery).css({position:"absolute",cursor:"pointer",display:"none"}).click(showPrevItem);if(filmstrip_orientation=="horizontal"){navNext.css({top:(opts.filmstrip_position=="top"?Math.max(gallery_padding,filmstrip_margin):opts.panel_height+filmstrip_margin+gallery_padding)+((f_frame_height-22)/2)+"px",right:((gallery_width+(gallery_padding*2))/2)-(wrapper_width/2)-opts.frame_gap-12+"px"});navPrev.css({top:(opts.filmstrip_position=="top"?Math.max(gallery_padding,filmstrip_margin):opts.panel_height+filmstrip_margin+gallery_padding)+((f_frame_height-22)/2)+"px",left:((gallery_width+(gallery_padding*2))/2)-(wrapper_width/2)-opts.frame_gap-12+"px"})}else{navNext.css({left:(opts.filmstrip_position=="left"?Math.max(gallery_padding,filmstrip_margin):opts.panel_width+filmstrip_margin+gallery_padding)+((f_frame_width-22)/2)+13+"px",top:wrapper_height+(Math.max(gallery_padding,opts.frame_gap)*2)+"px"});navPrev.css({left:(opts.filmstrip_position=="left"?Math.max(gallery_padding,filmstrip_margin):opts.panel_width+filmstrip_margin+gallery_padding)+((f_frame_width-22)/2)-13+"px",top:wrapper_height+(Math.max(gallery_padding,opts.frame_gap)*2)+"px"})}}function mouseIsOverGallery(x,y){var pos=getPos(j_gallery[0]);var top=pos.top;var left=pos.left;return x>left&&x<left+gallery_width+(filmstrip_orientation=="horizontal"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))&&y>top&&y<top+gallery_height+(filmstrip_orientation=="vertical"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))}function getInt(i){i=parseInt(i,10);if(isNaN(i)){i=0}return i}function buildGallery(){var gallery_images=opts.show_filmstrip?$("img",j_frames):$("img",j_panels);gallery_images.each(function(i){img_h[i]=this.height;img_w[i]=this.width;if(opts.frame_scale=="nocrop"){frame_img_scale[i]=Math.min(opts.frame_height/img_h[i],opts.frame_width/img_w[i])}else{frame_img_scale[i]=Math.max(opts.frame_height/img_h[i],opts.frame_width/img_w[i])}if(opts.panel_scale=="nocrop"){panel_img_scale[i]=Math.min(opts.panel_height/img_h[i],opts.panel_width/img_w[i])}else{panel_img_scale[i]=Math.max(opts.panel_height/img_h[i],opts.panel_width/img_w[i])}});j_gallery.css({position:"relative",width:gallery_width+(filmstrip_orientation=="horizontal"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))+"px",height:gallery_height+(filmstrip_orientation=="vertical"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))+"px"});if(opts.show_filmstrip){buildFilmstrip();enableFrameClicking()}if(opts.show_panels){buildPanels()}if(opts.pause_on_hover||(opts.show_panels&&!opts.show_filmstrip)){$(document).mousemove(function(e){if(mouseIsOverGallery(e.pageX,e.pageY)){if(opts.pause_on_hover){if(!paused){$(document).oneTime(500,"animation_pause",function(){$(document).stopTime("transition");paused=true})}}if(opts.show_panels&&!opts.show_filmstrip&&!panel_nav_displayed){$(".nav-next-overlay").fadeIn("fast");$(".nav-prev-overlay").fadeIn("fast");$(".nav-next",j_gallery).fadeIn("fast");$(".nav-prev",j_gallery).fadeIn("fast");panel_nav_displayed=true}}else{if(opts.pause_on_hover){$(document).stopTime("animation_pause");if(opts.transition_interval&&paused){$(document).everyTime(opts.transition_interval,"transition",function(){showNextItem()});paused=false}}if(opts.show_panels&&!opts.show_filmstrip&&panel_nav_displayed){$(".nav-next-overlay").fadeOut("fast");$(".nav-prev-overlay").fadeOut("fast");$(".nav-next",j_gallery).fadeOut("fast");$(".nav-prev",j_gallery).fadeOut("fast");panel_nav_displayed=false}}})}j_filmstrip.css("visibility","visible");j_gallery.css("visibility","visible");$(".loader",j_gallery).fadeOut("1000",function(){showItem(iterator);if(opts.transition_interval&&item_count>1){$(document).everyTime(opts.transition_interval,"transition",function(){showNextItem()})}})}function calculateStripSize(){var frameWidth=f_frame_width+opts.frame_gap;var size=Math.floor(j_filmstrip.width()/frameWidth);if(size>9){size=9}else{if(size>7){size=7}}return size}function resizeWindow(e){clearTimeout(windowResizeTimeoutId);windowResizeTimeoutId=setTimeout(function(){var newWindowHeight=$(window).height();originalMarkup.insertBefore(j_gallery);j_gallery.remove();$(window).unbind("resize",resizeWindow);var frmgap=15;if(photoElementId=="simpleSliderWithPagination5"){if(document.width<1000){frmgap=Math.round(document.width/50)}else{frmgap=Math.round(document.width/25)}}$("#"+photoElementId).galleryView({frame_width:80,frame_height:80,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:false,show_panels:false,transition_interval:0,frame_gap:frmgap,pointer_size:0,pagination_container:$("#sliderPaginationContainer"),frame_caption_size:73,photoElementId:photoElementId,pageBehavior:pageBehavior})},350)}return this.each(function(){originalMarkup=$($("#photosContainer").html());photoElementId=opts.photoElementId;pageBehavior=opts.pageBehavior;$(this).css("visibility","hidden");if(opts.frame_caption_size){frame_caption_size=opts.frame_caption_size}$(this).wrap("<div></div>");j_gallery=$(this).parent();j_gallery.css("visibility","hidden").attr("id",$(this).attr("id")).addClass("gallery");$(this).removeAttr("id").addClass("filmstrip");$(document).stopTime("transition");$(document).stopTime("animation_pause");id=j_gallery.attr("id");scale_panel_images=$(".panel-content",j_gallery).length==0;pointer_height=opts.pointer_size;pointer_width=opts.pointer_size*2;filmstrip_orientation=(opts.filmstrip_position=="top"||opts.filmstrip_position=="bottom"?"horizontal":"vertical");if(filmstrip_orientation=="vertical"){opts.show_captions=false}$("script").each(function(i){var s=$(this);if(s.attr("src")&&s.attr("src").match(/jquery\.galleryview/)){loader_path=s.attr("src").split("jquery.galleryview")[0];theme_path=s.attr("src").split("jquery.galleryview")[0]+"themes/"}});j_filmstrip=$(".filmstrip",j_gallery);j_frames=$("li",j_filmstrip);j_frames.addClass("frame");if(opts.show_panels){for(i=j_frames.length-1;i>=0;i--){if(j_frames.eq(i).find(".panel-content").length>0){j_frames.eq(i).find(".panel-content").remove().prependTo(j_gallery).addClass("panel")}else{p=$("<div>");p.addClass("panel");im=$("<img />");im.attr("src",j_frames.eq(i).find("img").eq(0).attr("src")).appendTo(p);p.prependTo(j_gallery);j_frames.eq(i).find(".panel-overlay").remove().appendTo(p)}}}else{$(".panel-overlay",j_frames).remove();$(".panel-content",j_frames).remove()}if(!opts.show_filmstrip){j_filmstrip.remove()}else{j_frames.each(function(i){if($(this).find("a").length>0){$(this).find("a").eq(0).wrap('<div class="img_wrap"></div>')}else{$(this).find("img").wrap('<div class="img_wrap"></div>')}});j_frame_img_wrappers=$(".img_wrap",j_frames)}j_panels=$(".panel",j_gallery);if(!opts.show_panels){opts.panel_height=0;opts.panel_width=0}f_frame_width=opts.frame_width+extraWidth(j_frame_img_wrappers);f_frame_height=opts.frame_height+extraHeight(j_frame_img_wrappers);item_count=opts.show_panels?j_panels.length:j_frames.length;if(opts.filmstrip_size&&opts.filmstrip_size>0){strip_size=opts.filmstrip_size}else{strip_size=calculateStripSize()}currentPage=1;totalPages=Math.ceil(item_count/strip_size);if(0&&strip_size>=item_count){slide_method="pointer";strip_size=item_count}else{slide_method="strip"}iterator=(strip_size<item_count?item_count:0)+opts.start_frame-1;filmstrip_margin=(opts.show_panels?getInt(j_filmstrip.css("marginTop")):0);j_filmstrip.css("margin","0px");if(filmstrip_orientation=="horizontal"){gallery_width=opts.show_panels?opts.panel_width:(strip_size*(f_frame_width+opts.frame_gap))+44+opts.frame_gap;gallery_height=(opts.show_panels?opts.panel_height:0)+(opts.show_filmstrip?f_frame_height+filmstrip_margin+(opts.show_captions?frame_caption_size:0):0)}else{gallery_height=opts.show_panels?opts.panel_height:(strip_size*(f_frame_height+opts.frame_gap))+22;gallery_width=(opts.show_panels?opts.panel_width:0)+(opts.show_filmstrip?f_frame_width+filmstrip_margin:0)}if(filmstrip_orientation=="horizontal"){if(slide_method=="pointer"){strip_width=(f_frame_width*item_count)+(opts.frame_gap*(item_count))}else{strip_width=(f_frame_width*item_count*3)+(opts.frame_gap*(item_count*3))}}else{strip_width=(f_frame_width+filmstrip_margin)}if(filmstrip_orientation=="horizontal"){strip_height=(f_frame_height+filmstrip_margin+(opts.show_captions?frame_caption_size:0))}else{if(slide_method=="pointer"){strip_height=(f_frame_height*item_count+opts.frame_gap*(item_count))}else{strip_height=(f_frame_height*item_count*3)+(opts.frame_gap*(item_count*3))}}wrapper_width=((strip_size*f_frame_width)+((strip_size-1)*opts.frame_gap));wrapper_height=((strip_size*f_frame_height)+((strip_size-1)*opts.frame_gap));gallery_padding=getInt(j_gallery.css("paddingTop"));j_gallery.css("padding","0px");galleryPos=getPos(j_gallery[0]);$("<div>").addClass("loader").css({position:"absolute",zIndex:"32666",opacity:1,top:"0px",left:"0px",width:gallery_width+(filmstrip_orientation=="horizontal"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))+"px",height:gallery_height+(filmstrip_orientation=="vertical"?(gallery_padding*2):gallery_padding+Math.max(gallery_padding,filmstrip_margin))+"px"}).appendTo(j_gallery);$pagination_container=opts.pagination_container;$pagination_container.html("Page: "+currentPage+" of "+totalPages);$(window).bind("resize",resizeWindow);if(!window_loaded){$(window).load(function(){window_loaded=true;buildGallery()})}else{buildGallery()}})};$.fn.galleryView.defaults={show_panels:true,show_filmstrip:true,panel_width:600,panel_height:400,frame_width:60,frame_height:40,start_frame:1,filmstrip_size:0,transition_speed:800,transition_interval:4000,overlay_opacity:0.7,frame_opacity:0.3,pointer_size:8,nav_theme:"dark",easing:"swing",filmstrip_position:"bottom",overlay_position:"bottom",panel_scale:"nocrop",frame_scale:"crop",frame_gap:5,show_captions:false,fade_panels:true,pause_on_hover:false}});define("slider",["ftx/lib/jquery-current"],function($){$.fn.easySlider=function(options){var defaults={prevId:"prevBtn",prevText:"",nextId:"nextBtn",nextText:"",controlsShow:true,controlsBefore:"",controlsAfter:"",controlsFade:true,insertAfter:true,firstId:"firstBtn",firstText:"First",firstShow:false,lastId:"lastBtn",lastText:"Last",lastShow:false,vertical:false,speed:1000,ease:"swing",auto:false,pause:2000,continuous:false,prevNext:true,numeric:false,numericId:"controls"};var options=$.extend(defaults,options);this.each(function(){var obj=$(this);var ul=obj.children("ul");var li=ul.children("li");var s=li.length;var w=obj.width();var h=obj.height();var t=0;var ts=s-1;var clickable=true;obj.css("overflow","hidden");li.each(function(){if(options.vertical){$(this).height(h)}else{$(this).width(w)}});li.css("float","left");if(options.vertical){ul.height(s*w)}else{ul.width(s*h)}if(options.continuous){if(options.vertical){ul.prepend(li.filter(":last-child").clone().css("margin-top","-"+h+"px"));ul.append(li.filter(":nth-child(2)").clone());ul.height((s+1)*h)}else{ul.prepend(li.filter(":last-child").clone().css("margin-left","-"+w+"px"));ul.append(li.filter(":nth-child(2)").clone());ul.width((s+1)*w)}}if(options.controlsShow){var html=options.controlsBefore;if(options.numeric){html+='<ol id="'+options.numericId+'"></ol>'}if(options.firstShow){html+='<span id="'+options.firstId+'"><a href="#">'+options.firstText+"</a></span>"}if(options.prevNext){html+='<span id="'+options.prevId+'"><a href="#">'+options.prevText+"</a></span>";html+='<span id="'+options.nextId+'"><a href="#">'+options.nextText+"</a></span>"}if(options.lastShow){html+='<span id="'+options.lastId+'"><a href="#">'+options.lastText+"</a></span>"}html+=options.controlsAfter;if(options.insertAfter){$(obj).after(html)}else{$(obj).before(html)}}if(options.numeric){for(var i=0;i<s;i++){$(document.createElement("li")).attr("id",options.numericId+(i+1)).html('<a rel="'+i+'" href="#"><span>'+(i+1)+"</span></a>").appendTo($("#"+options.numericId)).click(function(){animate($("a",$(this)).attr("rel"),true);return false})}}if(options.prevNext){$("a","#"+options.nextId).click(function(){animate("next",true);return false});$("a","#"+options.prevId).click(function(){animate("prev",true);return false});$("a","#"+options.firstId).click(function(){animate("first",true);return false});$("a","#"+options.lastId).click(function(){animate("last",true);return false})}function setCurrent(i){i=parseInt(i)+1;$("li","#"+options.numericId).removeClass("current");$("li#"+options.numericId+i).addClass("current")}function adjust(){if(t>ts){t=0}if(t<0){t=ts}if(!options.vertical){ul.css("margin-left",(t*w*-1))}else{ul.css("margin-top",(t*h*-1))}clickable=true;if(options.numeric){setCurrent(t)}}function animate(dir,clicked){if(clickable){clickable=false;var ot=t;switch(dir){case"next":t=(ot>=ts)?(options.continuous?t+1:ts):t+1;break;case"prev":t=(t<=0)?(options.continuous?t-1:0):t-1;break;case"first":t=0;break;case"last":t=ts;break;default:t=parseInt(dir);break}var diff=Math.abs(ot-t);var speed=diff*options.speed;if(!options.vertical){p=(t*w*-1);ul.animate({marginLeft:p},{queue:false,duration:speed,easing:options.ease,complete:adjust})}else{p=(t*h*-1);ul.animate({marginTop:p},{queue:false,duration:speed,easing:options.ease,complete:adjust})}if(!options.continuous&&options.controlsFade){if(t==0){$("a","#"+options.prevId).fadeOut("slow");$("a","#"+options.firstId).fadeOut("slow")}else{if(t==ts){$("a","#"+options.nextId).fadeOut("slow");$("a","#"+options.lastId).fadeOut("slow")}else{$("a","#"+options.prevId).fadeIn("slow");$("a","#"+options.firstId).fadeIn("slow");$("a","#"+options.nextId).fadeIn("slow");$("a","#"+options.lastId).fadeIn("slow")}}}if(clicked){clearTimeout(timeout)}if(options.auto&&dir=="next"&&!clicked){timeout=setTimeout(function(){animate("next",false)},diff*options.speed+options.pause)}}}var timeout;if(options.auto){timeout=setTimeout(function(){animate("next",false)},options.pause)}if(options.numeric){setCurrent(0)}if(!options.continuous&&options.controlsFade){$("a","#"+options.prevId).hide();$("a","#"+options.firstId).hide()}})}});define("sliderfunctions",["ftx/lib/jquery-current","jquery.galleryview-2.1.1","slider"],function($){$(document).ready(function(){if($(".module_slider").size()){$(".module_slider").easySlider({auto:true,continuous:false,numeric:true})}if($("#photos").size()){$("#photos").galleryView({frame_width:80,frame_height:80,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:true,show_panels:false,transition_interval:0,frame_opacity:1,frame_gap:15})}if($("#photos2").size()){$("#photos2").galleryView({frame_width:134,frame_height:147,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:true,show_panels:false,transition_interval:4000,frame_opacity:1,frame_gap:30,filmstrip_size:4})}if($("#simpleSliderWithPagination").size()){$("#simpleSliderWithPagination").galleryView({frame_width:80,frame_height:80,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:true,show_panels:false,transition_interval:0,frame_gap:15,pointer_size:0,pagination_container:$("#sliderPaginationContainer"),frame_caption_size:73,photoElementId:"simpleSliderWithPagination",pageBehavior:true})}if($("#simpleSliderWithPagination5").size()){$("#simpleSliderWithPagination5").galleryView({frame_width:80,frame_height:80,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:true,show_panels:false,transition_interval:0,frame_gap:60,pointer_size:0,pagination_container:$("#sliderPaginationContainer"),frame_caption_size:73,photoElementId:"simpleSliderWithPagination5",pageBehavior:true,filmstrip_size:5})}if($("#simpleSliderWithoutPagination").size()){$("#simpleSliderWithoutPagination").galleryView({frame_width:80,frame_height:80,background_color:"transparent",nav_theme:"dark",border:"none",show_captions:true,show_panels:false,transition_interval:0,frame_gap:15,pointer_size:0,pagination_container:$("#sliderPaginationContainer"),frame_caption_size:73,photoElementId:"simpleSliderWithPagination",pageBehavior:false})}})});(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj)};if(typeof module!=="undefined"&&module.exports){module.exports=_;_._=_}else{root._=_}_.VERSION="1.1.6";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null){return}if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else{if(_.isNumber(obj.length)){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker){return}}}else{for(var key in obj){if(hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker){return}}}}}};_.map=function(obj,iterator,context){var results=[];if(obj==null){return results}if(nativeMap&&obj.map===nativeMap){return obj.map(iterator,context)}each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=memo!==void 0;if(obj==null){obj=[]}if(nativeReduce&&obj.reduce===nativeReduce){if(context){iterator=_.bind(iterator,context)}return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial&&index===0){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial){throw new TypeError("Reduce of empty array with no initial value")}return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){if(obj==null){obj=[]}if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context){iterator=_.bind(iterator,context)}return memo!==void 0?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var reversed=(_.isArray(obj)?obj.slice():_.toArray(obj)).reverse();return _.reduce(reversed,iterator,memo,context)};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null){return results}if(nativeFilter&&obj.filter===nativeFilter){return obj.filter(iterator,context)}each(obj,function(value,index,list){if(iterator.call(context,value,index,list)){results[results.length]=value}});return results};_.reject=function(obj,iterator,context){var results=[];if(obj==null){return results}each(obj,function(value,index,list){if(!iterator.call(context,value,index,list)){results[results.length]=value}});return results};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null){return result}if(nativeEvery&&obj.every===nativeEvery){return obj.every(iterator,context)}each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list))){return breaker}});return result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null){return result}if(nativeSome&&obj.some===nativeSome){return obj.some(iterator,context)}each(obj,function(value,index,list){if(result=iterator.call(context,value,index,list)){return breaker}});return result};_.include=_.contains=function(obj,target){var found=false;if(obj==null){return found}if(nativeIndexOf&&obj.indexOf===nativeIndexOf){return obj.indexOf(target)!=-1}any(obj,function(value){if(found=value===target){return true}});return found};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(method.call?method||value:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)){return Math.max.apply(Math,obj)}var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)){return Math.min.apply(Math,obj)}var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}),"value")};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid}return low};_.toArray=function(iterable){if(!iterable){return[]}if(iterable.toArray){return iterable.toArray()}if(_.isArray(iterable)){return iterable}if(_.isArguments(iterable)){return slice.call(iterable)}return _.values(iterable)};_.size=function(obj){return _.toArray(obj).length};_.first=_.head=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0]};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index)};_.last=function(array){return array[array.length-1]};_.compact=function(array){return _.filter(array,function(value){return !!value})};_.flatten=function(array){return _.reduce(array,function(memo,value){if(_.isArray(value)){return memo.concat(_.flatten(value))}memo[memo.length]=value;return memo},[])};_.without=function(array){var values=slice.call(arguments,1);return _.filter(array,function(value){return !_.include(values,value)})};_.uniq=_.unique=function(array,isSorted){return _.reduce(array,function(memo,el,i){if(0==i||(isSorted===true?_.last(memo)!=el:!_.include(memo,el))){memo[memo.length]=el}return memo},[])};_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,"length"));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(args,""+i)}return results};_.indexOf=function(array,item,isSorted){if(array==null){return -1}var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1}if(nativeIndexOf&&array.indexOf===nativeIndexOf){return array.indexOf(item)}for(i=0,l=array.length;i<l;i++){if(array[i]===item){return i}}return -1};_.lastIndexOf=function(array,item){if(array==null){return -1}if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return array.lastIndexOf(item)}var i=array.length;while(i--){if(array[i]===item){return i}}return -1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};_.bind=function(func,obj){if(func.bind===nativeBind&&nativeBind){return nativeBind.apply(func,slice.call(arguments,1))}var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0){funcs=_.functions(obj)}each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments))}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args)};if(debounce){clearTimeout(timeout)}if(debounce||!timeout){timeout=setTimeout(throttler,wait)}}};_.throttle=function(func,wait){return limit(func,wait,false)};_.debounce=function(func,wait){return limit(func,wait,true)};_.once=function(func){var ran=false,memo;return function(){if(ran){return memo}ran=true;return memo=func.apply(this,arguments)}};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments));return wrapper.apply(this,args)}};_.compose=function(){var funcs=slice.call(arguments);return function(){var args=slice.call(arguments);for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj)){throw new TypeError("Invalid object")}var keys=[];for(var key in obj){if(hasOwnProperty.call(obj,key)){keys[keys.length]=key}}return keys};_.values=function(obj){return _.map(obj,_.identity)};_.functions=_.methods=function(obj){return _.filter(_.keys(obj),function(key){return _.isFunction(obj[key])}).sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(source[prop]!==void 0){obj[prop]=source[prop]}}});return obj};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null){obj[prop]=source[prop]}}});return obj};_.clone=function(obj){return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isEqual=function(a,b){if(a===b){return true}var atype=typeof(a),btype=typeof(b);if(atype!=btype){return false}if(a==b){return true}if((!a&&b)||(a&&!b)){return false}if(a._chain){a=a._wrapped}if(b._chain){b=b._wrapped}if(a.isEqual){return a.isEqual(b)}if(_.isDate(a)&&_.isDate(b)){return a.getTime()===b.getTime()}if(_.isNaN(a)&&_.isNaN(b)){return false}if(_.isRegExp(a)&&_.isRegExp(b)){return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline}if(atype!=="object"){return false}if(a.length&&(a.length!==b.length)){return false}var aKeys=_.keys(a),bKeys=_.keys(b);if(aKeys.length!=bKeys.length){return false}for(var key in a){if(!(key in b)||!_.isEqual(a[key],b[key])){return false}}return true};_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj)){return obj.length===0}for(var key in obj){if(hasOwnProperty.call(obj,key)){return false}}return true};_.isElement=function(obj){return !!(obj&&obj.nodeType==1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isArguments=function(obj){return !!(obj&&hasOwnProperty.call(obj,"callee"))};_.isFunction=function(obj){return !!(obj&&obj.constructor&&obj.call&&obj.apply)};_.isString=function(obj){return !!(obj===""||(obj&&obj.charCodeAt&&obj.substr))};_.isNumber=function(obj){return !!(obj===0||(obj&&obj.toExponential&&obj.toFixed))};_.isNaN=function(obj){return obj!==obj};_.isBoolean=function(obj){return obj===true||obj===false};_.isDate=function(obj){return !!(obj&&obj.getTimezoneOffset&&obj.setUTCFullYear)};_.isRegExp=function(obj){return !!(obj&&obj.test&&obj.exec&&(obj.ignoreCase||obj.ignoreCase===false))};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){for(var i=0;i<n;i++){iterator.call(context,i)}};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name])})};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};_.template=function(str,data){var c=_.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func};var wrapper=function(obj){this._wrapped=obj};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain)}};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){method.apply(this._wrapped,arguments);return result(this._wrapped,this._chain)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain)}});wrapper.prototype.chain=function(){this._chain=true;return this};wrapper.prototype.value=function(){return this._wrapped}})();_.zipO=function(keys,values){if(typeof keys==="undefined"||typeof values==="undefined"){return[]}var result={};for(i=0;i<keys.length;i++){key=keys[i];value=values[i];result[key]=value}return result};_.isDefined=function(obj){return !_.isUndefined(obj)};define("underscore-1.1.6",function(){});var handlebars=(function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,hashSegments:29,hashSegment:30,ID:31,EQUALS:32,pathSegments:33,SEP:34,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",31:"ID",32:"EQUALS",34:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[26,1],[29,2],[29,1],[30,3],[30,3],[21,1],[33,3],[33,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0]);break;case 4:this.$=new yy.ProgramNode([]);break;case 5:this.$=[$$[$0]];break;case 6:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 7:this.$=new yy.InverseNode($$[$0-2],$$[$0-1],$$[$0]);break;case 8:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0]);break;case 9:this.$=$$[$0];break;case 10:this.$=$$[$0];break;case 11:this.$=new yy.ContentNode($$[$0]);break;case 12:this.$=new yy.CommentNode($$[$0]);break;case 13:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 14:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 15:this.$=$$[$0-1];break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],true);break;case 18:this.$=new yy.PartialNode($$[$0-1]);break;case 19:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 20:break;case 21:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 22:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 23:this.$=[[$$[$0-1]],$$[$0]];break;case 24:this.$=[[$$[$0]],null];break;case 25:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 26:this.$=[$$[$0]];break;case 27:this.$=$$[$0];break;case 28:this.$=new yy.StringNode($$[$0]);break;case 29:this.$=new yy.HashNode($$[$0]);break;case 30:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 31:this.$=[$$[$0]];break;case 32:this.$=[$$[$0-2],$$[$0]];break;case 33:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 34:this.$=new yy.IdNode($$[$0]);break;case 35:$$[$0-2].push($$[$0]);this.$=$$[$0-2];break;case 36:this.$=[$$[$0]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,31:[1,25],33:24},{17:26,21:23,31:[1,25],33:24},{17:27,21:23,31:[1,25],33:24},{17:28,21:23,31:[1,25],33:24},{21:29,31:[1,25],33:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,31:[1,25],33:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,34],28:[2,34],31:[2,34],34:[1,44]},{18:[2,36],28:[2,36],31:[2,36],34:[2,36]},{18:[1,45]},{18:[1,46]},{18:[1,47]},{18:[1,48],21:49,31:[1,25],33:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:50,31:[1,25],33:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:51,27:52,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,23]},{18:[2,26],28:[2,26],31:[2,26]},{18:[2,29],30:53,31:[1,54]},{18:[2,27],28:[2,27],31:[2,27]},{18:[2,28],28:[2,28],31:[2,28]},{18:[2,31],31:[2,31]},{18:[2,36],28:[2,36],31:[2,36],32:[1,55],34:[2,36]},{31:[1,56]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,57]},{18:[1,58]},{18:[2,21]},{18:[2,25],28:[2,25],31:[2,25]},{18:[2,30],31:[2,30]},{32:[1,55]},{21:59,28:[1,60],31:[1,25],33:24},{18:[2,35],28:[2,35],31:[2,35],34:[2,35]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,32],31:[2,32]},{18:[2,33],31:[2,33]}],defaultActions:{16:[2,1],37:[2,23],51:[2,21]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var yyloc=this.lexer.yylloc;lstack.push(yyloc);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol==null){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){if(!recovering){expected=[];for(p in table[state]){if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}}var errStr="";if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":("'"+(this.terminals_[symbol]||symbol)+"'"))}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}if(recovering==3){if(symbol==EOF){throw new Error(errStr||"Parsing halted.")}yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;symbol=lex()}while(1){if((TERROR.toString()) in table[state]){break}if(state==0){throw new Error(errStr||"Parsing halted.")}popStack(1);state=stack[stack.length-1]}preErrorSymbol=symbol;symbol=TERROR;state=stack[stack.length-1];action=table[state]&&table[state][TERROR];recovering=3}if(action[0] instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0){recovering--}}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};var lexer=(function(){var lexer=({EOF:1,parseError:function parseError(str,hash){if(this.yy.parseError){this.yy.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.match+=ch;this.matched+=ch;var lines=ch.match(/\n/);if(lines){this.yylineno++}this._input=this._input.slice(1);return ch},unput:function(ch){this._input=ch+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var token,match,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){match=this._input.match(this.rules[rules[i]]);if(match){lines=match[0].match(/\n.*/g);if(lines){this.yylineno+=lines.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-1:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[i],this.conditionStack[this.conditionStack.length-1]);if(token){return token}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:this.begin("mu");if(yy_.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 32;break;case 12:return 31;break;case 13:return 31;break;case 14:return 34;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 31;break;case 20:return"INVALID";break;case 21:return 5;break}};lexer.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^[a-zA-Z0-9_-]+(?=[=} /.])/,/^./,/^$/];lexer.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],inclusive:false},INITIAL:{rules:[0,1,21],inclusive:true}};return lexer})();parser.lexer=lexer;return parser})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=handlebars;exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)};exports.main=function commonjsMain(args){if(!args[1]){throw new Error("Usage: "+args[0]+" FILE")}if(typeof process!=="undefined"){var source=require("fs").readFileSync(require("path").join(process.cwd(),args[1]),"utf8")}else{var cwd=require("file").path(require("file").cwd());var source=cwd.join(args[1]).read({charset:"utf-8"})}return exports.parser.parse(source)};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args)}}if(!Handlebars||!(Handlebars instanceof Object)){var Handlebars={}}Handlebars.VERSION="1.0.beta.1";Handlebars.Parser=handlebars;Handlebars.parse=function(string){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(string)};Handlebars.print=function(ast){return new Handlebars.PrintVisitor().accept(ast)};if(!Handlebars.helpers||!(Handlebars.helpers instanceof Object)){Handlebars.helpers={}}if(!Handlebars.partials||!(Handlebars.partials instanceof Object)){Handlebars.partials={}}Handlebars.registerHelper=function(name,fn,inverse){if(inverse){fn.not=inverse}this.helpers[name]=fn};Handlebars.registerPartial=function(name,str){this.partials[name]=str};Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+arg+"'")}});Handlebars.registerHelper("blockHelperMissing",function(context,fn,inverse){inverse=inverse||function(){};var ret="";var type=Object.prototype.toString.call(context);if(type==="[object Function]"){context=context()}if(context===true){return fn(this)}else{if(context===false||context==null){return inverse(this)}else{if(type==="[object Array]"){if(context.length>0){for(var i=0,j=context.length;i<j;i++){ret=ret+fn(context[i])}}else{ret=inverse(this)}return ret}else{return fn(context)}}}},function(context,fn){return fn(context)});Handlebars.registerHelper("each",function(context,fn,inverse){var ret="";if(context&&context.length>0){for(var i=0,j=context.length;i<j;i++){ret=ret+fn(context[i])}}else{ret=inverse(this)}return ret});Handlebars.registerHelper("if",function(context,fn,inverse){if(!context||context==[]){return inverse(this)}else{return fn(this)}});Handlebars.registerHelper("unless",function(context,fn,inverse){return Handlebars.helpers["if"].call(this,context,inverse,fn)});Handlebars.registerHelper("with",function(context,fn){return fn(context)});Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,str){}};Handlebars.log=function(level,str){Handlebars.logger.log(level,str)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program";this.statements=statements;if(inverse){this.inverse=new Handlebars.AST.ProgramNode(inverse)}};Handlebars.AST.MustacheNode=function(params,hash,unescaped){this.type="mustache";this.id=params[0];this.params=params.slice(1);this.hash=hash;this.escaped=!unescaped};Handlebars.AST.PartialNode=function(id,context){this.type="partial";this.id=id;this.context=context};var verifyMatch=function(open,close){if(open.original!==close.original){throw new Handlebars.Exception(open.original+" doesn't match "+close.original)}};Handlebars.AST.BlockNode=function(mustache,program,close){verifyMatch(mustache.id,close);this.type="block";this.mustache=mustache;this.program=program};Handlebars.AST.InverseNode=function(mustache,program,close){verifyMatch(mustache.id,close);this.type="inverse";this.mustache=mustache;this.program=program};Handlebars.AST.ContentNode=function(string){this.type="content";this.string=string};Handlebars.AST.HashNode=function(pairs){this.type="hash";this.pairs=pairs};Handlebars.AST.IdNode=function(parts){this.type="ID";this.original=parts.join(".");var dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i];if(part===".."){depth++}else{if(part==="."||part==="this"){continue}else{dig.push(part)}}}this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=(dig.length===1)&&(depth===0)};Handlebars.AST.StringNode=function(string){this.type="STRING";this.string=string};Handlebars.AST.CommentNode=function(comment){this.type="comment";this.comment=comment}})();Handlebars.Visitor=function(){};Handlebars.Visitor.prototype={accept:function(object){return this[object.type](object)}};Handlebars.Exception=function(message){this.message=message};Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var escape={"<":"&lt;",">":"&gt;"};var badChars=/&(?!\w+;)|[<>]/g;var possible=/[&<>]/;var escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString()}else{if(string==null||string===false){return""}}if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)},isEmpty:function(value){if(typeof value==="undefined"){return true}else{if(value===null){return true}else{if(value===false){return true}else{if(Object.prototype.toString.call(value)==="[object Array]"&&value.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(Compiler,JavaScriptCompiler){Compiler.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16};Compiler.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1};Compiler.DISASSEMBLE_MAP={};for(var prop in Compiler.OPCODE_MAP){var value=Compiler.OPCODE_MAP[prop];Compiler.DISASSEMBLE_MAP[value]=prop}Compiler.multiParamSize=function(code){return Compiler.MULTI_PARAM_OPCODES[Compiler.DISASSEMBLE_MAP[code]]};Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,nextCode;var out=[],str,name,value;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode==="DECLARE"){name=opcodes[++i];value=opcodes[++i];out.push("DECLARE "+name+" = "+value)}else{str=Compiler.DISASSEMBLE_MAP[opcode];var extraParams=Compiler.multiParamSize(opcode);var codes=[];for(var j=0;j<extraParams;j++){nextCode=opcodes[++i];if(typeof nextCode==="string"){nextCode='"'+nextCode.replace("\n","\\n")+'"'}codes.push(nextCode)}str=str+" "+codes.join(" ");out.push(str)}}return out.join("\n")},guid:0,compile:function(program,options){this.children=[];this.depths={list:[]};this.options=options||{};return this.program(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++){statement=statements[i];this[statement.type](statement)}this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=new this.compiler().compile(program,this.options);var guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache;var depth,child,inverse,inverseGuid;var params=this.setupStackForMustache(mustache);var programGuid=this.compileProgram(block.program);if(block.program.inverse){inverseGuid=this.compileProgram(block.program.inverse);this.declare("inverse",inverseGuid)}this.opcode("invokeProgram",programGuid,params.length);this.declare("inverse",null);this.opcode("append")},inverse:function(block){this.ID(block.mustache.id);var programGuid=this.compileProgram(block.program);this.opcode("invokeInverse",programGuid);this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("push","{}");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];this.accept(val);this.opcode("assignToHash",pair[0])}},partial:function(partial){var id=partial.id;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","context")}this.opcode("invokePartial",id.original);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){var params=this.setupStackForMustache(mustache);this.opcode("invokeMustache",params.length,mustache.id.original);if(mustache.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("lookupWithHelpers",id.parts[0]||null);for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},comment:function(){},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.string)}else{this[param.type](param)}}},opcode:function(name,val1,val2){this.opcodes.push(Compiler.OPCODE_MAP[name]);if(val1!==undefined){this.opcodes.push(val1)}if(val2!==undefined){this.opcodes.push(val2)}},declare:function(name,value){this.opcodes.push("DECLARE");this.opcodes.push(name);this.opcodes.push(value)},addDepth:function(depth){if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},setupStackForMustache:function(mustache){var params=mustache.params;this.pushParams(params);if(mustache.hash){this.hash(mustache.hash)}else{this.opcode("push","{}")}this.ID(mustache.id);return params}};JavaScriptCompiler.prototype={nameLookup:function(parent,name,type){if(JavaScriptCompiler.RESERVED_WORDS[name]||name.indexOf("-")!==-1){return parent+"['"+name+"']"}else{return parent+"."+name}},appendToBuffer:function(string){return"buffer = buffer + "+string+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(environment,options){this.environment=environment;this.options=options||{};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileChildren(environment,options);Handlebars.log(Handlebars.logger.DEBUG,environment.disassemble()+"\n\n");var opcodes=environment.opcodes,opcode,name,declareName,declareVal;this.i=0;for(l=opcodes.length;this.i<l;this.i++){opcode=this.nextOpcode(0);if(opcode[0]==="DECLARE"){this.i=this.i+2;this[opcode[1]]=opcode[2]}else{this.i=this.i+opcode[1].length;this[opcode[0]].apply(this,opcode[1])}}return this.createFunction()},nextOpcode:function(n){var opcodes=this.environment.opcodes,opcode=opcodes[this.i+n],name,val;var extraParams,codes;if(opcode==="DECLARE"){name=opcodes[this.i+1];val=opcodes[this.i+2];return["DECLARE",name,val]}else{name=Compiler.DISASSEMBLE_MAP[opcode];extraParams=Compiler.multiParamSize(opcode);codes=[];for(var j=0;j<extraParams;j++){codes.push(opcodes[this.i+j+1+n])}return[name,codes]}},eat:function(opcode){this.i=this.i+opcode.length},preamble:function(){var out=[];out.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var copies="helpers = helpers || Handlebars.helpers;";if(this.environment.usePartial){copies=copies+" partials = partials || Handlebars.partials;"}out.push(copies);this.lastContext=0;this.source=out},createFunction:function(){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,helpers,partials,data){var programWrapper=this.programs[i];if(data){return Handlebars.VM.program(this.children[i],helpers,partials,data)}else{if(programWrapper){return programWrapper}else{programWrapper=this.programs[i]=Handlebars.VM.program(this.children[i],helpers,partials);return programWrapper}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[0]=this.source[0]+", "+locals.join(", ")}this.source[0]=this.source[0]+";";this.source.push("return buffer;");var params=["Handlebars","context","helpers","partials"];if(this.options.data){params.push("data")}for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}if(params.length===4&&!this.environment.usePartial){params.pop()}params.push(this.source.join("\n"));var fn=Function.apply(this,params);fn.displayName="Handlebars.js";Handlebars.log(Handlebars.logger.DEBUG,fn.toString()+"\n\n");container.render=fn;container.children=this.environment.children;return function(context,options,$depth){try{options=options||{};var args=[Handlebars,context,options.helpers,options.partials,options.data];var depth=Array.prototype.slice.call(arguments,2);args=args.concat(depth);return container.render.apply(container,args)}catch(e){throw e}}},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)))},append:function(){var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }")},appendEscaped:function(){var opcode=this.nextOpcode(1),extra="";if(opcode[0]==="appendContent"){extra=" + "+this.quotedString(opcode[1][0]);this.eat(opcode)}this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+extra))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth;if(depth===0){this.source.push("currentContext = context;")}else{this.source.push("currentContext = depth"+depth+";")}}},lookupWithHelpers:function(name){if(name){var topStack=this.nextStack();var toPush="if('"+name+"' in helpers) { "+topStack+" = "+this.nameLookup("helpers",name,"helper")+"; } else { "+topStack+" = "+this.nameLookup("currentContext",name,"context")+"; }";this.source.push(toPush)}else{this.pushStack("currentContext")}},lookup:function(name){var topStack=this.topStack();this.source.push(topStack+" = "+this.nameLookup(topStack,name,"context")+";")},pushStringParam:function(string){this.pushStack("currentContext");this.pushString(string)},pushString:function(string){this.pushStack(this.quotedString(string))},push:function(name){this.pushStack(name)},invokeMustache:function(paramSize,original){this.populateParams(paramSize,this.quotedString(original),"{}",null,function(nextStack,helperMissingString,id){this.source.push("else if("+id+"=== undefined) { "+nextStack+" = helpers.helperMissing.call("+helperMissingString+"); }");this.source.push("else { "+nextStack+" = "+id+"; }")})},invokeProgram:function(guid,paramSize){var inverse=this.programExpression(this.inverse);var mainProgram=this.programExpression(guid);this.populateParams(paramSize,null,mainProgram,inverse,function(nextStack,helperMissingString,id){this.source.push("else { "+nextStack+" = helpers.blockHelperMissing.call("+helperMissingString+"); }")})},populateParams:function(paramSize,helperId,program,inverse,fn){var id=this.popStack(),nextStack;var params=[],param,stringParam;var hash=this.popStack();this.register("tmp1",program);this.source.push("tmp1.hash = "+hash+";");if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(inverse){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+inverse+";")}if(this.options.data){this.source.push("tmp1.data = data;")}params.push("tmp1");if(inverse){params.push(inverse)}this.populateCall(params,id,helperId||id,fn)},populateCall:function(params,id,helperId,fn){var paramString=["context"].concat(params).join(", ");var helperMissingString=["context"].concat(helperId).concat(params).join(", ");nextStack=this.nextStack();this.source.push("if(typeof "+id+" === 'function') { "+nextStack+" = "+id+".call("+paramString+"); }");fn.call(this,nextStack,helperMissingString,id)},invokeInverse:function(guid){var program=this.programExpression(guid);var blockMissingParams=["context",this.topStack(),"this.noop",program];this.pushStack("helpers.blockHelperMissing.call("+blockMissingParams.join(", ")+")")},invokePartial:function(context){this.pushStack("this.invokePartial("+this.nameLookup("partials",context,"partial")+", '"+context+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(key){var value=this.popStack();var hash=this.topStack();this.source.push(hash+"['"+key+"'] = "+value+";")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;var compiled=[];for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler();compiled[i]=compiler.compile(child,options)}environment.rawChildren=children;environment.children=compiled},programExpression:function(guid){if(guid==null){return"this.noop"}var programParams=[guid,"helpers","partials"];var depths=this.environment.rawChildren[guid].depths.list;if(this.options.data){programParams.push("data")}for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("context")}else{programParams.push("depth"+(depth-1))}}if(!this.environment.usePartial){if(programParams[3]){programParams[2]="null"}else{programParams.pop()}}if(depths.length===0){return"this.program("+programParams.join(", ")+")"}else{programParams[0]="this.children["+guid+"]";return"this.programWithDepth("+programParams.join(", ")+")"}},register:function(name,val){this.useRegister(name);this.source.push(name+" = "+val+";")},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStack:function(item){this.source.push(this.nextStack()+" = "+item+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var reservedWords=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false").split(" ");compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.VM={programWithDepth:function(fn,helpers,partials,data,$depth){var args=Array.prototype.slice.call(arguments,4);return function(context,options){options=options||{};options={helpers:options.helpers||helpers,partials:options.partials||partials,data:options.data||data};return fn.apply(this,[context,options].concat(args))}},program:function(fn,helpers,partials,data){return function(context,options){options=options||{};return fn(context,{helpers:options.helpers||helpers,partials:options.partials||partials,data:options.data||data})}},noop:function(){return""},compile:function(string,options){var ast=Handlebars.parse(string);var environment=new Handlebars.Compiler().compile(ast,options);return new Handlebars.JavaScriptCompiler().compile(environment,options)},invokePartial:function(partial,name,context,helpers,partials){if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found")}else{if(partial instanceof Function){return partial(context,{helpers:helpers,partials:partials})}else{partials[name]=Handlebars.VM.compile(partial);return partials[name](context,{helpers:helpers,partials:partials})}}}};Handlebars.compile=Handlebars.VM.compile;define("handlebars-1.0.0.beta.2",[],function(){return Handlebars});
/*
 * Tiny Scrollbar 1.6
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 27 / 04 / 2011
 * Depends on library: jQuery
 * 
 */
define("tinyScrollBar",["ftx/lib/jquery-current"],function($){$.tiny=$.tiny||{};$.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:"auto",sizethumb:"auto",classPrefix:""}};$.fn.tinyscrollbar=function(options){var oElement=null;var options=$.extend({},$.tiny.scrollbar.options,options);this.each(function(){oElement=new Scrollbar($(this),options)});return $.extend(this,oElement)};function Scrollbar(root,options){var oSelf=this;var oWrapper=root;var oViewport={obj:$("."+options.classPrefix+"viewport",root)};var oContent={obj:$("."+options.classPrefix+"overview",root)};var oScrollbar={obj:$("."+options.classPrefix+"scrollbar",root)};var oTrack={obj:$("."+options.classPrefix+"track",oScrollbar.obj)};var oThumb={obj:$("."+options.classPrefix+"thumb",oScrollbar.obj)};var sAxis=options.axis=="x",sDirection=sAxis?"left":"top",sSize=sAxis?"Width":"Height";var iScroll,iPosition={start:0,now:0},iMouse={};function initialize(){oSelf.update();setEvents();return oSelf}this.update=function(sScroll){oViewport[options.axis]=oViewport.obj[0]["offset"+sSize];oContent[options.axis]=oContent.obj[0]["scroll"+sSize];oContent.ratio=oViewport[options.axis]/oContent[options.axis];oScrollbar.obj.toggleClass("disable",oContent.ratio>=1);oTrack[options.axis]=options.size=="auto"?oViewport[options.axis]:options.size;oThumb[options.axis]=Math.min(oTrack[options.axis],Math.max(0,(options.sizethumb=="auto"?(oTrack[options.axis]*oContent.ratio):options.sizethumb)));oScrollbar.ratio=options.sizethumb=="auto"?(oContent[options.axis]/oTrack[options.axis]):(oContent[options.axis]-oViewport[options.axis])/(oTrack[options.axis]-oThumb[options.axis]);iScroll=(sScroll=="relative"&&oContent.ratio<=1)?Math.min((oContent[options.axis]-oViewport[options.axis]),Math.max(0,iScroll)):0;iScroll=(sScroll=="bottom"&&oContent.ratio<=1)?(oContent[options.axis]-oViewport[options.axis]):isNaN(parseInt(sScroll))?iScroll:parseInt(sScroll);setSize()};function setSize(){oThumb.obj.css(sDirection,iScroll/oScrollbar.ratio);oContent.obj.css(sDirection,-iScroll);iMouse.start=oThumb.obj.offset()[sDirection];var sCssSize=sSize.toLowerCase();oScrollbar.obj.css(sCssSize,oTrack[options.axis]);oTrack.obj.css(sCssSize,oTrack[options.axis]);oThumb.obj.css(sCssSize,oThumb[options.axis])}function setEvents(){oThumb.obj.bind("mousedown",start);oThumb.obj[0].ontouchstart=function(oEvent){oEvent.preventDefault();oThumb.obj.unbind("mousedown");start(oEvent.touches[0]);return false};oTrack.obj.bind("mouseup",drag);if(options.scroll&&this.addEventListener){oWrapper[0].addEventListener("DOMMouseScroll",wheel,false);oWrapper[0].addEventListener("mousewheel",wheel,false)}else{if(options.scroll){oWrapper[0].onmousewheel=wheel}}}function start(oEvent){iMouse.start=sAxis?oEvent.pageX:oEvent.pageY;var oThumbDir=parseInt(oThumb.obj.css(sDirection));iPosition.start=oThumbDir=="auto"?0:oThumbDir;$(document).bind("mousemove",drag);document.ontouchmove=function(oEvent){$(document).unbind("mousemove");drag(oEvent.touches[0])};$(document).bind("mouseup",end);oThumb.obj.bind("mouseup",end);oThumb.obj[0].ontouchend=document.ontouchend=function(oEvent){$(document).unbind("mouseup");oThumb.obj.unbind("mouseup");end(oEvent.touches[0])};return false}function wheel(oEvent){if(!(oContent.ratio>=1)){oEvent=$.event.fix(oEvent||window.event);var iDelta=oEvent.wheelDelta?oEvent.wheelDelta/120:-oEvent.detail/3;iScroll-=iDelta*options.wheel;iScroll=Math.min((oContent[options.axis]-oViewport[options.axis]),Math.max(0,iScroll));oThumb.obj.css(sDirection,iScroll/oScrollbar.ratio);oContent.obj.css(sDirection,-iScroll);oEvent.preventDefault()}}function end(oEvent){$(document).unbind("mousemove",drag);$(document).unbind("mouseup",end);oThumb.obj.unbind("mouseup",end);document.ontouchmove=oThumb.obj[0].ontouchend=document.ontouchend=null;return false}function drag(oEvent){if(!(oContent.ratio>=1)){iPosition.now=Math.min((oTrack[options.axis]-oThumb[options.axis]),Math.max(0,(iPosition.start+((sAxis?oEvent.pageX:oEvent.pageY)-iMouse.start))));iScroll=iPosition.now*oScrollbar.ratio;oContent.obj.css(sDirection,-iScroll);oThumb.obj.css(sDirection,iPosition.now)}return false}return initialize()}});define("json2",[],function(){if(!window.JSON){window.JSON={}}function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}});define("audible-fgl-modal",["ftx/lib/jquery-current","page-action","i18n!nls/localizedstrings","cart-item-count-monitor","tinyScrollBar","json2"],function($,pageAction,localstrings,cartItemCountMonitor){var Modal={};var Logging=function(context,prefix){var debugOn=(location.hash.indexOf("debug")!=-1);function shouldLog(){return((typeof console=="function"||typeof console=="object")&&debugOn)?true:false}context.log=function(msg){if(shouldLog()){console.debug(prefix+msg)}};context.logGroup=function(grp){if(shouldLog()){console.group(grp)}};context.logGroupEnd=function(){if(shouldLog()){console.groupEnd()}};context.debugOn=function(){debugOn=true};context.debugOff=function(){debugOn=false}};Logging(Modal,"Modal-");Modal.scrollPrefix="#adbl-fglm-scroll-";Modal.modalPrefix="#modal-review-";Modal.Tabs=(function(context){var leftIsHover=false;var rightIsHover=false;function deactivateHover(strSide){$("#adbl-"+strSide+"-inactive-on-hover").hide();$("#adbl-"+strSide+"-inactive").show();return true}function activateHover(strSide){$("#adbl-"+strSide+"-inactive-on-hover").show();$("#adbl-"+strSide+"-inactive").hide();return true}function toggleHover(strSide){if(strSide==="left"){context.log("hover left");(leftIsHover)?deactivateHover(strSide):activateHover(strSide);leftIsHover=!leftIsHover}else{if(strSide==="right"){context.log("hover right");(rightIsHover)?deactivateHover(strSide):activateHover(strSide);rightIsHover=!rightIsHover}else{return false}}return true}function swapTabs(show,hide){$("#adbl-"+show+"-tab-active").show();$("#adbl-"+hide+"-tab-active").hide()}function swapContent(show,hide){$("#adbl-product-"+show+"-content").show();$("#adbl-product-"+hide+"-content").hide()}function activateLeftI(){swapTabs("left","right");swapContent("review","publisher")}function activateRightI(){swapTabs("right","left");swapContent("publisher","review")}return{toggleLeftHover:function(){toggleHover("left")},toggleRightHover:function(){toggleHover("right")},activateLeft:function(){activateLeftI()},activateRight:function(){activateRightI()},init:function(){activateLeftI()}}})(Modal);Modal.Scrolling=(function(context,_){var currentReviewIndex=1;var defaultMax=5;var max=defaultMax;var min=1;var scrollPlaceHolder=context.scrollPrefix+"place";var indexTrackerSpan="#adbl-fglm-review-index";var maxTrackerSpan="#adbl-fglm-review-max";function updateDisplay(current){var showLeft=(current===min)?false:true;var showRight=(current===max)?false:true;if(!showLeft){$(context.scrollPrefix+"left").hide()}else{$(context.scrollPrefix+"left").show()}if(!showRight){$(context.scrollPrefix+"right").hide()}else{$(context.scrollPrefix+"right").show()}$(indexTrackerSpan).text(current);return true}function checkPossible(current,direction){if(direction==="right"&&current<max){context.log("Right scroll possible");return true}else{if(direction==="left"&&current>min){context.log("Left scroll possible");return true}}return false}function setMax(newMax){context.log("new max = "+newMax);max=newMax;$(maxTrackerSpan).text(max)}function resetDisplay(){context.log("reset display");_.each([2,3,4,5],function(num){var toHide=context.modalPrefix+num;$(toHide).hide();context.log("hiding "+toHide)});currentReviewIndex=1;max=defaultMax;$(context.modalPrefix+1).show();updateDisplay(currentReviewIndex)}return{scrollLeft:function(){if(checkPossible(currentReviewIndex,"left")){context.log("Scrolling left to "+(currentReviewIndex-1));$(context.modalPrefix+currentReviewIndex).hide();currentReviewIndex--;$(context.modalPrefix+currentReviewIndex).show();updateDisplay(currentReviewIndex)}return true},scrollRight:function(){if(checkPossible(currentReviewIndex,"right")){context.log("Scrolling right to "+(currentReviewIndex+1));$(context.modalPrefix+currentReviewIndex).hide();currentReviewIndex++;$(context.modalPrefix+currentReviewIndex).show();updateDisplay(currentReviewIndex)}return true},postInit:function(productData,userData){resetDisplay();setMax(productData.reviews.length)}}})(Modal,_);Modal.TemplateHelper=(function(context,Handlebars,_){var emptyS='<a class="adbl-new-rating-star-empty"></a>';var halfS='<a class="adbl-new-rating-star-half"></a>';var oneS='<a class="adbl-new-rating-star"></a>';var twoS=oneS+oneS;var threeS=twoS+oneS;var fourS=twoS+twoS;var twoES=emptyS+emptyS;var threeES=emptyS+twoES;var fourES=twoES+twoES;var lnkT=$("#lnkListTemplate").html();var lnkTemplate=(lnkT!=null)?Handlebars.compile(lnkT):null;function formatPriceI(price){var result=price.toFixed(2);if(localstrings.audible_fgl_modal_locale=="de-de"){result=result.replace(".",",")}return result}function printEntityList(url,list){var output="";_.each(list,function(elem,index){var encName=elem.name.replace(/\ /g,"+");var comma=(index<list.length-1)?true:false;output+=lnkTemplate({url:url+encName,name:elem.name,comma:comma})});return output}function computeStarsI(number){if(number>=2.75){return(number<=5&&number>=4.75)?fourS+oneS:(number<4.75&&number>=4.25)?fourS+halfS:(number<4.25&&number>=3.75)?fourS+emptyS:(number<3.75&&number>=3.25)?threeS+halfS+emptyS:threeS+twoES}return(number<2.75&&number>=2.25)?twoS+halfS+twoES:(number<2.25&&number>=1.75)?twoS+threeES:(number<1.75&&number>=1.25)?oneS+halfS+threeES:(number<1.25&&number>=0.75)?oneS+fourES:(number<0.75&&number>=0.25)?halfS+fourES:emptyS+fourES}function generateSampleLink(sku){if(sku.substring(sku.length-2,sku.length)=="UK"){sku=sku.substring(0,(sku.length-2))}var folders=sku.replace(/_/g,"/");var link="/"+folders+"/"+sku;return link.toLowerCase()}var graphRowT=$("#graphRowTemplate").html();var graphRowTemplate=(graphRowT!=null)?Handlebars.compile(graphRowT):null;function addGraphRows(rating){var accum="";var nums={5:"Five",4:"Four",3:"Three",2:"Two",1:"One"};for(index=1;index<=5;index++){var elem=nums[index];var weight=Math.floor((rating["countOf"+elem+"StarRatings"]/rating.countOfRatings)*100);var data={stars:index,width:weight,ratings:rating["countOf"+elem+"StarRatings"]};accum=graphRowTemplate(data)+accum}return accum}Handlebars.registerHelper("formatPrice",function(price){return formatPriceI(price)});Handlebars.registerHelper("modalComputeStarsI",function(rating){return computeStarsI(rating)});Handlebars.registerHelper("authorList",function(authors){return printEntityList("/search?searchAuthor=",authors)});Handlebars.registerHelper("narratorList",function(narrators){return printEntityList("/search?searchNarrator=",narrators)});Handlebars.registerHelper("generateSampleLink",function(sku){return generateSampleLink(sku)});Handlebars.registerHelper("modalAddGraphRows",function(rating){return addGraphRows(rating)});return{computeStarsI:function(number){return computeStartI(number)},generateSampleLink:function(sku){return generateSampleLink(sku)}}})(Modal,Handlebars,_);Modal.Templating=(function(context,Handlebars,_,help){var scrollPrefix="#modal-scroll-";var reviewIdArray=[];var defaultScrollOptions={scroll:true,size:135,sizethumb:13,classPrefix:"adbl-fglm-"};var reviewDivIdPrefix="#modal-review-";var reviewT=$("#reviewTemplate").html();var reviewTemplate=(reviewT!=null)?Handlebars.compile(reviewT):null;var reviewAllLinkDivId="#adbl-fglm-read-all-link";var reviewAllT=$("#reviewAllLinkTemplate").html();var reviewAllTemplate=(reviewAllT)?Handlebars.compile(reviewAllT):null;var columnReviewT=$("#columnReviewTemplate").html();var columnReviewDivIdPrefix="#adbl-fglm-colum-review-";var columnReviewTemplate=(columnReviewT)?Handlebars.compile(columnReviewT):null;var productDivId="#adbl_fglm_product_column";var productT=$("#productTemplate").html();var mediaT=$("#mediaTemplate").html();Handlebars.registerPartial("modalMedia",mediaT);var productTemplate=(productT!=null)?Handlebars.compile(productT):null;var publisherDivId="#adbl-product-publisher-content";var publisherT=$("#publisherTemplate").html();var publisherTemplate=(publisherT!=null)?Handlebars.compile(publisherT):null;var graphDivId="#adbl_fglm_graph";var graphT=$("#graphTemplate").html();var graphTemplate=(graphT!=null)?Handlebars.compile(graphT):null;var mediaURLPrefix="http://audible.edgeboss.net/download/audible/content";var mediaURLSuffix="_sample.mp3";var mediaFile="";var playerDivId="#adbl_fglm_player";var playerT=$("#playerTemplate").html();var playerTemplate=(playerT!=null)?Handlebars.compile(playerT):null;function changePublisherLabel(newLabel){$(".adbl-publisher-label").each(function(index,elem){$(elem).text(newLabel)})}function tProductDetails(productData,userData,displayMode,exchangeArgs){productData.wishListText=(!productData.product.alreadyWishListed)?unescape(localstrings.audible_fgl_modal_addToWL):unescape(localstrings.audible_fgl_modal_onWL);productData.showCredits=(userData.credits!=0)?true:false;(productData.product.editorialDescription)?changePublisherLabel(unescape(localstrings.audible_fgl_modal_editorDefaultLabel)):changePublisherLabel(unescape(localstrings.audible_fgl_modal_publisherDefaultLabel));productData.showExchange=(displayMode=="Exchange")?true:false;productData.altString=unescape(localstrings.audible_fgl_modal_playsampleof);var priceType="";if(productData.product.customerPrice!=null){var price=productData.product.customerPrice.priceType;var strKey="audible_fgl_modal_"+price.replace(" ","");if(localstrings.hasOwnProperty(strKey)){priceType=unescape(localstrings[strKey])}else{priceType=productData.product.customerPrice.priceType}}var formatType="";if(productData.product.formatType=="UNABRIDGED"){formatType=unescape(localstrings.audible_fgl_modal_UNABRIDGED)}else{formatType=unescape(localstrings.audible_fgl_modal_ABRIDGED)}var t=productTemplate({productData:productData,userData:userData,exchangeArgs:exchangeArgs,priceType:priceType,formatType:formatType});$(productDivId).empty().append(t);mediaFile=mediaURLPrefix+help.generateSampleLink(productData.product.sku)+mediaURLSuffix;return true}function attachReviewLink(data){var content=reviewAllTemplate(data);context.log("templating review all link ");$(reviewAllLinkDivId).empty().append(content)}function tProductReviews(data){var counter=1;_.each(data.reviews,function(elem){var options={year:"numeric",month:"short",day:"numeric"};var subDate=new Date(elem.submissionDate);elem.prettyDate=subDate.toLocaleDateString(localstrings.audible_fgl_modal_locale,options);attachReview(elem,reviewDivIdPrefix+counter,counter);counter++;return(counter!==6)});if(data.reviews.length>=2){$(columnReviewDivIdPrefix+"1").empty().append(columnReviewTemplate(data.reviews[1]))}if(data.reviews.length>=3){$(columnReviewDivIdPrefix+"2").empty().append(columnReviewTemplate(data.reviews[2]))}attachReviewLink(data)}function attachReview(review,cellLocation){review.reviewDivId=review.reviewID.substr(1);var content=reviewTemplate(review);context.log("templating review "+review.reviewDivId);$(cellLocation).empty().append(content);activateScrollHook(scrollPrefix+review.reviewDivId)}function activateScrollHook(location){reviewIdArray.push(location)}function activateScroll(location){$(location).tinyscrollbar(defaultScrollOptions)}function prepReviewDivsForScrollBar(){context.log("preping reviews for scroll");_.each(_.range(1,6),function(num){var toShow=context.modalPrefix+num;$(toShow).show();context.log("showing "+toShow)})}function tPublisherSummary(data){var content=publisherTemplate(data);$(publisherDivId).empty().append(content)}function tProductReviewGraph(data){var content=graphTemplate(data);$(graphDivId).empty().append(content)}function attachMediaPlayer(playerDivId,productData){$(playerDivId).empty().append(playerTemplate(productData));context.log("Flash attached")}return{init:function(data,userData,displayMode,exchangeArgs){prepReviewDivsForScrollBar();tProductDetails(data,userData,displayMode,exchangeArgs);tProductReviews(data);tPublisherSummary(data);tProductReviewGraph(data)},computeStars:function(number){return help.computeStarsI(number)},postInit:function(productData){$.each(reviewIdArray,function(index,value){activateScroll(value)});attachMediaPlayer(playerDivId,productData)},removeMediaPlayer:function(){$("#audioplayer102").remove();$("#adbl_fglm_player").remove();attachMediaPlayer("#adbl-fglm-holder",{})},defaultScrollOptions:defaultScrollOptions}})(Modal,Handlebars,_,Modal.TemplateHelper);Modal.init=function(productData,userData,refTags,displayMode,exchangeArgs){this.logGroup("Modal.init");Modal.Tabs.init();Modal.Templating.init(productData,userData,displayMode,exchangeArgs);Modal.Ajax.init(refTags);this.logGroupEnd()};Modal.postInit=function(productData,userData){this.logGroup("Modal.postinit");Modal.Templating.postInit(productData);Modal.Scrolling.postInit(productData,userData);this.logGroupEnd();$("div#productDialog").bind("dialogclose",function(event){Modal.Templating.removeMediaPlayer()})};Modal.destroy=function(){$("#productDialog").dialog("close");try{Modal.Templating.removeMediaPlayer()}catch(err){this.log("flash not removed")}};Modal.showProductModal=function(productData,userData,refTags,displayMode,id){$("body").focus();var windowKey=id;if(id.indexOf("carousel_")==-1){windowKey="carousel_"+id}var exchangeArgs=window[windowKey].argData;Modal.init(productData,userData,refTags,displayMode,exchangeArgs);$("#productDialog").dialog({modal:true,width:978,dialogClass:"adbl-product-dialog",resizable:false});Modal.postInit(productData,userData)};Modal.Ajax=(function(){var addToCartText="#adbl_fglm_add_cart_text";var addToCartMsg="#adbl_fglm_add_cart_error_msg";var addToWishlistText="#adbl_fglm_add_wishlist_text";var addToWishlistMsg="#adbl_fglm_add_wishlist_msg";var refTags="";function getCartLink(){var addToCartLinkClass="#mast-member-cart-icon";return $($(addToCartLinkClass)[0]).attr("href")}function addCartLoadingImage(){$(addToCartMsg).empty().append("<span class='adbl-fglm-loading adbl-fglm-lm50' ></span>")}function addWishlistLoadingImage(){$(addToWishlistMsg).empty().append("<span class='adbl-fglm-loading' ></span>")}function AddItemToWishListOnSuccess(dataObj,textStatus){var lnkDefault=unescape(localstrings.audible_fgl_modal_addToWL);var lnkAdded=unescape(localstrings.audible_fgl_modal_onWL);var lnkInLibrary=unescape(localstrings.audible_fgl_modal_purchased);var lnkGeo=unescape(localstrings.audible_fgl_modal_unavailable);var wishListLink=' <a class="adbl-modal-link-fix" href="/wl" alt="'+unescape(localstrings.audible_fgl_modal_goToWL)+'" >'+unescape(localstrings.audible_fgl_modal_wishList)+"</a>.";var successText=unescape(localstrings.audible_fgl_modal_successText)+wishListLink;var duplicateText=unescape(localstrings.audible_fgl_modal_duplicateText)+wishListLink;var inLibraryText=unescape(localstrings.audible_fgl_modal_inLibraryText);var noGeoText=unescape(localstrings.audible_fgl_modal_noGeoText);var errorText=unescape(localstrings.audible_fgl_modal_errorText);var msgContent=errorText;var lnkContent=lnkDefault;var hasError=false;var respObj;if(textStatus=="success"){try{if(typeof dataObj=="object"){respObj=dataObj}else{respObj=eval("("+dataObj+")")}}catch(ex){hasError=true}if(hasError===false){if(respObj.status==="Success"){msgContent=successText;lnkContent=lnkAdded}else{if(respObj.status==="Duplicate"){msgContent=duplicateText;lnkContent=lnkAdded}else{if(respObj.status==="IsInLibrary"){msgContent=inLibraryText;lnkContent=lnkInLibrary}else{if(respObj.status==="noGeo"){msgContent=noGeoText;lnkContent=lnkGeo}}}}}}$(addToWishlistText).html(lnkContent);$(addToWishlistMsg).html(msgContent)}function AddItemToCartOnSuccess(respObj,textStatus){var lnkDefault=unescape(localstrings.audible_fgl_modal_addToCart);var lnkAdded=unescape(localstrings.audible_fgl_modal_inCart);var lnkPurchased=unescape(localstrings.audible_fgl_modal_purchased);var cartLink=" <a class='md' href='/mycart' >"+unescape(localstrings.audible_fgl_modal_yourCart)+"</a>.";var errorText=unescape(localstrings.audible_fgl_modal_errorTextCart);var successText=unescape(localstrings.audible_fgl_modal_successTextCart)+cartLink;var duplicateText=unescape(localstrings.audible_fgl_modal_duplicateTextCart)+cartLink;var purchasedText=unescape(localstrings.audible_fgl_modal_purchasedTextCart);var msgContent=errorText;var lnkContent=lnkDefault;switch(textStatus){case"success":if(typeof respObj==="string"){respObj=JSON.parse(respObj)}switch(respObj.status){case"success":cartItemCountMonitor.updateCartItemCount(respObj.numItems);msgContent=successText;lnkContent=lnkAdded;break;case"duplicate":msgContent=duplicateText;lnkContent=lnkAdded;break;case"purchased":msgContent=purchasedText;lnkContent=lnkPurchased;break}break}$(addToCartText).html(lnkContent);$(addToCartMsg).html(msgContent)}return{init:function(refTagsNew){refTags=refTagsNew},addItemToCart:function(){var dest="/ajaxcart/ref="+refTags.addToCart+"?cartAction=addItem&asin="+$("#adbl_fglm_asin").val();dest+="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken();addCartLoadingImage();$.get(dest,function(data,textStatus,useExistingPopup){AddItemToCartOnSuccess(data,textStatus)})},addItemToWishlist:function(){var dest="/wishlistajax/ref="+refTags.addToWishList+"?wlaction=AddItemsToList&asin="+$("#adbl_fglm_asin").val();dest+="&appAction="+pageAction.getAction()+"&appActionToken="+pageAction.getToken()+"&totalAsinsPerPage=4";addWishlistLoadingImage();$.get(dest,function(data,statusText){AddItemToWishListOnSuccess(data,statusText)})}}})();$(document).ready(function(){$(document).on("click","#adbl-fglm-scroll-left",function(){Modal.Scrolling.scrollLeft();Modal.log("scroll left");return true});$(document).on("click","#adbl-fglm-scroll-right",function(){Modal.Scrolling.scrollRight();Modal.log("scroll right");return true});$(document).on("click","#adbl-right-inactive-hover",function(){Modal.Tabs.activateRight();Modal.log("hover inactive right click");return true});$(document).on("click","#adbl-left-inactive-hover",function(){Modal.Tabs.activateLeft();Modal.log("hover inactive left click");return true});$(document).on("click","#adbl-right-inactive-hover",function(){Modal.Tabs.toggleRightHover();Modal.log("hover inactive right hover");return true});$(document).on("hover","#adbl-left-inactive-hover",function(){Modal.Tabs.toggleLeftHover();Modal.log("hover inactive left hover");return true});$(document).on("click","#adbl-fglm-close-btn",function(){Modal.destroy()});$(document).on("click","#adbl_fglm_add_cart_lnk",function(){Modal.Ajax.addItemToCart()});$(document).on("click","#adbl_fglm_add_wishlist_lnk",function(){Modal.Ajax.addItemToWishlist()})});return Modal});define("glg-prompt",["ftx/lib/jquery-current","i18n!nls/localizedstrings","audible-fgl-modal"],function($,localstrings,Modal){$(document).delegate(".adbl-exchange-link","click",fetchExchangeAjax);$("#returnStatus").delegate("#glg-return-retry","click",ajaxReturn);$("#justReturn").delegate("#glg-just-return","click",ajaxReturn);$(".original-image").mouseover(function(){$(this).hide().parent().find(".hover-image").show()});$(".hover-image").mouseleave(function(){$(this).hide().parent().find(".original-image").show()});var promptIsActive=false;var returnLoadIndicator='<img src="https://images-na.ssl-images-amazon.com/images/G/02/AudibleUK/en_GB/images/creative/landing/member_benefits/glg/indicator.white.gif"/>';var returnLoadIndicatorDiv='<div id="return-prompt-loadicon" class="glgv2-load-icon">'+returnLoadIndicator+"</div>";function fetchExchangeAjax(evt){if(evt){evt.preventDefault()}if(!promptIsActive){promptIsActive=true;var target=$(this);target.hide();target.parent().append("<br />"+returnLoadIndicatorDiv);var dest=buildDest("GLG_E_E");var params={exchangeAsin:$("#adbl_fglm_asin").val(),asin:target.attr("data-asin"),orderId:target.attr("data-order-id"),orderItemId:target.attr("data-order-item-id"),purchaseType:target.attr("data-purchase-type"),creditCount:target.attr("data-credit-count"),methodOfReturn:target.attr("data-method-of-return"),returnReason:target.attr("data-return-reason"),isExchange:target.attr("data-is-exchange"),purchaseDate:target.attr("data-purchase-date")};var fetchExchangeScope="fetchExchangeAjax";$.ajax({type:"POST",url:dest,data:params,success:function(data,textStatus){ue_start(fetchExchangeScope,data.id);$("#glg-return-confirmation").replaceWith(data).show();$("#return-prompt-loadicon").remove();ue_feature(fetchExchangeScope);ue_done(fetchExchangeScope);Modal.destroy();$(".hp_heading").hide();$(".hp_copy").hide();$(".adbl-carousel").hide();$(".adbl-carousel-data-div").hide();$("#glg-just-return-div").hide()},error:function(error){$("#return-prompt-loadicon").remove();Modal.destroy();$("#glg-return-confirmation").replaceWith("<div>"+unescape(localstrings.glg_prompt_problem)+"</div>").show()}})}}function fetchAjaxPrompt(evt){if(evt){evt.preventDefault()}if(!promptIsActive){promptIsActive=true;var target=$(this);target.parent().parent().find(".return-for-low-rating-link").hide();$(".btn-return-docs").hide();target.parent().append(returnLoadIndicatorDiv);var dest=buildDest("GLG_RI");var params={asin:target.attr("data-asin"),orderId:target.attr("data-order-id"),orderItemId:target.attr("data-order-item-id"),purchaseType:target.attr("data-purchase-type"),creditCount:target.attr("data-credit-count"),methodOfReturn:target.attr("data-method-of-return"),purchaseDate:target.attr("data-purchase-date"),exchangeAllowed:target.attr("data-exchange-allowed")};var fetchPromptScope="fetchPromptAjax";$.ajax({type:"POST",url:dest,data:params,success:function(data,textStatus){ue_start(fetchPromptScope,data.id);$(document.body).append(data);var chatLink=$("#return-prompt-chat-link");chatLink.hide();var daysInMembership=chatLink.attr("data-days-in-membership");var lcparams={};var newdbs=[{name:"chat-concierge-english-5",pid:"return-prompt-chat-link"}];lcparams.newDbs=newdbs;lcparams.udes="SV!CustomerType=Member&SV!DaysInMembership="+daysInMembership;if(typeof lpMTag!="undefined"){lpMTag.lpSetPage(lcparams)}chatLink.show();var prompt=$(".returnPrompt");var blanket=$(".blanket");blanket.show();prompt.show();ue_feature(fetchPromptScope);ue_done(fetchPromptScope);blanket.click(cancelPrompt);prompt.find(".glg-cancel-btn").click(cancelPrompt);prompt.find("#returnReasonSelect").change(function(){prompt.find(".error-message").empty()});prompt.find(".glg-return-btn").click(function(){if($("#returnReasonSelect option:selected").val()=="defaultOption"){prompt.find(".error-message").text(unescape(localstrings.glg_prompt_pleaseSelect))}else{if(params.exchangeAllowed==="true"&&params.purchaseType==="Credit"&&(params.creditCount==="1"||params.creditCount==="1.0")){window.location=buildExchangeDest()}else{ajaxReturn()}}})},error:function(error){$("#adbl-purchase-loadicon").remove()}})}}function ajaxReturn(){var target=$(this);var returnReason=target.attr("data-return-reason");if(returnReason){target.replaceWith(returnLoadIndicator)}else{var returnPrompt=$(".returnPrompt");returnPrompt.find(".glg-cancel-btn").remove();target=returnPrompt.find(".glg-return-btn");target.replaceWith(returnLoadIndicatorDiv);returnReason=$("#returnReasonSelect option:selected").val()}var dest=buildDest("GLG_RE");var returnScope="returnAjax";var params={asin:target.attr("data-asin"),orderId:target.attr("data-order-id"),orderItemId:target.attr("data-order-item-id"),purchaseType:target.attr("data-purchase-type"),creditCount:target.attr("data-credit-count"),methodOfReturn:target.attr("data-method-of-return"),purchaseDate:target.attr("data-purchase-date"),returnReason:returnReason,isReturn:"true",isExchange:"false",isPreview:"false"};$.ajax({type:"POST",url:dest,data:params,success:function(data,textStatus){ue_start(returnScope,data.id);window.location=$.trim(data);ue_feature(returnScope);ue_done(returnScope)},error:function(error){$("#adbl-purchase-loadicon").remove()}})}function buildDest(ref){return(this,"/return-prompt/ref="+ref)}function buildExchangeDest(){var prompt=$(".returnPrompt");var target=prompt.find(".glg-return-btn");var asin=target.attr("data-asin");var orderId=target.attr("data-order-id");var orderItemId=target.attr("data-order-item-id");var purchaseType=target.attr("data-purchase-type");var creditCount=target.attr("data-credit-count");var purchaseDate=target.attr("data-purchase-date");var methodOfReturn=target.attr("data-method-of-return");var returnReason=$("#returnReasonSelect option:selected").val();return(this,"/mt/exchange/ref=GLG_E_I?asin="+asin+"&orderId="+orderId+"&orderItemId="+orderItemId+"&methodOfReturn="+methodOfReturn+"&purchaseType="+purchaseType+"&creditCount="+creditCount+"&returnReason="+returnReason+"&purchaseDate="+purchaseDate)}function cancelPrompt(evt){evt.preventDefault();$(".returnPrompt").remove();$(".blanket").remove();var loadIcon=$("#return-prompt-loadicon");loadIcon.parent().children(".return-for-low-rating-link").show();loadIcon.remove();$(".btn-return-docs").show();$(".return-for-low-rating").hide();promptIsActive=false}function ue_start(scope,requestId){if(window.ue&&ues){ues("id",scope,requestId);ues("t0",scope,new Date());ues("ctb",scope,"1")}}function ue_feature(scope){if(window.ue&&uet){uet("cf",scope)}}function ue_done(scope){if(window.ue&&uet&&uex){uet("be",scope);uex("ld",scope)}}return{fetchAjaxPrompt:fetchAjaxPrompt,cancelPrompt:cancelPrompt}});define("jquery.tools.scrollable.min.1.2.6",["ftx/lib/jquery-current"],function(jQuery){(function($){$.tools=$.tools||{version:"1.2.5"};$.tools.scrollable={conf:{activeClass:"active",circular:false,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:true,mousewheel:false,next:".next",prev:".prev",size:1,speed:400,vertical:false,touch:true,wheelSpeed:0}};function dim(el,key){var v=parseInt(el.css(key),10);if(v){return v}var s=el[0].currentStyle;return s&&s.width&&parseInt(s.width,10)}function find(root,query){var el=$(query);return el.length<2?el:root.parent().find(query)}var current;function Scrollable(root,conf){var self=this,fire=root.add(self),itemWrap=root.children(),index=0,vertical=conf.vertical;if(!current){current=self}if(itemWrap.length>1){itemWrap=$(conf.items,root)}$.extend(self,{getConf:function(){return conf},getIndex:function(){return index},getSize:function(){return self.getItems().size()},getNaviButtons:function(){return prev.add(next)},getRoot:function(){return root},getItemWrap:function(){return itemWrap},getItems:function(){return itemWrap.children(conf.item).not("."+conf.clonedClass)},move:function(offset,time){return self.seekTo(index+offset,time)},next:function(time){return self.move(1,time)},prev:function(time){return self.move(-1,time)},begin:function(time){return self.seekTo(0,time)},end:function(time){return self.seekTo(self.getSize()-1,time)},focus:function(){current=self;return self},addItem:function(item){item=$(item);if(!conf.circular){itemWrap.append(item)}else{itemWrap.children("."+conf.clonedClass+":last").before(item);itemWrap.children("."+conf.clonedClass+":first").replaceWith(item.clone().addClass(conf.clonedClass))}fire.trigger("onAddItem",[item]);return self},seekTo:function(i,time,fn){if(!i.jquery){i*=1}if(conf.circular&&i===0&&index==-1&&time!==0){return self}if(!conf.circular&&i<0||i>self.getSize()||i<-1){return self}var item=i;if(i.jquery){i=self.getItems().index(i)}else{item=self.getItems().eq(i)}var e=$.Event("onBeforeSeek");if(!fn){fire.trigger(e,[i,time]);if(e.isDefaultPrevented()||!item.length){return self}}var props=vertical?{top:-item.position().top}:{left:-item.position().left};index=i;current=self;if(time===undefined){time=conf.speed}itemWrap.animate(props,time,conf.easing,fn||function(){fire.trigger("onSeek",[i])});return self}});$.each(["onBeforeSeek","onSeek","onAddItem"],function(i,name){if($.isFunction(conf[name])){$(self).bind(name,conf[name])}self[name]=function(fn){if(fn){$(self).bind(name,fn)}return self}});if(conf.circular){var items=self.getItems();var cloned1=items.slice(-1).clone().prependTo(itemWrap),cloned2=items.filter(":lt("+conf.size+")").clone().appendTo(itemWrap);items=null;cloned1.add(cloned2).addClass(conf.clonedClass);self.onBeforeSeek(function(e,i,time){if(e.isDefaultPrevented()){return}if(i==-1){self.seekTo(cloned1,time,function(){self.end(0)});return e.preventDefault()}else{if(i==self.getSize()){self.seekTo(cloned2,time,function(){self.begin(0)})}}});self.seekTo(0,0,function(){})}var prev=find(root,conf.prev).click(function(){self.prev()}),next=find(root,conf.next).click(function(){self.next()});if(!conf.circular&&self.getSize()>1){self.onBeforeSeek(function(e,i){setTimeout(function(){if(!e.isDefaultPrevented()){prev.toggleClass(conf.disabledClass,i<=0);next.toggleClass(conf.disabledClass,i>=self.getSize()-1)}},1)});if(!conf.initialIndex){prev.addClass(conf.disabledClass)}}if(conf.mousewheel&&$.fn.mousewheel){root.mousewheel(function(e,delta){if(conf.mousewheel){self.move(delta<0?1:-1,conf.wheelSpeed||50);return false}})}if(conf.touch){var touch={};itemWrap[0].ontouchstart=function(e){var t=e.touches[0];touch.x=t.clientX;touch.y=t.clientY};itemWrap[0].ontouchmove=function(e){if(e.touches.length==1&&!itemWrap.is(":animated")){var t=e.touches[0],deltaX=touch.x-t.clientX,deltaY=touch.y-t.clientY;self[vertical&&deltaY>0||!vertical&&deltaX>0?"next":"prev"]();e.preventDefault()}}}if(conf.keyboard){$(document).bind("keydown.scrollable",function(evt){if(!conf.keyboard||evt.altKey||evt.ctrlKey||$(evt.target).is(":input")){return}if(conf.keyboard!="static"&&current!=self){return}var key=evt.keyCode;if(vertical&&(key==38||key==40)){self.move(key==38?-1:1);return evt.preventDefault()}if(!vertical&&(key==37||key==39)){self.move(key==37?-1:1);return evt.preventDefault()}})}if(conf.initialIndex){self.seekTo(conf.initialIndex,0,function(){})}}$.fn.scrollable=function(conf){var el=this.data("scrollable");if(el){return el}conf=$.extend({},$.tools.scrollable.conf,conf);this.each(function(){el=new Scrollable($(this),conf);$(this).data("scrollable",el)});return conf.api?el:this}})(jQuery);(function($){var t=$.tools.scrollable;t.autoscroll={conf:{autoplay:true,interval:3000,autopause:true,direction:"forward"}};$.fn.autoscroll=function(conf){if(typeof conf=="number"){conf={interval:conf}}var opts=$.extend({},t.autoscroll.conf,conf),ret;this.each(function(){var api=$(this).data("scrollable"),root=api.getRoot(),timer,stopped=false;function scroll(){timer=setTimeout(function(){if(opts.direction==="forward"){api.next()}else{api.prev()}},opts.interval)}if(api){ret=api}api.play=function(){if(timer){return}stopped=false;root.bind("onSeek",scroll);scroll()};api.pause=function(){timer=clearTimeout(timer);root.unbind("onSeek",scroll)};api.resume=function(){stopped||api.play()};api.stop=function(){stopped=true;api.pause()};if(opts.autopause){root.add(api.getNaviButtons()).hover(api.pause,api.resume)}if(opts.autoplay){api.play()}});return opts.api?ret:this}})(jQuery);(function($){$.tools=$.tools||{version:"1.2.6"};var tool;tool=$.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function viewport(){if($.browser.msie){var d=$(document).height(),w=$(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d-w<20?w:d]}return[$(document).width(),$(document).height()]}function call(fn){if(fn){return fn.call($.mask)}}var mask,exposed,loaded,config,overlayIndex;$.mask={load:function(conf,els){if(loaded){return this}if(typeof conf=="string"){conf={color:conf}}conf=conf||config;config=conf=$.extend($.extend({},tool.conf),conf);mask=$("#"+conf.maskId);if(!mask.length){mask=$("<div/>").attr("id",conf.maskId);$("body").append(mask)}var size=viewport();mask.css({position:"absolute",top:0,left:0,width:size[0],height:size[1],display:"none",opacity:conf.startOpacity,zIndex:conf.zIndex});if(conf.color){mask.css("backgroundColor",conf.color)}if(call(conf.onBeforeLoad)===false){return this}if(conf.closeOnEsc){$(document).bind("keydown.mask",function(e){if(e.keyCode==27){$.mask.close(e)}})}if(conf.closeOnClick){mask.bind("click.mask",function(e){$.mask.close(e)})}$(window).bind("resize.mask",function(){$.mask.fit()});if(els&&els.length){overlayIndex=els.eq(0).css("zIndex");$.each(els,function(){var el=$(this);if(!/relative|absolute|fixed/i.test(el.css("position"))){el.css("position","relative")}});exposed=els.css({zIndex:Math.max(conf.zIndex+1,overlayIndex=="auto"?0:overlayIndex)})}mask.css({display:"block"}).fadeTo(conf.loadSpeed,conf.opacity,function(){$.mask.fit();call(conf.onLoad);loaded="full"});loaded=true;return this},close:function(){if(loaded){if(call(config.onBeforeClose)===false){return this}mask.fadeOut(config.closeSpeed,function(){call(config.onClose);if(exposed){exposed.css({zIndex:overlayIndex})}loaded=false});$(document).unbind("keydown.mask");mask.unbind("click.mask");$(window).unbind("resize.mask")}return this},fit:function(){if(loaded){var size=viewport();mask.css({width:size[0],height:size[1]})}},getMask:function(){return mask},isLoaded:function(fully){return fully?loaded=="full":loaded},getConf:function(){return config},getExposed:function(){return exposed}};$.fn.mask=function(conf){$.mask.load(conf);return this};$.fn.expose=function(conf){$.mask.load(conf,this);return this}})(jQuery);(function($){$.tools=$.tools||{version:"1.2.6"};$.tools.overlay={addEffect:function(name,loadFn,closeFn){effects[name]=[loadFn,closeFn]},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:!$.browser.msie||$.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var instances=[],effects={};$.tools.overlay.addEffect("default",function(pos,onLoad){var conf=this.getConf(),w=$(window);if(!conf.fixed){pos.top+=w.scrollTop();pos.left+=w.scrollLeft()}pos.position=conf.fixed?"fixed":"absolute";this.getOverlay().css(pos).fadeIn(conf.speed,onLoad)},function(onClose){this.getOverlay().fadeOut(this.getConf().closeSpeed,onClose)});function Overlay(trigger,conf){var self=this,fire=trigger.add(self),w=$(window),closers,overlay,opened,maskConf=$.tools.expose&&(conf.mask||conf.expose),uid=Math.random().toString().slice(10);if(maskConf){if(typeof maskConf=="string"){maskConf={color:maskConf}}maskConf.closeOnClick=maskConf.closeOnEsc=false}var jq=conf.target||trigger.attr("rel");overlay=jq?$(jq):null||trigger;if(!overlay.length){throw"Could not find Overlay: "+jq}if(trigger&&trigger.index(overlay)==-1){trigger.click(function(e){self.load(e);return e.preventDefault()})}$.extend(self,{load:function(e){if(self.isOpened()){return self}var eff=effects[conf.effect];if(!eff){throw'Overlay: cannot find effect : "'+conf.effect+'"'}if(conf.oneInstance){$.each(instances,function(){this.close(e)})}e=e||$.Event();e.type="onBeforeLoad";fire.trigger(e);if(e.isDefaultPrevented()){return self}opened=true;if(maskConf){$(overlay).expose(maskConf)}var top=conf.top,left=conf.left,oWidth=overlay.outerWidth(true),oHeight=overlay.outerHeight(true);if(typeof top=="string"){top=top=="center"?Math.max((w.height()-oHeight)/2,0):parseInt(top,10)/100*w.height()}if(left=="center"){left=Math.max((w.width()-oWidth)/2,0)}eff[0].call(self,{top:top,left:left},function(){if(opened){e.type="onLoad";fire.trigger(e)}});if(maskConf&&conf.closeOnClick){$.mask.getMask().one("click",self.close)}if(conf.closeOnClick){$(document).bind("click."+uid,function(e){if(!$(e.target).parents(overlay).length){self.close(e)}})}if(conf.closeOnEsc){$(document).bind("keydown."+uid,function(e){if(e.keyCode==27){self.close(e)}})}return self},close:function(e){if(!self.isOpened()){return self}e=e||$.Event();e.type="onBeforeClose";fire.trigger(e);if(e.isDefaultPrevented()){return}opened=false;effects[conf.effect][1].call(self,function(){e.type="onClose";fire.trigger(e)});$(document).unbind("click."+uid).unbind("keydown."+uid);if(maskConf){$.mask.close()}return self},getOverlay:function(){return overlay},getTrigger:function(){return trigger},getClosers:function(){return closers},isOpened:function(){return opened},getConf:function(){return conf}});$.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(i,name){if($.isFunction(conf[name])){$(self).bind(name,conf[name])}self[name]=function(fn){if(fn){$(self).bind(name,fn)}return self}});closers=overlay.find(conf.close||".close");if(!closers.length&&!conf.close){closers=$('<a class="close"></a>');overlay.prepend(closers)}$(document).on("click",conf.close,function(e){self.close(e)});$(document).delegate("a.close","click",function(e){self.close(e)});if(conf.load){self.load()}}$.fn.overlay=function(conf){var el=this.data("overlay");if(el){return el}if($.isFunction(conf)){conf={onBeforeLoad:conf}}conf=$.extend(true,{},$.tools.overlay.conf,conf);this.each(function(){el=new Overlay($(this),conf);instances.push(el);$(this).data("overlay",el)});return conf.api?el:this}})(jQuery)});define("personSocial",["ftx/lib/jquery-current","audible-utils","jquery.tools.scrollable.min.1.2.6","i18n!nls/localizedstrings","page-action"],function($,util,jts,localstrings,pageAction){var followNoticeDivContent="<div id='followNotice' class='adbl-modalDialog' style='display:none;'><div class='modalDialog-content'><div class='modalDialog-header'><span><h4>Can't wait to hear more from this listener?</h4></span></div><p>You can now follow your favorite reviewers on Audible.</p><p>When you follow another listener, we'll highlight the books they review, and even email* you a copy of any new reviews they write. You can un-follow a listener at any time to stop receiving their updates.</p><p class='adbl-smalltext'>* If you already opted out of emails from Audible you will still get review emails by the listeners you follow.</p>       <a href='#!/followNotice/close' title='Close' class='adbl-btn-closeAction adbl-img-link adbl-sprite-socialGlyphs icon-close abs-top-right'>Close</a><a href='#!/followNotice/close' class='adbl-btn-closeAction adbl-txt-link abs-bottom-right gradient-button adbl-noticeFollow-thanks'>Thanks</a></div></div>";var sndsConnect=function(fbResponse){if(fbResponse.authResponse){var accessToken=fbResponse.authResponse.accessToken;$.ajax({url:"/social/fbconnect",data:{code:accessToken},dataType:"json",error:function(jqXHR,textStatus,errorThrown){setSNDSError(unescape(localstrings.personsocial_cannotContact))},success:function(data,status,errorMessage){var authorId=$("#adbl_modalDialog_userPhoto").attr("aid");var photoUrl=null;if(data.socialData.fields.PHOTO_SQUARE){photoUrl=data.socialData.fields.PHOTO_SQUARE.content}if(data.connected===false||photoUrl==null){var msg;if(data.connected===false){msg=data.errorMsg}else{msg=unescape(localstrings.personsocial_cannotAccess)}setSNDSError(msg)}else{var reviewerInfo=$(".adbl-reviewer-info").filter("[aid="+authorId+"]");var photoColumn=reviewerInfo.children(".adbl-reviewer-photo-column").children(".adbl-base-profile-img");var profilePhoto=photoColumn.children("a").children(".adbl-userPhoto");if(profilePhoto.length==0){profilePhoto=photoColumn.children(".adbl-userPhoto")}profilePhoto.attr("src",photoUrl);$("#adbl-userPhoto-current").children(".adbl-userPhoto").attr("src",photoUrl);reviewerInfo.addClass("adbl-hasPhoto");var button=photoColumn.children("button");button.attr("title",unescape(localstrings.personsocial_editPhoto));button.attr("btnValue","userPhoto-edit");button.html('<span class="adbl-sprite-socialGlyphs icon-facebook-small"></span>'+unescape(localstrings.personsocial_editPhoto));$(".modalDialog-content").addClass("adbl-userPhoto-success");$(".modalDialog-content").addClass("adbl-hasPhoto");$(".adbl_userPhoto_facebookImport").addClass("ui-disabled");util.callMetricsApp(reviewerInfo,"_ap")}}})}};var sndsDisconnect=function(fbResponse){appAction=pageAction.getAction();appActionToken=pageAction.getToken();$.ajax({url:"/social/disconnect",data:{network:"Facebook",appAction:appAction,appActionToken:appActionToken},dataType:"json",error:function(jqXHR,textStatus,errorThrown){setSNDSError(unescape(localstrings.personsocial_cannotContact))},success:function(data,status,errorMessage){if(data.connected===true){setSNDSError(data.errorMsg)}else{var photoUrl="http://g-ecx.images-amazon.com/images/G/02/AudibleUK/en_GB/images/generic/clear1x1.gif";var authorId=$("#adbl_modalDialog_userPhoto").attr("aid");var reviewerInfo=$(".adbl-reviewer-info").filter("[aid="+authorId+"]");var photoColumn=reviewerInfo.children(".adbl-reviewer-photo-column").children(".adbl-base-profile-img");var profilePhoto=photoColumn.children("a").children(".adbl-userPhoto");if(profilePhoto.length==0){profilePhoto=photoColumn.children(".adbl-userPhoto")}profilePhoto.attr("src",photoUrl);$("#adbl-userPhoto-current").children(".adbl-userPhoto").attr("src",photoUrl);reviewerInfo.removeClass("adbl-hasPhoto");var button=photoColumn.children("button");button.attr("title",unescape(localstrings.personsocial_addPhoto));button.attr("btnValue","userPhoto-add");button.html('<span class="adbl-sprite-socialGlyphs icon-facebook-small"></span>'+unescape(localstrings.personsocial_addPhoto));$(".modalDialog-content").addClass("adbl-userPhoto-success");$(".adbl_userPhoto_facebookImport").removeClass("ui-disabled");$(".modalDialog-content").removeClass("adbl-hasPhoto");util.callMetricsApp(reviewerInfo,"_rp")}}})};function setSNDSError(msg){var modalDialog=$("#adbl_modalDialog_userPhoto").children(".modalDialog-content");modalDialog.removeClass("adbl-userPhoto-add adbl-userPhoto-edit");modalDialog.addClass("adbl-userPhoto-error");modalDialog.children(".userPhoto-error").children("p").text(msg)}function socialConnect(){FB.login(sndsConnect,{scope:"offline_access"})}function socialDisconnect(){if(FB.getAuthResponse()){FB.logout(sndsDisconnect)}else{sndsDisconnect()}}var followNoticeId="#followNotice";function followUser(authorId,target){var reftag="/ref="+util.generateBaseTag(target)+"_f";appAction=pageAction.getAction();appToken=pageAction.getToken();$.ajax({url:"/social/follow"+reftag,data:{targetId:authorId,follow:true,appAction:appAction,appActionToken:appToken},complete:function(){var reviewerInfo=$(".adbl-reviewer-info").filter("[aid="+authorId+"]");reviewerInfo.addClass("adbl-isFollowing");var button=reviewerInfo.find("button");if(button.length==0){button=reviewerInfo.find(".adbl-link-followAction")}else{button.attr({title:unescape(localstrings.personsocial_unfollowReviewer)})}button.html(unescape(localstrings.personsocial_unfollow))},success:function(data){if(data.showNotice){$(followNoticeId).overlay().load()}}})}function unfollowUser(authorId,target){appAction=pageAction.getAction();appToken=pageAction.getToken();var reftag="/ref="+util.generateBaseTag(target)+"_uf";$.ajax({url:"/social/follow"+reftag,data:{targetId:authorId,follow:false,appAction:appAction,appActionToken:appToken},complete:function(){var reviewerInfo=$(".adbl-reviewer-info").filter("[aid="+authorId+"]");reviewerInfo.removeClass("adbl-isFollowing");var button=reviewerInfo.find("button");if(button.length==0){button=reviewerInfo.find(".adbl-link-followAction");button.html(unescape(localstrings.personsocial_follow))}else{button.attr({title:unescape(localstrings.personsocial_followReviewer)});button.html("<span></span>"+unescape(localstrings.personsocial_follow))}}})}function photoAction(event){var clone=$("#adbl_modalDialog_userPhoto").remove();$("body").append(clone);clone.overlay({close:".adbl-btn-closeAction",closeOnClick:false,mask:"#666"});var target=$(event.currentTarget);var relParent=target.parents(".adbl-reviewer-info");var authorId=relParent.attr("aid");var overlayId="#adbl_modalDialog_userPhoto";var btnAction=$(event.currentTarget).attr("btnValue");var modalDialog=$(overlayId).find(".modalDialog-content");$(overlayId).attr("aid",authorId);var className="modalDialog-content adbl-";className+=btnAction;className+=" ";if(btnAction=="userPhoto-edit"){className+="adbl-hasPhoto"}modalDialog.removeClass("adbl-userPhoto-edit adbl-userPhoto-error adbl-userPhoto-success adbl-userPhoto-add");modalDialog.addClass(className);var reviewerInfo=$(".adbl-reviewer-info").filter("[aid="+authorId+"]");var photoColumn=reviewerInfo.children(".adbl-reviewer-photo-column").children(".adbl-base-profile-img");var profilePhoto=photoColumn.children("a").children(".adbl-userPhoto");if(profilePhoto.length==0){profilePhoto=photoColumn.children(".adbl-userPhoto")}var photoUrl=profilePhoto.attr("src");$("#adbl-userPhoto-current").children("img").attr("src",photoUrl);if(btnAction=="userPhoto-edit"){$(".adbl_userPhoto_facebookImport").addClass("ui-disabled")}$(overlayId).overlay().load()}function checkAndShowUnfollowModal(){if(typeof showUnfollowModal!="undefined"&&showUnfollowModal){$("#adbl_userMessage_overlay").addClass("ui-visible")}$("#adbl_userMessage_overlay .adbl-btn-overlayAction").click(function(e){if($(e.currentTarget).attr("href").indexOf("dismiss")!=-1){$("#adbl_userMessage_overlay").removeClass("ui-visible")}})}function processFeedback(element){var elem=$(element);var url=elem.attr("href");var appAction=pageAction.getAction();var appActionToken=pageAction.getToken();$.ajax({url:url,data:{appAction:appAction,appActionToken:appActionToken},dataType:"json",success:function(data){var elemParent=elem.parent();var newText;if(data.results){newText=elem.data("textOnComplete")}else{newText=elem.data("textOnError")}elem.remove();elemParent.text(newText)}})}$().ready(function(){$(document).delegate(".adbl-btn-followAction, .adbl-link-followAction","click",function(e){e.preventDefault();var target=$(e.currentTarget);var relParent=target.parents(".adbl-reviewer-info");var authorId=relParent.attr("aid");if(relParent.hasClass("adbl-isFollowing")){unfollowUser(authorId,target)}else{followUser(authorId,target)}});if((window.location.pathname).indexOf("review-by-author")!=-1||(window.location.pathname).indexOf("listener")!=-1){checkAndShowUnfollowModal()}var profileHover=function(event){if(event.type=="mouseenter"){$(event.currentTarget).addClass("ui-hover")}else{$(event.currentTarget).removeClass("ui-hover")}};$(document).delegate(".adbl-profile-photo, .adbl-btn-photoAction, .adbl-review .review-details, .adbl-reviewer-info","mouseenter mouseleave",profileHover);$(document).delegate(".adbl-btn-photoAction","click",function(e){e.preventDefault();photoAction(e)});$(document).delegate(".adbl_userPhoto_facebookImport:not(.ui-disabled)","click",function(e){e.preventDefault();socialConnect()});$(document).delegate(".adbl-txt-link.userPhoto-edit","click",function(event){event.preventDefault();socialDisconnect()});if($(followNoticeId).length==0){$("#adbl_page_content").append(followNoticeDivContent)}$(followNoticeId).overlay({close:".adbl-btn-closeAction",closeOnClick:false,mask:{opacity:"0.4",color:"#000"},top:"40%",target:followNoticeId});$("#profile_content, .adbl-merry-go-round").delegate("a.feedback-lnk:not(entered)","click",function(event){event.preventDefault();var target=$(event.target);target.addClass("entered");processFeedback(target)});var feedbackHover=function(event){var target=$(event.target);var feedContainer=(target.hasClass("adbl-reviewer-info"))?target:target.parents(".adbl-reviewer-info");if(event.type=="mouseenter"){$(feedContainer).addClass("showFeedback")}else{$(feedContainer).removeClass("showFeedback")}};$("body").delegate(".adbl-promotedReviewer .adbl-reviewer-profile .adbl-reviewer-info","mouseenter mouseleave",feedbackHover)})});define("jquery.jcarousel",["ftx/lib/jquery-current"],function($){
/*
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 *   
 * Amazon elects to use this software under the MIT license.
 */
var defaults={vertical:false,rtl:false,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},windowLoaded=false;$(window).bind("load.jcarousel",function(){windowLoaded=true});$.jcarousel=function(e,o){this.options=$.extend({},defaults,o||{});this.locked=false;this.autoStopped=false;this.container=null;this.clip=null;this.list=null;this.buttonNext=null;this.buttonPrev=null;this.buttonNextState=null;this.buttonPrevState=null;if(!o||o.rtl===undefined){this.options.rtl=($(e).attr("dir")||$("html").attr("dir")||"").toLowerCase()=="rtl"}this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?(this.options.rtl?"right":"left"):"top";var skin="",split=e.className.split(" ");for(var i=0;i<split.length;i++){if(split[i].indexOf("jcarousel-skin")!=-1){$(e).removeClass(split[i]);skin=split[i];break}}if(e.nodeName.toUpperCase()=="UL"||e.nodeName.toUpperCase()=="OL"){this.list=$(e);this.container=this.list.parent();if(this.container.hasClass("jcarousel-clip")){if(!this.container.parent().hasClass("jcarousel-container")){this.container=this.container.wrap("<div></div>")}this.container=this.container.parent()}else{if(!this.container.hasClass("jcarousel-container")){this.container=this.list.wrap("<div></div>").parent()}}}else{this.container=$(e);this.list=this.container.find("ul,ol").eq(0)}if(skin!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1){this.container.wrap('<div class=" '+skin+'"></div>')}this.clip=this.list.parent();if(!this.clip.length||!this.clip.hasClass("jcarousel-clip")){this.clip=this.list.wrap("<div></div>").parent()}this.buttonNext=$(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null){this.buttonNext=this.clip.after(this.options.buttonNextHTML).next()}this.buttonNext.addClass(this.className("jcarousel-next"));this.buttonPrev=$(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null){this.buttonPrev=this.clip.after(this.options.buttonPrevHTML).next()}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.clip.addClass(this.className("jcarousel-clip")).css({overflow:"hidden",position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css((this.options.rtl?"right":"left"),0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});if(!this.options.vertical&&this.options.rtl){this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl")}var di=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var li=this.list.children("li");var self=this;if(li.size()>0){var wh=0,j=this.options.offset;li.each(function(){self.format(this,j++);wh+=self.dimension(this,di)});this.list.css(this.wh,(wh+100)+"px");if(!o||o.size===undefined){this.options.size=li.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){self.next()};this.funcPrev=function(){self.prev()};this.funcResize=function(){self.reload()};if(this.options.initCallback!==null){this.options.initCallback(this,"init")}if(!windowLoaded&&$.browser.safari){this.buttons(false,false);$(window).bind("load.jcarousel",function(){self.setup()})}else{this.setup()}};var $jc=$.jcarousel;$jc.fn=$jc.prototype={jcarousel:"0.2.7"};$jc.fn.extend=$jc.extend=$.extend;$jc.fn.extend({setup:function(){this.first=null;this.last=null;this.prevFirst=null;this.prevLast=null;this.animating=false;this.timer=null;this.tail=null;this.inTail=false;if(this.locked){return}this.list.css(this.lt,this.pos(this.options.offset)+"px");var p=this.pos(this.options.start,true);this.prevFirst=this.prevLast=null;this.animate(p,false);$(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize)},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");if(this.options.initCallback!==null){this.options.initCallback(this,"reset")}this.setup()},reload:function(){if(this.tail!==null&&this.inTail){this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+this.tail)}this.tail=null;this.inTail=false;if(this.options.reloadCallback!==null){this.options.reloadCallback(this)}if(this.options.visible!==null){var self=this;var di=Math.ceil(this.clipping()/this.options.visible),wh=0,lt=0;this.list.children("li").each(function(i){wh+=self.dimension(this,di);if(i+1<self.first){lt=wh}});this.list.css(this.wh,wh+"px");this.list.css(this.lt,-lt+"px")}this.scroll(this.first,false)},lock:function(){this.locked=true;this.buttons()},unlock:function(){this.locked=false;this.buttons()},size:function(s){if(s!==undefined){this.options.size=s;if(!this.locked){this.buttons()}}return this.options.size},has:function(i,i2){if(i2===undefined||!i2){i2=i}if(this.options.size!==null&&i2>this.options.size){i2=this.options.size}for(var j=i;j<=i2;j++){var e=this.get(j);if(!e.length||e.hasClass("jcarousel-item-placeholder")){return false}}return true},get:function(i){return $(".jcarousel-item-"+i,this.list)},add:function(i,s){var e=this.get(i),old=0,n=$(s);if(e.length===0){var c,j=$jc.intval(i);e=this.create(i);while(true){c=this.get(--j);if(j<=0||c.length){if(j<=0){this.list.prepend(e)}else{c.after(e)}break}}}else{old=this.dimension(e)}if(n.get(0).nodeName.toUpperCase()=="LI"){e.replaceWith(n);e=n}else{e.empty().append(s)}this.format(e.removeClass(this.className("jcarousel-item-placeholder")),i);var di=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;var wh=this.dimension(e,di)-old;if(i>0&&i<this.first){this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-wh+"px")}this.list.css(this.wh,$jc.intval(this.list.css(this.wh))+wh+"px");return e},remove:function(i){var e=this.get(i);if(!e.length||(i>=this.first&&i<=this.last)){return}var d=this.dimension(e);if(i<this.first){this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+d+"px")}e.remove();this.list.css(this.wh,$jc.intval(this.list.css(this.wh))-d+"px")},next:function(){if(this.tail!==null&&!this.inTail){this.scrollTail(false)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size)?1:this.first+this.options.scroll)}},prev:function(){if(this.tail!==null&&this.inTail){this.scrollTail(true)}else{this.scroll(((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1)?this.options.size:this.first-this.options.scroll)}},scrollTail:function(b){if(this.locked||this.animating||!this.tail){return}this.pauseAuto();var pos=$jc.intval(this.list.css(this.lt));pos=!b?pos-this.tail:pos+this.tail;this.inTail=!b;this.prevFirst=this.first;this.prevLast=this.last;this.animate(pos)},scroll:function(i,a){if(this.locked||this.animating){return}this.pauseAuto();this.animate(this.pos(i),a)},pos:function(i,fv){var pos=$jc.intval(this.list.css(this.lt));if(this.locked||this.animating){return pos}if(this.options.wrap!="circular"){i=i<1?1:(this.options.size&&i>this.options.size?this.options.size:i)}var back=this.first>i;var f=this.options.wrap!="circular"&&this.first<=1?1:this.first;var c=back?this.get(f):this.get(this.last);var j=back?f:f-1;var e=null,l=0,p=false,d=0,g;while(back?--j>=i:++j<i){e=this.get(j);p=!e.length;if(e.length===0){e=this.create(j).addClass(this.className("jcarousel-item-placeholder"));c[back?"before":"after"](e);if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length){e=this.add(j,g.clone(true))}}}c=e;d=this.dimension(e);if(p){l+=d}if(this.first!==null&&(this.options.wrap=="circular"||(j>=1&&(this.options.size===null||j<=this.options.size)))){pos=back?pos+d:pos-d}}var clipping=this.clipping(),cache=[],visible=0,v=0;c=this.get(i-1);j=i;while(++visible){e=this.get(j);p=!e.length;if(e.length===0){e=this.create(j).addClass(this.className("jcarousel-item-placeholder"));if(c.length===0){this.list.prepend(e)}else{c[back?"before":"after"](e)}if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(j<=0||j>this.options.size)){g=this.get(this.index(j));if(g.length){e=this.add(j,g.clone(true))}}}c=e;d=this.dimension(e);if(d===0){throw new Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}if(this.options.wrap!="circular"&&this.options.size!==null&&j>this.options.size){cache.push(e)}else{if(p){l+=d}}v+=d;if(v>=clipping){break}j++}for(var x=0;x<cache.length;x++){cache[x].remove()}if(l>0){this.list.css(this.wh,this.dimension(this.list)+l+"px");if(back){pos-=l;this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-l+"px")}}var last=i+visible-1;if(this.options.wrap!="circular"&&this.options.size&&last>this.options.size){last=this.options.size}if(j>last){visible=0;j=last;v=0;while(++visible){e=this.get(j--);if(!e.length){break}v+=this.dimension(e);if(v>=clipping){break}}}var first=last-visible+1;if(this.options.wrap!="circular"&&first<1){first=1}if(this.inTail&&back){pos+=this.tail;this.inTail=false}this.tail=null;if(this.options.wrap!="circular"&&last==this.options.size&&(last-visible+1)>=1){var m=$jc.margin(this.get(last),!this.options.vertical?"marginRight":"marginBottom");if((v-m)>clipping){this.tail=v-clipping-m}}if(fv&&i===this.options.size&&this.tail){pos-=this.tail;this.inTail=true}while(i-->first){pos+=this.dimension(this.get(i))}this.prevFirst=this.first;this.prevLast=this.last;this.first=first;this.last=last;return pos},animate:function(p,a){if(this.locked||this.animating){return}this.animating=true;var self=this;var scrolled=function(){self.animating=false;if(p===0){self.list.css(self.lt,0)}if(!self.autoStopped&&(self.options.wrap=="circular"||self.options.wrap=="both"||self.options.wrap=="last"||self.options.size===null||self.last<self.options.size||(self.last==self.options.size&&self.tail!==null&&!self.inTail))){self.startAuto()}self.buttons();self.notify("onAfterAnimation");if(self.options.wrap=="circular"&&self.options.size!==null){for(var i=self.prevFirst;i<=self.prevLast;i++){if(i!==null&&!(i>=self.first&&i<=self.last)&&(i<1||i>self.options.size)){self.remove(i)}}}};this.notify("onBeforeAnimation");if(!this.options.animation||a===false){this.list.css(this.lt,p+"px");scrolled()}else{var o=!this.options.vertical?(this.options.rtl?{right:p}:{left:p}):{top:p};this.list.animate(o,this.options.animation,this.options.easing,scrolled)}},startAuto:function(s){if(s!==undefined){this.options.auto=s}if(this.options.auto===0){return this.stopAuto()}if(this.timer!==null){return}this.autoStopped=false;var self=this;this.timer=window.setTimeout(function(){self.next()},this.options.auto*1000)},stopAuto:function(){this.pauseAuto();this.autoStopped=true},pauseAuto:function(){if(this.timer===null){return}window.clearTimeout(this.timer);this.timer=null},buttons:function(n,p){if(n==null){n=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="first")||this.options.size===null||this.last<this.options.size);if(!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size){n=this.tail!==null&&!this.inTail}}if(p==null){p=!this.locked&&this.options.size!==0&&((this.options.wrap&&this.options.wrap!="last")||this.first>1);if(!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1){p=this.tail!==null&&this.inTail}}var self=this;if(this.buttonNext.size()>0){this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext);if(n){this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext)}this.buttonNext[n?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",n?false:true);if(this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=n){this.buttonNext.each(function(){self.options.buttonNextCallback(self,this,n)}).data("jcarouselstate",n)}}else{if(this.options.buttonNextCallback!==null&&this.buttonNextState!=n){this.options.buttonNextCallback(self,null,n)}}if(this.buttonPrev.size()>0){this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev);if(p){this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev)}this.buttonPrev[p?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",p?false:true);if(this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=p){this.buttonPrev.each(function(){self.options.buttonPrevCallback(self,this,p)}).data("jcarouselstate",p)}}else{if(this.options.buttonPrevCallback!==null&&this.buttonPrevState!=p){this.options.buttonPrevCallback(self,null,p)}}this.buttonNextState=n;this.buttonPrevState=p},notify:function(evt){var state=this.prevFirst===null?"init":(this.prevFirst<this.first?"next":"prev");this.callback("itemLoadCallback",evt,state);if(this.prevFirst!==this.first){this.callback("itemFirstInCallback",evt,state,this.first);this.callback("itemFirstOutCallback",evt,state,this.prevFirst)}if(this.prevLast!==this.last){this.callback("itemLastInCallback",evt,state,this.last);this.callback("itemLastOutCallback",evt,state,this.prevLast)}this.callback("itemVisibleInCallback",evt,state,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",evt,state,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(cb,evt,state,i1,i2,i3,i4){if(this.options[cb]==null||(typeof this.options[cb]!="object"&&evt!="onAfterAnimation")){return}var callback=typeof this.options[cb]=="object"?this.options[cb][evt]:this.options[cb];if(!$.isFunction(callback)){return}var self=this;if(i1===undefined){callback(self,state,evt)}else{if(i2===undefined){this.get(i1).each(function(){callback(self,this,i1,state,evt)})}else{var call=function(i){self.get(i).each(function(){callback(self,this,i,state,evt)})};for(var i=i1;i<=i2;i++){if(i!==null&&!(i>=i3&&i<=i4)){call(i)}}}}},create:function(i){return this.format("<li></li>",i)},format:function(e,i){e=$(e);var split=e.get(0).className.split(" ");for(var j=0;j<split.length;j++){if(split[j].indexOf("jcarousel-")!=-1){e.removeClass(split[j])}}e.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+i)).css({"float":(this.options.rtl?"right":"left"),"list-style":"none"}).attr("jcarouselindex",i);return e},className:function(c){return c+" "+c+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(e,d){var el=e.jquery!==undefined?e[0]:e;var old=!this.options.vertical?(el.offsetWidth||$jc.intval(this.options.itemFallbackDimension))+$jc.margin(el,"marginLeft")+$jc.margin(el,"marginRight"):(el.offsetHeight||$jc.intval(this.options.itemFallbackDimension))+$jc.margin(el,"marginTop")+$jc.margin(el,"marginBottom");if(d==null||old==d){return old}var w=!this.options.vertical?d-$jc.margin(el,"marginLeft")-$jc.margin(el,"marginRight"):d-$jc.margin(el,"marginTop")-$jc.margin(el,"marginBottom");$(el).css(this.wh,w+"px");return this.dimension(el)},clipping:function(){return !this.options.vertical?this.clip[0].offsetWidth-$jc.intval(this.clip.css("borderLeftWidth"))-$jc.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-$jc.intval(this.clip.css("borderTopWidth"))-$jc.intval(this.clip.css("borderBottomWidth"))},index:function(i,s){if(s==null){s=this.options.size}return Math.round((((i-1)/s)-Math.floor((i-1)/s))*s)+1}});$jc.extend({defaults:function(d){return $.extend(defaults,d||{})},margin:function(e,p){if(!e){return 0}var el=e.jquery!==undefined?e[0]:e;if(p=="marginRight"&&$.browser.safari){var old={display:"block","float":"none",width:"auto"},oWidth,oWidth2;$.swap(el,old,function(){oWidth=el.offsetWidth});old.marginRight=0;$.swap(el,old,function(){oWidth2=el.offsetWidth});return oWidth2-oWidth}return $jc.intval($.css(el,p))},intval:function(v){v=parseInt(v,10);return isNaN(v)?0:v}});$.fn.jcarousel=function(o){if(typeof o=="string"){var instance=$(this).data("jcarousel"),args=Array.prototype.slice.call(arguments,1);return instance[o].apply(instance,args)}else{return this.each(function(){$(this).data("jcarousel",new $jc(this,o))})}}});
/*
 * jquery.qtip. The jQuery tooltip plugin
 *
 * Copyright (c) 2009 Craig Thompson
 * http://craigsworks.com
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Launch  : February 2009
 * Version : 1.0.0-rc3
 * Released: Tuesday 12th May, 2009 - 00:00
 * Debug: jquery.qtip.debug.js
 */
define("jquery.qtip-1.0.0-rc3",["ftx/lib/jquery-current"],function($){$.fn.qtip=function(options,blanket){var i,id,interfaces,opts,obj,command,config,api;if(typeof options=="string"){if(typeof $(this).data("qtip")!=="object"){$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.NO_TOOLTIP_PRESENT,false)}if(options=="api"){return $(this).data("qtip").interfaces[$(this).data("qtip").current]}else{if(options=="interfaces"){return $(this).data("qtip").interfaces}}}else{if(!options){options={}}if(typeof options.content!=="object"||(options.content.jquery&&options.content.length>0)){options.content={text:options.content}}if(typeof options.content.title!=="object"){options.content.title={text:options.content.title}}if(typeof options.position!=="object"){options.position={corner:options.position}}if(typeof options.position.corner!=="object"){options.position.corner={target:options.position.corner,tooltip:options.position.corner}}if(typeof options.show!=="object"){options.show={when:options.show}}if(typeof options.show.when!=="object"){options.show.when={event:options.show.when}}if(typeof options.show.effect!=="object"){options.show.effect={type:options.show.effect}}if(typeof options.hide!=="object"){options.hide={when:options.hide}}if(typeof options.hide.when!=="object"){options.hide.when={event:options.hide.when}}if(typeof options.hide.effect!=="object"){options.hide.effect={type:options.hide.effect}}if(typeof options.style!=="object"){options.style={name:options.style}}options.style=sanitizeStyle(options.style);opts=$.extend(true,{},$.fn.qtip.defaults,options);opts.style=buildStyle.call({options:opts},opts.style);opts.user=$.extend(true,{},options)}return $(this).each(function(){if(typeof options=="string"){command=options.toLowerCase();interfaces=$(this).qtip("interfaces");if(typeof interfaces=="object"){if(blanket===true&&command=="destroy"){while(interfaces.length>0){interfaces[interfaces.length-1].destroy()}}else{if(blanket!==true){interfaces=[$(this).qtip("api")]}for(i=0;i<interfaces.length;i++){if(command=="destroy"){interfaces[i].destroy()}else{if(interfaces[i].status.rendered===true){if(command=="show"){interfaces[i].show()}else{if(command=="hide"){interfaces[i].hide()}else{if(command=="focus"){interfaces[i].focus()}else{if(command=="disable"){interfaces[i].disable(true)}else{if(command=="enable"){interfaces[i].disable(false)}}}}}}}}}}}else{config=$.extend(true,{},opts);config.hide.effect.length=opts.hide.effect.length;config.show.effect.length=opts.show.effect.length;if(config.position.container===false){config.position.container=$(document.body)}if(config.position.target===false){config.position.target=$(this)}if(config.show.when.target===false){config.show.when.target=$(this)}if(config.hide.when.target===false){config.hide.when.target=$(this)}id=$.fn.qtip.interfaces.length;for(i=0;i<id;i++){if(typeof $.fn.qtip.interfaces[i]=="undefined"){id=i;break}}obj=new qTip($(this),config,id);$.fn.qtip.interfaces[id]=obj;if(typeof $(this).data("qtip")=="object"&&$(this).data("qtip")){if(typeof $(this).attr("qtip")==="undefined"){$(this).data("qtip").current=$(this).data("qtip").interfaces.length}$(this).data("qtip").interfaces.push(obj)}else{$(this).data("qtip",{current:0,interfaces:[obj]})}if(config.content.prerender===false&&config.show.when.event!==false&&config.show.ready!==true){config.show.when.target.bind(config.show.when.event+".qtip-"+id+"-create",{qtip:id},function(event){api=$.fn.qtip.interfaces[event.data.qtip];api.options.show.when.target.unbind(api.options.show.when.event+".qtip-"+event.data.qtip+"-create");api.cache.mouse={x:event.pageX,y:event.pageY};construct.call(api);api.options.show.when.target.trigger(api.options.show.when.event)})}else{obj.cache.mouse={x:config.show.when.target.offset().left,y:config.show.when.target.offset().top};construct.call(obj)}}})};function qTip(target,options,id){var self=this;self.id=id;self.options=options;self.status={animated:false,rendered:false,disabled:false,focused:false};self.elements={target:target.addClass(self.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};self.cache={mouse:{},position:{},toggle:0};self.timers={};$.extend(self,self.options.api,{show:function(event){var returned,solo;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show")}if(self.elements.tooltip.css("display")!=="none"){return self}self.elements.tooltip.stop(true,false);returned=self.beforeShow.call(self,event);if(returned===false){return self}function afterShow(){if(self.options.position.type!=="static"){self.focus()}self.onShow.call(self,event);if($.browser.msie){self.elements.tooltip.get(0).style.removeAttribute("filter")}}self.cache.toggle=1;if(self.options.position.type!=="static"){self.updatePosition(event,(self.options.show.effect.length>0))}if(typeof self.options.show.solo=="object"){solo=$(self.options.show.solo)}else{if(self.options.show.solo===true){solo=$("div.qtip").not(self.elements.tooltip)}}if(solo){solo.each(function(){if($(this).qtip("api").status.rendered===true){$(this).qtip("api").hide()}})}if(typeof self.options.show.effect.type=="function"){self.options.show.effect.type.call(self.elements.tooltip,self.options.show.effect.length);self.elements.tooltip.queue(function(){afterShow();$(this).dequeue()})}else{switch(self.options.show.effect.type.toLowerCase()){case"fade":self.elements.tooltip.fadeIn(self.options.show.effect.length,afterShow);break;case"slide":self.elements.tooltip.slideDown(self.options.show.effect.length,function(){afterShow();if(self.options.position.type!=="static"){self.updatePosition(event,true)}});break;case"grow":self.elements.tooltip.show(self.options.show.effect.length,afterShow);break;default:self.elements.tooltip.show(null,afterShow);break}self.elements.tooltip.addClass(self.options.style.classes.active)}return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(event){var returned;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide")}else{if(self.elements.tooltip.css("display")==="none"){return self}}clearTimeout(self.timers.show);self.elements.tooltip.stop(true,false);returned=self.beforeHide.call(self,event);if(returned===false){return self}function afterHide(){self.onHide.call(self,event)}self.cache.toggle=0;if(typeof self.options.hide.effect.type=="function"){self.options.hide.effect.type.call(self.elements.tooltip,self.options.hide.effect.length);self.elements.tooltip.queue(function(){afterHide();$(this).dequeue()})}else{switch(self.options.hide.effect.type.toLowerCase()){case"fade":self.elements.tooltip.fadeOut(self.options.hide.effect.length,afterHide);break;case"slide":self.elements.tooltip.slideUp(self.options.hide.effect.length,afterHide);break;case"grow":self.elements.tooltip.hide(self.options.hide.effect.length,afterHide);break;default:self.elements.tooltip.hide(null,afterHide);break}self.elements.tooltip.removeClass(self.options.style.classes.active)}return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(event,animate){var i,target,tooltip,coords,mapName,imagePos,newPosition,ieAdjust,ie6Adjust,borderAdjust,mouseAdjust,offset,curPosition,returned;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition")}else{if(self.options.position.type=="static"){return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition")}}target={position:{left:0,top:0},dimensions:{height:0,width:0},corner:self.options.position.corner.target};tooltip={position:self.getPosition(),dimensions:self.getDimensions(),corner:self.options.position.corner.tooltip};if(self.options.position.target!=="mouse"){if(self.options.position.target.get(0).nodeName.toLowerCase()=="area"){coords=self.options.position.target.attr("coords").split(",");for(i=0;i<coords.length;i++){coords[i]=parseInt(coords[i])}mapName=self.options.position.target.parent("map").attr("name");imagePos=$('img[usemap="#'+mapName+'"]:first').offset();target.position={left:Math.floor(imagePos.left+coords[0]),top:Math.floor(imagePos.top+coords[1])};switch(self.options.position.target.attr("shape").toLowerCase()){case"rect":target.dimensions={width:Math.ceil(Math.abs(coords[2]-coords[0])),height:Math.ceil(Math.abs(coords[3]-coords[1]))};break;case"circle":target.dimensions={width:coords[2]+1,height:coords[2]+1};break;case"poly":target.dimensions={width:coords[0],height:coords[1]};for(i=0;i<coords.length;i++){if(i%2==0){if(coords[i]>target.dimensions.width){target.dimensions.width=coords[i]}if(coords[i]<coords[0]){target.position.left=Math.floor(imagePos.left+coords[i])}}else{if(coords[i]>target.dimensions.height){target.dimensions.height=coords[i]}if(coords[i]<coords[1]){target.position.top=Math.floor(imagePos.top+coords[i])}}}target.dimensions.width=target.dimensions.width-(target.position.left-imagePos.left);target.dimensions.height=target.dimensions.height-(target.position.top-imagePos.top);break;default:return $.fn.qtip.log.error.call(self,4,$.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");break}target.dimensions.width-=2;target.dimensions.height-=2}else{if(self.options.position.target.add(document.body).length===1){target.position={left:$(document).scrollLeft(),top:$(document).scrollTop()};target.dimensions={height:$(window).height(),width:$(window).width()}}else{if(typeof self.options.position.target.attr("qtip")!=="undefined"){target.position=self.options.position.target.qtip("api").cache.position}else{target.position=self.options.position.target.offset()}target.dimensions={height:self.options.position.target.outerHeight(),width:self.options.position.target.outerWidth()}}}newPosition=$.extend({},target.position);if(target.corner.search(/right/i)!==-1){newPosition.left+=target.dimensions.width}if(target.corner.search(/bottom/i)!==-1){newPosition.top+=target.dimensions.height}if(target.corner.search(/((top|bottom)Middle)|center/)!==-1){newPosition.left+=(target.dimensions.width/2)}if(target.corner.search(/((left|right)Middle)|center/)!==-1){newPosition.top+=(target.dimensions.height/2)}}else{target.position=newPosition={left:self.cache.mouse.x,top:self.cache.mouse.y};target.dimensions={height:1,width:1}}if(tooltip.corner.search(/right/i)!==-1){newPosition.left-=tooltip.dimensions.width}if(tooltip.corner.search(/bottom/i)!==-1){newPosition.top-=tooltip.dimensions.height}if(tooltip.corner.search(/((top|bottom)Middle)|center/)!==-1){newPosition.left-=(tooltip.dimensions.width/2)}if(tooltip.corner.search(/((left|right)Middle)|center/)!==-1){newPosition.top-=(tooltip.dimensions.height/2)}ieAdjust=($.browser.msie)?1:0;ie6Adjust=($.browser.msie&&parseInt($.browser.version.charAt(0))===6)?1:0;if(self.options.style.border.radius>0){if(tooltip.corner.search(/Left/)!==-1){newPosition.left-=self.options.style.border.radius}else{if(tooltip.corner.search(/Right/)!==-1){newPosition.left+=self.options.style.border.radius}}if(tooltip.corner.search(/Top/)!==-1){newPosition.top-=self.options.style.border.radius}else{if(tooltip.corner.search(/Bottom/)!==-1){newPosition.top+=self.options.style.border.radius}}}if(ieAdjust){if(tooltip.corner.search(/top/)!==-1){newPosition.top-=ieAdjust}else{if(tooltip.corner.search(/bottom/)!==-1){newPosition.top+=ieAdjust}}if(tooltip.corner.search(/left/)!==-1){newPosition.left-=ieAdjust}else{if(tooltip.corner.search(/right/)!==-1){newPosition.left+=ieAdjust}}if(tooltip.corner.search(/leftMiddle|rightMiddle/)!==-1){newPosition.top-=1}}if(self.options.position.adjust.screen===true){newPosition=screenAdjust.call(self,newPosition,target,tooltip)}if(self.options.position.target==="mouse"&&self.options.position.adjust.mouse===true){if(self.options.position.adjust.screen===true&&self.elements.tip){mouseAdjust=self.elements.tip.attr("rel")}else{mouseAdjust=self.options.position.corner.tooltip}newPosition.left+=(mouseAdjust.search(/right/i)!==-1)?-6:6;newPosition.top+=(mouseAdjust.search(/bottom/i)!==-1)?-6:6}if(!self.elements.bgiframe&&$.browser.msie&&parseInt($.browser.version.charAt(0))==6){$("select, object").each(function(){offset=$(this).offset();offset.bottom=offset.top+$(this).height();offset.right=offset.left+$(this).width();if(newPosition.top+tooltip.dimensions.height>=offset.top&&newPosition.left+tooltip.dimensions.width>=offset.left){bgiframe.call(self)}})}newPosition.left+=self.options.position.adjust.x;newPosition.top+=self.options.position.adjust.y;curPosition=self.getPosition();if(newPosition.left!=curPosition.left||newPosition.top!=curPosition.top){returned=self.beforePositionUpdate.call(self,event);if(returned===false){return self}self.cache.position=newPosition;if(animate===true){self.status.animated=true;self.elements.tooltip.animate(newPosition,200,"swing",function(){self.status.animated=false})}else{self.elements.tooltip.css(newPosition)}self.onPositionUpdate.call(self,event);if(typeof event!=="undefined"&&event.type&&event.type!=="mousemove"){$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}}return self},updateWidth:function(newWidth){var hidden;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")}else{if(newWidth&&typeof newWidth!=="number"){return $.fn.qtip.log.error.call(self,2,"newWidth must be of type number","updateWidth")}}hidden=self.elements.contentWrapper.siblings().add(self.elements.tip).add(self.elements.button);if(!newWidth){if(typeof self.options.style.width.value=="number"){newWidth=self.options.style.width.value}else{self.elements.tooltip.css({width:"auto"});hidden.hide();if($.browser.msie){self.elements.wrapper.add(self.elements.contentWrapper.children()).css({zoom:"normal"})}newWidth=self.getDimensions().width+1;if(!self.options.style.width.value){if(newWidth>self.options.style.width.max){newWidth=self.options.style.width.max}if(newWidth<self.options.style.width.min){newWidth=self.options.style.width.min}}}}if(newWidth%2!==0){newWidth-=1}self.elements.tooltip.width(newWidth);hidden.show();if(self.options.style.border.radius){self.elements.tooltip.find(".qtip-betweenCorners").each(function(i){$(this).width(newWidth-(self.options.style.border.radius*2))})}if($.browser.msie){self.elements.wrapper.add(self.elements.contentWrapper.children()).css({zoom:"1"});self.elements.wrapper.width(newWidth);if(self.elements.bgiframe){self.elements.bgiframe.width(newWidth).height(self.getDimensions.height)}}return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")},updateStyle:function(name){var tip,borders,context,corner,coordinates;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")}else{if(typeof name!=="string"||!$.fn.qtip.styles[name]){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle")}}self.options.style=buildStyle.call(self,$.fn.qtip.styles[name],self.options.user.style);self.elements.content.css(jQueryStyle(self.options.style));if(self.options.content.title.text!==false){self.elements.title.css(jQueryStyle(self.options.style.title,true))}self.elements.contentWrapper.css({borderColor:self.options.style.border.color});if(self.options.style.tip.corner!==false){if($("<canvas>").get(0).getContext){tip=self.elements.tooltip.find(".qtip-tip canvas:first");context=tip.get(0).getContext("2d");context.clearRect(0,0,300,300);corner=tip.parent("div[rel]:first").attr("rel");coordinates=calculateTip(corner,self.options.style.tip.size.width,self.options.style.tip.size.height);drawTip.call(self,tip,coordinates,self.options.style.tip.color||self.options.style.border.color)}else{if($.browser.msie){tip=self.elements.tooltip.find('.qtip-tip [nodeName="shape"]');tip.attr("fillcolor",self.options.style.tip.color||self.options.style.border.color)}}}if(self.options.style.border.radius>0){self.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:self.options.style.border.color});if($("<canvas>").get(0).getContext){borders=calculateBorders(self.options.style.border.radius);self.elements.tooltip.find(".qtip-wrapper canvas").each(function(){context=$(this).get(0).getContext("2d");context.clearRect(0,0,300,300);corner=$(this).parent("div[rel]:first").attr("rel");drawBorder.call(self,$(this),borders[corner],self.options.style.border.radius,self.options.style.border.color)})}else{if($.browser.msie){self.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){$(this).attr("fillcolor",self.options.style.border.color)})}}}return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")},updateContent:function(content,reposition){var parsedContent,images,loadedImages;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent")}else{if(!content){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent")}}parsedContent=self.beforeContentUpdate.call(self,content);if(typeof parsedContent=="string"){content=parsedContent}else{if(parsedContent===false){return}}if($.browser.msie){self.elements.contentWrapper.children().css({zoom:"normal"})}if(content.jquery&&content.length>0){content.clone(true).appendTo(self.elements.content).show()}else{self.elements.content.html(content)}images=self.elements.content.find("img[complete=false]");if(images.length>0){loadedImages=0;images.each(function(i){$('<img src="'+$(this).attr("src")+'" />').load(function(){if(++loadedImages==images.length){afterLoad()}})})}else{afterLoad()}function afterLoad(){self.updateWidth();if(reposition!==false){if(self.options.position.type!=="static"){self.updatePosition(self.elements.tooltip.is(":visible"),true)}if(self.options.style.tip.corner!==false){positionTip.call(self)}}}self.onContentUpdate.call(self);return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(url,data,method){var returned;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")}returned=self.beforeContentLoad.call(self);if(returned===false){return self}if(method=="post"){$.post(url,data,setupContent)}else{$.get(url,data,setupContent)}function setupContent(content){self.onContentLoad.call(self);$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");self.updateContent(content)}return self},updateTitle:function(content){if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")}else{if(!content){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle")}}returned=self.beforeTitleUpdate.call(self);if(returned===false){return self}if(self.elements.button){self.elements.button=self.elements.button.clone(true)}self.elements.title.html(content);if(self.elements.button){self.elements.title.prepend(self.elements.button)}self.onTitleUpdate.call(self);return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle")},focus:function(event){var curIndex,newIndex,elemIndex,returned;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus")}else{if(self.options.position.type=="static"){return $.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus")}}curIndex=parseInt(self.elements.tooltip.css("z-index"));newIndex=6000+$("div.qtip[qtip]").length-1;if(!self.status.focused&&curIndex!==newIndex){returned=self.beforeFocus.call(self,event);if(returned===false){return self}$("div.qtip[qtip]").not(self.elements.tooltip).each(function(){if($(this).qtip("api").status.rendered===true){elemIndex=parseInt($(this).css("z-index"));if(typeof elemIndex=="number"&&elemIndex>-1){$(this).css({zIndex:parseInt($(this).css("z-index"))-1})}$(this).qtip("api").status.focused=false}});self.elements.tooltip.css({zIndex:newIndex});self.status.focused=true;self.onFocus.call(self,event);$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_FOCUSED,"focus")}return self},disable:function(state){if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")}if(state){if(!self.status.disabled){self.status.disabled=true;$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_DISABLED,"disable")}else{$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable")}}else{if(self.status.disabled){self.status.disabled=false;$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_ENABLED,"disable")}else{$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable")}}return self},destroy:function(){var i,returned,interfaces;returned=self.beforeDestroy.call(self);if(returned===false){return self}if(self.status.rendered){self.options.show.when.target.unbind("mousemove.qtip",self.updatePosition);self.options.show.when.target.unbind("mouseout.qtip",self.hide);self.options.show.when.target.unbind(self.options.show.when.event+".qtip");self.options.hide.when.target.unbind(self.options.hide.when.event+".qtip");self.elements.tooltip.unbind(self.options.hide.when.event+".qtip");self.elements.tooltip.unbind("mouseover.qtip",self.focus);self.elements.tooltip.remove()}else{self.options.show.when.target.unbind(self.options.show.when.event+".qtip-create")}if(typeof self.elements.target.data("qtip")=="object"){interfaces=self.elements.target.data("qtip").interfaces;if(typeof interfaces=="object"&&interfaces.length>0){for(i=0;i<interfaces.length-1;i++){if(interfaces[i].id==self.id){interfaces.splice(i,1)}}}}delete $.fn.qtip.interfaces[self.id];if(typeof interfaces=="object"&&interfaces.length>0){self.elements.target.data("qtip").current=interfaces.length-1}else{self.elements.target.removeData("qtip")}self.onDestroy.call(self);$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_DESTROYED,"destroy");return self.elements.target},getPosition:function(){var show,offset;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")}show=(self.elements.tooltip.css("display")!=="none")?false:true;if(show){self.elements.tooltip.css({visiblity:"hidden"}).show()}offset=self.elements.tooltip.offset();if(show){self.elements.tooltip.css({visiblity:"visible"}).hide()}return offset},getDimensions:function(){var show,dimensions;if(!self.status.rendered){return $.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}show=(!self.elements.tooltip.is(":visible"))?true:false;if(show){self.elements.tooltip.css({visiblity:"hidden"}).show()}dimensions={height:self.elements.tooltip.outerHeight(),width:self.elements.tooltip.outerWidth()};if(show){self.elements.tooltip.css({visiblity:"visible"}).hide()}return dimensions}})}function construct(){var self,adjust,content,url,data,method,tempLength;self=this;self.beforeRender.call(self);self.status.rendered=true;self.elements.tooltip='<div qtip="'+self.id+'" class="qtip '+(self.options.style.classes.tooltip||self.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+self.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+self.options.style.classes.content+'"></div></div></div></div>';self.elements.tooltip=$(self.elements.tooltip);self.elements.tooltip.appendTo(self.options.position.container);self.elements.tooltip.data("qtip",{current:0,interfaces:[self]});self.elements.wrapper=self.elements.tooltip.children("div:first");self.elements.contentWrapper=self.elements.wrapper.children("div:first").css({background:self.options.style.background});self.elements.content=self.elements.contentWrapper.children("div:first").css(jQueryStyle(self.options.style));if($.browser.msie){self.elements.wrapper.add(self.elements.content).css({zoom:1})}if(self.options.hide.when.event=="unfocus"){self.elements.tooltip.attr("unfocus",true)}if(typeof self.options.style.width.value=="number"){self.updateWidth()}if($("<canvas>").get(0).getContext||$.browser.msie){if(self.options.style.border.radius>0){createBorder.call(self)}else{self.elements.contentWrapper.css({border:self.options.style.border.width+"px solid "+self.options.style.border.color})}if(self.options.style.tip.corner!==false){createTip.call(self)}}else{self.elements.contentWrapper.css({border:self.options.style.border.width+"px solid "+self.options.style.border.color});self.options.style.border.radius=0;self.options.style.tip.corner=false;$.fn.qtip.log.error.call(self,2,$.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")}if((typeof self.options.content.text=="string"&&self.options.content.text.length>0)||(self.options.content.text.jquery&&self.options.content.text.length>0)){content=self.options.content.text}else{if(typeof self.elements.target.attr("title")=="string"&&self.elements.target.attr("title").length>0){content=self.elements.target.attr("title").replace("\\n","<br />");self.elements.target.attr("title","")}else{if(typeof self.elements.target.attr("alt")=="string"&&self.elements.target.attr("alt").length>0){content=self.elements.target.attr("alt").replace("\\n","<br />");self.elements.target.attr("alt","")}else{content=" ";$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.NO_VALID_CONTENT,"render")}}}if(self.options.content.title.text!==false){createTitle.call(self)}self.updateContent(content);assignEvents.call(self);if(self.options.show.ready===true){self.show()}if(self.options.content.url!==false){url=self.options.content.url;data=self.options.content.data;method=self.options.content.method||"get";self.loadContent(url,data,method)}self.onRender.call(self);$.fn.qtip.log.error.call(self,1,$.fn.qtip.constants.EVENT_RENDERED,"render")}function createBorder(){var self,i,width,radius,color,coordinates,containers,size,betweenWidth,betweenCorners,borderTop,borderBottom,borderCoord,sideWidth,vertWidth;self=this;self.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();width=self.options.style.border.width;radius=self.options.style.border.radius;color=self.options.style.border.color||self.options.style.tip.color;coordinates=calculateBorders(radius);containers={};for(i in coordinates){containers[i]='<div rel="'+i+'" style="'+((i.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+radius+"px; width:"+radius+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if($("<canvas>").get(0).getContext){containers[i]+='<canvas height="'+radius+'" width="'+radius+'" style="vertical-align: top"></canvas>'}else{if($.browser.msie){size=radius*2+3;containers[i]+='<v:arc stroked="false" fillcolor="'+color+'" startangle="'+coordinates[i][0]+'" endangle="'+coordinates[i][1]+'" style="width:'+size+"px; height:"+size+"px; margin-top:"+((i.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((i.search(/Right/)!==-1)?coordinates[i][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'}}containers[i]+="</div>"}betweenWidth=self.getDimensions().width-(Math.max(width,radius)*2);betweenCorners='<div class="qtip-betweenCorners" style="height:'+radius+"px; width:"+betweenWidth+"px; overflow:hidden; background-color:"+color+'; line-height:0.1px; font-size:1px;">';borderTop='<div class="qtip-borderTop" dir="ltr" style="height:'+radius+"px; margin-left:"+radius+'px; line-height:0.1px; font-size:1px; padding:0;">'+containers.topLeft+containers.topRight+betweenCorners;self.elements.wrapper.prepend(borderTop);borderBottom='<div class="qtip-borderBottom" dir="ltr" style="height:'+radius+"px; margin-left:"+radius+'px; line-height:0.1px; font-size:1px; padding:0;">'+containers.bottomLeft+containers.bottomRight+betweenCorners;self.elements.wrapper.append(borderBottom);if($("<canvas>").get(0).getContext){self.elements.wrapper.find("canvas").each(function(){borderCoord=coordinates[$(this).parent("[rel]:first").attr("rel")];drawBorder.call(self,$(this),borderCoord,radius,color)})}else{if($.browser.msie){self.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>')}}sideWidth=Math.max(radius,(radius+(width-radius)));vertWidth=Math.max(width-radius,0);self.elements.contentWrapper.css({border:"0px solid "+color,borderWidth:vertWidth+"px "+sideWidth+"px"})}function drawBorder(canvas,coordinates,radius,color){var context=canvas.get(0).getContext("2d");context.fillStyle=color;context.beginPath();context.arc(coordinates[0],coordinates[1],radius,0,Math.PI*2,false);context.fill()}function createTip(corner){var self,color,coordinates,coordsize,path;self=this;if(self.elements.tip!==null){self.elements.tip.remove()}color=self.options.style.tip.color||self.options.style.border.color;if(self.options.style.tip.corner===false){return}else{if(!corner){corner=self.options.style.tip.corner}}coordinates=calculateTip(corner,self.options.style.tip.size.width,self.options.style.tip.size.height);self.elements.tip='<div class="'+self.options.style.classes.tip+'" dir="ltr" rel="'+corner+'" style="position:absolute; height:'+self.options.style.tip.size.height+"px; width:"+self.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if($("<canvas>").get(0).getContext){self.elements.tip+='<canvas height="'+self.options.style.tip.size.height+'" width="'+self.options.style.tip.size.width+'"></canvas>'}else{if($.browser.msie){coordsize=self.options.style.tip.size.width+","+self.options.style.tip.size.height;path="m"+coordinates[0][0]+","+coordinates[0][1];path+=" l"+coordinates[1][0]+","+coordinates[1][1];path+=" "+coordinates[2][0]+","+coordinates[2][1];path+=" xe";self.elements.tip+='<v:shape fillcolor="'+color+'" stroked="false" filled="true" path="'+path+'" coordsize="'+coordsize+'" style="width:'+self.options.style.tip.size.width+"px; height:"+self.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((corner.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';self.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';self.elements.contentWrapper.css("position","relative")}}self.elements.tooltip.prepend(self.elements.tip+"</div>");self.elements.tip=self.elements.tooltip.find("."+self.options.style.classes.tip).eq(0);if($("<canvas>").get(0).getContext){drawTip.call(self,self.elements.tip.find("canvas:first"),coordinates,color)}if(corner.search(/top/)!==-1&&$.browser.msie&&parseInt($.browser.version.charAt(0))===6){self.elements.tip.css({marginTop:-4})}positionTip.call(self,corner)}function drawTip(canvas,coordinates,color){var context=canvas.get(0).getContext("2d");context.fillStyle=color;context.beginPath();context.moveTo(coordinates[0][0],coordinates[0][1]);context.lineTo(coordinates[1][0],coordinates[1][1]);context.lineTo(coordinates[2][0],coordinates[2][1]);context.fill()}function positionTip(corner){var self,ieAdjust,paddingCorner,paddingSize,newMargin;self=this;if(self.options.style.tip.corner===false||!self.elements.tip){return}if(!corner){corner=self.elements.tip.attr("rel")}ieAdjust=positionAdjust=($.browser.msie)?1:0;self.elements.tip.css(corner.match(/left|right|top|bottom/)[0],0);if(corner.search(/top|bottom/)!==-1){if($.browser.msie){if(parseInt($.browser.version.charAt(0))===6){positionAdjust=(corner.search(/top/)!==-1)?-3:1}else{positionAdjust=(corner.search(/top/)!==-1)?1:2}}if(corner.search(/Middle/)!==-1){self.elements.tip.css({left:"50%",marginLeft:-(self.options.style.tip.size.width/2)})}else{if(corner.search(/Left/)!==-1){self.elements.tip.css({left:self.options.style.border.radius-ieAdjust})}else{if(corner.search(/Right/)!==-1){self.elements.tip.css({right:self.options.style.border.radius+ieAdjust})}}}if(corner.search(/top/)!==-1){self.elements.tip.css({top:-positionAdjust})}else{self.elements.tip.css({bottom:positionAdjust})}}else{if(corner.search(/left|right/)!==-1){if($.browser.msie){positionAdjust=(parseInt($.browser.version.charAt(0))===6)?1:((corner.search(/left/)!==-1)?1:2)}if(corner.search(/Middle/)!==-1){self.elements.tip.css({top:"50%",marginTop:-(self.options.style.tip.size.height/2)})}else{if(corner.search(/Top/)!==-1){self.elements.tip.css({top:self.options.style.border.radius-ieAdjust})}else{if(corner.search(/Bottom/)!==-1){self.elements.tip.css({bottom:self.options.style.border.radius+ieAdjust})}}}if(corner.search(/left/)!==-1){self.elements.tip.css({left:-positionAdjust})}else{self.elements.tip.css({right:positionAdjust})}}}paddingCorner="padding-"+corner.match(/left|right|top|bottom/)[0];paddingSize=self.options.style.tip.size[(paddingCorner.search(/left|right/)!==-1)?"width":"height"];self.elements.tooltip.css("padding",0);self.elements.tooltip.css(paddingCorner,paddingSize);if($.browser.msie&&parseInt($.browser.version.charAt(0))==6){newMargin=parseInt(self.elements.tip.css("margin-top"))||0;newMargin+=parseInt(self.elements.content.css("margin-top"))||0;self.elements.tip.css({marginTop:newMargin})}}function createTitle(){var self=this;if(self.elements.title!==null){self.elements.title.remove()}self.elements.title=$('<div class="'+self.options.style.classes.title+'">').css(jQueryStyle(self.options.style.title,true)).css({zoom:($.browser.msie)?1:0}).prependTo(self.elements.contentWrapper);if(self.options.content.title.text){self.updateTitle.call(self,self.options.content.title.text)}if(self.options.content.title.button!==false&&typeof self.options.content.title.button=="string"){self.elements.button=$('<a class="'+self.options.style.classes.button+'" style="float:right; position: relative"></a>').css(jQueryStyle(self.options.style.button,true)).html(self.options.content.title.button).prependTo(self.elements.title).click(function(event){if(!self.status.disabled){self.hide(event)}})}}function assignEvents(){var self,showTarget,hideTarget,inactiveEvents;self=this;showTarget=self.options.show.when.target;hideTarget=self.options.hide.when.target;if(self.options.hide.fixed){hideTarget=hideTarget.add(self.elements.tooltip)}if(self.options.hide.when.event=="inactive"){inactiveEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function inactiveMethod(event){if(self.status.disabled===true){return}clearTimeout(self.timers.inactive);self.timers.inactive=setTimeout(function(){$(inactiveEvents).each(function(){hideTarget.unbind(this+".qtip-inactive");self.elements.content.unbind(this+".qtip-inactive")});self.hide(event)},self.options.hide.delay)}}else{if(self.options.hide.fixed===true){self.elements.tooltip.bind("mouseover.qtip",function(){if(self.status.disabled===true){return}clearTimeout(self.timers.hide)})}}function showMethod(event){if(self.status.disabled===true){return}if(self.options.hide.when.event=="inactive"){$(inactiveEvents).each(function(){hideTarget.bind(this+".qtip-inactive",inactiveMethod);self.elements.content.bind(this+".qtip-inactive",inactiveMethod)});inactiveMethod()}clearTimeout(self.timers.show);clearTimeout(self.timers.hide);self.timers.show=setTimeout(function(){self.show(event)},self.options.show.delay)}function hideMethod(event){if(self.status.disabled===true){return}if(self.options.hide.fixed===true&&self.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&$(event.relatedTarget).parents("div.qtip[qtip]").length>0){event.stopPropagation();event.preventDefault();clearTimeout(self.timers.hide);return false}clearTimeout(self.timers.show);clearTimeout(self.timers.hide);self.elements.tooltip.stop(true,true);self.timers.hide=setTimeout(function(){self.hide(event)},self.options.hide.delay)}if((self.options.show.when.target.add(self.options.hide.when.target).length===1&&self.options.show.when.event==self.options.hide.when.event&&self.options.hide.when.event!=="inactive")||self.options.hide.when.event=="unfocus"){self.cache.toggle=0;showTarget.bind(self.options.show.when.event+".qtip",function(event){if(self.cache.toggle==0){showMethod(event)}else{hideMethod(event)}})}else{showTarget.bind(self.options.show.when.event+".qtip",showMethod);if(self.options.hide.when.event!=="inactive"){hideTarget.bind(self.options.hide.when.event+".qtip",hideMethod)}}if(self.options.position.type.search(/(fixed|absolute)/)!==-1){self.elements.tooltip.bind("mouseover.qtip",self.focus)}if(self.options.position.target==="mouse"&&self.options.position.type!=="static"){showTarget.bind("mousemove.qtip",function(event){self.cache.mouse={x:event.pageX,y:event.pageY};if(self.status.disabled===false&&self.options.position.adjust.mouse===true&&self.options.position.type!=="static"&&self.elements.tooltip.css("display")!=="none"){self.updatePosition(event)}})}}function screenAdjust(position,target,tooltip){var self,adjustedPosition,adjust,newCorner,overflow,corner;self=this;if(tooltip.corner=="center"){return target.position}adjustedPosition=$.extend({},position);newCorner={x:false,y:false};overflow={left:(adjustedPosition.left<$.fn.qtip.cache.screen.scroll.left),right:(adjustedPosition.left+tooltip.dimensions.width+2>=$.fn.qtip.cache.screen.width+$.fn.qtip.cache.screen.scroll.left),top:(adjustedPosition.top<$.fn.qtip.cache.screen.scroll.top),bottom:(adjustedPosition.top+tooltip.dimensions.height+2>=$.fn.qtip.cache.screen.height+$.fn.qtip.cache.screen.scroll.top)};adjust={left:(overflow.left&&(tooltip.corner.search(/right/i)!=-1||(tooltip.corner.search(/right/i)==-1&&!overflow.right))),right:(overflow.right&&(tooltip.corner.search(/left/i)!=-1||(tooltip.corner.search(/left/i)==-1&&!overflow.left))),top:(overflow.top&&tooltip.corner.search(/top/i)==-1),bottom:(overflow.bottom&&tooltip.corner.search(/bottom/i)==-1)};if(adjust.left){if(self.options.position.target!=="mouse"){adjustedPosition.left=target.position.left+target.dimensions.width}else{adjustedPosition.left=self.cache.mouse.x}newCorner.x="Left"}else{if(adjust.right){if(self.options.position.target!=="mouse"){adjustedPosition.left=target.position.left-tooltip.dimensions.width}else{adjustedPosition.left=self.cache.mouse.x-tooltip.dimensions.width}newCorner.x="Right"}}if(adjust.top){if(self.options.position.target!=="mouse"){adjustedPosition.top=target.position.top+target.dimensions.height}else{adjustedPosition.top=self.cache.mouse.y}newCorner.y="top"}else{if(adjust.bottom){if(self.options.position.target!=="mouse"){adjustedPosition.top=target.position.top-tooltip.dimensions.height}else{adjustedPosition.top=self.cache.mouse.y-tooltip.dimensions.height}newCorner.y="bottom"}}if(adjustedPosition.left<0){adjustedPosition.left=position.left;newCorner.x=false}if(adjustedPosition.top<0){adjustedPosition.top=position.top;newCorner.y=false}if(self.options.style.tip.corner!==false){adjustedPosition.corner=new String(tooltip.corner);if(newCorner.x!==false){adjustedPosition.corner=adjustedPosition.corner.replace(/Left|Right|Middle/,newCorner.x)}if(newCorner.y!==false){adjustedPosition.corner=adjustedPosition.corner.replace(/top|bottom/,newCorner.y)}if(adjustedPosition.corner!==self.elements.tip.attr("rel")){createTip.call(self,adjustedPosition.corner)}}return adjustedPosition}function jQueryStyle(style,sub){var styleObj,i;styleObj=$.extend(true,{},style);for(i in styleObj){if(sub===true&&i.search(/(tip|classes)/i)!==-1){delete styleObj[i]}else{if(!sub&&i.search(/(width|border|tip|title|classes|user)/i)!==-1){delete styleObj[i]}}}return styleObj}function sanitizeStyle(style){if(typeof style.tip!=="object"){style.tip={corner:style.tip}}if(typeof style.tip.size!=="object"){style.tip.size={width:style.tip.size,height:style.tip.size}}if(typeof style.border!=="object"){style.border={width:style.border}}if(typeof style.width!=="object"){style.width={value:style.width}}if(typeof style.width.max=="string"){style.width.max=parseInt(style.width.max.replace(/([0-9]+)/i,"$1"))}if(typeof style.width.min=="string"){style.width.min=parseInt(style.width.min.replace(/([0-9]+)/i,"$1"))}if(typeof style.tip.size.x=="number"){style.tip.size.width=style.tip.size.x;delete style.tip.size.x}if(typeof style.tip.size.y=="number"){style.tip.size.height=style.tip.size.y;delete style.tip.size.y}return style}function buildStyle(){var self,i,styleArray,styleExtend,finalStyle,ieAdjust;self=this;styleArray=[true,{}];for(i=0;i<arguments.length;i++){styleArray.push(arguments[i])}styleExtend=[$.extend.apply($,styleArray)];while(typeof styleExtend[0].name=="string"){styleExtend.unshift(sanitizeStyle($.fn.qtip.styles[styleExtend[0].name]))}styleExtend.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},$.fn.qtip.styles.defaults);finalStyle=$.extend.apply($,styleExtend);ieAdjust=($.browser.msie)?1:0;finalStyle.tip.size.width+=ieAdjust;finalStyle.tip.size.height+=ieAdjust;if(finalStyle.tip.size.width%2>0){finalStyle.tip.size.width+=1}if(finalStyle.tip.size.height%2>0){finalStyle.tip.size.height+=1}if(finalStyle.tip.corner===true){finalStyle.tip.corner=(self.options.position.corner.tooltip==="center")?false:self.options.position.corner.tooltip}return finalStyle}function calculateTip(corner,width,height){var tips={bottomRight:[[0,0],[width,height],[width,0]],bottomLeft:[[0,0],[width,0],[0,height]],topRight:[[0,height],[width,0],[width,height]],topLeft:[[0,0],[0,height],[width,height]],topMiddle:[[0,height],[width/2,0],[width,height]],bottomMiddle:[[0,0],[width,0],[width/2,height]],rightMiddle:[[0,0],[width,height/2],[0,height]],leftMiddle:[[width,0],[width,height],[0,height/2]]};tips.leftTop=tips.bottomRight;tips.rightTop=tips.bottomLeft;tips.leftBottom=tips.topRight;tips.rightBottom=tips.topLeft;return tips[corner]}function calculateBorders(radius){var borders;if($("<canvas>").get(0).getContext){borders={topLeft:[radius,radius],topRight:[0,radius],bottomLeft:[radius,0],bottomRight:[0,0]}}else{if($.browser.msie){borders={topLeft:[-90,90,0],topRight:[-90,90,-radius],bottomLeft:[90,270,0],bottomRight:[90,270,-radius]}}}return borders}function bgiframe(){var self,html,dimensions;self=this;dimensions=self.getDimensions();html='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+dimensions.height+"px; width:"+dimensions.width+'px" />';self.elements.bgiframe=self.elements.wrapper.prepend(html).children(".qtip-bgiframe:first")}$(document).ready(function(){$.fn.qtip.cache={screen:{scroll:{left:$(window).scrollLeft(),top:$(window).scrollTop()},width:$(window).width(),height:$(window).height()}};var adjustTimer;$(window).bind("resize scroll",function(event){clearTimeout(adjustTimer);adjustTimer=setTimeout(function(){if(event.type==="scroll"){$.fn.qtip.cache.screen.scroll={left:$(window).scrollLeft(),top:$(window).scrollTop()}}else{$.fn.qtip.cache.screen.width=$(window).width();$.fn.qtip.cache.screen.height=$(window).height()}for(i=0;i<$.fn.qtip.interfaces.length;i++){var api=$.fn.qtip.interfaces[i];if(api.status.rendered===true&&(api.options.position.type!=="static"||api.options.position.adjust.scroll&&event.type==="scroll"||api.options.position.adjust.resize&&event.type==="resize")){api.updatePosition(event,true)}}},100)});$(document).bind("mousedown.qtip",function(event){if($(event.target).parents("div.qtip").length===0){$(".qtip[unfocus]").each(function(){var api=$(this).qtip("api");if($(this).is(":visible")&&!api.status.disabled&&$(event.target).add(api.elements.target).length>1){api.hide(event)}})}})});$.fn.qtip.interfaces=[];$.fn.qtip.log={error:function(){return this}};$.fn.qtip.constants={};$.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};$.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}});define("audible-razor",[],function(){function trimStringI(text,length){return(length<text.length)?text.substr(0,length-3)+"...":text}function stripHtmlI(html){var tmp=document.createElement("DIV");tmp.innerHTML=html;return tmp.textContent||tmp.innerText}function trimAndStripStringI(html,length){var text=trimStringI(html,length);return stripHtmlI(text)}Handlebars.registerHelper("utilTrimString",function(text){return text.replace(" ","")});Handlebars.registerHelper("utilTrimString31",function(text){return trimStringI(text,31)});Handlebars.registerHelper("utilTrimString34",function(text){return trimStringI(text,34)});Handlebars.registerHelper("utilTrimString42",function(text){return trimStringI(text,42)});Handlebars.registerHelper("utilTrimString55",function(text){return trimStringI(text,55)});Handlebars.registerHelper("stripAndTrimHtml31",function(html){return trimAndStripStringI(html,31)});Handlebars.registerHelper("toFormatType",function(text){return"product_format_type_"+text});return{trimString:trimStringI}});define("audible-fgl-carousel",["ftx/lib/jquery-current","jquery.jcarousel","jquery.qtip-1.0.0-rc3","audible-fgl-modal","i18n!nls/localizedstrings","audible-razor"],function($,jc,qt,fglmodal,localstrings){var RefMarkerUtil=function(){var callbackI=function(suffix,hitType){$.ajax({url:"/intr/ref=fgl_crsl_"+suffix+((hitType)?"&hitType="+hitType:"")})};var modalCallbackI=function(carouselId,asin){callbackI("modal_"+carouselId+"_"+asin,"popUp")};var scrollCallbackI=function(carouselId,direction){callbackI("scrl_"+direction+"_"+carouselId,"browserNavigation")};var toolTipCallbackI=function(carouselId,asin){callbackI("tip_"+carouselId+"_"+asin,"browserNavigation")};return{modalCallback:modalCallbackI,scrollCallback:scrollCallbackI,toolTipCallback:toolTipCallbackI}}();var ProductToolTip=function(){var tooltipTemplate=Handlebars.compile('<div class="adbl-carousel-tooltip-spacer-top"></div><div class="adbl-carousel-tooltip">  <div style="font-size:1.3em;"><span style="font-weight:bold;">{{{ProductToolTip_formatTitleString product.title}}}</span> <span>({{{formatType}}})</span></div>  <p> '+localstrings.audible_fgl_carousel_by+' <span style="font-weight:bold;">{{{ProductToolTip_formatNamesString product.authors}}}</span></p>  <p>'+localstrings.audible_fgl_carousel_narratedBy+' <span style="font-weight:bold;">{{{ProductToolTip_formatNamesString product.narrators}}}</span></p>  <div style="padding-top:5px;font-size:.9em;">{{{modalComputeStarsI product.rating.overallDistribution.averageRating}}}<span>({{product.rating.overallDistribution.countOfRatings}} '+localstrings.audible_fgl_carousel_ratings+')</span><span>{{{ProductToolTip_formatDuration product.runTime}}}</span></div>  <div class="adbl-carousel-tooltip-content">{{{'+localstrings.audible_fgl_carousel_productdescription+'}}}</div></div>{{#if reviews}}<div class="adbl-carousel-tooltip-gradient"></div><div class="adbl-carousel-tooltip" style="padding-bottom:10px;">  <p style="font-weight:bold;">"{{utilTrimString34 reviews.title}}"</p>  <p style="font-size:10pt"><span style="font-weight:bold;">'+localstrings.audible_fgl_carousel_by+' {{reviews.reviewer.name}}</span> <span style="color:#666">({{reviews.reviewer.location}}) {{reviews.submissionDate}}</span></p></div><div class="adbl-carousel-tooltip-spacer"></div>{{/if}}');var trimToSizeByWordI=function(string,size){if(string&&string.length>size){var index=string.substring(0,size-3).lastIndexOf(" ");return string.substring(0,index+1)+"..."}else{return string}};Handlebars.registerHelper("ProductToolTip_utilTrimStringByWord450",function(string){return trimToSizeByWordI(string,450)});var formatTitleStringI=function(title){var titleString=title.title;if(title.subTitle){titleString+=title.separator+" "+title.subTitle}return titleString};Handlebars.registerHelper("ProductToolTip_formatTitleString",formatTitleStringI);var formatNamesStringI=function(authors){var names=[];$.each(authors,function(i){names.push(authors[i].name)});return names.join(", ")};Handlebars.registerHelper("ProductToolTip_formatNamesString",formatNamesStringI);var pluralize=function(number,string){var partialString=number+" "+string;return partialString};var formatDurationI=function(runTime){if(runTime==null){return"n/a"}var hrs,mins;switch(runTime.timeUnit){case"SECONDS":mins=Math.floor(runTime.length/60);hrs=Math.floor(mins/60);break;case"MINUTES":mins=runTime.length%60;hrs=Math.floor(runTime.length/60);break;case"HOURS":hrs=runTime.length;break;default:return"n/a"}return((hrs)?" "+pluralize(hrs,localstrings.audible_fgl_carousel_hour):"")+((mins)?" "+pluralize(mins,localstrings.audible_fgl_carousel_minute):"")};Handlebars.registerHelper("ProductToolTip_formatDuration",formatDurationI);var createTootlTipI=function(elementSelector,carouselId,product,review){var formatType="";if(product.formatType=="UNABRIDGED"){formatType=unescape(localstrings.audible_fgl_modal_UNABRIDGED)}else{formatType=unescape(localstrings.audible_fgl_modal_ABRIDGED)}$(elementSelector).qtip({content:tooltipTemplate({product:product,review:review,formatType:formatType}),position:{corner:{target:"rightMiddle",tooltip:"leftMiddle"},adjust:{screen:true}},style:{width:300,padding:0},show:{delay:500},api:{onShow:function(){return RefMarkerUtil.toolTipCallback(carouselId,product.asin)}}})};return{createToolTip:createTootlTipI,formatTitleString:formatTitleStringI,formatNamesString:formatNamesStringI}}();var CarouselUtil=function(){var tileTemplate=Handlebars.compile('<img id="adbl_img_{{{id}}}{{{data.product.asin}}}" class="adbl-carousel_tile_image adbl-prod-image" src="{{{data.product.image.fullNonSecureUrl}}}" alt="{{titleHtml}}" /><div>    <div class="adbl-star-container">{{{modalComputeStarsI data.product.rating.averageRating}}}</div>    <p class="adbl-carousel-tile-title" title="{{{titleHtml}}}">{{stripAndTrimHtml31 titleHtml}}</p>    <p class="adbl-carousel-tile-author" title="{{{authorHtml}}}">{{stripAndTrimHtml31 authorHtml}}</p></div>');var initCarousels=function(){var carouselsLoaded=0;$(".adbl-carousel-data-div").each(function(i,elem){var carouselData=window["carousel_"+elem.id];var carousel=new AudibleFGLCarousel({parentElement:elem,id:carouselData.id,title:carouselData.title,description:carouselData.description,size:carouselData.data.length,numVisibleItems:carouselData.numVisibleItems,loadCallback:CarouselUtil.loadCallback});carouselsLoaded++});$("#adbl_fgl_welcome_greeting").show();((carouselsLoaded>0)?$("#adbl_fgl_welcome_message"):$("#adbl_fgl_no_data_message")).show()};var loadCallback=function(carousel,state){var id=$(carousel.container.context).closest(".adbl-carousel-data-div").attr("id");var carouselData=window["carousel_"+id];for(var i=carousel.first;i<=carousel.last;i++){if(carousel.has(i)){continue}if(i>carouselData.data.length){carousel.add(i,'<div style="background-color:rgba(255,255,255,0);"></div>')}else{var productAndReviews=carouselData.data[i-1];carousel.add(i,getItemHtml(productAndReviews,id,carouselData.displayMode));ProductToolTip.createToolTip("#adbl_img_"+id+productAndReviews.product.asin,id,productAndReviews.product,productAndReviews.reviews[0])}}};var getItemHtml=function(data,id,displayMode){var titleHtml=ProductToolTip.formatTitleString(data.product.title);var authorHtml=ProductToolTip.formatNamesString(data.product.authors);var refTags={addToWishList:"fgl_crsl_wsh_"+id+"_"+data.product.asin,addToCart:"fgl_crsl_crt_"+id+"_"+data.product.asin};$(document).delegate("#adbl_img_"+id+data.product.asin,"click",function(){$(".qtip-defaults").css("z-index",500);fglmodal.showProductModal(data,UserInfo,refTags,displayMode,id);RefMarkerUtil.modalCallback(id,data.product.asin)});var tileHtml=tileTemplate({id:id,data:data,titleHtml:titleHtml,authorHtml:authorHtml});return $(tileHtml)};return{initCarousels:initCarousels,loadCallback:loadCallback}}();var AudibleFGLCarousel=function(){return function(config){var parentElement=$(config.parentElement);var carouselHtml=$(AudibleFGLCarousel.carouselTemplate({config:config}));var loadCallback=function(carousel,state){config.loadCallback(carousel,state);$("#adbl_page_num_"+config.id).text(Math.ceil(carousel.last/carousel.options.visible)+unescape(localstrings.audible_fgl_carousel_of)+Math.ceil((carousel.size()/carousel.options.visible)))};$(parentElement).append(carouselHtml);$("ul",carouselHtml).jcarousel({size:Math.floor((config.size+(config.numVisibleItems-1))/config.numVisibleItems)*config.numVisibleItems,itemLoadCallback:{onBeforeAnimation:loadCallback},visible:config.numVisibleItems,scroll:config.numVisibleItems});var clickFunction=function(id,direction,className){return function(){if(!$(this).hasClass(className)){RefMarkerUtil.scrollCallback(id,direction)}}};$(".jcarousel-prev",parentElement).bind("click",clickFunction(config.id,"left","jcarousel-prev-disabled"));$(".jcarousel-next",parentElement).bind("click",clickFunction(config.id,"right","jcarousel-next-disabled"))}}();AudibleFGLCarousel.carouselTemplate=(function(){var carouselTemplate=Handlebars.compile('<div><span id="adbl_page_num_{{{config.id}}}" class="adbl-carousel-pagenum"></span><span class="adbl-carousel-title">{{config.title}}</span>{{#if config.description}}<span class="adbl-carousel-description"> - {{{config.description}}}</span>{{/if}}</div><div class="adbl-carousel-inner-container"><div class="adbl-carousel-left-shim" ></div><div class="adbl-carousel-right-shim" ></div><div class="adbl-spacer-div"></div><ul class="jcarousel-skin-tango"></ul></div>');return function(data){return carouselTemplate(data)}})();$(document).ready(function(){CarouselUtil.initCarousels()})});define("promo-code-manager",["ftx/lib/jquery-current","logger","i18n!nls/localizedstrings","ajax-refmarker","client-side-metrics-jslogging"],function($,logger,localstrings,refmarker,csm){var ADBL_PROMO={};function PromoCodeManager(delegate){this.delegate=delegate;this.URLs={apply:"/promo/apply/ref="+refmarker.build("pc_ap"),remove:"/promo/remove/ref="+refmarker.build("pc_rm"),validate:"/promo/validate/ref="+refmarker.build("pc_va")};this.init=function(delegate){this.delegate=delegate;return this};this.applyToCart=function(code){var delegate=this.delegate;if(!hasValidDelegate("APPLY",delegate)){ADBL_PROMO.util.doThrow("PromoCodeManager.apply: This delegate does not have the required functions for this action. Please make sure to implement all required delegate functions.")}$.ajax({url:this.URLs.apply,cache:false,data:{promoCode:code},dataType:"json",success:function(data){if(data.promotion){try{delegate.onApplyToCartAccepted(data.promotion);if(ADBL_PROMO.util.isRedeemed(data.promotion.promotionReward)){s_trackRedemption(data.promotion.promotionCampaign.campaignId)}}catch(e){if(typeof s_enabled!="undefined"){try{s_formErrors("Cart:invalid promotion code")}catch(e){csm.logJSErrors(e,"/promo","s_formErrors","ERROR")}}delegate.onFailed(e.message)}}else{if(data.error){if(typeof s_enabled!="undefined"){try{s_formErrors("Cart:invalid promotion code")}catch(e){csm.logJSErrors(e,"/promo","s_formErrors","ERROR")}}delegate.onApplyToCartRejected(data.error)}else{if(typeof s_enabled!="undefined"){try{s_formErrors("Cart:invalid promotion code")}catch(e){csm.logJSErrors(e,"/promo","s_formErrors","ERROR")}}delegate.onFailed(unescape(localstrings.promocode_cannotApplyToCart));refmarker.buildAndRecord("pc_ap_err_xhr")}}},error:function(xhr,err){logger.log("Ajax call failed: "+err);if(typeof s_enabled!="undefined"){try{s_formErrors("Cart:invalid promotion code")}catch(e){csm.logJSErrors(e,"/promo","s_formErrors","ERROR")}}delegate.onFailed(unescape(localstrings.promocode_cannotApplyToCart));refmarker.buildAndRecord("pc_ap_err_xhr")}})};this.removeFromCart=function(code){var delegate=this.delegate;if(!hasValidDelegate("REMOVE",delegate)){ADBL_PROMO.util.doThrow("PromoCodeManager.remove: This delegate does not have the required functions for this action. Please make sure to implement all required delegate functions.")}$.ajax({url:this.URLs.remove,cache:false,data:{promoCode:code},dataType:"json",success:function(data){if(data.promotion){delegate.onRemoveFromCartAccepted(data.promotion)}else{delegate.onRemoveFromCartRejected(data.error)}},error:function(xhr,err){logger.log("Ajax call failed: "+err);delegate.onFailed(unescape(localstrings.promocode_cannotRemoveFromCart));refmarker.buildAndRecord("pc_rm_err_xhr")}})};this.validate=function(code){var delegate=this.delegate;if(!hasValidDelegate("VALIDATE",delegate)){ADBL_PROMO.util.doThrow("PromoCodeManager.validate: This delegate does not have the required functions for this action. Please make sure to implement all required delegate functions.")}$.ajax({url:this.URLs.validate,cache:false,data:{promoCode:code},dataType:"json",success:function(data){if(!data.error){delegate.onValidateAccepted(data.promotion)}else{if(typeof s_enabled!="undefined"){try{s_formErrors("Cart:invalid promotion code")}catch(e){csm.logJSErrors(e,"/promo","s_formErrors","ERROR")}}delegate.onValidateRejected(data.error)}},error:function(xhr,err){logger.log("Failed to validate promotional code: "+err);delegate.onFailed(unescape(localstrings.promocode_cannotValidateCode));refmarker.buildAndRecord("pc_va_err_xhr")}})};var hasValidDelegate=function(type,delegate){switch(type){case"APPLY":if(typeof delegate!=="object"||typeof delegate.onApplyToCartAccepted!=="function"||typeof delegate.onApplyToCartRejected!=="function"||typeof delegate.onFailed!=="function"){return false}return true;case"REMOVE":if(typeof delegate!=="object"||typeof delegate.onRemoveFromCartAccepted!=="function"||typeof delegate.onRemoveFromCartRejected!=="function"||typeof delegate.onFailed!=="function"){return false}return true;case"VALIDATE":if(typeof delegate!=="object"||typeof delegate.onValidateAccepted!=="function"||typeof delegate.onValidateRejected!=="function"||typeof delegate.onFailed!=="function"){return false}return true;default:return false}}}var PromoCodeUtil={showError:function(widget,msg){if(msg){widget.errorSection.html(msg).removeClass("hidden").addClass("visible")}else{logger.log("WARN: No error message provided")}},hideError:function(widget){var errorSection=widget.errorSection;if(errorSection.hasClass("visible")){errorSection.empty();errorSection.removeClass("visible").addClass("hidden")}},showLoader:function(widget){widget.button.hide();widget.loader.show()},hideLoader:function(widget){widget.button.show();widget.loader.hide()},elementsExist:function(){var i,arg;for(i=0;i<arguments.length;i++){arg=arguments[i];if(arg.length===0){logger.log("ERROR: one of the elements passed does not exist in the DOM.");return false}}return true},isRedeemed:function(promotionReward){for(var i=0;i<promotionReward.length;i++){var reward=promotionReward[i];if(reward.type==="CREDIT"||reward.type==="COUPON"){return true}}return false},toggleDefaultBoxText:function(e){var widget=e.data.widget;var eventType=e.type;var promoCodeTextBox=widget.textBox;var defaultText=promoCodeTextBox.attr("data-prompt-text");var currentText=$.trim(promoCodeTextBox.val())||"";if(eventType==="focus"){if(currentText===defaultText){promoCodeTextBox.val("");promoCodeTextBox.removeClass("default")}}else{if(eventType==="blur"){if(currentText.length===0){promoCodeTextBox.val(defaultText);promoCodeTextBox.addClass("default")}}}},resetRedemptionWidget:function(widget){var promoCodeTextBox=widget.textBox;var applyButton=widget.button;var defaultText=promoCodeTextBox.attr("data-prompt-text");applyButton.removeClass("active").addClass("inactive");promoCodeTextBox.addClass("default");promoCodeTextBox.val(defaultText)},doThrow:function(msg){if(msg){logger.log("ERROR: "+msg)}throw {message:unescape(localstrings.promocode_cannotProcessRequest)}}};ADBL_PROMO.manager=PromoCodeManager;ADBL_PROMO.util=PromoCodeUtil;return ADBL_PROMO});define("redemption-promo-code",["ftx/lib/jquery-current","logger","promo-code-manager","i18n!nls/localizedstrings","ajax-refmarker"],function($,logger,adblPromo,localstrings,refmarker){function RedemptionPromoWidget(container){logger.log("DEBUG: starting RedemptionPromoWidget...");this.container=container;this.init=function(){logger.log("DEBUG: starting RedemptionPromoWidget.init()...");var redemptionDelegate;if(this.container.length===0){logger.log("ERROR: container does not exists in DOM.");return}this.textBox=this.container.find("#promo_code");this.button=this.container.find("#apply_code");this.textBoxSection=this.container.find(".text-box-wrapper");this.errorSection=this.container.find(".promo-error");this.loader=this.container.find(".loader");if(adblPromo.util.elementsExist(this.textBox,this.button,this.textBoxSection,this.errorSection,this.loader)){redemptionDelegate=new RedemptionPromoCodeDelegate(this);if(typeof redemptionDelegate==="undefined"){logger.log("ERROR: RedemptionPromoCodeDelegate is undefined")}this.promoManager=new adblPromo.manager(redemptionDelegate);if(typeof this.promoManager==="undefined"){logger.log("ERROR: PromoCodeManager is undefined")}if($.trim(this.textBox.val())!==localstrings.promocode_moreDetails){this.button.removeClass("inactive").addClass("active")}this.textBox.bind("focus",{widget:this},adblPromo.util.toggleDefaultBoxText);this.textBox.bind("blur",{widget:this},adblPromo.util.toggleDefaultBoxText);this.textBox.bind("keyup",{widget:this},validatePromoCode);this.button.bind("click",{widget:this},validatePromoCode)}};var validatePromoCode=function(e){e.preventDefault();var eventType=e.type;var keyCode=e.which;var widget=e.data.widget;var promoCodeTextBox=widget.textBox;var promoCode=$.trim(promoCodeTextBox.val())||"";var defaultText=promoCodeTextBox.attr("data-prompt-text");var invalidKeyCodes=[37,38,39,40,27];if($.inArray(keyCode,invalidKeyCodes)==-1){keyupStateChanges(eventType,promoCode,widget)}if(eventType==="click"||(eventType==="keyup"&&keyCode===13)){adblPromo.util.showLoader(widget);if(promoCode===defaultText||promoCode.length===0){adblPromo.util.hideLoader(widget);return}window.setTimeout(function(){try{widget.promoManager.validate(promoCode)}catch(e){adblPromo.util.showError(widget,e.errors.message);adblPromo.util.hideLoader(widget)}},10)}};var keyupStateChanges=function(eventType,promoCode,widget){var button=widget.button;if(eventType==="keyup"){adblPromo.util.hideError(widget);if(promoCode.length>0){button.removeClass("inactive").addClass("active")}else{if(button.hasClass("active")){button.removeClass("active").addClass("inactive")}}}}}function RedemptionPromoCodeDelegate(widget){this.widget=widget;this.onValidateAccepted=function(promotion){logger.log("DEBUG: validation accepted");logger.log(promotion);if(promotion){var promoCode=promotion.promoCode;var campaignId=promotion.promotionCampaign.campaignId||"promoCodes";var skipOfferPage=$("input[name=bp_o]").val();document.location.href="/promo/offer/"+campaignId+"/ref="+refmarker.build("pc_redeem_"+campaignId)+"?p="+promoCode+"&bp_o="+skipOfferPage}else{this.onFailed(unescape(localstrings.promocode_cannotProcessRequest));refmarker.buildAndRecord("pc_va_err_xhr")}};this.onValidateRejected=function(error){var code=error.code;if(code==="301"){document.location.href="/mycart"+refmarker.build("pc_r_cart");return}var promoCode=$.trim(this.widget.textBox.val());var message=error.message||unescape(localstrings.promocode_cannotProcessRequest);logger.log("DEBUG: validation rejected with code: "+code);adblPromo.util.showError(this.widget,message.replace(/_PC_/g,promoCode));adblPromo.util.hideLoader(this.widget);refmarker.buildAndRecord("pc_va_err_"+code)};this.onFailed=function(msg){adblPromo.util.showError(this.widget,msg);adblPromo.util.hideLoader(this.widget)}}$(function(){var container=$(".adbl-promo-redemption");var widget=new RedemptionPromoWidget(container);widget.init()})});define("jquerySwfobject",["ftx/lib/jquery-current"],function(jQuery){(function($,flash,Plugin){var OBJECT="object",ENCODE=true;function _compareArrayIntegers(a,b){var x=(a[0]||0)-(b[0]||0);return x>0||(!x&&a.length>0&&_compareArrayIntegers(a.slice(1),b.slice(1)))}function _objectToArguments(obj){if(typeof obj!=OBJECT){return obj}var arr=[],str="";for(var i in obj){if(typeof obj[i]==OBJECT){str=_objectToArguments(obj[i])}else{str=[i,(ENCODE)?encodeURI(obj[i]):obj[i]].join("=")}arr.push(str)}return arr.join("&")}function _objectFromObject(obj){var arr=[];for(var i in obj){if(obj[i]){arr.push([i,'="',obj[i],'"'].join(""))}}return arr.join(" ")}function _paramsFromObject(obj){var arr=[];for(var i in obj){arr.push(['<param name="',i,'" value="',_objectToArguments(obj[i]),'" />'].join(""))}return arr.join("")}try{var flashVersion=Plugin.description||(function(){return(new Plugin("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}())}catch(e){flashVersion="Unavailable"}var flashVersionMatchVersionNumbers=flashVersion.match(/\d+/g)||[0];$[flash]={available:flashVersionMatchVersionNumbers[0]>0,activeX:Plugin&&!Plugin.name,version:{original:flashVersion,array:flashVersionMatchVersionNumbers,string:flashVersionMatchVersionNumbers.join("."),major:parseInt(flashVersionMatchVersionNumbers[0],10)||0,minor:parseInt(flashVersionMatchVersionNumbers[1],10)||0,release:parseInt(flashVersionMatchVersionNumbers[2],10)||0},hasVersion:function(version){var versionArray=(/string|number/.test(typeof version))?version.toString().split("."):(/object/.test(typeof version))?[version.major,version.minor]:version||[0,0];return _compareArrayIntegers(flashVersionMatchVersionNumbers,versionArray)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(obj){var instance=this;if(!obj.swf||instance.expressInstallIsActive||(!instance.available&&!obj.hasVersionFail)){return false}if(!instance.hasVersion(obj.hasVersion||1)){instance.expressInstallIsActive=true;if(typeof obj.hasVersionFail=="function"){if(!obj.hasVersionFail.apply(obj)){return false}}obj={swf:obj.expressInstall||instance.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:(instance.activeX)?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:obj.swf,type:"application/x-shockwave-flash",id:obj.id||"flash_"+Math.floor(Math.random()*999999999),width:obj.width||320,height:obj.height||180,style:obj.style||""};ENCODE=typeof obj.useEncode!=="undefined"?obj.useEncode:instance.encodeParams;obj.movie=obj.swf;obj.wmode=obj.wmode||"opaque";delete obj.fallback;delete obj.hasVersion;delete obj.hasVersionFail;delete obj.height;delete obj.id;delete obj.swf;delete obj.useEncode;delete obj.width;var flashContainer=document.createElement("div");flashContainer.innerHTML=["<object ",_objectFromObject(attrs),">",_paramsFromObject(obj),"</object>"].join("");return flashContainer.firstChild}};$.fn[flash]=function(options){var $this=this.find(OBJECT).andSelf().filter(OBJECT);if(/string|object/.test(typeof options)){this.each(function(){var $this=$(this),flashObject;options=(typeof options==OBJECT)?options:{swf:options};options.fallback=this;flashObject=$[flash].create(options);if(flashObject){$this.children().remove();$this.html(flashObject)}})}if(typeof options=="function"){$this.each(function(){var instance=this,jsInteractionTimeoutMs="jsInteractionTimeoutMs";instance[jsInteractionTimeoutMs]=instance[jsInteractionTimeoutMs]||0;if(instance[jsInteractionTimeoutMs]<660){if(instance.clientWidth||instance.clientHeight){options.call(instance)}else{setTimeout(function(){$(instance)[flash](options)},instance[jsInteractionTimeoutMs]+66)}}})}return $this}}(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject))});define("emailcollectiontool",["ftx/lib/jquery-current","isValid","page-action"],function($,isValid,pageAction){var isChecked=false;$(function(){$("#adbl-prom-email").keyup(function(){if(isChecked){var email=$("#adbl-prom-email").val();if(isValid.Email(email)){$("#error_msg").css("display","none")}else{$("#error_msg").css("display","inline")}}});$("#try_again").click(function(){$("#email_col_tool_form").css("display","block");$("#email_col_fail_msg").css("display","none");$("#email_col_success_msg").css("display","none")});$("#submitEmail").click(function(){var campaignId=$("#adbl-prom-campaignId").val();var email=$("#adbl-prom-email").val();if(!isValid.Email(email)){$("#error_msg").css("display","inline");isChecked=true}else{$("#error_msg").css("display","none");var dest="/email-collection-ajax";appAction=pageAction.getAction();appActionToken=pageAction.getToken();var postData={appAction:appAction,appActionToken:appActionToken,campaignId:campaignId,email:email};$.post(dest,postData,function dataLoaded(data,result){if(result=="success"){$("#email_col_success_msg").css("display","block");$("#email_col_fail_msg").css("display","none");$("#email_col_tool_form").css("display","none")}else{$("#email_col_fail_msg").css("display","block");$("#email_col_success_msg").css("display","none");$("#email_col_tool_form").css("display","none")}})}})})});
/*
 * jQuery.ScrollTo
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 4/09/2012
 *
 * @projectDescription Easy element scrolling using jQuery.
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @author Ariel Flesler
 * @version 1.4.3.1
 *
 * @id jQuery.scrollTo
 * @id jQuery.fn.scrollTo
 * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
 *	  The different options for target are:
 *		- A number position (will be applied to all axes).
 *		- A string position ('44', '100px', '+=90', etc ) will be applied to all axes
 *		- A jQuery/DOM element ( logically, child of the element to scroll )
 *		- A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
 *		- A hash { top:x, left:y }, x and y can be any kind of number/string like above.
 *		- A percentage of the container's dimension/s, for example: 50% to go to the middle.
 *		- The string 'max' for go-to-end. 
 * @param {Number, Function} duration The OVERALL length of the animation, this argument can be the settings object instead.
 * @param {Object,Function} settings Optional set of settings or the onAfter callback.
 *	 @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
 *	 @option {Number, Function} duration The OVERALL length of the animation.
 *	 @option {String} easing The easing method for the animation.
 *	 @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
 *	 @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
 *	 @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
 *	 @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
 *	 @option {Function} onAfter Function to be called after the scrolling ends. 
 *	 @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 * @return {jQuery} Returns the same jQuery object, for chaining.
 *
 * @desc Scroll to a fixed position
 * @example $('div').scrollTo( 340 );
 *
 * @desc Scroll relatively to the actual position
 * @example $('div').scrollTo( '+=340px', { axis:'y' } );
 *
 * @desc Scroll using a selector (relative to the scrolled element)
 * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );
 *
 * @desc Scroll to a DOM element (same for jQuery object)
 * @example var second_child = document.getElementById('container').firstChild.nextSibling;
 *			$('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
 *				alert('scrolled!!');																   
 *			}});
 *
 * @desc Scroll on both axes, to different values
 * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
 */
define("ftx/lib/jquery.scrollTo",["ftx/lib/jquery-current"],function(jQuery){(function($){var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings)};$scrollTo.defaults={axis:"xy",duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};$scrollTo.window=function(scope){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!isWin){return elem}var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return/webkit/i.test(navigator.userAgent)||doc.compatMode=="BackCompat"?doc.body:doc.documentElement})};$.fn.scrollTo=function(target,duration,settings){if(typeof duration=="object"){settings=duration;duration=0}if(typeof settings=="function"){settings={onAfter:settings}}if(target=="max"){target=9000000000}settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue){duration/=2}settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){if(target==null){return}var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is("html,body");switch(typeof targ){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length){return}case"object":if(targ.is||targ.style){toff=(targ=$(targ)).offset()}}$.each(settings.axis.split(""),function(i,axis){var Pos=axis=="x"?"Left":"Top",pos=Pos.toLowerCase(),key="scroll"+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css("margin"+Pos))||0;attr[key]-=parseInt(targ.css("border"+Pos+"Width"))||0}attr[key]+=settings.offset[pos]||0;if(settings.over[pos]){attr[key]+=targ[axis=="x"?"width":"height"]()*settings.over[pos]}}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)=="%"?parseFloat(val)/100*max:val}if(settings.limit&&/^\d+$/.test(attr[key])){attr[key]=attr[key]<=0?0:Math.min(attr[key],max)}if(!i&&settings.queue){if(old!=attr[key]){animate(settings.onAfterFirst)}delete attr[key]}});animate(settings.onAfter);function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings)})}}).end()};$scrollTo.max=function(elem,axis){var Dim=axis=="x"?"Width":"Height",scroll="scroll"+Dim;if(!$(elem).is("html,body")){return elem[scroll]-$(elem)[Dim.toLowerCase()]()}var size="client"+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size])};function both(val){return typeof val=="object"?val:{top:val,left:val}}})(jQuery)});define("ftx/lib/jquery.effects.core",["ftx/lib/jquery-current"],function(jQuery){jQuery.effects||(function($,undefined){$.effects={};$.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true}fx.elem.style[attr]="rgb("+Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0)+","+Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0)+","+Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)+")"}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3){return color}if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color)){return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)]}if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color)){return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55]}if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color)){return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)]}if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color)){return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)]}if(result=/rgba\(0, 0, 0, 0\)/.exec(color)){return colors.transparent}return colors[$.trim(color).toLowerCase()]}function getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=""&&color!="transparent"||$.nodeName(elem,"body")){break}attr="backgroundColor"}while(elem=elem.parentNode);return getRGB(color)}var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]=="string"){camelCase=key.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase()});newStyle[camelCa