/*steepto.comV3.0*/ if(!this.MarketGidJSON){ MarketGidJSON=function(){function f(n){return n<10?'0'+n:n;} Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+ f(this.getUTCMonth()+1)+'-'+ f(this.getUTCDate())+'T'+ f(this.getUTCHours())+':'+ f(this.getUTCMinutes())+':'+ f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case'string':return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c;} c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+ (c%16).toString(16);})+'"':'"'+value+'"';case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';} if(typeof value.toJSON==='function'){return stringify(value.toJSON());} a=[];if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||'null');} return'['+a.join(',')+']';} if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}else{for(k in value){if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}} return'{'+a.join(',')+'}';}} return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object'){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n;}}}} return filter(k,v);} if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;} throw new SyntaxError('parseJSON');}};}();} MarketGidBaseBlockC5654 = function(root_id, EY, fallback, containerId) { var self = this; this.EY = EY; this.root = this.EY.document.getElementById(root_id); this.containerId = containerId; this.DV = fallback; this.page = 1; this.iteration = 1; this.adlink = ''; this.template = ''; this.id = 5654; this.tickerShow = 0; this.UA = []; this.VX = {}; this.TK = {}; this.SK = []; this.HI = []; this.LY = []; this.QW = ""; this.RH = ""; this.PC = 0; this.IR = {}; this.XB = ""; this.YK = ""; this.RN = []; this.crashStep = 0; this.loadedDefault = false; this.teaserHashes = {}; this.teaserData = {}; this.NJ = 2; this.QH = 0; this.fakeMode = 0; this.requestParams = {}; this.infIds = []; this.EO = []; this.realIds = []; this.realUids = []; this.protocols = []; this.FX = []; this.EO['news4007'] = 'aa'; this.FX['news'] = 'aa'; this.RN['news'] = "mgid.com"; this.UQ = '4007'; this.WY = 'news'; this.infIds['news'] = '4007'; this.realIds['news'] = '4007'; this.realUids['news'] = '60100'; this.protocols['news'] = '5'; this.EO['goods2018'] = 'ac'; this.FX['goods'] = 'ac'; this.RN['goods'] = "mgid.com"; this.UQ = '2018'; this.WY = 'goods'; this.infIds['goods'] = '2018'; this.realIds['goods'] = '2018'; this.realUids['goods'] = '23734'; this.protocols['goods'] = '5'; self.templateTextNews = '<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald"><div class="mgbox3">{foreach} <div class="mgline3" > <div class="mgimg5"> <a {$target} {$href} > <img class="mgimg5" width="190" height="190" {$src}> </a> <span class="mgsrc5"> <a class="mgsrc" {$target} {$href} >READ MORE</a> </span> </div> <div class="mgtitle5"> <a {$target} {$href} >{$title}</a> </div> <div class="mgdesc5"> <a {$target} {$href} >{$desc}</a> </div> </div>{/foreach}</div>'; self.templateTextGoods = '<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald"><div class="mgbox3">{foreach} <div class="mgline3" > <div class="mgimg5"> <a {$target} {$href} > <img class="mgimg5" width="190" height="190" {$src}> </a> <span class="mgsrc5"> <a class="mgsrc" {$target} {$href} >READ MORE</a> </span> </div> <div class="mgtitle5"> <a {$target} {$href} >{$title}</a> </div> <div class="mgdesc5"> <a {$target} {$href} >{$desc}</a> </div> </div>{/foreach}</div>'; self.stylesNews = ' .mgbox3 { width:100%; padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; display: flex !important; flex-flow: row wrap; height: 255px; overflow: hidden; } .mgline3 { background: none repeat scroll 0 0 #FFFFFF; cursor: pointer; display: inline-block !important; margin:1px; padding: 0; vertical-align: top !important; width:194px; } img.mgimg5{background:#fff; border:1px solid #000; } .mgtitle5{ font-weight: 300; font-size: 18px; text-decoration: none; color: #3b3b3b } div.mgtitle5 { width:190px; margin: 5px auto 0 auto; height:41px; overflow:hidden; text-align: center; } .mgtitle5 *, .mgtitle5 cite{ color: #3b3b3b; } .mgtitle5 a { color: #369; font-family: Verdana,Tahoma,sans-serif; font-size: 16px; font-weight: 300 !important; text-decoration: none;} .mgdesc5 a { color: #666; font-family: Verdana,Tahoma,sans-seriff; font-size: 14px; font-weight: 300 !important; text-decoration: none;} div.mgimg5{ text-align: center; height:192px; } .mgimg5{ position:relative; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; } div.mcdesc{ text-align: center; } .mcdesc{ font-size: 12px; text-decoration: underline; color: #000000; } .mcdesc *, .mcdesc cite{ color: #000000; } .mgline3:hover .mgtitle5 a { text-decoration:underline; } .mgsrc5{ position:absolute; left:1px; text-align:left; bottom: 1px; padding:2px 2px 0 2px; height: 20px; background-color:rgba(0, 0, 0, 0.7); -webkit-border-bottom-left-radius: 10px; -moz-border-radius-bottomleft: 10px; border-bottom-left-radius: 10px; } a.mgsrc { line-height: 17px; text-decoration:none; color:#fff !important; padding:1px; font-weight:600; font-size:11px !important; font-family: \'Oswald\' !important; } .mgline { max-width: 192px; margin: 2px; }'; self.stylesGoods = ' .mgbox3 { width:100%; padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; display: flex !important; flex-flow: row wrap; height: 255px; overflow: hidden; } .mgline3 { background: none repeat scroll 0 0 #FFFFFF; cursor: pointer; display: inline-block !important; margin:1px; padding: 0; vertical-align: top !important; width:194px; } img.mgimg5{background:#fff; border:1px solid #000; } .mgtitle5{ font-weight: 300; font-size: 18px; text-decoration: none; color: #3b3b3b } div.mgtitle5 { width:190px; margin: 5px auto 0 auto; height:41px; overflow:hidden; text-align: center; } .mgtitle5 *, .mgtitle5 cite{ color: #3b3b3b; } .mgtitle5 a { color: #369; font-family: Verdana,Tahoma,sans-serif; font-size: 16px; font-weight: 300 !important; text-decoration: none;} .mgdesc5 a { color: #666; font-family: Verdana,Tahoma,sans-seriff; font-size: 14px; font-weight: 300 !important; text-decoration: none;} div.mgimg5{ text-align: center; height:192px; } .mgimg5{ position:relative; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; } div.mcdesc{ text-align: center; } .mcdesc{ font-size: 12px; text-decoration: underline; color: #000000; } .mcdesc *, .mcdesc cite{ color: #000000; } .mgline3:hover .mgtitle5 a { text-decoration:underline; } .mgsrc5{ position:absolute; left:1px; text-align:left; bottom: 1px; padding:2px 2px 0 2px; height: 20px; background-color:rgba(0, 0, 0, 0.7); -webkit-border-bottom-left-radius: 10px; -moz-border-radius-bottomleft: 10px; border-bottom-left-radius: 10px; } a.mgsrc { line-height: 17px; text-decoration:none; color:#fff !important; padding:1px; font-weight:600; font-size:11px !important; font-family: \'Oswald\' !important; } .mgline { max-width: 192px; margin: 2px; }'; self.isOurRedirector = '0'; self.webProtocol = "http:"; self.clickTracking = ""; self.KP = ''; self.funcBlocks = {}; self.teaserData = {}; this.PI = function(str,limit) { if (str.length<=limit) return str; var word=new Array(); word=str.split(" "); var ret=word[0] + ' '; var test; for (i=1;i<word.length;i++){ test=ret+word[i]; if (test.length>limit) return ret+'...'; else ret+=word[i] + ' '; } return str; }; this.VP = function(str,limit){ var word=new Array(); var i; var ret=''; word=str.split(" "); for (i=0;i<word.length;i++){ if (word[i].length>limit && word[i].search(/&\w+;/)<0) ret+=word[i].substr(0,limit) + ' ' + word[i].substr(limit) + ' '; else ret+=word[i] + ' '; } return ret; }; this.HE = function(title) { if (this.KP=='news') { title=this.VP(title,15); title=this.PI(title,60); } else { title=this.VP(title,15); title=this.PI(title,60); } return title; }; this.IJ = function(desc) { if (this.KP=='news') { desc=this.VP(desc,15); desc=this.PI(desc,25); } else { desc=this.VP(desc,15); desc=this.PI(desc,25); } return desc; }; this.isArray = function(o) { return Object.prototype.toString.call(o) === '[object Array]'; }; self.fixGetElementsByClassNameHandler = function(el) { if (el.getElementsByClassName == undefined) { el.getElementsByClassName = function(cl) { var retnode = []; var myclass = new RegExp('\\b'+cl+'\\b'); var elem = this.getElementsByTagName('*'); for (var i = 0; i < elem.length; i++) { var classes = elem[i].className; if (myclass.test(classes)) retnode.push(elem[i]); } return retnode; }; } }; this.JP = function() { if (!this.DV && this.EY.document.getElementById("MarketGidPreloadC" + this.containerId)) { this.EY.document.getElementById("MarketGidPreloadC" + this.containerId).style.display = 'none'; } else if (this.DV && this.PC == 0) { this.root.innerHTML = ""; } }; this.MarketGidLoadNews = function(json){ this.JP(); if (self.fakeMode == 0) { for (var i = 0; i < self.SK.length; i++) { self[self.SK[i]](); } } if (this.isArray(json)){ if (json.length==0) { if (!this.forceShow) { this.blockType = this.blockType == 'news' ? 'goods' : 'news'; var type = this.blockType; var id = this.realIds[type]; this.blockId = id; this.subdomain = this.EO[type + id]; this.VX["mg_id"] = id; this.VX["mg_type"] = type; this.setCookie(); this.forceShow = true; this.SV(this.forceShow); } return; } if (self.KP == "news") { var template = self["templateFuncNews"](self, json); } else { var template = self["templateFuncGoods"](self, json); } if (this.root && template) { if ('parseAdvertLink' in self) { template = self.parseAdvertLink(template); } if (this.DV && this.PC == 0) { this.root.innerHTML = "" } this.root.innerHTML += this.XB + template + this.YK; } } else { if (this.root && this.PC==0) { this.root.innerHTML=''; return; } } this.VX["page"] = this.page; this.VX['time'] = (new Date()).getTime(); this.setCookie(); var hrefs = this.root.getElementsByTagName("a"); for (var i = 0; i < hrefs.length; i++) { } if (this.KP=='news') { this.ME(self.stylesNews); } else { this.ME(self.stylesGoods); } this.PC++; if (self.fakeMode == 0) { for (var i = 0; i < self.HI.length; i++) { self[self.HI[i]](); } } else { if (typeof(self.responsiveInit) == "function") { self.responsiveInit(); } } }; this.ZT = function() { var d = this.EY.document, w = this.EY, dE = 'documentElement', cH = 'clientHeight', cW = 'clientWidth', iH = 'innerHeight', iW = 'innerWidth', sH = 'scrollHeight', sW = 'scrollWidth', oH = 'offsetHeight', oW = 'offsetWidth', oL = 'offsetLeft', oT = 'offsetTop', sT = 'scrollTop', sL = 'scrollLeft'; if (w[iW]) { return {"c": w[iH], "s": w.pageYOffset}; } else if (d[dE] && d[dE][cW]) { return {"c": d[dE][cH], "s": d[dE][sT]}; } else if (d.body[cW]) { return {"c": d.body[cH], "s": d.body[sT]}; } return 0; }; this.MarketGidRedirectComposite = function() { if (arguments.length == 5) { var arr = arguments[4]; } else { var arr = arguments[0]; } if (self.crashWorkerTimeout) { clearTimeout(self.crashWorkerTimeout); } if (self.QH >= self.NJ || self.crashStep == 2) { self.KP = self.blockType; self.MarketGidLoadNews(arr); } else { var rType = self.blockType == 'news' ? 'goods' : 'news'; var rId = self.realIds[rType]; if (self.EO[rType + rId]) { if (self.crashStep == 1) self.crashStep++; self.blockId = rId; self.blockType = rType; self.subdomain = self.EO[rType + rId]; self.VX["mg_id"] = rId; self.VX["mg_type"] = rType; self.setCookie(); self.QW = '//'+self.subdomain+'-'+self.blockType.substr(0,1)+'b.'+self.RN[self.blockType]+'/'; self.SV(self.QH >= (self.NJ - 1)); self.QH++; } } }; this.crashWorker = function() { if (MarketGidInfC5654.template == '' && !MarketGidInfC5654.loadedDefault) { MarketGidInfC5654.crashStep = 1; MarketGidInfC5654.MarketGidRedirectComposite([]); } }; this.renderItem = function(n, callbackText, type) { if (self.isArray(n)) { if (type == "News") { var p = {}; p.source = n[0]; p.id = n[1]; p.title = n[3]; p.desc = n[4]; p.mirror = n[5] ? n[5] : self.EEs[self.LD]; p.hash = n[6]; p.other = n[7]; } else { var p = {}; p.source = n[0]; p.id = n[1]; p.title = n[3]; p.desc = n[4]; p.mirror = self.EEs[self.LD]; p.key = n[6]; p.price = n[7].replace(".00", ""); p.priceold = n[8].replace(".00", ""); p.discount = p.priceold.replace(new RegExp('[^0-9.]'), '') == '' ? '' : Math.floor((1 * /\d+(?:\.\d+)?/.exec(p.priceold) - 1 * /\d+(?:\.\d+)?/.exec(p.price)) * 100 / /\d+(?:\.\d+)?/.exec(p.priceold)) + '%'; p.hash = n[9]; p.other = n[10]; var titleLower = p.title.toLowerCase(); var descLower = p.desc.toLowerCase(); var replicWords = ["копия", "подделка", "реплика", "как оригинал"]; var replicInsertWords = ["Копия. ", "Реплика. "]; if (n[5] == '1') { p.isReplic = true; for (var i = 0; i < replicWords.length; i++) { if (self.HE(titleLower).indexOf(replicWords[i]) > -1 || self.IJ(descLower).indexOf(replicWords[i]) > -1) { p.isReplic = false; break; } } } else { p.isReplic = false; } } self.teaserData[p.hash] = n; self.teaserData[p.hash]['img'] = p.other["i"]; if (!(p.id in self.IR) && p.id != '') { if (typeof(p.hash) !== 'undefined' && typeof(p.id !== 'undefined')) { self.teaserHashes[p.id] = p.hash; } self.IR[p.id] = 1; var href = self.clickTracking + self.webProtocol; if (typeof(p.other['l']) != 'undefined') { href += p.other['l']; } else { if (type == "News") { href += '//' + p.mirror + '/' + (self.isOurRedirector == '1' ? 'rnews' : 'pnews') + '/'; href += p.id + '/i/' + '4007' + '/pp/' + self.iteration + '/' + self.page + '/?h=' + encodeURIComponent(p.hash); } else { href += '//' + p.mirror + '/ghits/'; href += p.id + '/i/' + '2018' + '/' + self.LD + '' + '/pp/' + self.iteration + '/' + self.page + '/' + p.key + '?h=' + encodeURIComponent(p.hash); } } var addClasses = []; addClasses.push('teaser-' + p.id); if ('l' in p.other && null != p.other.l.match(/[\?|&]u=/)) { addClasses.push('dsp'); } var vars = [ [/\{\*.*?\*\}/, ''], [/\{\$href\}/g, 'href="' + href + '"'], [/\{\$pmc_item\}/, self.id], [/\{\$target\}/g, 'target="_blank"'], [/(class\=\"[^+]?)(mgline)([^+]?\")/, '$1$2 ' + addClasses.join(' ') + '$3'], [/\{\$source\}/g, p.source], [/\{\$src\}/g, (type == 'news' ? 'width="200" height="200"' : 'width="200" height="200"') + ' src="'+ p.other["i"]+'"'], [/\{\$title\}/g, self.HE(p.title)], [/\{\$desc\}/g, self.IJ(p.desc)], [/\{\$iteration\}/g, self.iteration], [/\$iteration/g, self.iteration], [/this\.iteration/g, self.iteration], [/\{\$price\}/g, p.price], [/\{\$priceold\}/g, p.priceold], [/\{\$discount\}/g, p.discount], [/\{if \$price\}/g, "{if '' != p.price.replace(new RegExp('[^0-9.]'), '')}"], [/\{if !\$price\}/g, "{if '' == p.price.replace(new RegExp('[^0-9.]'), '')}"], [/\{if \$priceold\}/g, "{if '' != p.priceold.replace(new RegExp('[^0-9.]'), '')}"], [/\{if \$price != " "\}/g, "{if p.price != ' '}"], [/\{if \$price == " "\}/g, "{if p.price == ' '}"], [/\$priceold/g, p.priceold], [/\$price/g, p.price], [/\{if \$rep\}/g, "{if p.isReplic}"] ]; for (var i = 0 ; i < vars.length; i++) { callbackText = callbackText.replace(vars[i][0], vars[i][1]); } while (true) { var x = callbackText; var r = /\{if ([^\}]*?)\}(((?!\{(?:\/)?if).)*)\{\/if\}/g; callbackText = callbackText.replace(r, function(str, p1, p2) { if (eval(p1)) { return p2; } else { return ""; } }); if (x == callbackText) break; } this.iteration++; return callbackText; } else { self.IR[p.id]++; return ""; } } }; this.generateTemplate = function(templateText, type) { self["templateText" + type] = templateText; self["templateFunc" + type] = function(inf, json) { var parts = /(.*)?\{foreach\}(.*)?\{\/foreach\}(.*)?/.exec(self["templateText" + type]); var template = typeof(parts[1]) != 'undefined' ? parts[1] : ''; for (var i = 0; i < json.length; i++) { template += inf.renderItem(json[i], parts[2], type); } template += typeof(parts[3]) != 'undefined' ? parts[3] : ''; return template; }; return true; }; this.init = function() { if (this.root) { this.getCookie(); var cookie = this.VX["page"]; this.UA = this.root.getElementsByTagName('a'); var pageOffset = (this.EY.MarketGidPageOffset ? parseInt(this.EY.MarketGidPageOffset) : 0); var tmpType = this.VX["mg_type"] ? this.VX["mg_type"] : this.WY; var pagesCountNews = 20; var pagesCountGoods = 20; var pagesCount = (tmpType == 'news') ? pagesCountNews : pagesCountGoods; if(cookie!=null&&parseInt(cookie)<pagesCount&&parseInt(cookie)>0) this.page=parseInt(cookie)+1; else if (parseInt(cookie)>(pagesCount-1)||parseInt(cookie)<1) this.page=1+pageOffset; if ((new Date()).getTime() - (this.VX['time']!=undefined ? this.VX['time'] : 0) >= 6e5) this.page = 1+pageOffset; if (!this.page) this.page=1; this.pageUnlim = this.page - 1; this.VX["page"] = this.page; this.setCookie(); if (!this.EY.document.cookie) { var dt = new Date(); this.page = dt.getSeconds()%pagesCount+1; } this.blockId = this.VX["mg_id"] ? this.VX["mg_id"] : this.UQ; this.blockType = this.VX["mg_type"] ? this.VX["mg_type"] : this.WY; if (this.EO[this.blockType + this.blockId]) this.subdomain = this.EO[this.blockType + this.blockId]; else { this.subdomain = this.FX[this.WY]; this.blockId = this.UQ; this.blockType = this.WY; } this.QW = '//'+this.subdomain+'-'+this.blockType.substr(0,1)+'b.'+this.RN[this.blockType]+'/'; var protocol = self.EY.document.location.protocol; self.webProtocol = protocol.indexOf("http") != -1 ? protocol : "http:"; self.clickTracking = typeof(self.EY.MGClickTracking) != 'undefined' ? self.EY.MGClickTracking : ""; if (!self.generateTemplate(self.templateTextNews, 'News') || !self.generateTemplate(self.templateTextGoods, 'Goods')) { return; } for (var i=0; i<this.LY.length; i++) { this[this.LY[i]](); } } }; this.SV = function(forceShow, refresh) { var script = this.EY.document.createElement('script'); script.type = 'text/javascript'; script.charset = 'utf-8'; var uid = this.blockType=='news' ? "60100" : "23734"; if (forceShow) { script.src = '//'+this.subdomain+'-'+this.blockType.substr(0,1)+'b.'+this.RN[this.blockType]+'/fs/u'+uid+'/'+this.blockId+'/' + this.page; } else { script.src = this.QW + 'u' + uid + '/' + this.blockId + '/' + this.page; } if (refresh) { self.requestParams.rsh = "rsh=1"; } if (this.EY.MGi != undefined) { self.requestParams.geo = "geo=" + this.EY.MGi; } self.requestParams.pv = "pv=" + this.protocols[this.blockType]; self.requestParams.cbuster = "cbuster=" + (this.EY.MG_CacheBuster ? this.EY.MG_CacheBuster : ((new Date().getTime()) + '' + Math.floor((Math.random() * 1000000000) + 1))); if (script.src.indexOf('?') == -1) { script.src += '?'; } else { script.src += '&'; } var params = []; for (var key in self.requestParams) { params.push(self.requestParams[key]); } params.push('ref=' + encodeURIComponent(this.EY.document.referrer)); if (self.EY.self !== self.EY.top) { params.push('iframe=1'); } script.src += params.join("&"); (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(script); }; this.ME = function(style, container) { style = style.replace(/((?:^|}|,)\W*)((?:\w+)?\.(?:mc|mg)[\-\w]+)/g, "$1" + this.getMainCssSelector() + " $2"); if (style == "") return; if (!container) { var MGst = container ? container : this.EY.document.createElement('style'); MGst.className = 'MarketGidC5654'; MGst.type = 'text/css'; (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(MGst); if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { MGst.appendChild(this.EY.document.createTextNode(style)); }; } else { var MGst = container; MGst.className = 'MarketGidC5654'; if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { while (MGst.firstChild) { MGst.removeChild(MGst.firstChild); } MGst.appendChild(this.EY.document.createTextNode(style)); }; } }; this.start = function() { if (self.root && self.PC == 0) { self.SV(); } }; this.addEvent = function(elem, type, handler) { if (elem.addEventListener) { elem.addEventListener(type, handler, false) } else { elem.attachEvent('on' + type, handler) } }; this.getMainCssSelector = function() { return "#" + (this.realRoot ? this.realRoot.id : this.root.id); } }; var mgCanLoad5654 = false; var mgFallback5654 = false; if (document.getElementById("MG_ID")) mgCanLoad5654 = true; if (document.getElementById("MarketGidComposite5654")) { mgCanLoad5654 = true; mgFallback5654 = true; } if (mgCanLoad5654) { if (!mgFallback5654) { var rootId5654 = document.getElementById("MG_ID").innerHTML; var div5654 = parent.window.document.createElement('div'); div5654.id = "MarketGidComposite5654"; parent.window.document.getElementById("MarketGidScriptRootC" + rootId5654).appendChild(div5654); MarketGidInfC5654 = new MarketGidBaseBlockC5654("MarketGidComposite5654", parent.window, false, rootId5654); } else { MarketGidInfC5654 = new MarketGidBaseBlockC5654("MarketGidComposite5654", window, true, 0); } MarketGidCCookieBlock5654 = function() { var self = this; self.funcBlocks["Cookie"] = "MarketGidCCookieBlock5654"; this.storageName = "MarketGidStorage" + (this.EY.MarketGidPageOffset ? this.EY.MarketGidPageOffset : ""); this.ZQ = function() { var matches = this.EY.document.cookie.match(new RegExp("(?:^|; )" + this.storageName + "=([^;]*)")); var res = {}; if (matches) { try { res = MarketGidJSON.parse(decodeURIComponent(matches[1])); } catch (e) {}; } return res; }; this.getCookie = function() { var value = this.ZQ(); if (value["C5654"]!=undefined) { this.VX = value["C5654"]; } else this.VX = {}; if (value["0"]!=undefined) { this.TK = value["0"]; } else this.TK = {}; }; this.setCookie = function() { var totalCookie = this.ZQ(); totalCookie["C5654"] = this.VX; totalCookie["0"] = this.TK; var value = encodeURIComponent(MarketGidJSON.stringify(totalCookie)); this.EY.document.cookie = this.storageName+"="+value+";path=/"; }; }; MarketGidCCookieBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCSubnetsBlock5654 = function() { var self = this; self.funcBlocks["Subnets"] = "MarketGidCSubnetsBlock5654"; this.LY.push("BF"); this.LD = ""; this.EEs = {}; this.EEsImages = {}; this.EEsAdvert = {}; this.EEsAdLinkBlocks = {}; this.EEsUtm = {}; this.subnetDashboardDomains = {}; this.EEs['0'] = 'steepto.com'; this.EEsImages['0'] = 'mgid.com'; this.EEsAdLinkBlocks['0'] = '<div class="mg_addad%id"><a href="http://mgid.com/advertisers%utm%id" target="_blank"> by <img src="//mgid.com/images/mgid_logo_mini_43x20.png" alt="Mgid" title="Mgid"></a></div><style type="text/css">div.mg_addad%id{text-align: right; opacity: 0.5;} div.mg_addad%id:hover{opacity: 1} div.mg_addad%id a{color: #000000; font:normal 10px Myriad Pro; text-decoration: none;} div.mg_addad%id img{margin-bottom: -5px; border:0px}</style>'; this.EEsUtm['0'] = '?utm_source=widget_inf&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['0'] = '//dashboard.mgid.com'; this.EEs['1'] = 'fem.mgid.com'; this.EEsImages['1'] = 'mgid.com'; this.EEsAdLinkBlocks['1'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id"><a href="http://mgid.com/advertisers%utm%id" target="_blank"> by <img style="display: inherit!important;width: auto!important;" src="//mgid.com/images/mgid_logo_mini_43x20.png" alt="Mgid" title="Mgid"></a></div></div><style>.mghead{font-weight:700;font-size:14px;text-transform:uppercase;text-align:left;font-family: "Open Sans", sans-serif;color:#4555a7;display:block;margin:0 0 0px 5px;float:left;}.mgheader{ display: table !Important; width: 100% !important;}div.mg_addad%id{text-align: right; opacity: 0.5;margin-right: 10px} div.mg_addad%id:hover{opacity: 1} div.mg_addad%id a{color: #000000; font:normal 10px Myriad Pro; text-decoration: none;} div.mg_addad%id img{margin-bottom: -5px; border:0px}</style>'; this.EEsUtm['1'] = '?utm_source=widget_fem&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['1'] = '//dashboard.mgid.com'; this.EEs['2'] = 'adskeeper.co.uk'; this.EEsImages['2'] = 'adskeeper.co.uk'; this.EEsAdLinkBlocks['2'] = '<div class="mg_addad%id"><a href="http://adskeeper.co.uk/#1" target="_blank"><img src="//adskeeper.co.uk/logo_adskeeper_s.png" alt="Adskeeper" title="Adskeeper"></a></div><style type="text/css">div.mg_addad%id{text-align: right; opacity: 0.5;} div.mg_addad%id:hover{opacity: 1} div.mg_addad%id a{color: #000000; font:normal 10px Myriad Pro; text-decoration: none;} div.mg_addad%id img{margin-bottom: -5px; border:0px}</style>'; this.EEsUtm['2'] = '?utm_source=widget_adskeeper&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['2'] = '//dashboard.adskeeper.co.uk'; this.EEs['3'] = 'mgid.com'; this.EEsImages['3'] = 'mgid.com'; this.EEsAdLinkBlocks['3'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id"><a href="http://mgid.com/advertisers%utm%id" target="_blank"> by <img style="display: inherit!important;width: auto!important;" src="//mgid.com/images/mgid_logo_mini_43x20.png" alt="Mgid" title="Mgid"></a></div></div><style>.mghead{font-weight:700;font-size:14px;text-transform:uppercase;text-align:left;font-family: "Open Sans", sans-serif;color:#4555a7;display:block;margin:0 0 0px 5px;float:left;}.mgheader{ display: table !Important; width: 100% !important;}div.mg_addad%id{text-align: right; opacity: 0.5;margin-right: 10px} div.mg_addad%id:hover{opacity: 1} div.mg_addad%id a{color: #000000; font:normal 10px Myriad Pro; text-decoration: none;} div.mg_addad%id img{margin-bottom: -5px; border:0px}</style>'; this.EEsUtm['3'] = '?utm_source=widget&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['3'] = '//'; this.EEs['4'] = 'mgid.com'; this.EEsImages['4'] = 'mgid.com'; this.EEsAdLinkBlocks['4'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id"><a href="http://mgid.com/advertisers%utm%id" target="_blank"> by <img style="display: inherit!important;width: auto!important;" src="//mgid.com/images/mgid_logo_mini_43x20.png" alt="Mgid" title="Mgid"></a></div></div><style>.mghead{font-weight:700;font-size:14px;text-transform:uppercase;text-align:left;font-family: "Open Sans", sans-serif;color:#4555a7;display:block;margin:0 0 0px 5px;float:left;}.mgheader{ display: table !Important; width: 100% !important;}div.mg_addad%id{text-align: right; opacity: 0.5;margin-right: 10px} div.mg_addad%id:hover{opacity: 1} div.mg_addad%id a{color: #000000; font:normal 10px Myriad Pro; text-decoration: none;} div.mg_addad%id img{margin-bottom: -5px; border:0px}</style>'; this.EEsUtm['4'] = '?utm_source=widget&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['4'] = '//dashboard.mgid.com'; this.LY.push("BF"); var informerData = []; informerData.push({"id": "4007", "etalonId": "0", "protocol": "5", "type": "News", "subnet": "0"}); informerData.push({"id": "2018", "etalonId": "0", "protocol": "5", "type": "Goods", "subnet": "0"}); this.BF = function() { for (var i = 0; i < informerData.length; i++) { var tickerId = informerData[i].etalonId != "0" && informerData[i].protocol == "4" ? informerData[i].etalonId : informerData[i].id; if ((informerData[i].subnet !== '1') ^ ('0' === '1')) { (function(type) { self.EY["MarketGidLoad" + type + tickerId] = function(json) { self.KP = type.toLowerCase(); self.LD = '0'; self["MarketGidLoadNews"](json); }; })(informerData[i].type); if (informerData[i].protocol == "4") { self.EY["MarketGidRedirectComposite" + tickerId] = function() { self.LD = '0'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } else { self.EY["MarketGidRedirectComposite5654"] = function() { self.LD = '0'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } } if ((informerData[i].subnet !== '1') ^ ('1' === '1')) { (function(type) { self.EY["MarketGidLoad" + type + tickerId] = function(json) { self.KP = type.toLowerCase(); self.LD = '1'; self["MarketGidLoadNews"](json); }; })(informerData[i].type); if (informerData[i].protocol == "4") { self.EY["MarketGidRedirectComposite" + tickerId] = function() { self.LD = '1'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } else { self.EY["MarketGidRedirectComposite5654"] = function() { self.LD = '1'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } } if ((informerData[i].subnet !== '1') ^ ('2' === '1')) { (function(type) { self.EY["AdskeeperLoad" + type + tickerId] = function(json) { self.KP = type.toLowerCase(); self.LD = '2'; self["MarketGidLoadNews"](json); }; })(informerData[i].type); if (informerData[i].protocol == "4") { self.EY["AdskeeperRedirectComposite" + tickerId] = function() { self.LD = '2'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } else { self.EY["AdskeeperRedirectComposite5654"] = function() { self.LD = '2'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } } if ((informerData[i].subnet !== '1') ^ ('3' === '1')) { (function(type) { self.EY["FeedboxLoad" + type + tickerId] = function(json) { self.KP = type.toLowerCase(); self.LD = '3'; self["MarketGidLoadNews"](json); }; })(informerData[i].type); if (informerData[i].protocol == "4") { self.EY["FeedboxRedirectComposite" + tickerId] = function() { self.LD = '3'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } else { self.EY["FeedboxRedirectComposite5654"] = function() { self.LD = '3'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } } if ((informerData[i].subnet !== '1') ^ ('4' === '1')) { (function(type) { self.EY["MGidLoad" + type + tickerId] = function(json) { self.KP = type.toLowerCase(); self.LD = '4'; self["MarketGidLoadNews"](json); }; })(informerData[i].type); if (informerData[i].protocol == "4") { self.EY["MGidRedirectComposite" + tickerId] = function() { self.LD = '4'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } else { self.EY["MGidRedirectComposite5654"] = function() { self.LD = '4'; self["MarketGidRedirectComposite"].apply(self, [].slice.call(arguments, 0)); }; } } } }; }; MarketGidCSubnetsBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCUtilsBlock5654 = function() { var self = this; self.funcBlocks["Utils"] = "MarketGidCUtilsBlock5654"; self.utils = {}; /** * Возвращает кроссбраузерно значения скролла * * @returns {{top: *, left: *}} * */ self.utils.getScroll = function() { return { top: self.EY.document.body.scrollTop || self.EY.document.documentElement.scrollTop || 0, left: self.EY.document.body.scrollLeft || self.EY.document.documentElement.scrollLeft || 0 } }; /** * Возвращает позицию элемента * @param element * @param {boolean} withScroll Учитывать ли скролл для top и left (т.е. показывать от верха страницы, а не от верха окна) * * @returns {{top: *, bottom: *, left: *, right: *, height: *, width: *}} * */ self.utils.getRect = function(element, withScroll) { var rect = element.getBoundingClientRect(); var toReturn = { top: rect.top, bottom: rect.bottom, left: rect.left, right: rect.right, height: (rect.height ? rect.height : rect.bottom - rect.top), width: (rect.width ? rect.width : rect.right - rect.left) }; if (withScroll) { var scroll = self.utils.getScroll(); toReturn.top += scroll.top; toReturn.bottom += scroll.top; toReturn.left += scroll.left; toReturn.right += scroll.left; } return toReturn; }; /** * Возвращает размеры видимой области страницы * * @returns {{width: (Number|number), height: (Number|number)}} * */ self.utils.getViewportSize = function() { return { width: (self.EY.innerWidth || self.EY.document.documentElement.clientWidth), height: (self.EY.innerHeight || self.EY.document.documentElement.clientHeight) }; } }; MarketGidCUtilsBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCMgqBlock5654 = function() { var self = this; self.funcBlocks["Mgq"] = "MarketGidCMgqBlock5654"; this.isLongCheck = false; this.LY.push("mgqInit"); this.mgqWorker = function() { var length = self.EY._mgq.length; var pool = self.EY._mgq.slice(0); for (var i = 0; i < length; i++) { var el = pool[i]; if (typeof(self.EY[el[0]]) == 'function') { self.EY[el[0]].apply(self.EY, el.slice(1)); self.EY._mgq.splice(i, 1); } } if (!self.EY._mgqi) { self.EY._mgqi = self.EY.setInterval(function() { self.mgqWorker(); }, 5); } if (!self.isLongCheck) { if ((new Date()).getTime() - self.EY._mgqt > 10000) { self.isLongCheck = true; self.EY.clearInterval(self.EY._mgqi); self.EY._mgqi = self.EY.setInterval(function() { self.mgqWorker(); }, 100); } } }; this.mgqInit = function() { self.EY._mgq = self.EY._mgq || []; if (typeof(self.EY._mgqp) == 'undefined') { self.EY._mgqp = self.mgqWorker; self.EY._mgqt = (new Date()).getTime(); self.mgqWorker(); } }; }; MarketGidCMgqBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCAntifraudBlock5654 = function() { var self = this; self.funcBlocks["Antifraud"] = "MarketGidCAntifraudBlock5654"; this.HI.push("JT"); this.LY.push("initAntiFraud"); this.MX = ""; this.XT = ""; this.YM = ""; this.KA = ""; this.ZB = ""; this.KE = ""; this.QI = ""; this.II = ""; this.initAntiFraud = function() { if (this.TK["svspr"]==undefined) { this.YM = this.BA(this.EY.document.referrer,500); this.TK["svspr"] = this.YM; this.setCookie(); } else this.YM = this.TK["svspr"]; if (this.TK["svsds"]!=undefined) { this.KA = this.TK["svsds"]; this.KA++; } else this.KA = 1; this.TK["svsds"] = this.KA; this.setCookie(); var D=new Date(); this.MX = D.getTime() + '5654' + Math.floor(Math.random()*100) + '' + (2*Math.floor(Math.random()*4)+1); this.II = D.getTime(); if (this.TK["TejndEEDj"]==undefined) { this.TK["TejndEEDj"] = this.x64String(this.MX); this.setCookie(); } }; this.x64String = function(s) { s=s.toString(); s=unescape(encodeURIComponent(s)); var b64c='\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x24\x54\x55\x56\x57\x58\x59\x5a\x61\x62\x63\x64\x65\x2a\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d'; var b64e=''; var c1,c2,c3,c4,e1,e2,e3,e4; for (var i=0; i<s.length;) { c1=s.charCodeAt(i++); c2=2<<5; e1=c1>>(c2/32); c3=s.charCodeAt(i++); e2=((c1&3)<<(c2/16))|(c3>>(c2/16)); c4=s.charCodeAt(i++); e3=isNaN(c3)?c2:(((c3&15)<<(c2/32))|(c4>>(c2-58))); e4=isNaN(c4)?c2:(c4&(c2-1)); b64e+=b64c.charAt(e1)+b64c.charAt(e2)+b64c.charAt(e3)+b64c.charAt(e4); } return b64e; }; this.RS = function(n) { return n?Math.round(n).toString(16):''; }; this.BA = function(str,n){ return str.length > n ? str.substring(0,n) : str; }; this.backHref = function() { if (MarketGidInfC5654.ZB && MarketGidInfC5654.KE) MarketGidInfC5654.KE['\x68\x72\x65\x66']=MarketGidInfC5654.ZB; MarketGidInfC5654.QI=""; }; this.getCoordsElementOfPage = function(element) { var offsetLeft = 0, offsetTop = 0; do { offsetLeft += element.offsetLeft; offsetTop += element.offsetTop; } while (element = element.offsetParent); return {"x":offsetLeft, "y":offsetTop}; }; this.getCoordsClickOfPage = function(e) { var x = 0, y = 0; if (!e) e = this.EY.event; if (e.pageX || e.pageY) { x = e.pageX; y = e.pageY; } else if (e.clientX || e.clientY) { x = e.clientX + (this.EY.document.documentElement.scrollLeft || this.EY.document.body.scrollLeft) - this.EY.document.documentElement.clientLeft; y = e.clientY + (this.EY.document.documentElement.scrollTop || this.EY.document.body.scrollTop) - this.EY.document.documentElement.clientTop; } return {"x":x, "y":y}; }; this.AC = function() { return window.navigator.javaEnabled() ? 1 : 0; }; this.XG = function() { var flashEnabled = 0; if (typeof(navigator.plugins)!="undefined" && typeof(navigator.plugins["Shockwave Flash"])=="object") { flashEnabled = 1; } else if (typeof window.ActiveXObject != "undefined") { try { if (new ActiveXObject("ShockwaveFlash.ShockwaveFlash")) { flashEnabled = 1; } } catch(e) {}; } return flashEnabled; }; this.addParams = function(event, link) { if (link.className && link.className.indexOf("mg_addad")>=0) return; var D=new Date(); var e=event||this.EY.event; var coordClickOfPage = this.getCoordsClickOfPage(e); var b=link.getBoundingClientRect(); var coordLinkOfPage = this.getCoordsElementOfPage(link); var d=this.EY.document; if (!(link.href.indexOf('pnews') != -1 || link.href.indexOf('ghits') != -1)) return; var MG_p=/pp\/([0-9]+)\/([0-9]+)\/(k\/)?(?:s\/\d+\/(?:n\/\d+\/(?:x\/\d+\/)?)?)?#k([0-9]+)\??(\S*)/; var MG_nn=MG_p.exec(link.href); this.ZB=link.href; this.KE=link; if (MG_nn) link.href = link.href.replace(MG_p, 'pp/' + MG_nn[1] + '/' + MG_nn[2] + '/' +(MG_nn[3]?MG_nn[3]:'') + (MG_nn[5]?'?'+MG_nn[5]+'&':'?') + 'k=' + MG_nn[4] + 'f'); else { var index = link.href.indexOf('?k=5654f'); if (index != -1) { link.href = link.href.substr(0, index) + '?k=5654f'; } else { index = link.href.indexOf('&k=5654f'); if (index != -1) { link.href = link.href.substr(0, index) + '&k=5654f'; } else { index = link.href.indexOf('?'); if (index != -1) { link.href += '&k=5654f'; } } } } var MG = 0; if (this.EY.opera) MG+=1; if (this.EY.opera&&this.EY.opera.buildNumber) MG+=2; if (this.EY.document.all||this.EY.MSStream) MG+=4; if (!this.EY.btoa||this.EY.navigator.msPointerEnabled) MG+=8; if (this.EY.chrome) MG+=16; if (this.EY.mozInnerScreenX!=undefined) MG+=32; if (!this.EY.external) MG+=64; var TO=''; for (var i=1;i<=Math.ceil((MG+1)/68)*31;i++) { if((i%26==0)||((i%26==6)&&(((i%26)+5)%11==0)))continue; TO+=(i==1?'':String.fromCharCode(102))+String.fromCharCode(96+(i%26))+String.fromCharCode(83); var NG=''; if(i>31)break; switch(i){ case 1:NG=this.MX;break; case 2:NG=this.RS(b.bottom);break; case 3:NG=this.RS(this.II);break; case 4:NG=this.RS(D.getTime());break; case 5:NG=this.RS(d.body.clientheight);break; case 7:NG=this.RS(e.clientX);break; case 8:NG=this.RS(e.clientY);break; case 9:NG=this.RS(b.left);break; case 11:NG=this.RS(b.top);break; case 12:NG=this.RS(d.body.clientheight-e.clientY);break; case 13:NG=this.RS(b.right-b.left);break; case 14:NG=this.RS(b.bottom-b.top);break; case 15:NG=this.QI;break; case 16:NG=this.RS(e.clientY);break; case 17:NG=this.RS(MG);break; case 18:NG=this.RS(link['\x64\x61\x74\x61\x2d\x72\x65\x6C']);break; case 19:NG=this.BA(d.location.href,500);break; case 20:NG=this.BA(d.referrer,500);break; case 21:NG=this.YM;break; case 22:NG=this.RS(this.KA);break; case 23:NG=this.RS(coordClickOfPage.x);break; case 24:NG=this.RS(coordClickOfPage.y);break; case 25:NG=this.RS(coordLinkOfPage.x);break; case 27:NG=this.RS(coordLinkOfPage.y);break; case 28:NG=this.RS(this.AC());break; case 29:NG=this.RS(this.XG());break; case 30:NG=this.RS(window.screen.width);break; case 31:NG=this.RS(window.screen.height);break; } TO+=this.x64String(NG); } link['\x64\x61\x74\x61\x2d\x72\x65\x6C']=''; link['\x68\x72\x65\x66']=link['\x68\x72\x65\x66']+encodeURIComponent(TO); }; this.linkClick = function(event) { MarketGidInfC5654.addParams(event, this); MarketGidInfC5654.EY.setTimeout(MarketGidInfC5654.backHref,100); return true; }; this.linkMouseOver = function(event) { MarketGidInfC5654.addParams(event, this); var v=parseInt(this['\x64\x61\x74\x61\x2d\x72\x65\x6C'])?parseInt(this['\x64\x61\x74\x61\x2d\x72\x65\x6C']):0; if (v%2!=1) this['\x64\x61\x74\x61\x2d\x72\x65\x6C']=v+1; }; this.TX = function(event) { var v=parseInt(this['\x64\x61\x74\x61\x2d\x72\x65\x6C'])?parseInt(this['\x64\x61\x74\x61\x2d\x72\x65\x6C']):0; if ((v>>1)%2!=1) this['\x64\x61\x74\x61\x2d\x72\x65\x6C']=v+2; }; this.JT = function() { if (this.root) { this.UA = this.root.getElementsByTagName('a'); } for (var MG_l in this.UA) { this.UA[MG_l].onmouseup = this.linkClick; this.UA[MG_l].onmouseover = this.linkMouseOver; this.UA[MG_l].onmousemove = this.TX; } }; }; MarketGidCAntifraudBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCDiscountBlock5654 = function() { var self = this; self.funcBlocks["Discount"] = "MarketGidCDiscountBlock5654"; this.HI.push("OO"); this.RC = function(event) { self.helpIE(this); var pricesold = this.getElementsByClassName('mcpriceold2018'); var prices = this.getElementsByClassName('mcprice2018'); var discounts = this.getElementsByClassName('mcdiscount2018'); if (pricesold.length > 0) { pricesold[0].style.display = 'none'; prices.length > 1 ? prices[1].style.display = 'none' : null; discounts.length > 0 ? discounts[0].style.display = 'inline' : null; } }; this.KM = function(event) { self.helpIE(this); var discounts = this.getElementsByClassName('mcdiscount2018'); var prices = this.getElementsByClassName('mcprice2018'); var pricesold = this.getElementsByClassName('mcpriceold2018'); if (pricesold.length > 0) { discounts.length > 0 ? discounts[0].style.display = 'none' : null; prices.length > 1 ? prices[1].style.display = 'inline' : null; pricesold[0].style.display = 'inline'; } }; this.OO = function() { if (this.root) { this.helpIE(this.root); var teasers = this.root.getElementsByClassName('mcteaser2018'); } for (var MG_t in teasers) { teasers[MG_t].onmouseout = this.KM; teasers[MG_t].onmouseover = this.RC; } }; this.helpIE = function(el) { if (el.getElementsByClassName == undefined) { el.getElementsByClassName = function(cl) { var retnode = []; var myclass = new RegExp('\\b'+cl+'\\b'); var elem = this.getElementsByTagName('*'); for (var i = 0; i < elem.length; i++) { var classes = elem[i].className; if (myclass.test(classes)) retnode.push(elem[i]); } return retnode; }; } }; }; MarketGidCDiscountBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCCountersBlock5654 = function() { var self = this; self.funcBlocks["Counters"] = "MarketGidCCountersBlock5654"; this.LY.push("XJ"); this.XJ = function() { }; this.HI.push("compositeComscoreCountersLoad"); this.compositeComscoreCountersLoad = function() { if(!this.comscoreCompositeCounter){ this.comscoreCompositeCounter=true; this.EY._comscore = this.EY._comscore||[]; var mirrorStr = ((this.KP=='news') ? ('0' + '20') : ('1' + '20')); this.EY._comscore.push({ c1: "7", c2:"15208452", c3:mirrorStr, c4: this.blockId }); (function(){var s = MarketGidInfC5654.EY.document.createElement("script"), el = MarketGidInfC5654.EY.document.getElementsByTagName("script")[0]; s.async = true; s.src = (MarketGidInfC5654.EY.document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js"; el.parentNode.insertBefore(s, el); })(); } }; }; MarketGidCCountersBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); this['MarketGidCAdvertLinkBlock5654'] = function(self) { self.funcBlocks["AdvertLink"] = "MarketGidCAdvertLinkBlock5654"; self.SK.push("refreshAdvertLink"); self.refreshAdvertLink = function() { if (parseInt('0')) { try { var adLinkBlock = self.EEsAdLinkBlocks[self.LD].replace(/%id/g, '5654'); adLinkBlock = adLinkBlock.replace( "%WIDGET_TITLE%", self.EY['MGWidgetTitle5654'] ? self.EY['MGWidgetTitle5654'] : "" ); var utm = ''; if (utm == '') { utm = self.EEsUtm[self.LD]; } self.RH = adLinkBlock.replace(/%utm/, utm); } catch (e) { } } else { self.RH = ''; } }; /** * Парсинг рекламной ссылки в шаблоне информера */ self.parseAdvertLink = function(template) { var marker = '<!--advertPrefix-->'; var isMarkerInTheSecondPart = template.indexOf(marker) > (template.length / 2); /* Для резиновых информеров и если ссылка во второй половине шаблона необходимо убрать дублирование логотипа */ if (isMarkerInTheSecondPart) { var elements = self.root.querySelectorAll('.mg_addad5654'); for (var i = 0; i < elements.length; i++) { elements[i].parentNode.removeChild(elements[i]); } } if (isMarkerInTheSecondPart || self.PC == 0) { if (template.indexOf(marker) >= 0) { template = template.replace(marker, this.RH); } else { template = self.RH + template; } } return template; }; }; MarketGidCAdvertLinkBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); /** * Блок кнопки блокировки тизера в информере. * @param self */ this['MarketGidCRejectBlock5654'] = function(self) { self.isInsertedRejectStyles = false; self.initReject = function () { self.EY['MarketGidCReject5654'] = function() { var subnet = self.blockType == 'news' ? '0' : '0'; var url = self.subnetDashboardDomains[parseInt(subnet)]; if ('C' == 'C') { url += '/publishers/blocked'; } else { url += '/audience-development/blocked'; } var widget = self.blockType == 'news' ? '60100' : '23734'; var mglines = self.root.querySelectorAll('.mgline'); for (var i = 0; i < mglines.length; i++) { (function(mgline) { if (mgline.className.split(' ').indexOf('dsp') >= 0) { return; } var img = mgline.querySelector('img.mcimg'); var el = img.parentNode.querySelectorAll('.close-informer'); var match = mgline.className.match(/teaser-([0-9]+)/); if (null == match) { return; } if (el.length == 0) { var a = self.EY.document.createElement('a'); a.className = "close-informer"; a.href = url + '/teaser/' + match[1] + '/widget/' + widget + '/type/' + self.blockType; a.target = '_blank'; a.rel = "nofollow"; img.parentNode.insertBefore(a, img); } })(mglines[i]); } }; }; self.initRejectStyles = function() { if (self.isInsertedRejectStyles) { return; } var rejectStyles = '\ div.mcimg a.close-informer {\ width: 30px;\ height: 30px;\ background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNpiZICCV1p6UUAqH4gNgZiVgbrgNxCfB+KJYtcuLQMJMEItnQqkshjoA6YBLc9mhPp0KQN9QTQTNHjpDfKZoHFKb2DIRIOERAxgZWIYIDBq8ajFNAMsuCREr16kigWvtfVHg3o0cRGXKEaDetTiUYsHpcW/B8De30zQFj69wXmQxRMHwOKJTNC+zDQ6WgrqwixjHKhOG0CAAQBgjyYSHiWbYQAAAABJRU5ErkJggg==");\ display: block;\ opacity: 0;\ position: absolute;\ left: 3px;\ top: 3px;\ z-index: 1;\ cursor: pointer;\ }\ div.mgline:hover a.close-informer {\ opacity: 0.4;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mgline a.close-informer:hover {\ opacity: 1;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mcimg[max-width~="200px"] a.close-informer {\ width: 16px!important;\ height: 16px!important;\ background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFRJREFUeNpifKWlJ8PAwLAYiB0YSAMHgDiWiUzNDFA9i5nI1Aw3hImBQjDwBrAgc0SvXiRK02tt/cHqBWSnDZ1YGBwGHKBA/wGQAbFkGgLOzgABBgAwhw3HGxZizAAAAABJRU5ErkJggg==") !important;\ }\ .mgline .image-container {\ width: auto;\ margin: 0 auto;\ display: table;\ position: relative;\ }'; if ('C' == 'C') { self.stylesNews += rejectStyles; self.stylesGoods += rejectStyles; } else { self.styles += rejectStyles; } self.isInsertedRejectStyles = true; }; self.SK.push('initRejectStyles'); self.HI.push('initReject'); }; MarketGidCRejectBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidCMonitorBlock5654 = function() { var self = this; self.funcBlocks["Monitor"] = "MarketGidCMonitorBlock5654"; this.HI.push("monitorInit"); this.shownBlocks = {}; this.monitorInterval = null; this.isFirstCappingRequest = true; this.monitorInit = function() { var regex = /\/\/img.*\/[\d]+\/([\d]+).*\.(jpg|gif)/; if (!this.monitorInterval) { this.monitorInterval = self.EY.setInterval(function() { var newBlocks = {}; var viewportSize = self.utils.getViewportSize(); var images = self.root.getElementsByTagName('IMG'); for (var i = 0; i < images.length; i++) { if (self.isElementInViewport(images[i])) { var res = regex.exec(images[i].src); if (res && res[1] && !self.shownBlocks[res[1]]) { var teaserBlock = self.getParentTeaserBlock(images[i]); if (teaserBlock) { var teaserDims = self.utils.getRect(teaserBlock, true); newBlocks[res[1]] = { width: Math.round(teaserDims.width), height: Math.round(teaserDims.height), atf: teaserDims.top < viewportSize.height, align: self.getTeaserAlign(teaserDims), desc: self.isTeaserElementVisible(teaserBlock, 'mcdesc'), price: self.isTeaserElementVisible(teaserBlock, 'mcprice'), domain: self.isTeaserElementVisible(teaserBlock, 'mcdomain') }; } else { newBlocks[res[1]] = { width: "-", height: "-", desc: false, price: false, domain: false }; } self.shownBlocks[res[1]] = 1; } } } self.prepareCappingData(newBlocks); }, 1000); } }; this.prepareCappingData = function(blocks) { var typePrefix = "&t=" + (self.KP == 'news' ? "N" : "G"); var data = ""; var counter = 0; for (var i in blocks) { var prefix = blocks[i].width + "|" + blocks[i].height + "|" + ( (blocks[i].desc ? 1 : 0) + (blocks[i].price ? 2 : 0) + (blocks[i].domain ? 4 : 0) + (blocks[i].atf ? 8 : 0) + (blocks[i].align == 'right' ? 16 : 0) + (blocks[i].align == 'left' ? 32 : 0)) + "|"; data += "&v=" + prefix + self.teaserHashes[i]; counter++; if (counter > 20) { self.sendCappingData(typePrefix + data); data = ""; counter = 0; } } if (data != "") { self.sendCappingData(typePrefix + data); } }; this.sendCappingData = function(data) { var img = document.createElement('IMG'); if (self.isFirstCappingRequest) { data = "&f=1" + data; self.isFirstCappingRequest = false; } img.src = "//c.mgid.com/c?pv=2" + data; }; this.isElementInViewport = function(el) { var rect = el.getBoundingClientRect(); var viewport = self.utils.getViewportSize(); return ( rect.bottom - rect.top > 0 && rect.right - rect.left > 0 && rect.top >= 0 && rect.left >= 0 && rect.bottom <= viewport.height && rect.right <= viewport.width ); }; this.getParentTeaserBlock = function(el) { var current = el; while (current != self.root && current != self.EY) { if (current.className.indexOf("mgline") >= 0) { return current; } else { current = current.parentNode; } } return null; }; this.isTeaserElementVisible = function(el, className) { self.fixGetElementsByClassNameHandler(el); var elements = el.getElementsByClassName(className); if (elements.length > 0) { var dims = elements[0].getBoundingClientRect(); if (dims.right - dims == 0 || dims.bottom - dims.top == 0) { return false; } else { return true; } } else { return false; } }; /** * Возвращает положение тизера на странице * @param teaserDims * @returns {*} (left|right|center) */ this.getTeaserAlign = function(teaserDims) { var bodyWidth = self.EY.document.body.scrollWidth; if (teaserDims.right < 0.3 * bodyWidth) { return 'left'; } else if (teaserDims.left >= 0.7 * bodyWidth) { return 'right' } else { return 'center'; } }; }; MarketGidCMonitorBlock5654.call(MarketGidInfC5654, MarketGidInfC5654); MarketGidInfC5654.init(); MarketGidInfC5654.start(); } 