;/*** 09-03-2015 04:25 PM ***/
function ew_enableRefresh(){var secs=600;try{ew_disableRefresh()}catch(err){}window.refreshInterval=setInterval(function(){location.reload(!1)},1e3*secs)}function ew_disableRefresh(){clearInterval(window.refreshInterval)}window.FOX_ENV_STATIC_DOMAIN=window.FOX_ENV_STATIC_DOMAIN||function(){function idx(e,v){return e.indexOf(v)>-1?1:0}for(var type="prod",found=!1,scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var src=scripts[i].getAttribute("src")||"";if(src&&(idx(src,"fncstatic.com/static/")||idx(src,"foxnews.com/static/")||idx(src,"foxbusiness.com/static/"))){found=src;break}}found&&(idx(found,"qa.global.")?type="qa":idx(found,"staging.")?type="staging":idx(found,"global.fncstatic")||(type="relative")),window.FOX_ENV_STATIC=window.FOX_ENV_STATIC||"relative"===type?"prod":type;var domain="global.fncstatic.com";switch(type){case"qa":domain="qa."+domain;break;case"staging":domain="v8-staging.foxnews.com";break;case"relative":domain=window.location.host}return"//"+domain}();var Modulr=function(a,b){return a.Modulr||b}(window,function(a){function b(a,b){var c=null;return c="function"==typeof a?a.apply(a,b):a}function c(a){var b=a.split("."),c=window[b.shift()],d=!1;if("undefined"!=typeof c&&(d=!0,b.length>1))for(;b.length>0;)if(c=c[b.shift()],"undefined"==typeof c){d=!1;break}return d}function d(a){var b="string"==typeof a?a.replace(/\s+/gi,""):"";return b.length>0&&"require"!==b&&"define"!==b&&"exports"!==b?!0:!1}function e(a){var b=/[^A-Za-z0-9_\-\.]/g.test(a);return"string"!=typeof a||b?!1:!0}function f(){var a=window.location,b=a.pathname.split("/");return b.pop(),b=b.join("/")+"/",g()+b}function g(){var a=window.location;return a.protocol+"//"+(a.host||a.hostname)}function h(a,b){return a=m(a),b=k(b),[a,b].join("/")}function i(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function j(a,b,c,d){a.detachEvent&&!A?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function k(a){return a=m(l(a))}function l(a){return"/"===a.charAt(0)?a.slice(1):a}function m(a){return"/"===a.charAt(a.length-1)?a.slice(0,a.length-1):a}function n(a){return a=a||!1,"[object Array]"===Object.prototype.toString.call(a)}function o(){var a=arguments;if("string"==typeof a[0]&&(a[0]=[q.prefix,a[0]].join(" ")),window.console&&window.console.log)try{return console.log.apply(console,a)}catch(b){console.log(a)}}function p(a){throw a=[q.prefix,a].join(" "),new Error(a)}var q={};q.prefix="[Modulr]";var r={},s={},t={},u={},v={},w={},x={},y=!1,z=[];a(function(){for(y=!0;z.length>0;){var a=z.shift();a()}});var A="undefined"!=typeof opera&&"[object Opera]"===opera.toString()?!0:!1,B=/^(complete|loaded)$/,C=function(a){function k(a){a=E(a);var b=null,c="module",d=K(a);return d?"module"===d.type?b=r[d.context].stack[d.id]:"instance"===d.type&&(b=r[d.context].instance,c="instance"):b=S[a],"module"===c&&(b&&!b.executed&&p("module not yet executed: '"+a+"'"),b=b?"undefined"!=typeof b.factory?b.factory:b.exports:null),b}function q(b){a.baseDomain=a.baseDomain||g(),a.baseUrl=a.baseUrl||f();var c=function(){U=!0,b()};M(function(){c()})}function D(){if(s[R])for(var a=r[R].instance;s[R].length>0;){var b=s[R].shift();a.define(b.ext.id,b.deps,b.factory)}}function E(b){if(a.paths)for(var c in a.paths)b=b.replace(c,a.paths[c]);return b=b.replace(/\/\//g,"/").replace(/^\//,"")}function F(a){if(x[a])for(;x[a].length>0;){var b=x[a].shift();b()}}function G(a){return S[a]||!1}function H(){return[m(a.baseDomain||g()),l(a.baseUrl||f())].join("/")}function I(a,b){var c=a.split(":"),d=c[0]||!1,e=c[1]||!1;if(d&&e&&r[d]){var f=r[d].instance;r[d].stack[e]?f.execModule(e,function(a){b(a)}):f.require([e],function(){f.execModule(e,function(a){b(a)})})}else o(["Not initialized >> CONTEXT: ",d," | module: ",e].join("")),b(null)}function J(a){return r[a]?r[a].instance:void p("Error getting instance: "+a)}function K(a){var b=a.indexOf(":")>-1?!0:!1,c=a.split(":"),d=c[0]||!1,e=c[1]||!1,f=!1;return b&&("getInstance"===d&&e?f={type:"instance",context:e}:d&&e&&(f={type:"module",context:d,id:e})),f}function L(){if(!a.shim)return!1;var b=[];for(var c in a.shim)b.push({id:c,info:a.shim[c]});for(var d=function(a){var b=a.id,c=a.info,d=(N(c.src),c.deps||[]);V.define(b,d,function(){return P(c.exports)})};b.length>0;)d(b.shift())}function M(b){if(a.packages){var c=[];for(var d in a.packages)c.push({uid:d,src:a.packages[d]});var e=function(a){for(var b=w[a];b.length>0;){var c=b.shift();c()}delete w[a]},f=function(){if(0===c.length)b();else{var a=c.shift(),d=a.uid,g=N(a.src);r[d]?f():v[g]?(w[g]||(w[g]=[]),w[g].push(function(){f()})):(v[g]=d,Q(g,d,function(){f(),w[g]&&e(g)},"instance"))}};f()}else b()}function N(b){var c=b;return c=0===b.indexOf("//")||0===b.indexOf("http")?b:a.baseDomain+("/"!==b.charAt(0)?"/":"")+b}function O(b){return a.shim&&a.shim[b]?!0:!1}function P(a){return window[a.split(".")[0]]}function Q(a,b,c,d){var e=!1,f=document.createElement("script"),g=[R||"",a].join("||"),h=function(a){if(!e&&"load"===a.type||B.test((a.currentTarget||a.srcElement).readyState)){for(e=!0;u[g].length>0;){var b=u[g].shift();b()}delete u[g],k()}},i=function(){p("error loading script: "+a)},k=function(){j(f,h,"load","onreadystatechange"),j(f,i,"error")};if(b){var l="data-modulr-module";d&&(l="data-modulr-loaded-inst"),f.setAttribute(l,b)}return f.setAttribute("data-modulr-context",R),t[g]?(u[g].push(function(){c(b)}),!1):(t[g]=!0,u[g]=[function(){c(b)}],f.type="text/javascript",f.charset="utf-8",f.async=!0,!f.attachEvent||f.attachEvent.toString&&f.attachEvent.toString().indexOf("[native code")<0||A?(f.addEventListener("load",h,!1),f.addEventListener("error",i,!1)):f.attachEvent("onreadystatechange",h),f.src=a,void document.getElementsByTagName("head")[0].appendChild(f))}a=a||{},a.context=a.instance||a.context||"_",a.wait="boolean"==typeof a.wait?a.wait:!0;var R=a.context;if(e(R)||p("invalid context: '"+R+"'"),r[R])return o("attempt to instantiate the same context: "+R),!1;r[R]={instance:this,stack:{}};var S=r[R].stack,T=!1,U=!1,V=this;V.version="0.5.7",V.getConfig=function(){return a},V.getInstance=function(a){return r[a]?r[a].instance:null},V.getLoadedScripts=function(){var a={};for(var b in t){var c=b.split("||"),d=c[0],e=c[1]||"";d&&e&&(a[d]||(a[d]=[]),a[d].push(e))}return a},V.define=function(a,b,c){d(a)||p("invalid id: '"+a+"'."),2!==arguments.length||n(b)||(c=b,b=[]),a=E(a);var e=K(a);if(e)if(r[e.context]){var f=r[e.context].instance;f.define(e.id,b,c)}else s[e.context]||(s[e.context]=[]),s[e.context].push({ext:e,deps:b,factory:c});else S[a]||(b=b||[],S[a]={executed:!1,exports:{},deps:b,factory:c})},V.require=function(c,d){if("string"==typeof c)return k(c);if(n(c)){var e=function(){W.get(null,c,function(a){b(d,a)})},f=function(){T?e():(T=!0,q(function(){e()}))};a.wait?y?f():z.push(f):f()}},V.config=function(b){if(b.context||b.instance){var c=new C(b);return delete c.config,delete c.getInstance,c}T?p("cannot re-configure Modulr"):a=b},V.execModule=function(a,b){var c=G(a);return"function"!=typeof b?!1:void(c?c.executed?b(W.getModuleFactory(c)):W.execModule(null,null,a,function(a){b(a)}):b(null))},D(),L();var W=function(){var d=function(){var d=this;d.get=function(b,c,e){var f,g=[];c?f=i(c):b&&S[b]&&(f=i(S[b].deps));var h=function(){if(0===f.length)e(g);else{var c=E(f.shift()),i=G(c),j=K(c);if(j)"module"===j.type?I(c,function(a){g.push("undefined"!=typeof a?a:null),h()}):"instance"===j.type&&(g.push(J(j.context)),h());else if("require"===c)g.push(V.require),h();else if("define"===c)g.push(V.define),h();else if("exports"===c)g.push(S[b].exports),h();else if(i&&!O(c))i.executed?(g.push(d.getModuleFactory(i)),h()):d.execModule(null,null,c,function(a){g.push(a),h()});else if(O(c)){var k=a.shim[c];d.loadShim(c,k,function(a){g.push(a),h()})}else{var l=d.getModulePath(c);Q(l,c,function(){d.execModule("load",l,c,function(a){g.push(a),h()})})}}};h()},d.loadShim=function(a,b,e){var f=N(b.src),g=G(a);c(b.exports)?(g.executed=!0,g.factory=P(b.exports),e(g.factory)):x[a]?x[a].push(function(){d.execModule("shim",null,a,function(a){e(a)})}):(x[a]=[function(){d.execModule("shim",null,a,function(a){e(a)})}],Q(f,a,function(){c(b.exports)?F(a):p("shim export not found for: '"+a+"'")}))},d.execModule=function(a,c,e,f){var g=G(e);g?g.executed?f(d.getModuleFactory(g)):(d._execQueue||(d._execQueue={}),d._execQueue[e]||(d._execQueue[e]=[]),g.executing?d._execQueue[e].push(f):(g.executing=!0,d._execQueue[e].push(f),d.get(e,g.deps,function(a){g.factory=b(g.factory,a),g.executed=!0,g.executing=!1,d.runCallbackQueue(e,d.getModuleFactory(g))}))):(o("loading external source: "+c),f({id:e,src:c,type:"external-script"}))},d.runCallbackQueue=function(a,b){for(var c=d._execQueue[a]||[];c.length>0;){var e=c.shift();e(b)}},d.getModuleFactory=function(a){return null!==a.factory?a.factory:a.exports},d.getModulePath=function(a){var b=H(),c=h(b,a)+".js";return c}};return new d}()};return new C}(function(){var a=function(){function a(a){for(m=1;a=c.shift();)a()}var b,c=[],d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=g?/^loaded|^c/:/^loaded|c/,m=l.test(e[k]);return e[i]&&e[i](h,b=function(){e.removeEventListener(h,b,d),a()},d),g&&e.attachEvent(j,b=function(){/^c/.test(e[k])&&(e.detachEvent(j,b),a())}),ready=g?function(a){self!=top?m?a():c.push(a):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){ready(a)},50)}a()}()}:function(a){m?a():c.push(a)}}();return a}()));!function(){function a(){var a=this;this.version="1.4.1",this.pageReady=function(){var b=a._PRStack||!1;if(!k.isArray(b))return!1;var c=h(b);c(),delete a._PRStack,j.PRExec=!0},this.site=new c(this),this.utils=new d(this),this.addUtil=function(b,c){a.utils.Add(b,c)}}function b(a,b,c){function d(a){a=a||"";var b=a.length>0&&j.reserved.indexOf(a)>-1?!0:!1;return b&&i("[AddConstructor] Error: Reserved word '"+a+"'"),b}if(b=k.trimStr(b),b.indexOf(".")>-1){b="."===b.charAt(0)?b.slice(1,b.length):b;for(var e=b.split("."),f=e.length,g=0;f>g;g++){var h=e[g];if(0===g&&d(h))return!1;a[h]||(a[h]=g!==f-1?{}:"function"!=typeof c?{}:c),a=a[h]}}else if(b.length>0&&!a[b]){if(d(b))return!1;"function"!=typeof c?(a[b]={},a=a[b]):(a[b]=c,a=a[b])}else{if(a[b])return i("[AddConstructor] Warning: Constructor already exists (constructor:"+b+"). Ignoring another instantiation."),!1;if(d(b))return!1;a=a[b]}if("object"==typeof c&&!k.isArray(c))for(var l in c)a[l]&&i("[AddConstructor] Warning: Overwriting '"+l+"' "+typeof a[l]+". (constructor:"+b+" )"),a[l]=c[l];return a}function c(a){var c=this;this.Add=function(a,d){return b(c,a,d)},this.OnPageReady=function(){var b=new e(c,a);return b.callback}(),this.OnDocReady=function(){var b=new f(c,a);return b.callback}()}function d(){var a=this;this.Add=function(c,d){return b(a,c,d)}}function e(a,b){this.callback=function(){var c=arguments,d=1===c.length?"":c[0],e=1===c.length?c[0]:c[1],f=d.length>0?!0:!1,h=f?a.Add(d,e):e;b.pageReady||function(){},j.PRExec?g(h):(b._PRStack||(b._PRStack=[]),b._PRStack.push({n:f?d:"GEN",t:h}))}}function f(a,b){this.callback=function(){var c=arguments,d=1===c.length?"":c[0],e=1===c.length?c[0]:c[1],f=d.length>0?!0:!1,i=f?a.Add(d,e):e;j.DRExec?g(i):(b._DRStack||(b._DRStack=[]),b._DRStack.push({n:f?d:"GEN",t:i}),j.docReadyTriggered||(j.docReadyTriggered=!0,DomReady.ready(function(){var a=b._DRStack||!1;if(!k.isArray(a))return!1;var c=h(a);c(),delete b._DRStack,j.DRExec=!0})))}}function g(a,b){b="function"==typeof b?b:!1;var c,d=function(){b&&b()};return c="function"==typeof a?function(){d(),a()}:a&&"function"==typeof a.init?function(){d(),a.init()}:function(){d()},b?c:void c()}function h(a){for(var b=0,c=a.length,d=[],e=function(){},f=function(a){var b=e;e=g(a,b)};c>=b;){var h=a[b];h&&"GEN"===h.n?(d.push(h),a.splice(b,1),c=a.length):b++}d=d.concat(a),c=d.length;for(var i=0;c>i;i++)f(d[i].t);return e}function i(a){window.console&&console.log&&console.log(a)}var j={reserved:"Add|OnPageReady|OnDocReady"};a.prototype={newInstance:function(){return new a}};var k={isArray:function(a){return a=a||!1,"[object Array]"===Object.prototype.toString.call(a)},trimStr:function(a){return a?a.toString().replace(/^\s+/,"").replace(/\s+$/,""):""}};window._$tartup=window.$tartup=function(){return new a}()}(),function(){function a(){if(!h&&(h=!0,i)){for(var a=0;a<i.length;a++)i[a].call(window,[]);i=[]}}function b(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b(),a()}}function c(){if(!g){if(g=!0,document.addEventListener&&!f.opera&&document.addEventListener("DOMContentLoaded",a,!1),f.msie&&window==top&&function(){if(!h){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}(),f.opera&&document.addEventListener("DOMContentLoaded",function(){if(!h){for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].disabled)return void setTimeout(arguments.callee,0);a()}},!1),f.safari){var c;!function(){if(!h)if("loaded"!=document.readyState&&"complete"!=document.readyState)setTimeout(arguments.callee,0);else{if(void 0===c){for(var b=document.getElementsByTagName("link"),d=0;d<b.length;d++)"stylesheet"==b[d].getAttribute("rel")&&c++;b=document.getElementsByTagName("style"),c+=b.length}document.styleSheets.length!=c?setTimeout(arguments.callee,0):a()}}()}b(a)}}var d=window.DomReady={},e=navigator.userAgent.toLowerCase(),f={version:(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(e),opera:/opera/.test(e),msie:/msie/.test(e)&&!/opera/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)},g=!1,h=!1,i=[];d.ready=function(a){c(),h?a.call(window,[]):i.push(function(){return a.call(window,[])})},c()}(),window.FOX_Plugins=window.FOX_Plugins||{};var EventMessageHandler=FOX_Plugins.EventMessageHandler=function(){var CONST={};CONST.stringify=function(){var ver=!1;if(navigator&&"Microsoft Internet Explorer"===navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(ver=parseFloat(RegExp.$1)),ver&&9>=ver&&(ver=!0)}return ver}();var App=function(){var v=this.__v={};v._handlers={},this.init()};App.prototype.init=function(){var vars=this.__v;vars._messageHandler=function(event){var message=event.data,hasErr=!1;if(CONST.stringify){if(!window.JSON)return log("[EventMessageHandler.send] Requires JSON"),!1;try{message=JSON.parse(message)}catch(err){log("[EventMessageHandler.send] error:"),log(err);var hasErr=!0}}if(!hasErr){log("[EventMessageHandler.receive]",message);var type=message&&message.type?message.type:!1,data=message&&message.data?message.data:!1;type&&data&&vars._handlers[type]&&"function"==typeof vars._handlers[type]&&vars._handlers[type](data)}};try{window.addEventListener("message",vars._messageHandler,!1)}catch(error){window.attachEvent("onmessage",vars._messageHandler)}this.init=function(){}},App.prototype.addHandler=function(type,callback){var self=this,vars=self.__v,prefix=vars.config&&"string"==typeof vars.config.prefix?vars.config.prefix:"";return"string"!=typeof type?!1:(type=prefix+type,void(vars._handlers[type]=callback))},App.prototype.sendMessage=function(element,type,data){var self=this,vars=self.__v,prefix=vars.config&&"string"==typeof vars.config.prefix?vars.config.prefix:"";if("string"!=typeof type)return!1;type=prefix+type;var info={type:type,data:data};if(CONST.stringify){if(!window.JSON)return log("[EventMessageHandler.send] Requires JSON"),!1;info=JSON.stringify(info)}if(element&&"string"==typeof element&&"parent"===element)window.parent.postMessage(info,"*"),log("[EventMessageHandler.send]",info);else if(element&&"string"==typeof element&&"self"===element)window.postMessage(info,"*");else if(element&&element.contentWindow)try{element.contentWindow.postMessage(info,"*"),log("[EventMessageHandler.send]",info)}catch(err){}};var log=function(){var loggerON=window.location.search.indexOf("_log=y")>-1?!0:!1;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return App}();!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:EventMessageHandler",function(){return window.FOX_Plugins.EventMessageHandler}):!1}(window.Modulr),function($){function randomIdGenerator(seed,nChars){function bool(){return Math.floor(Math.random()*seed)%2===1?!0:!1}function getLetter(){var strCode=bool()?97:65;return String.fromCharCode(strCode+Math.round(25*Math.random()))}function getNumber(){return Math.floor(10*Math.random())}function setChar(){return bool()?getLetter():getNumber()}function getString(){var x,arr=[];for(x=0;nChars-1>x;x++)arr.push(setChar());return arr.sort(function(){return.5-Math.random()}),getLetter()+arr.join("")}return seed=seed||999999,nChars=nChars||25,getString()}function isDevice(){var ret=!1,UA=navigator.userAgent,UACheck=function(str){return UA.toLowerCase().indexOf(str)>-1?!0:!1};return UACheck("silk/1.0")?ret=!1:UACheck("android")&&!UACheck("silk")?ret="legacy":UACheck("blackberry")?ret=!0:UACheck("iemobile")?ret="legacy":"createTouch"in document&&(ret=!0),ret}function isH5Compatible(){var v=document.createElement("video");return v.play?!0:!1}function isArray(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)}function getMobilePlatform(){var obj={};return navigator.userAgent.match(/iPhone/i)?(obj.mobile="ios",obj.dev="iPhone"):navigator.userAgent.match(/iPod/i)?(obj.mobile="ios",obj.dev="iPod"):navigator.userAgent.match(/iPad/i)?(obj.mobile="ios",obj.dev="iPad"):navigator.userAgent.match(/Silk/i)?(obj.mobile="android",obj.dev="Kindle"):obj=!1,obj}function isPct(val){return"string"==typeof val&&val.indexOf("%")===val.length-1?!0:!1}function log(){var loggerON=!1;if(loggerON=!loggerON&&window.location.search.indexOf("stc=y")>-1?!0:loggerON,window.console||(window.console={log:function(){},error:function(){}}),loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}}var CONST={};CONST.PROTOCOL=window.location.protocol,CONST.yume_ad_domain_code={fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"},CONST.settings_url={fn2:CONST.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:CONST.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:CONST.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":CONST.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"},CONST.auditude_code={defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}},CONST.BUNDLE_VERSION="5.1.0012",window.MvPlayer=function(){this.version="1.4.0.0",this._namespace=null,this._config={},this._videoDomain="video.foxnews.com",this._callbacksObj={},this._autoEmbed=!0,this.holder={},this.playerIds=[],this.playerMap={},this.idSeparator=":",this.instanceId=["videoid","videolink","playlistid"],this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"},this.itemType={videoid:"video",playlistid:"playlist"},this.feedQueryString={template:"fox"},this.playTimeout={},this.dataObj={},this.holderObj={},this.overlayObj={defaultImg:CONST.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:CONST.PROTOCOL+"//global.fncstatic.com/static/v/all/img/clear.gif"}},MvPlayer.prototype={init:function(config){var i,id,MP=this;for(i in config)MP["_"+i]=config[i];MP.embed.root=MP.feed.root=MP.video.root=MP.format.root=MP.controls.root=MP.thirdParty.root=MP.feedParser.root=MP._helper.root=this;var feedFolder={},cfg=MP._config;if(cfg.player.feedSettings&&(cfg.player.feedSettings.videoFolder&&(feedFolder.video=cfg.player.feedSettings.videoFolder),cfg.player.feedSettings.playlistFolder&&(feedFolder.playlist=cfg.player.feedSettings.playlistFolder)),cfg.player.isLivePlayer&&(this.itemType.videoid="live",feedFolder.video=feedFolder.video.replace("/video/","/live/")),config.callbacks&&"object"==typeof config.callbacks&&!isArray(config.callbacks))for(id in config.callbacks)if(MP._callbacksObj[id])for(i in config.callbacks)MP._callbacksObj[id][i]=config.callbacks[id][i];else MP._callbacksObj[id]=config.callbacks[id];if(this.videoTypeLinks={videoid:CONST.PROTOCOL+"//"+MP._videoDomain+(feedFolder.video?feedFolder.video:MP.feedFolder.video),playlistid:CONST.PROTOCOL+"//"+MP._videoDomain+(feedFolder.playlist?feedFolder.playlist:MP.feedFolder.playlist)},MP._isPandora=!1,"undefined"!=typeof Pandora){var pandora=new Pandora(MP);pandora.init()&&(MP._isPandora=!0,log("[videoPlayer.init] Using Pandora."),MP.pandora=pandora,MP.pandora.init())}return"function"==typeof config.onInit&&config.onInit(MP),MP._autoEmbed?(MP.holder.videoObj=$(".video,.video-ct"),void MP.embed.players()):!1},render:function(config){function setUpVideoHolder(){var domId=!1;if(config.holder.find("[id^='videoHolder:']").size()>0){var pId=config.holder.find("[id^='videoHolder:']:first").attr("id");MP.setPlayerMap({type:"set",vId:id,domId:pId}),domId=MP.setPlayerMap({type:"get",vId:id})}else domId=MP.setPlayerMap({type:"create",vId:id});var div=$("<div></div>").attr({id:domId});config.cssClass&&div.addClass(config.cssClass),MP.pandora&&(div.data("pandora",!0),div.data("autoplay",config.autoplay)),config.holder.html(div)}if(!config)return!1;if(!config.id||!config.holder)return!1;var i,MP=this,separator=MP.idSeparator,id=config.id,helper=MP._helper;if(config.callbacks)if(MP._callbacksObj[id])for(i in config.callbacks)MP._callbacksObj[id][i]=config.callbacks[i];else MP._callbacksObj[id]=config.callbacks;if(log("[videoPlayer.render] Render function executed... "),config.autoplay&&"boolean"==typeof config.autoplay||(config.autoplay=!1),config.holder.data("currentId")===id)return!1;var videoObj=config.holder.find("> object");if(videoObj.size()>0)try{helper.isPlayFileReady(videoObj.get(0))?(MP.setPlayerMap({type:"set",vId:id,domId:videoObj.attr("id")}),config.cssClass&&videoObj.addClass(config.cssClass)):setUpVideoHolder()}catch(err){setUpVideoHolder()}else setUpVideoHolder();MP.embed.validate(config.holder,config.holder.children().filter(":first"),id.substring(0,id.indexOf(separator)),separator)&&(config.holder.data("currentId",id),MP.feed.get({id:id,autoplay:config.autoplay,method:"render"}))},getFeed:function(config){if(!config)return!1;if(!config.id||!config.callback)return!1;var MP=this;MP.feed.get({id:config.id,method:"getFeed",raw:!0,processed:config.processed?!0:!1,callback:config.callback})},setPlayerMap:function(obj){function genId(){return prefix+randomIdGenerator()}if(!obj)return!1;var MP=this,prefix="videoHolder:";switch(obj.type){case"create":for(var domId=genId();MP.playerMap[domId];)domId=genId();return MP.playerMap[domId]=obj.vId,MP.playerMap[obj.vId]=domId,domId;case"set":var i,vId=!1;for(i in MP.playerMap)if(i===obj.domId){vId=MP.playerMap[i];break}vId||delete MP.playerMap[vId],MP.playerMap[obj.domId]=obj.vId,MP.playerMap[obj.vId]=obj.domId;break;case"get":return obj.vId?MP.playerMap[obj.vId]?MP.playerMap[obj.vId]:!1:obj.domId&&MP.playerMap[obj.domId]?MP.playerMap[obj.domId]:!1}},setCustomFlashVars:function(id,ident){var MP=this;if(MP._config.display.customFlashVars){var custom=MP._config.display.customFlashVars;if(custom[ident]){var i,obj={};for(i in custom[ident])obj[i]=custom[ident][i];MP.holderObj[id].customFlashVars=obj}}}},MvPlayer.prototype.controls={pause:function(id){if(!this.validate(id))return!1;var root=this.root,holder=root.holderObj[id];try{holder.data("pandora")?root.pandora.CONTROLS.pause(id):document.getElementById(id).pause()}catch(err){showToConsole("[videoPlayer.controls.pause] Error caught:"+err)}},play:function(id){if(!this.validate(id))return!1;var root=this.root,holder=root.holderObj[id];try{holder.data("pandora")?root.pandora.CONTROLS.play(id):document.getElementById(id).unpause()}catch(err){showToConsole("[videoPlayer.controls.play] Error caught:"+err)}},jumpToTime:function(id,val){if(!this.validate(id))return!1;var root=this.root,holder=root.holderObj[id].elm,vId=root.playerMap[id]||!1;return vId?void(holder.data("pandora")?root.pandora.CONTROLS.jumpTo(vId,val):document.getElementById(vId).jumpToTime(val)):!1},validate:function(id){if(!id)return!1;var root=this.root;return id="videoid"+root.idSeparator+"g"+id,root.dataObj[id]?!0:!1}},MvPlayer.prototype.embed={validate:function(parent,videoDiv,prefix,separator){var d,root=this.root,dimensions=root._config.display.allow;if("undefined"==typeof root.format[prefix])return!1;for(d in dimensions)if(videoDiv.hasClass(d)){var vId=root.format[prefix](videoDiv,prefix,separator),useDomain=(dimensions[d],function(){var x,d=!1,classes=videoDiv.attr("class").split(" ");for(x=0;x<classes.length;x++){var t=classes[x];if(0===t.indexOf("vid-")){var sp=t.split("-");switch(sp.shift(),sp.join("-")){case"fn2":d="video.foxnews.com";break;case"fb2":d="video.foxbusiness.com";break;case"fb":d="video.foxbusiness.com";break;case"fn-latino":d="video.latino.foxnews.com"}}}return{domain:d,site:sp}}());return root.holderObj[vId]={id:vId,parentElm:parent,elm:videoDiv,dim:dimensions[d],format:d},useDomain.domain?(root.holderObj[vId].domain=useDomain.domain,root.holderObj[vId].xSite=useDomain.site,root.holderObj[vId].xDomain=!0):root.holderObj[vId].domain=root._videoDomain,root.setCustomFlashVars(vId,d),root.pandora&&root.holderObj[vId].elm.data("pandora",!0),vId}return!1},players:function(){var MP=this,root=this.root,clickthru="undefined"==typeof root._config.display.clickThruImage?!1:"object"!=typeof root._config.display.clickThruImage?root._config.display.clickThruImage:root._config.display.clickThruImage.render,separator=root.idSeparator;!clickthru||!root._isPandora||"legacy"===isDevice()||root.pandora._isIEMobile||"legacy"===root.pandora._pandoraType&&window.useLegacyHTML5||(clickthru=!1),root.holder.videoObj.each(function(){function loopFn(prefix){holder.find("div[id^='"+prefix+separator+"']").each(function(){var item=$(this),domId=root.setPlayerMap({type:"create",vId:item.attr("id")});item.attr("id",domId),vId=MP.validate(holder,item,prefix,separator)})}var x,holder=$(this),vId=!1;for(x=0;x<root.instanceId.length;x++){var prefix=root.instanceId[x];loopFn(prefix)}vId&&(root.holderObj[vId].elm.data("pandora")?(log("[videoPlayer.players] Loading via Pandora."),root.pandora.load(vId)):root.feed.get(vId),holder.children().filter("div.img").hide())})},player:function(id){if(!id)return!1;var MP=this,root=this.root,holder=root.holderObj[id],helper=root._helper,info=root._config.player;if(holder.elm.data("videoLoaded"))return!1;if(root.playerIds.push(id),holder.elm.data("pandora")){if(!holder.elm.data("pandoraLoaded")){var attr={id:id,format:holder.format,width:isPct(holder.dim[0])?holder.dim[0]:holder.dim[0]+"px",height:isPct(holder.dim[1])?holder.dim[1]:holder.dim[1]+"px"};"true"===root._config.player.flashVars.autoplay&&(attr.autoplay=!0),holder.elm.data("pandora",!0),holder.elm.data("pandoraLoaded",!0),holder.elm.data("videoLoaded",!0),root.holderObj[id].vAttr=attr}root.pandora.load(id)}else{if("undefined"==typeof swfobject)return showToConsole("[videoPlayer.embed.player] swfobject not found."),!1;var loadVideo=function(callbackTriggerOnly){root._callbacksObj[id]&&root._callbacksObj[id].videoLoadStart&&root._callbacksObj[id].videoLoadStart({data:root.dataObj[id]}),callbackTriggerOnly||root.video.load(id)};if(holder.elm.data("swfLoaded"))loadVideo();else{var domId=root.setPlayerMap({type:"get",vId:id});if(helper.isPlayFileReady(document.getElementById(domId)))loadVideo();else{root.thirdParty.akamai(id,!0);var i,flashVars=root._config.player.flashVars,tmpFlashVars={};for(i in flashVars)tmpFlashVars[i]=flashVars[i];if(holder.customFlashVars)for(i in holder.customFlashVars)tmpFlashVars[i]=holder.customFlashVars[i];var videoDomain=holder.domain,isXDomain=holder.xDomain,vSite=holder.xSite,env=info.environment?window.location.search.indexOf("venv=prod")>-1?"":"beta"===info.environment?"beta.":"":"";currentDomain=flashVars.location?flashVars.location:tmpFlashVars.settings_url.split("/")[2],"video.latino.foxnews.com"===currentDomain&&"video.foxnews.com"===videoDomain&&(videoDomain="video.latino.foxnews.com",vSite=["fn-latino"]);var replaceUrl=function(url){var d=env.length>0&&url.indexOf(env)<0?env+videoDomain:videoDomain;return url.replace(url.split("/")[2],d)};if(isXDomain&&(CONST.yume_ad_domain_code[vSite]&&(tmpFlashVars.yume_ad_domain_code=CONST.yume_ad_domain_code[vSite]),CONST.settings_url[vSite]&&(tmpFlashVars.settings_url=CONST.settings_url[vSite])),tmpFlashVars.settings_url=replaceUrl(tmpFlashVars.settings_url),tmpFlashVars.core_yume_ad_library_url=replaceUrl(tmpFlashVars.core_yume_ad_library_url),tmpFlashVars.core_yume_player_url=replaceUrl(tmpFlashVars.core_yume_player_url),tmpFlashVars.data_feed_url=replaceUrl(tmpFlashVars.data_feed_url),info.location=replaceUrl(info.location),root._config.player.tokenCallback&&root._config.player.tokenCallback(domId),root._config.player.pip){var pipVals=MP.setPinP(info,tmpFlashVars);tmpFlashVars=pipVals.flashVars,info=pipVals.info}swfobject.embedSWF(info.location,domId,holder.dim[0],holder.dim[1],info.flashVersion,info.expressInstall,tmpFlashVars,root._config.player.params),holder.elm.data("swfLoaded",!0),holder.elm.data("videoLoaded",!0),root._config.player.token?(root.dataObj[id]=root.feedParser.setToken(root.dataObj[id],root._config.player.token),$.loadAttempt(50,800,function(){return helper.isPlayFileReady(document.getElementById(domId))},function(){setTimeout(function(){loadVideo(),showToConsole("[videoPlayer.player] Token: "+root._config.player.token)},500)})):loadVideo(!0)}}}},setPinP:function(info,flashVars){if(info.location&&flashVars.settings_url){info.location=info.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var url=flashVars.settings_url;flashVars.settings_url=function(url){var sp=url.split("/"),idx=sp.length-1;return-1===sp[idx].indexOf("config-multi")&&(sp[idx]="config-multi.xml"),sp.join("/")}(url)}return{info:info,flashVars:flashVars}},clickthru:function(data,id){var MP=this,root=this.root,holder=root.holderObj[id],blankImgSrc=root.overlayObj.blankImg;holder.elm.parent().css({width:isPct(holder.dim[0])?holder.dim[0]:holder.dim[0]+"px",minHeight:isPct(holder.dim[1])?holder.dim[1]:holder.dim[1]+"px"}),holder.elm.html('<a href="#"><img src="'+blankImgSrc+'" /></a>');var mainImgElm=holder.elm.find("img");mainImgElm.css({width:isPct(holder.dim[0])?holder.dim[0]:holder.dim[0]+"px",height:isPct(holder.dim[1])?holder.dim[1]:holder.dim[1]+"px",opacity:"0"}),function(){var setImg=function(src){mainImgElm.attr("src",src).animate({opacity:"1"},400,"swing")},setDimension=function(src){var arr=src.split("/"),len=arr.length,width=arr[len-3],height=arr[len-2];return arr[len-3]=isNaN(width)?width:holder.dim[0],arr[len-2]=isNaN(height)?height:holder.dim[1],arr.join("/")},parent=holder.parentElm,opt1=parent.children("div.img"),opt2=parent.find(".m-controller img:first"),opt3=parent.parent().children("div.m-controller img:first");if(opt1.attr("src")&&$.trim(opt1.attr("src")).length>0)setImg($.trim(opt1.attr("src"))),videoPlayerOverlay.set({elm:holder.elm,dim:holder.dim,position:"bottom right"});else if(opt2.attr("src")&&$.trim(opt2.attr("src")).length>0)setImg($.trim(opt2.attr("src"))),videoPlayerOverlay.set({elm:holder.elm,dim:holder.dim,position:"bottom right"});else if(opt3.attr("src")&&$.trim(opt3.attr("src")).length>0)setImg($.trim(opt3.attr("src"))),videoPlayerOverlay.set({elm:holder.elm,dim:holder.dim,position:"bottom right"});else{var imgVid=new Image,imgUrlSrc=setDimension(data.thumbnail);imgVid.onload=function(){setImg(imgUrlSrc),videoPlayerOverlay.set({elm:holder.elm,dim:holder.dim,position:"bottom right"})},imgVid.src=imgUrlSrc}}();var aTag=holder.elm.find("a");aTag.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var runPlayer=function(){"undefined"!=typeof FOX&&FOX.utils&&FOX.utils.pageRefresh?FOX.utils.pageRefresh.disable():"function"==typeof ew_disableRefresh&&ew_disableRefresh(),MP.player(id)
};try{return root._config.display.clickThruImage.callbackFn({runPlayer:runPlayer}),!1}catch(err){}return runPlayer(),!1})}},MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(id){if(!id||"undefined"==typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC||"undefined"==typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK)return!1;if(!$(document).data("AkamaiH5Analytics")){var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(script)}$.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return"undefined"!=typeof setAkamaiMediaAnalyticsData?!0:!1},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(id)}}})},akamai:function(id){function setOverlay(arr,type){var x;for(x=0;x<arr.length;x++)if(holder.elm.hasClass(arr[x])){switch(type){case"share":root._config.player.flashVars.show_sharing_overlay="false";break;case"email":root._config.player.flashVars.show_email_overlay="false"}return!0}return!1}var root=this.root,holder=(root._config.player,root.holderObj[id]),rawId=id.split(":")[1].replace(/[a-zA-z]/gi,""),itemType=root.itemType[root.dataObj[id].itemType];if(root.dataObj[id]&&root.dataObj[id].isMavenFeed&&(rawId=root.dataObj[id].guid),root._config.player.flashVars.video_id=rawId,root._config.player.flashVars.data_feed_url=CONST.PROTOCOL+"//"+root._videoDomain+"/v/feed/"+itemType+"/"+rawId+".js?template=fox","undefined"!=typeof root._config.display){var displayProp=root._config.display;"undefined"!=typeof displayProp.restrict&&(displayProp.restrict.sharingOverlay&&setOverlay(displayProp.restrict.sharingOverlay,"share"),displayProp.restrict.emailOverlay&&setOverlay(displayProp.restrict.emailOverlay,"email"))}if(itemType.toLowerCase().indexOf("playlist")>-1)try{var list=root.dataObj[id].PLVideos,vidPlay=list[0]["media-content"],vidId=vidPlay["mvn-assetUUID"];root._config.player.flashVars.video_id=vidId,root._config.player.flashVars.data_feed_url=CONST.PROTOCOL+"//"+root._videoDomain+"/v/feed/video/"+vidId+".js?template=fox"}catch(err){showToConsole("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+err,!0)}},baynote:function(id){function runTrack(){return"undefined"!=typeof baynote_track_video_attribute?thumbnailUrl&&duration&&linkText&&friendlyUrl?(baynote_track_video_attribute(thumbnailUrl,duration,linkText,friendlyUrl),showToConsole("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)"),showToConsole("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+thumbnailUrl),showToConsole("[videoPlayer.thirdparty.baynote] duration = "+duration),showToConsole("[videoPlayer.thirdparty.baynote] linkText = "+linkText),showToConsole("[videoPlayer.thirdparty.baynote] url = "+friendlyUrl),!0):(showToConsole("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url."),!0):(showToConsole("[videoPlayer.thirdparty.baynote] Baynote track function not defined."),!1)}function attempt(){"undefined"!=typeof baynote_track_video_attribute?(runTrack(),clearTimeout(timeout)):attempts>maxAttempts?(showToConsole("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... "),runTrack(),clearTimeout(timeout)):(attempts++,timeout=setTimeout(function(){showToConsole("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+attempts),attempt()},500))}var root=this.root,feed=root.dataObj[id],helper=(root.holderObj[id],root._helper),thumbnailUrl=feed.thumbnail?feed.thumbnail:!1,linkText=feed.title?feed.title:!1,duration=function(){var duration=feed.duration?feed.duration:!1;return!duration&&isNaN(duration)?!1:duration}(),friendlyUrl=function(){var feedTitle=helper.cleanTitle(feed.title),feedUrl=CONST.PROTOCOL+"//"+root._videoDomain,guid=feed.guid;return feedUrl+="/v/"+guid+"/"+feedTitle+"/"}(),maxAttempts=30,attempts=0,timeout=!1;"undefined"!=typeof baynote_track_video_attribute?runTrack():$(document).ready(function(){attempt()})}},MvPlayer.prototype.video={load:function(id){var MP=this,root=this.root,helper=root._helper,autoplay=root._config.player.flashVars.autoplay,domId=root.setPlayerMap({type:"get",vId:id}),playerElm=document.getElementById(domId);if(log("[videoPlayer.load] Loading player..."),helper.isPlayFileReady(playerElm)){var clickthru="undefined"==typeof root._config.display.clickThruImage?!1:"object"!=typeof root._config.display.clickThruImage?root._config.display.clickThruImage:root._config.display.clickThruImage.render;!clickthru||!root._isPandora||"legacy"===isDevice()||root.pandora._isIEMobile||"legacy"===root.pandora._pandoraType&&window.useLegacyHTML5||(clickthru=!1),root.dataObj[id]?(autoplay=clickthru?!0:root._config.player.flashVars.autoplay?!0:!1,root._config.player.pip?showToConsole("[videoPlayer.load] PlayFile disabled for PIP."):playerElm.playFile(root.dataObj[id].rawData,autoplay)):root.feed.get({id:id,autoplay:autoplay}),clearTimeout(root.playTimeout[id])}else root.playTimeout[id]=setTimeout(function(){MP.load(id)},100)}},MvPlayer.prototype.feed={get:function(){function useLegacyTemplate(){return"playlistid"===linkObj.type?!0:!1}function trigger(){url=function(url){var ret=url;if(root.holderObj[vars.id]&&root.holderObj[vars.id].domain){var hDomain=root.holderObj[vars.id].domain,sp=url.split(CONST.PROTOCOL+"//"),fl=sp[1].split("/");fl[0]!==hDomain&&(fl[0]=hDomain),sp[1]=fl.join("/"),ret=sp.join(CONST.PROTOCOL+"//")}return ret}(url),$.ajax({url:url,data:queryObj,dataType:"script",async:!0,cache:!0})}var x,i,root=this.root,separator=root.idSeparator,args=arguments[0],vars={},isMavenFeed=!1;if("object"==typeof args)for(i in args)vars[i]=args[i];else vars.id=args;if(!vars.id)return showToConsole("[videoPlayer.feed.get] Error: no id passed"),!1;var feedFn="parse_"+root._helper.formatVideoId(vars.id,!0,!0)+(vars.raw?"_getraw":""),callbackFn=root._namespace+".feed."+feedFn,linkObj=!1;if(linkObj=function(){var i;for(i in root.videoTypeLinks)if(vars.id.indexOf(i)>-1)return{prefix:root.videoTypeLinks[i],type:i};return!1}(),!linkObj)return showToConsole("[videoPlayer.feed.get] Error: no feed link: "+vars.id),!1;var videoId=vars.id.substr(linkObj.type.length+separator.length),linkPrefix=linkObj.prefix;"g"!==videoId.charAt(0).toLowerCase()?"videoid"===linkObj.type&&(linkPrefix=linkPrefix.replace("/v/","/"),isMavenFeed=!0):videoId=videoId.substr(1);var url=linkPrefix+videoId+".js",queryArr=[],queryObj={};if(queryArr.push("callback="+callbackFn),root.feedQueryString){var addQStr=root.feedQueryString;for(i in addQStr)"template"===i?useLegacyTemplate()||queryArr.push(i+"="+addQStr[i]):queryArr.push(i+"="+addQStr[i])}for(x=0;x<queryArr.length;x++){var split=queryArr[x].split("=");queryObj[split[0]]=split[1]}queryArr.push("jsonp=?");var isRenderMethod=("?"+queryArr.join("&"),vars.method&&"render"===vars.method?!0:!1);(!root.feed[feedFn]||isRenderMethod)&&(root.feed[feedFn]=function(data){root.holderObj[vars.id]&&(root.holderObj[vars.id].ajaxComplete=!0);var dataObj=useLegacyTemplate()?root.feedParser.legacy(data):root.feedParser.fox(data);if(vars.raw)vars.callback&&vars.callback(vars.processed?dataObj:data);else{var clickthru=(root.holderObj[vars.id],"undefined"==typeof root._config.display.clickThruImage?!1:"object"!=typeof root._config.display.clickThruImage?root._config.display.clickThruImage:root._config.display.clickThruImage.render);!clickthru||!root._isPandora||"legacy"===isDevice()||root.pandora._isIEMobile||"legacy"===root.pandora._pandoraType&&window.useLegacyHTML5||(clickthru=!1),root.dataObj[vars.id]=dataObj,root.dataObj[vars.id].rawData=data,root.dataObj[vars.id].itemType=linkObj.type,root.dataObj[vars.id].isMavenFeed=isMavenFeed,vars.autoplay&&(root._config.player.flashVars.autoplay="true"),dataObj?(clickthru&&!vars.autoplay?root.embed.clickthru(dataObj,vars.id):root.embed.player(vars.id),root._callbacksObj[vars.id]&&root._callbacksObj[vars.id].feedLoaded&&root._callbacksObj[vars.id].feedLoaded(dataObj)):showToConsole("[videoPlayer.feed.get] Warning: no data found!")}}),queryObj.cb=root._helper.cacheBuster(),trigger()}},MvPlayer.prototype.format={videoid:function(obj,prefix,separator){var root=this.root,videoId=root.setPlayerMap({type:"get",domId:obj.attr("id")});if(!videoId)return!1;var id=videoId.substr(prefix.length+1);return"videoid"+separator+id},videolink:function(obj,prefix,separator){var root=this.root,domId=obj.attr("id"),id=root.setPlayerMap({type:"get",domId:domId}),searchStr="playlist",prefixId="playlistid"+separator;if(-1===id.indexOf("?"+searchStr))return!1;var x,query=id.substr(id.indexOf("?")+1),items=query.split("&");for(x=0;x<items.length;x++){var pair=items[x].split("=");if("playlist_id"===pair[0].toLowerCase()){var returnId=prefixId+pair[1];return root.setPlayerMap({type:"set",vId:returnId,domId:domId}),returnId}}},playlistid:function(obj,prefix,separator){var root=this.root,playlistId=root.setPlayerMap({type:"get",domId:obj.attr("id")});if(!playlistId)return!1;var id=playlistId.substr(prefix.length+1);return"playlistid"+separator+id}},MvPlayer.prototype.feedParser={setToken:function(data){{var root=this.root;root._helper}return data},fox:function(json){function getImgThumbnail(){var thumb=details["media-thumbnail"]||!1;return thumb?isArray(thumb)&&thumb[0]&&thumb[0]["@attributes"]?thumb[0]["@attributes"].url||"":thumb&&thumb["@attributes"]?thumb["@attributes"].url||"":"":""}function getDuration(){try{return details["media-content"][0]["@attributes"].duration}catch(err){return showToConsole("[videoPlayer.feedParser.grab] Get Duration error: "+err),"0"}}var x,root=this.root,helper=root._helper;if("undefined"==typeof json.channel.item)return!1;var channel=json.channel,item=json.channel.item,PLVideos=[];if(item instanceof Array){for(x=0;x<item.length;x++)PLVideos.push(item[x]);item=json.channel.item[0]}if(!item["media-group"])return!1;var details=item["media-group"],obj={url:item.link,title:item.title,description:item.description,shortDescription:item.description,keywords:"",thumbnail:getImgThumbnail(),guid:item.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:channel.category,creationDate:helper.convertGrabDate(item.pubDate),loc:CONST.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:getDuration()},mContent=details["media-content"]||!1;if(mContent){var i,cntr,mpObj={},hasMedia=!1,lowMedia=!1,defaultMedia=!1,idx=function(str,val){return str.indexOf(val)>-1?!0:!1};for(x=0;x<mContent.length;x++){var c=mContent[x]["@attributes"],cUrl=c.url;"video/mp4"===c.type?(hasMedia||(hasMedia=!0,defaultMedia=c),idx(cUrl,"_LOW")?(mpObj.LOW=c,lowMedia=c):idx(cUrl,"_MED")?mpObj.MED=c:idx(cUrl,"_HIGH")&&(mpObj.HI=c)):"application/x-mpegURL"===c.type&&idx(cUrl,".m3u8")&&(mpObj.STREAM=c)}hasMedia&&(mpObj.LOW||(mpObj.LOW=mpObj.MED?mpObj.MED:mpObj.HI?mpObj.HI:defaultMedia),mpObj.MED||(mpObj.MED=mpObj.LOW?mpObj.LOW:mpObj.HI?mpObj.HI:defaultMedia),mpObj.HI||(mpObj.HI=mpObj.LOW?mpObj.LOW:mpObj.MED?mpObj.MED:defaultMedia)),cntr=0;for(i in mpObj){cntr++;break}mpObj=cntr>0?mpObj:!1,obj.htmlFive=mpObj}return PLVideos.length>0&&(obj.PLVideos=PLVideos),obj},grab:function(json){function getImgThumbnail(){if("undefined"!=typeof details["media-thumbnail"][0]){var data=details["media-thumbnail"][0];return data["@attributes"].url?data["@attributes"].url:""}return""}function getDuration(){try{return details["media-content"][0]["@attributes"].duration}catch(err){return showToConsole("[videoPlayer.feedParser.grab] Get Duration error: "+err),"0"}}var x,root=this.root,helper=root._helper;if("undefined"==typeof json.channel.item)return!1;var item=json.channel.item,PLVideos=[];if(item instanceof Array){for(x=0;x<item.length;x++)PLVideos.push(item[x]);item=json.channel.item[0]}if(!item["media-group"])return!1;var details=item["media-group"],obj={url:item.link,title:item.title,description:item.description,shortDescription:item["grab-short_description"],keywords:details["media-keywords"],thumbnail:getImgThumbnail(),guid:item.guid,channel:item["grab-channel"],playlist:item["grab-playlist"],personality:item["grab-personality"],format:item["grab-format"],show:item["grab-show"],category:details["media-category"],creationDate:helper.convertGrabDate(item.pubDate),loc:CONST.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:getDuration()};return PLVideos.length>0&&(obj.PLVideos=PLVideos),obj},legacy:function(json){var x,root=this.root,helper=root._helper;if("undefined"==typeof json.channel.item)return!1;var item=json.channel.item,PLVideos=[];if(item instanceof Array){for(x=0;x<item.length;x++)PLVideos.push(item[x]);item=json.channel.item[0]}if(!item["media-content"])return!1;var details=item["media-content"];if(!details["media-credit"])return!1;var obj=(details["media-credit"],{url:details["@attributes"].url,title:item.title,description:details["media-description"],keywords:details["media-keywords"],thumbnail:details["media-thumbnail"],guid:details["mvn-assetUUID"],mavenid:details["mvn-mavenId"],channel:details["mvn-fnc_channel"]?details["mvn-fnc_channel"]:details["mvn-fbn_channel"],playlist:details["mvn-fnc_default_playlist"],personality:details["mvn-fnc_personality"]?details["mvn-fnc_personality"]:details["mvn-fbn_personality"],format:details["mvn-fnc_format"]?details["mvn-fnc_format"]:details["mvn-fbn_format"],show:details["mvn-fnc_show"]?details["mvn-fnc_show"]:details["mvn-fbn_show"],category:details["mvn-fnc_category"]?details["mvn-fnc_category"]:details["mvn-fbn_category"],creationDate:helper.convertDate(details["mvn-creationDate"]),shortDescription:details["mvn-shortDescription"],loc:CONST.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:details["mvn-duration"]?details["mvn-duration"]:details["mvn-videoSeconds"]?details["mvn-videoSeconds"]:0});return PLVideos.length>0&&(obj.PLVideos=PLVideos),obj}},MvPlayer.prototype._helper={cacheBuster:function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString();switch(freq){case"h":str+=(date.getHours()+1).toString();break;case"30m":str+=(date.getHours()+1).toString()+(date.getMinutes()%30===0?"1":"0");break;default:str+=(date.getHours()+1).toString()}return str},isPlayFileReady:function(player){return player=player||!1,player&&"undefined"!=typeof player.playFile?!0:!1},formatVideoId:function(id,uriFriendly,callback){return uriFriendly=uriFriendly||!1,callback=callback||!1,callback&&(id=id.split("").reverse().join("")),uriFriendly?id.replace(/\:/gi,"_"):id.replace(/\_/gi,":")},convertGrabDate:function(d){if(d=d||!1,!d)return"";var dt=new Date(d),months=["January","February","March","April","May","June","July","August","September","October","November","December"];return isNaN(dt.getTime())?"":months[dt.getMonth()]+" "+dt.getDate()+", "+dt.getFullYear()},convertDate:function(d){if("undefined"!=typeof d){var months=["January","February","March","April","May","June","July","August","September","October","November","December"],date=d.toString().split("T");return date=date[0].split("-"),date=new Date(date[0],date[1]-1,date[2]),months[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()}return""},extractVideoId:function(str){var s=str.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"");return s=s.substring(0===s.indexOf("#")?2:1),s.substring(0,s.indexOf("/"))},extractCategoryId:function(str){return str.split("category_id=")[1]},cleanTitle:function(title){return title=title.replace(/\s+/g,"-").toLowerCase(),title.replace(/[^a-z0-9\-]/g,"")},cleanHref:function(href){return href.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"")},cleanImageUrl:function(url){return url.replace(CONST.PROTOCOL+"//media2.foxnews.com","")},convertTime:function(sec){var mins=Math.floor(sec/60),secs=Math.floor(sec%60);return secs=10>secs?"0"+secs:secs,mins+":"+secs},videoObjectJSON:function(json){return this.root.feedParser.legacy(json)}};var Pandora=function(){var isd={dm:"Agent",vcm:"i",ox:"vt"},Pandora=function(main){this.main=main,this.video={},this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"},this.prefix.time={current:"time-current",duration:"time-duration"},this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>',isd.ol={arg:"P",lmp:"COM",rd:"USER"},this.listeners=new PandoraListeners(this),this.TYPE=new PandoraTypes(this),this.EVENTS=new PandoraEvents(this),this.PROPERTIES=new PandoraProperties(this),this.STATES=new PandoraStates(this),this.CONTROLS=new PandoraControls(this),this.ADS=new PandoraAds(this)};Pandora.prototype={init:function(config){if(config=config||!1){var i;for(i in config)this["_"+i]=config[i]}return this.compatible()?("legacy"===this.helper.getQuery("html5")&&(window.useLegacyHTML5=!0),!0):!1},compatible:function(){var ret=!1;return"y"===this.helper.getQuery("_"+isd.ox+isd.ol.lmp.toLowerCase()+isd.ol.arg.toLowerCase())?(this._forced=!0,ret=isH5Compatible()):ret=isH5Compatible()&&isDevice()?!0:!1,ret},check:function(){return this.compatible()},create:function(){},load:function(id,autoplay){var self=this,main=this.main,device=isDevice(),useNative="string"==typeof device&&"legacy"===device?!0:!1;if(!this.check(id))return!1;log("[videoPlayer.pandora] Loading....");var renderFail=function(){main.holderObj[id].elm.data("pandora",!1),main.holderObj[id].elm.data("pandoraLoaded",!1),isDevice()?main._callbacksObj[id]&&main._callbacksObj[id].deviceRenderFailed&&main._callbacksObj[id].deviceRenderFailed():main.embed.player(id)};if(main.dataObj[id]){var data=main.dataObj[id],holderObj=main.holderObj[id];autoplay="undefined"==typeof autoplay?holderObj.vAttr.autoplay:autoplay;var useAkamai=useNative||window.useLegacyHTML5?!1:!0;if(useAkamai)log("[videoPlayer.pandora] Loading HTML5 Akamai video player..."),self.TYPE.AKAMAI(data,id,!1,autoplay);else if(data.htmlFive){var videoUrl=function(){var ret=!1;return!data.htmlFive.STREAM||self._forced||useNative?data.htmlFive.LOW?ret=data.htmlFive.LOW.url:data.htmlFive.MED?ret=data.htmlFive.MED.url:data.htmlFive.HI&&(ret=data.htmlFive.HI.url):ret=data.htmlFive.STREAM.url,ret}();if(!videoUrl)return log("[videoPlayer.pandora] Rendering failed. no html5 video url."),renderFail(),!1;log("[videoPlayer.pandora] Loading HTML5 Legacy video player..."),self.TYPE.LEGACY(data,id,videoUrl,autoplay)}else log("[videoPlayer.pandora] Rendering failed. No html5 data."),renderFail()}else main.feed.get({id:id,autoplay:autoplay})}},Pandora.prototype.helper={replaceStr:function(item,oldStr,newStr){for(var idx=item.indexOf(oldStr);-1!==idx;)item=item.replace(oldStr,newStr),idx=item.indexOf(oldStr);return item},formatTime:function(sec){function addPrefix(time){return 10>time?"0"+time:time}sec=parseInt(sec,10);var hr=Math.floor(sec/360),min=Math.floor(sec/60),secs=sec%60;return(hr>0?addPrefix(hr):"")+addPrefix(min)+":"+addPrefix(secs)},getQuery:function(item){var x,search=window.location.search.substr(1),pairs=search.split("&");for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");if(split[0]===item)return split[1]}return!1}};var PandoraTypes=function(){var PandoraTypes=function(root){this.root=root};return PandoraTypes.prototype.LEGACY=function(data,id,videoUrl){var root=this.root,main=root.main,holderObj=main.holderObj[id],videoElm=holderObj.elm,clickthru="undefined"==typeof main._config.display.clickThruImage?!1:"object"!=typeof main._config.display.clickThruImage?main._config.display.clickThruImage:main._config.display.clickThruImage.render;if(log("[videoPlayer.pandora] Using Legacy HTML5 video player."),videoElm.data("pandoraLoaded")){var play_ads=function(){var ret=!0,cfgAdsEnabled=main._config.player.flashVars&&"undefined"!==main._config.player.flashVars.core_ads_enabled?main._config.player.flashVars.core_ads_enabled:!1,customAdsEnabled=holderObj.customFlashVars&&"undefined"!=typeof holderObj.customFlashVars.core_ads_enabled?holderObj.customFlashVars.core_ads_enabled:!1,checkVal=function(val){var v;return v="string"==typeof val&&"true"===val.toLowerCase()?!0:"boolean"==typeof val?!0:!1};return"n"===root.helper.getQuery("_vtads")?ret=!1:customAdsEnabled?ret=checkVal(customAdsEnabled):cfgAdsEnabled&&(ret=checkVal(cfgAdsEnabled)),ret}(),triggerVideo=function(){var i,isAutoplay=holderObj.elm.data("autoplay")?!0:!1,holderElm=holderObj.elm.parent(),attr=[],styles=[],allowStyles="width|height";for(i in holderObj.vAttr)if("format"===i)attr.push('class="'+holderObj.vAttr[i]+' pandora-player"');else if("id"===i){var domId=main.setPlayerMap({type:"get",vId:holderObj.vAttr[i]});main.setPlayerMap({type:"set",vId:id,domId:domId}),attr.push('id="'+domId+'"')}else allowStyles.indexOf(i)>-1&&styles.push(i+":"+holderObj.vAttr[i]+";");log("[videoPlayer.pandora.LEGACY] Video Source: "+videoUrl);var videoStyles=styles.join(" "),newVideo='<video controls="" '+attr.join(" ")+' src="'+videoUrl+'" style="'+videoStyles+'"></video>';holderElm.get(0).innerHTML=newVideo,holderElm.find("video:first").each(function(){var vid=$(this);vid.data("pandora",!0),vid.data("pandoraLoaded",!0),vid.data("autoplay",isAutoplay),root.video[id]={elm:vid,nativeElm:vid.get(0)},root.listeners.init(id),main._callbacksObj[id]&&main._callbacksObj[id].dataChanged&&main._callbacksObj[id].dataChanged(data),!clickthru&&isAutoplay&&root.CONTROLS.play(id),main.thirdParty.akamaiMediaAnalytics(vid.attr("id")),log("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+(play_ads?"TRUE":"FALSE")),play_ads&&root.ADS.set({id:id,elm:holderElm,url:videoUrl,dim:holderObj.dim})})};log("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+(play_ads?"TRUE":"FALSE")),play_ads?root.ADS.load(function(){triggerVideo()}):triggerVideo()}else main.embed.player(id)},PandoraTypes.prototype.AKAMAI=function(data,id,videoUrl,autoplay){var self=this,root=self.root,main=root.main,numOnly=function(val){return val.replace(/[^0-9]/gi,"")},holderObj=main.holderObj[id],isVariable=(numOnly(id),holderObj.elm.data("autoplay")?!0:!1,main._config.player.variable?!0:!1),holderElm=holderObj.elm.parent(),attr=holderObj.vAttr,width=isPct(attr.width)?attr.width:numOnly(attr.width),height=isPct(attr.height)?attr.height:numOnly(attr.height),playerInfo=main._config.player,env=playerInfo.environment?window.location.search.indexOf("venv=prod")>-1?"":"beta"===playerInfo.environment?"beta.":"":"",videoDomain=("y"===root.helper.getQuery("_"+isd.ox+isd.ol.lmp.toLowerCase()+isd.ol.arg.toLowerCase())?!0:!1,env+main._videoDomain),urlDomain=CONST.PROTOCOL+"//"+videoDomain,addQuery=[];log("[videoPlayer.pandora] Using AKAMAI HTML5 video player."),autoplay&&addQuery.push("autoplay=true");var newVideo,sourceURL,FOX_EventHandler=!1,loadHandler="",params=[].concat(addQuery),version=root.helper.getQuery("_ver")||CONST.BUNDLE_VERSION,videoId=numOnly(id),loadHanderFN="FOX_VP_LoadHandler_"+videoId,setForNewVersion=function(){var config={autoplay:autoplay,feed:{url:"/v/feed/video/"+videoId+".js?template=fox"},flash:{vars:{video_id:videoId}},mediaanalytics:{fields:{pageName:{type:"value",value:"fullpage"}}},omniture:{account:"foxnews",playerName:"html5"}};FOX_EventHandler||(FOX_EventHandler=new EventMessageHandler),!holderObj.customFlashVars||holderObj.customFlashVars.core_ads_enabled&&"false"!==holderObj.customFlashVars.core_ads_enabled||(config.ima={},config.ima.enabled=!1),FOX_EventHandler.addHandler("advance",function(data){"function"==typeof window.playNextVideo&&(log("EVENT: advance"),window.playNextVideo(data))}),FOX_EventHandler.addHandler("companion",function(data){var i,target=$("#cb_medrect300x60_div");if($.isArray(data)&&data.length>0){target.empty();for(var i=0;i<data.length;i++)data[i].content&&target.append(data[i].content)}}),window[loadHanderFN]||(window[loadHanderFN]=function(){target=$("iframe[data-uid='"+videoId+"']:first").get(0)||!1,target&&FOX_EventHandler.sendMessage(target,"FOXVIDEO.IFRAME.Embed",config)})};parseInt(version.split(".")[0],10)>=5&&window.EventMessageHandler?(loadHandler=' onload="'+loadHanderFN+'(event)"',setForNewVersion(),sourceURL=urlDomain+"/static/p/video/app/bundle/"+version+"/iframe/embed.html",params.push("id="+videoId),params.push("mode=html"),params.push("_fx=y"),"true"===root.helper.getQuery("debug")&&params.push("debug=true")):(sourceURL=urlDomain+"/static/p/video/app/embed.html",params.push("video_id="+videoId),params.push("_vtcomp=y"),version&&params.push("_ver="+version)),isVariable?(params.push("w=1","h=1"),sourceURL+="?"+params.join("&"),newVideo='<iframe data-uid="'+videoId+'" src="'+sourceURL+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="100%" height="100%" style="border:0;width:100%;height:100%"'+loadHandler+"></iframe>",newVideo='<div id="fox-html5-frame" style="width:'+attr.width+";height:"+attr.height+'">'+newVideo+"</div>"):(params.push("w="+width,"h="+height),sourceURL+="?"+params.join("&"),newVideo='<iframe data-uid="'+videoId+'" src="'+sourceURL+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+width+'" height="'+height+'" style="border:0;width:'+attr.width+";height:"+attr.height+'"'+loadHandler+"></iframe>"),holderElm.get(0).innerHTML=newVideo},PandoraTypes}(),PandoraAds=function(){var PandoraAds=function(root){this.root=root,this.zoneIdVal=function(){var ac=CONST.auditude_code.zoneId,ret=ac.fn2;switch(root._videoDomain){case"video.foxnews.com":ret=ac.fn2;break;case"video.foxbusiness.com":ret=ac.fb2;break;case"video.foxbusiness.com":ret=ac.fb}return ret}()};return PandoraAds.prototype={set:function(info){if(!info)return!1;var adVideoId,adDomain,zoneId,defaultAssetId,self=this,root=this.root,videoId=root.main.dataObj[info.id]&&root.main.dataObj[info.id].guid?root.main.dataObj[info.id].guid:!1,elm=info.elm,vidUrl=info.url,userdata=(info.dim,info.userData?info.userData:{}),playWhenReady=function(vidElement){var clickId="p-click-"+videoId;try{$("body").append('<a href="#" id="'+clickId+'" style="display:none;">Click Me</a>'),$("#"+clickId).click(function(){return vidElement.play(),!1}),setTimeout(function(){$("#"+clickId).click().remove()},250)}catch(err){log("[videoPlayer.auditude] No play() function for html5 video element. (Err: "+err+")")}},extAdVal=window.FN_AUDITUDE||{};adVideoId=extAdVal.adVideoId?extAdVal.adVideoId:videoId,adDomain=extAdVal.adDomain?extAdVal.adDomain:CONST.auditude_code.adDomain,zoneId=extAdVal.zoneId?extAdVal.zoneId:self.zoneIdVal,defaultAssetId=extAdVal.defaultAssetId?extAdVal.defaultAssetId:CONST.auditude_code.defaultAssetId,adVideoId=adVideoId?[adVideoId,defaultAssetId]:defaultAssetId,userdata.mobile=function(){var m=getMobilePlatform();return m?m.dev:"false"}(),showToConsole("mobile platform:"+userdata.mobile),userdata=function(){var ret=[];for(var i in userdata)ret.push(i+"="+userdata[i]);return ret.join(";")}();var container=elm.get(0),vidElm=elm.find("video:first"),video=vidElm.get(0),hasContentStarted=!1,opts={controls:!0,style:{backgroundColor:"#000",width:vidElm.width(),height:vidElm.height()},handlers:{}},audPlugin=aud.html5.AdPlayer(video,container,adDomain,zoneId,opts);audPlugin.subscribe(aud.events.init_complete,function(event,plugin){log("[videoPlayer.auditude] Init Complete event"),plugin.publish(aud.notifications.break_begin)}).subscribe(aud.events.break_begin,function(){log("[videoPlayer.auditude] Break Begin event")}).subscribe(aud.events.break_end,function(){log("[videoPlayer.auditude] Break End event"),hasContentStarted||(video.src=vidUrl,video.load(),playWhenReady(video))}).subscribe(aud.events.linear_ad_begin,function(){log("[videoPlayer.auditude] Linear Ad Begin event")}).subscribe(aud.events.linear_ad_end,function(){log("[videoPlayer.auditude] Linear Ad End event")}).subscribe(aud.events.non_linear_ad_begin,function(){log("[videoPlayer.auditude] Non-Linear Ad Begin event")}).subscribe(aud.events.non_linear_ad_end,function(){log("[videoPlayer.auditude] Non-Linear Ad End event")}).subscribe(aud.events.pause_playback,function(){log("[videoPlayer.auditude] Pause playback event"),video.pause()}).subscribe(aud.events.resume_playback,function(){log("[videoPlayer.auditude] Resume playback event"),playWhenReady(video)}).init(adVideoId,{userData:userdata})},load:function(fn){if(!window.aud){var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=CONST.PROTOCOL+"//adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(script)}$.loadAttempt(50,250,function(){return window.aud&&aud.html5?!0:!1},function(){"function"==typeof fn&&fn()})}},PandoraAds}(),PandoraListeners=function(){var PandoraListeners=function(root){this.root=root};return PandoraListeners.prototype={init:function(id){this.events(id),this.custom(id)},events:function(id){var root=this.root,main=root.main;root.video[id].elm.bind("loadstart",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoLoadStart&&main._callbacksObj[id].videoLoadStart(),$.removeData(root.video[id].elm,"Event_ended"),root.EVENTS.loadStart(id)}),root.video[id].elm.bind("progress",function(){root.EVENTS.progress(id)}),root.video[id].elm.bind("loadedmetadata",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoMedaLoaded&&main._callbacksObj[id].videoMetaLoaded(),root.EVENTS.loadedMetaData(id)}),root.video[id].elm.bind("ended",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoEnded&&main._callbacksObj[id].videoEnded(root.CONTROLS),root.video[id].elm.data("Event_ended",!0),root.EVENTS.ended(id)}),root.video[id].elm.bind("playing",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoPlaying&&main._callbacksObj[id].videoPlaying(),root.EVENTS.playing(id)}),root.video[id].elm.bind("pause",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoPause&&main._callbacksObj[id].videoPause(),root.EVENTS.pause(id)}),root.video[id].elm.bind("timeupdate",function(){main._callbacksObj[id]&&main._callbacksObj[id].videoTimeUpdate&&main._callbacksObj[id].videoTimeUpdate(),root.EVENTS.timeUpdate(id)})},custom:function(){}},PandoraListeners}(),PandoraControls=function(){var PandoraControls=function(root){this.root=root};return PandoraControls.prototype={play:function(id){var root=this.root,main=root.main,domId=main.setPlayerMap({type:"get",vId:id});if("undefined"!=typeof document.getElementById(domId)){var doc=document.getElementById(domId),attempts=0,trigger=function(){4==doc.readyState?doc.play():30>attempts&&setTimeout(function(){attempts++,trigger()},150)};trigger()}},pause:function(id){var root=this.root,main=root.main,domId=main.setPlayerMap({type:"get",vId:id});"undefined"!=typeof document.getElementById(domId)&&document.getElementById(domId).pause()},load:function(){},canPlayType:function(){},jumpTo:function(id,time){if(isNaN(time))return!1;var root=this.root,main=root.main,domId=main.setPlayerMap({type:"get",vId:id});"undefined"!=typeof document.getElementById(domId)&&(document.getElementById(domId).currentTime=time)}},PandoraControls}(),PandoraEvents=function(){var PandoraEvents=function(root){this.root=root};return PandoraEvents.prototype={loadStart:function(id){{var root=this.root,main=root.main;main.setPlayerMap({type:"get",vId:id})}},progress:function(id){{var root=this.root,bufferEnd=root.STATES.buffered(id,{range:"end",val:0});parseInt(bufferEnd/root.STATES.duration(id)*100,10)}},loadedMetaData:function(){},timeUpdate:function(){},ended:function(){},playing:function(){},pause:function(){}},PandoraEvents}(),PandoraProperties=function(){var PandoraProperties=function(root){this.root=root};return PandoraProperties.prototype={currentTime:function(id,raw){raw=raw||!1;var root=this.root,currentRaw=Math.round(root.video[id].nativeElm.currentTime);
if(!raw){var current=root.helper.formatTime(currentRaw),duration=root.STATES.duration(id,!0);return current>duration?duration:current}return currentRaw}},PandoraProperties}(),PandoraStates=function(){var PandoraStates=function(root){this.root=root};return PandoraStates.prototype={duration:function(id,raw){raw=raw||!1;var root=this.root,main=root.main,domId=main.setPlayerMap({type:"get",vId:id});if("undefined"==typeof document.getElementById(domId))return 0;var durationRaw=Math.round(document.getElementById(domId).duration);return raw?durationRaw:root.helper.formatTime(durationRaw)},buffered:function(id,rangeObj){if(rangeObj=rangeObj||!1,!rangeObj)return!1;var root=this.root,main=root.main,domId=main.setPlayerMap({type:"get",vId:id});if("undefined"!=typeof document.getElementById(domId))try{switch(rangeObj.range){case"length":return document.getElementById(domId).buffered.length;case"start":return document.getElementById(domId).buffered.start(rangeObj.val);case"end":return document.getElementById(domId).buffered.end(rangeObj.val)}}catch(err){log("[videoPlayer.pandora.states] Warning: "+err)}return!1}},PandoraStates}();return Pandora}(),videoPlayerOverlay={set:function(){var x,i,FS=this,args=arguments,obj={elm:!1,ratio:!1,dim:!1,position:!1,size:!1,hover:!0};if(1===args.length&&"object"==typeof args[0])for(i in args[0])obj[i]=args[0][i];else for(x=0;x<args.length;x++)switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6]}obj.elm.each(function(){var item=$(this),img=new Image,pObj=obj;pObj.elm=item,pObj.dim?FS.setOverlay(pObj):(img.onload=function(){pObj.dim=[img.width,img.height],FS.setOverlay(pObj)},img.src=item.find("img").attr("src"))})},useAbsImg:function(dim){var x,map=["118","96","64","48","32","24","16"],ret=!1;if(!isNaN(dim))if(dim>=map[0])ret=map[0];else for(x=0;x<map.length;x++){var val=map[x],nVal=map[x+1]?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(val>=dim&&dim>nVal){ret=diffH>diffL?nVal:val;break}}return ret?ret:!1},setOverlay:function(obj){function mFloor(val){return Math.floor(val)}function px(val){return val+"px"}function hover(over){over=altHover?over?!1:!0:over;var dim;return useAbsImg&&absDim&&(dim=absDim),dim=dim?"-"+dim:"",overlaySrc.replace("${dim}",dim).replace("${hover}",over?"-hover":"")}function set(){var resizeVal=dim[1]<dim[0]?dim[1]:dim[0],resize=resizeVal*ratio;resize=resize>size?size:resize;var imgW=resize,imgH=imgW,ovrL=!1,ovrR=!1,ovrT=!1,ovrB=!1,edgeW=.03,edgeH=.05;switch(edgeW=mFloor(dim[0]*edgeW),edgeH=mFloor(dim[1]*edgeH),position){case"top right":ovrR=edgeW,ovrT=edgeH;break;case"bottom right":ovrR=edgeW,ovrB=edgeH;break;case"top left":ovrL=edgeW,ovrT=edgeH;break;case"bottom left":ovrL=edgeW,ovrB=edgeH;break;default:ovrL=Math.floor(.5*dim[0]-.5*imgW),ovrT=Math.floor(.5*dim[1]-.5*imgH)}var css={};ovrR&&(css.right=px(ovrR)),ovrL&&(css.left=px(ovrL)),ovrT&&(css.top=px(ovrT)),ovrB&&(css.bottom=px(ovrB)),useAbsImg&&FS.useAbsImg(imgW)&&(imgW=FS.useAbsImg(imgW),imgH=imgW,absDim=imgW),css.width=px(imgW),css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css),elm.find("a").css({position:"relative"}),elm.find("img").each(function(){function hoverOver(over){over&&!isHover?(isHover=!0,overlayImg.attr("src",hover(!0))):isHover&&(isHover=!1,overlayImg.attr("src",hover()))}var item=$(this),parent=item.parent(),isHover=!1;parent.css({display:"block",padding:"0"}).prepend(overlay);var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");titleLink.hover(function(){hoverOver(!0)},function(){hoverOver()}),parent.hover(function(){hoverOver(!0)},function(){hoverOver()})})}var FS=this,elm=obj.elm,ratio=obj.ratio||.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,altHover=(obj.useAltImg,obj.altHover||!1),useAbsImg=!0,absDim=!1,overlaySrc=CONST.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png",hoverImg=new Image;hoverImg.src=hover(!0),set()}};window.console||(window.console={log:function(){},error:function(){}});var showToConsole=log;!function(){function toInt(val){return parseInt(val,10)}function isFn(val){return"function"==typeof val?!0:!1}var loadAttempt=function(){var i,cb,args=arguments;if(0===args.length)return!1;var cfg={attempt:0,timeout:500};if(1===args.length&&"object"==typeof args[0]){for(i in args[0])cfg[i]=args[0][i];if(!cfg.callback)return!1;if(cb=cfg.callback,!cb.check||!cb.success)return!1;cfg._check=cb.check,cfg._success=cb.success,cb.timedOut&&(cfg._timeout=cb.timedOut)}else if(!isNaN(args[0])&&!isNaN(args[1])&&isFn(args[2])&&isFn(args[3]))cfg.attempt=args[0],cfg.timeout=args[1],cfg._check=args[2],cfg._success=args[3],args[4]&&(cfg._timeout=args[4]),args[5]&&(cfg._abort=args[5]);else{if(!isFn(args[0])||!isFn(args[1]))return!1;cfg._check=args[0],cfg._success=args[1],args[2]&&(cfg._timeout=args[2]),args[3]&&(cfg._abort=args[3])}if(!isFn(cfg._check)||!isFn(cfg._success))return!1;if(isFn(cfg._timeout)||(cfg._timeout=function(){}),isNaN(cfg.timeout))return!1;if(cfg.timeout=toInt(cfg.timeout),isNaN(cfg.attempt))return!1;cfg.attempt=toInt(cfg.attempt);var timeoutObj=!1,isAbort=!1;if(cfg.attempt&&cfg.timeout){var attempt=function(){isAbort?clearTimeout(timeoutObj):cfg._check()?(cfg._success(),clearTimeout(timeoutObj)):cfg.attempt>0?timeoutObj=setTimeout(function(){attempt()},cfg.timeout):cfg._timeout(),cfg.attempt--};attempt()}else timeoutObj=setInterval(function(){isAbort?clearInterval(timeoutObj):cfg._check()&&(cfg._success(),clearInterval(timeoutObj))},cfg.timeout);return{abort:function(){isAbort=!0}}};"undefined"!=typeof jQuery&&jQuery.extend&&!jQuery.loadAttempt?jQuery.extend({loadAttempt:loadAttempt}):window.loadAttempt||(window.loadAttempt=loadAttempt)}()}(jQuery),window.FOX_VideoPlayer=function($){window.swfobject||document.write('<script type="text/javascript" src="//global.fncstatic.com/static/v/all/js/plugins/swfobject.js"></script>');var CONST={};CONST.logprefix="[FOX_VideoPlayer] ",CONST.playerName="embed",CONST.bundlePath="/static/p/video/app/bundle",CONST.minDim=[320,180],CONST.videoFeed="/v/feed/video/${videoId}.js",CONST.scopeNamespace="FXVP_DTSET",CONST.VERSION="5.1.0013";var App=function(config){if(!config)return logger("no config!"),!1;var vars=this.__vars={};vars._config=config,vars._version=config.player_version||CONST.VERSION,this.playerVersion=vars._version,this.player=new Player(this),this.videoData=new VideoData(this),vars._messageHandler=new EventMessageHandler,this.setMessageHandlers(),this.init()};App.prototype.init=function(){var self=this,vars=self.__vars,customVersion=getQuery("_ver");customVersion&&(vars._version=customVersion),this.init=function(){}},App.prototype.setMessageHandlers=function(){var self=this,vars=self.__vars,handler=vars._messageHandler,config=vars._config,events=(config.messageHandler||{},new MessageHandler(self));for(i in events)handler.addHandler(i,events[i]);this.setMessageHandlers=function(){}},App.prototype.embed=function(viewName){{var self=this;self.__vars}"string"!=typeof viewName?self.player.embedAll():self.player.embed(viewName)},App.prototype.render=function(custom){var x,self=this,vars=self.__vars,config=vars._config,viewName=!1,holder=custom.holder,css=holder.attr("class"),arr=css.split(" ");for(x=0;x<arr.length;x++){var c=arr[x];if(config.views[c]){viewName=c;break}}if(!viewName)return logger("No view information for: "+viewName),!1;var id=custom.id.replace("videoid:g","");holder.attr("data-video-id",id),custom.cssClass&&holder.addClass(custom.cssClass);var customConfig={};custom.autoplay&&(customConfig.config={autoplay:!0}),self.player.embed(viewName,customConfig)},App.prototype.sendMessage=function(vid,info){var self=this,vars=self.__vars,handler=vars._messageHandler,data=self.videoData.getData(vid);if(data){var target=data.target;target.find("iframe").each(function(){handler.sendMessage(this,info.type,info.data)})}};var Player=function(){var Player=function(root){this.root=root,this.__vars=root.__vars};return Player.prototype.embedAll=function(){var self=this,vars=(self.root,self.__vars),config=vars._config,views=config.views||!1;if(!views)return logger("No views to render!"),!1;for(i in views)self.embed(i)},Player.prototype.embed=function(view,customConfig){var self=this,root=self.root,vars=self.__vars,config=vars._config,info=config.views&&config.views[view]?config.views[view]:!1;if(!info)return logger("No view information found for: "+view),!1;customConfig&&$.extend(!0,info,customConfig);var viewElement=$("#"+view);return 0===viewElement.size()&&(viewElement=$("."+view)),0===viewElement.size()?!1:void viewElement.each(function(i){var el=$(this),videoId=(el.attr("data-video-id")||"").replace(/[^0-9]/gi,"");if(0===videoId.length&&(videoId=legacyVideoTag(el)),videoId.length>0){el.attr("data-video-id",videoId);var vid=[view,i,videoId].join("_").replace(/[^0-9A-Za-z_]/gi,"_"),videoData={target:el,vid:vid,id:videoId,info:info,messageHandler:vars._messageHandler,config:config,version:vars._version};root.videoData.setData(videoData),el.attr("data-video-uid",vid);var viewMode=info.mode?info.mode:config.mode?config.mode:!1,isAutoPlay=info&&info.config&&info.config.autoplay?!0:!1,supportsFlash=0!==swfobject.getFlashPlayerVersion().major?!0:!1;"overlay"===viewMode&&!isAutoPlay&&supportsFlash?Renderer.overlay(videoData):Renderer.iframe(videoData)}})},Player}(),VideoData=function(){var VideoData=function(root){this.root=root,this.__vars=root.__vars,this._data={}};return VideoData.prototype.setData=function(info){{var self=this;self.root,self.__vars}self._data[info.vid]=info},VideoData.prototype.getData=function(vid){var self=this,ret=!1;return vid&&self._data[vid]&&(ret=self._data[vid]),ret},VideoData}(),MessageHandler=function(){var MessageHandler=function(root){this.root=root;var self=this,root=self.root,vars=root.__vars,config=vars._config,messageHandler=config.messageHandler||{};self.messageHandler=messageHandler};return MessageHandler.prototype.playerReady=function(){var self=this,messageHandler=(self.root,self.messageHandler),data=arguments[0];messageHandler.playerReady&&messageHandler.playerReady(data)},MessageHandler.prototype.advance=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.playNextVideo?messageHandler.playNextVideo(data):"function"==typeof window.playNextVideo&&(logger("EVENT: advance"),window.playNextVideo(data))},MessageHandler.prototype.companion=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.companion?messageHandler.companion(data):$("#cb_medrect300x60_div").each(function(){var i,target=$(this);if($.isArray(data)&&data.length>0){target.empty();for(var i=0;i<data.length;i++)data[i].content&&target.append(data[i].content)}})},MessageHandler.prototype.authenticatedHandler=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.authenticatedHandler&&messageHandler.authenticatedHandler(data)},MessageHandler.prototype.currentTimeUTC=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.currentTimeUTC&&messageHandler.currentTimeUTC(data)},MessageHandler.prototype.currentTime=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.currentTime&&messageHandler.currentTime(data)},MessageHandler.prototype.logoutAIS=function(){var self=this,messageHandler=self.messageHandler,data=arguments[0];messageHandler.logoutAIS&&messageHandler.logoutAIS(data)},MessageHandler.prototype["Flash.AEP.jsCallbackHandler"]=function(){var self=this,root=self.root,config=root.__vars._config,messageHandler=self.messageHandler,arg=arguments[0];switch(messageHandler["Flash.AEP.jsCallbackHandler"]&&messageHandler["Flash.AEP.jsCallbackHandler"](arg),arg.type){case"mediaPlayerShareRequest":var data=arg.data,info=data&&data.clipData?data.clipData:!1,provider=data&&data.provider?data.provider:!1;if(!info||!provider)return alert("No provider or clip data"),!1;var domain=function(){var ret=config.videoDomain||!1;return ret||(ret=window.FOX_VideoPageVars&&window.FOX_VideoPageVars.videoDomain?window.FOX_VideoPageVars.videoDomain:!1),ret=ret?"http://"+ret:""}(),url=domain+"/v/"+info.id+"/",shareInfo={};shareInfo.title=info.title,shareInfo.desc=info.description,shareInfo.image=info.thumbnail,shareInfo.actLink=url,shareInfo.linkBack=url,shareInfo.userMessage="",provider=provider.toLowerCase();var options={provider:provider,data:shareInfo};window.FOX_ShareMedia&&"function"==typeof window.FOX_ShareMedia.showShare&&window.FOX_ShareMedia.showShare(options)}},MessageHandler}(),Renderer=function(){var Renderer={};return Renderer.iframe=function(cfg){var id=cfg.id,info=cfg.info,target=cfg.target,config=cfg.config,version=info.version||cfg.version,handler=cfg.messageHandler,ais=info.ais||!1,templ='<iframe src="${src}" border="0" frameborder="0" scrolling="no" ${style}></iframe>';templ=info.variable?templ.replace("${style}",'style="width:100%; height:100%;"'):templ.replace("${style}",'style="width:${width}px; height:${height}px;"');var src="//"+config.videoDomain+"/static/p/video/app/bundle/"+version+"/iframe/"+(ais?"ais":"embed")+".html",params=[];if(params.push("video_id="+id),params.push("_fx=y"),config.xmlConfig&&params.push("_xcf="+config.xmlConfig),"y"===getQuery("_vtcomp")){var viewMode=info.mode?info.mode:config.mode?config.mode:!1;"overlay"===viewMode&&(info.config||(info.config={}),info.config.autoplay=!0),params.push("_vtcomp=y")}"true"===getQuery("debug")&&params.push("debug=true"),src=src+"?"+params.join("&"),templ=templ.replace("${src}",src);var dim=info.dim;templ=templ.replace("${width}",dim[0]),templ=templ.replace("${height}",dim[1]),target.html(templ),info.uid=cfg.vid,target.find("> iframe:first").bind("load",function(){handler.sendMessage(this,"FOXVIDEO.IFRAME.Embed",info)})},Renderer.overlay=function(cfg){var info=(cfg.id,cfg.info),target=cfg.target,config=cfg.config,dim=(info.version||cfg.version,info.dim),templ='<div class="m"><a class="video-overlay" href="#"><img data-src="${src}" src="//global.fncstatic.com/static/v/all/img/clear.gif" width="${width}" height="${height}" /></a></div>',imgSrc=function(){var ret=!1,parent=target.parent(),opt1=parent.children("div.img"),opt2=parent.find(".m-controller img:first"),opt3=parent.parent().children("div.m-controller img:first"),useOpt=opt1.attr("src")?opt1:opt2.attr("src")?opt2:opt3.attr("src")?opt3:!1;return useOpt&&(ret=useOpt.attr("src"),useOpt.remove()),ret}(),trigger=function(imageSource){var img=new Image;imageSource=imageSource.replace(/^(http:|https:)/i,""),templ=templ.replace("${src}",imageSource),templ=templ.replace("${width}",dim[0]),templ=templ.replace("${height}",dim[1]),target.html(templ);var overlay=target.find("a.video-overlay:first");overlay.find("> img:first").css({width:dim[0]+"px",height:dim[1]+"px"}),overlay.unbind("click").bind("click",function(){return cfg.info.config.autoplay=!0,Renderer.iframe(cfg),!1}),target.addClass("video-ct"),img.onload=function(){overlay.find("> img:first").attr("src",imageSource);var mediaOverlay=new FOX_Plugins.MediaOverlay;mediaOverlay.embed({target:target.find("img"),type:"video",onDone:function(){config.responsive&&target.find("img").removeAttr("style")}})},img.src=imageSource};imgSrc?trigger(imgSrc):loadFeed(cfg,function(data){trigger(resizeImage(data.image.url,dim[0],dim[1]))})},Renderer}(),FeedParser=function(){var FeedParser={};return FeedParser.grab=function(data){var obj={};obj.raw=data;var channel=data.channel,item=channel.item;return obj.image=item["media-group"]["media-thumbnail"]["@attributes"],obj},FeedParser}(),loadFeed=function(cfg,callback){var videoId=cfg.id,videoUid=cfg.vid,target=cfg.target,config=cfg.config;if("function"!=typeof callback)return!1;var namespace=CONST.scopeNamespace;if(window[namespace]||(window[namespace]={}),window[namespace][videoUid]&&window[namespace][videoUid].d)return callback(window[namespace][videoUid].d),!0;window[namespace][videoUid]={},window[namespace][videoUid].fn=function(data){logger("Loaded!");var normalized=FeedParser.grab(data);window[namespace][videoUid].d=normalized,callback(normalized)};var url=function(){var ret=CONST.videoFeed;ret=ret.replace("${videoId}",videoId);var params=["template=fox","callback="+[namespace,videoUid,"fn"].join("."),"cb="+cacheBuster()].join("&");return ret+="?"+params}(),domain=function(){var x,sp,ret=config.videoDomain||"video.foxnews.com",d=!1,classes=(target.attr("class")||"").split(" ");for(x=0;x<classes.length;x++){var t=classes[x];if(0===t.indexOf("vid-"))switch(sp=t.split("-"),sp.shift(),sp.join("-")){case"fn2":d="video.foxnews.com";break;case"fb2":d="video.foxbusiness.com";break;case"fb":d="video.foxbusiness.com";break;case"fn-latino":d="video.latino.foxnews.com"}}return d&&(ret=d),ret="//"+ret}();url=domain+url,logger("Loading Feed: "+url),$.ajax({url:url,dataType:"script",async:!0,cache:!0})},resizeImage=function(u,w,h){if(isNaN(w)||isNaN(h))return u;var url=u;if(u.indexOf("a57.foxnews.com")>-1){url=u.split("/");var idx=url.length;url[idx-3]=w,url[idx-2]=h,url=url.join("/")}else url=u.split("/"),dim="/"+w+"/"+h+"/",url.splice(0,2),url.unshift("http://a57.foxnews.com"),url=url.slice(0,url.length-1).join("/")+dim+url.slice(url.length-1);return url},legacyVideoTag=function(el){var ret,id=el.attr("id")||!1;if(id){var sp=id.split(":");2===sp.length&&"videoid"===sp[0]&&"g"===sp[1].charAt(0)&&(ret=sp[1].replace(/[^0-9]/gi,""))}else ret="";return ret},getQuery=function(param){var x,val=!1,query=window.location.search.substr(1),qArr=query.split("&"),len=qArr.length;for(x=0;len>x;x++){var pair=qArr[x].split("=");if(pair[0]===param){val=decodeURIComponent(pair[1]).toString();break}}return val},logger=function(str){log(CONST.logprefix+str)},cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return App}(jQuery),window.FOX_Plugins=window.FOX_Plugins||{};var touchEventListener=window.FOX_Plugins.touchEventListener=function($){function App(){this.listenersArr=[],this.version="03.31.2010"}function TouchEvents(){this._elm=!1,this._eventsCallback={},this._moveSensitivity=15,this.properties={scale:{},move:{origin:{},current:{},diff:{}}},this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"]}function showToConsole(str){"object"==typeof window.console&&console.log(str)}function isArray(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)}App.prototype={append:function(config){if(config=config||!1,!config||!config.elm)return!1;var TOUCH=new TouchEvents;TOUCH.init(config),this.listenersArr.push({fn:TOUCH,config:config}),this.trigger(TOUCH)},trigger:function(fn){fn=fn||!1;var EL=this;if(fn)fn.trigger();else{var x;for(x=0;x<EL.listenersArr.length;x++){var func=EL.listenersArr[x].fn;EL.helper.removeListener(func._elm,fn.thisEventList),func.trigger()}}},reTriggerListener:function(){var EL=this;$(document).ready(function(){function check(){count!==iframeCount?iframeCount=count:timer=Math.floor(timer/3)+timer,maxTimer>timer&&(EL.trigger(),setTimeout(function(){check()},timer))}var timer=500,maxTimer=1e4,iframeCount=0,count=$("iframe").size();check()})}},App.prototype.helper={removeListener:function(elm,listener){elm.each(function(){var x,item=$(this);if(isArray(listener))for(x=0;x<listener.length;x++)item.unbind(listener[x]);else item.unbind(listener)})}},TouchEvents.prototype={init:function(config){var i;for(i in config)this["_"+i]=config[i];this.testElm={coords:$("#coords"),start:$("#start"),diff:$("#diff")},this.logger=new CustomLogger,this.logger.init()},trigger:function(){var EL=this;this._elm.each(function(){EL.setListeners($(this))})},setListeners:function(item){if(item=item||!1,!item)return!1;{var EL=this;item.get(0)}item.bind("touchstart",function($event){var event=$event.originalEvent;EL._elm.data("EVENT_touchstart.trigger",!0),EL._elm.data("EVENT_touchmove.setOrigin",!1),EL._elm.data("EVENT_touchmove.directionalOnce",!1),EL._eventsCallback.touchstart&&EL._eventsCallback.touchstart(event)}),item.bind("touchend",function($event){var event=$event.originalEvent;EL._elm.data("EVENT_touchstart.trigger",!1),EL._elm.data("EVENT_touchmove.directionalOnce",!1),EL._eventsCallback.touchend&&EL._eventsCallback.touchend(event)}),item.bind("touchmove",function($event){function executeDirectional(){function directionalOnce(){EL._elm.data("EVENT_touchmove.directionalOnce",!0)}var sens=EL._moveSensitivity,direction=[];pageX>=origin.x+sens?(direction.push("right"),EL.logger.log("going right")):pageX<=origin.x-sens&&(direction.push("left"),EL.logger.log("going left")),pageY<=origin.y-sens?(direction.push("up"),EL.logger.log("going up")):pageY>=origin.y+sens&&(direction.push("down"),EL.logger.log("going down")),EL._eventsCallback.touchmoveMoveOnce&&EL._eventsCallback.touchmoveMoveOnce(direction,EL.properties.move,event),direction.length>0&&directionalOnce()}var event=$event.originalEvent,pageX=event.touches[0].pageX,pageY=event.touches[0].pageY;EL.properties.move.current={x:pageX,y:pageY},EL._elm.data("EVENT_touchmove.setOrigin")||(EL.properties.move.origin.x=pageX,EL.properties.move.origin.y=pageY,EL._elm.data("EVENT_touchmove.setOrigin",!0));var origin={x:EL.properties.move.origin.x,y:EL.properties.move.origin.y};EL.properties.move.diff={x:pageX-origin.x,y:pageY-origin.y},EL._eventsCallback.touchmoveRaw&&EL._eventsCallback.touchmoveRaw(EL.properties.move,event),EL._elm.data("EVENT_touchmove.directionalOnce")||executeDirectional()}),item.bind("gesturestart",function($event){var event=$event.originalEvent,scale=EL.helper.setScale(event.scale);EL.properties.scale.current=EL.properties.scale.current||scale,EL._eventsCallback.gesturestart&&EL._eventsCallback.gesturestart(event),EL.properties.scale.changed=!1}),item.bind("gestureend",function($event){var event=$event.originalEvent,scale=EL.helper.setScale(event.scale);EL._eventsCallback.gestureend&&EL._eventsCallback.gestureend(event),EL.properties.scale.current!==scale&&(EL.properties.scale.current=scale,EL.properties.scale.changed=!0,EL.logger.log("Scale changed to: "+scale),EL._eventsCallback.scaleChange&&EL._eventsCallback.scaleChange(scale,event))});var windowObj=$(window);windowObj.data("EVENT_orientationchange")||(windowObj.bind("orientationchange",function($event){var event=$event.originalEvent;EL.logger.log("Orientation change: "+EL.helper.orientation(window.orientation,event))}),windowObj.data("EVENT_orientationchange",!0)),EL._eventsCallback.orientationchange&&windowObj.bind("orientationchange",function($event){var event=$event.originalEvent;EL._eventsCallback.orientationchange(EL.helper.orientation(window.orientation,event))})}},TouchEvents.prototype.helper={setScale:function(scale){return isNaN(scale)?void 0:Math.round(100*scale)/100},orientation:function(val){if(!isNaN(val)){var abs=Math.abs(val);return 0===abs||180===abs?"vertical":"horizontal"}}};var CustomLogger=function(){};return CustomLogger.prototype={init:function(){this.elm=$("#console ul:first")},log:function(str){return"y"!==this.getQuery("log")?!1:void(this.elm.size()>0?(str="<li>"+str+"</li>",this.elm.append(str)):showToConsole(str))},getQuery:function(q){var x,search=window.location.search.substr(1),pairs=search.split("&");for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");if(split[0]===q)return split[1]}return!1}},new App}(jQuery);!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:TouchEventListener",function(){return window.FOX_Plugins.touchEventListener}):!1}(window.Modulr),window.ClientStorageManager=function(window){var _timeouts={},CONST={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:!1,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"},ClientStorageManager=function(){this.dataObj=null,this.initialized=!1,this.type=null,this.customType=!1,this.control=new Control(this),this.init()};ClientStorageManager.prototype={init:function(){var self=this,defaultType=getAvailableBrowserStorageType();self.setProperties(),self.storageInstance=new StorageMedium(self,{namespace:CONST._namespace,prefix:CONST._prefix,type:defaultType}),self.type=defaultType,self.initialized=!0,showToConsole("[init] Initialized: "+self.type),self.type.toLowerCase().indexOf("cookie")>-1&&showToConsole("[init] Warning: cookie storage maxes out at 4kb only!")},setProperties:function(){var x,search=window.location.search.substr(1),pairs=search.split("&"),len=pairs.length,valuePair={};for(x=0;len>x;x++){var split=pairs[x].split("=");valuePair[split[0]]=decodeURIComponent(split[1])}valuePair.showConsole&&(CONST._showConsole=!0)},set:function(){var i,self=this,args=arguments,applyNewSetting=function(obj){switch(obj.key){case"type":var type=obj.value;switch(type){case"session":type=window.sessionStorage?"sessionStorage":"sessionCookie";break;case"cookie":type="cookie";break;case"sessionCookie":type="sessionCookie";break;default:showToConsole("[set] Getting default storage.."),type=getAvailableBrowserStorageType()}if(type===self.type){showToConsole("[set] Type already: "+type);break}"MSIEStorage"===self.type&&(self.MSIEStorageInstance=self.storageInstance);var config={namespace:CONST._namespace,prefix:CONST._prefix,type:type,prevType:self.type},temp="MSIEStorage"===config.type?self.MSIEStorageInstance:new StorageMedium(self,config);temp.initialized?(clearAllTimeouts(),insertObjItems(CS,{customType:!0,storageInstance:temp,type:config.type}),self.control.root=CS,showToConsole("[set] Storage changed: "+config.prevType+" -> "+config.type),self.type.toLowerCase().indexOf("cookie")>-1&&showToConsole("[set] Warning: cookie storage maxes out at 4kb only!")):showToConsole("[set] Error setting type: "+type);break;default:showToConsole("[set] Invalid property key: "+obj.key)}};if("object"==typeof args[0])for(i in args[0])applyNewSetting({key:i,value:args[0][i]});else applyNewSetting({key:args[0],value:args[1]})},saveItem:function(){var args=arguments,item=1===args.length&&"object"==typeof args[0]?args[0]:{key:args[0],value:args[1]};this.control.saveItem(item)},deleteItem:function(key,fn){var item={key:key};fn&&(item.fn=fn),this.control.deleteItem(item)},getItem:function(key,fn,raw){this.control.getItem({key:key,fn:fn,raw:raw||!1})},getAll:function(fn){this.control.getAllItems(fn)},clearAll:function(fn){this.control.clearAll(fn)}};var Control=function(){var Control=function(root){this.root=root};Control.prototype={saveItem:function(item){var self=this,root=this.root;if(item.key&&item.value){var value=UTILS.formatValue(item.value);value&&value.length>0&&(root.storageInstance.save({key:self.setPrefix(item.key),value:value,expire:item.expire?item.expire:0}),"undefined"!=typeof item.success&&(self.attempts=0,self.checkData(item)))}else item.error&&item.error("No Key or Value entered")},deleteItem:function(item){var root=this.root,key=this.setPrefix(item.key),deleteAttempt=function(){root.storageInstance.deleteItem(key),showToConsole("[control] Storage Event: Delete")};item.fn?item.fn(deleteAttempt()):deleteAttempt()},getItem:function(item){item.key=this.setPrefix(item.key),this.root.storageInstance.load(item)},getAllItems:function(fn){this.root.storageInstance.getAll(fn)},clearAll:function(fn){var root=this.root;root.storageInstance.clearAll(),showToConsole("[control] Storage Event: Clear All"),"function"==typeof fn&&fn()},checkData:function(item){var self=this,root=this.root;self.getItem({key:item.key,raw:!1,fn:function(value){if(null===value){var errStr="[control] Error saving key: "+item.key;return item.success=!1,item.error(errStr),showToConsole(errStr),null}item.success({key:item.key,value:value,type:root.storageInstance.type}),showToConsole("[control] Storage Event: Save")}})},setPrefix:function(key){var noPF="MSIEStorage|cookie|sessionCookie";return noPF.indexOf(this.root.type)>-1?key:UTILS.addPrefix(CONST._prefix,key)}};var UTILS={addPrefix:function(prefix,key){return prefix+this.trim(key)},removePrefix:function(prefix,key){return key.substr(prefix.length)},formatValue:function(value){return this.trim(value.toString())},trim:function(str){return str.replace(/^\s+|\s+$/g,"")}};return Control}(),StorageMedium=function(){var Medium=function(root,config){return this.root=root,this.sessionStorage=new SessionStorage(this),this.localStorage=new LocalStorage(this),this.globalStorage=new GlobalStorage(this),this.MSIEStorage=new MSIEStorage(this),this.cookieStorage=new CookieStorage(this),this.init(config)};Medium.prototype={init:function(config){var type,self=this;switch(self.initialzed=!0,config.type){case"MSIEStorage":insertObjItems(config,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:CONST._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}}),type="MSIEStorage";break;case"cookie":insertObjItems(config,{cookieName:CONST._cookiePrefix,sessionCookie:!1}),type="cookieStorage";break;case"sessionCookie":insertObjItems(config,{cookieName:CONST._cookiePrefix+"s",sessionCookie:!0}),type="cookieStorage";break;default:type=config.type}return self[type].init(config),self[type]}};var SessionStorage=function(main){this.root=main.root,this.main=main};SessionStorage.prototype={init:function(config){var i;for(i in config)this[i]=config[i];this.initialized=!0},save:function(item){try{window.sessionStorage.setItem(item.key,item.value)}catch(err){showToConsole("[sessionStorage save] Error Saving: "+err)}},load:function(){function loadItem(key){return window.sessionStorage.getItem(key)}var args=arguments;return 1!==args.length||"object"!=typeof args[0]?loadItem(args[0]):void args[0].fn(loadItem(args[0].key))},deleteItem:function(key){window.sessionStorage.removeItem(key)},getAll:function(fn){var x,items={},count=0,storage=window.sessionStorage,len=storage.length;for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&(items[key.substr(this.prefix.length)]=this.load(key),count++)}fn(count>0?items:null)},clearAll:function(){var x,k,keys=[],storage=window.sessionStorage,len=storage.length;for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&keys.push(storage.key(x))}var keyLen=keys.length;for(k=0;keyLen>k;k++)this.deleteItem(keys[k]);return!0}};var LocalStorage=function(main){this.root=main.root,this.main=main};LocalStorage.prototype={init:function(config){var i;for(i in config)this[i]=config[i];this.expire=new ClientStorageTimeStamp,this.initialized=!0,this.removeExpired()},save:function(item){var expires="";item.expire&&(expires=this.expire.setToExpire(item.expire)?this.expire.set(item.expire):"");try{window.localStorage.setItem(item.key,item.value.toString()+expires)}catch(err){showToConsole("[localStorage save] Error Saving: "+err)}},load:function(){function loadItem(key,raw){var value=window.localStorage.getItem(key);if(value){if(!SM.expire.isStale(value))return raw?value:SM.expire.removeExpireStr(value);SM.deleteItem(key)}return null}var SM=this,args=arguments;return 1!==args.length||"object"!=typeof args[0]?loadItem(args[0],args[1]||!1):void args[0].fn(loadItem(args[0].key,args[0].raw||!1))},deleteItem:function(key){window.localStorage.removeItem(key)},getAll:function(fn){var x,items={},count=0,storage=window.localStorage,len=storage.length;for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&(items[key.substr(this.prefix.length)]=this.load(key),count++)}fn(count>0?items:null)},clearAll:function(){var x,k,keys=[],storage=window.localStorage,len=storage.length;
for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&keys.push(storage.key(x))}var keyLen=keys.length;for(k=0;keyLen>k;k++)this.deleteItem(keys[k]);return!0},removeExpired:function(){var x,k,keys=[],storage=window.localStorage,len=storage.length;for(x=0;len>x;x++)keys.push(storage.key(x));var keyLen=keys.length;for(k=0;keyLen>k;k++)0===keys[k].indexOf(this.prefix)&&this.expire.isStale(storage[keys[k]])&&this.deleteItem(keys[k])}};var GlobalStorage=function(main){this.root=main.root,this.main=main};GlobalStorage.prototype={init:function(config){var i;for(i in config)this[i]=config[i];this.expire=new ClientStorageTimeStamp,this.initialized=!0,this.removeExpired()},save:function(item){var expires="";item.expire&&(expires=this.expire.setToExpire(item.expire)?this.expire.set(item.expire):"");try{window.globalStorage[document.domain][item.key]=item.value.toString()+expires}catch(err){showToConsole("[globalStorage save] Error Saving: "+err)}},load:function(){function loadItem(key,raw){if("undefined"==typeof window.globalStorage[document.domain][key])return null;var value=window.globalStorage[document.domain][key].value;return SM.expire.isStale(value)?(SM.deleteItem(key),null):raw?value:SM.expire.removeExpireStr(value)}var SM=this,args=arguments;return 1!==args.length||"object"!=typeof args[0]?loadItem(args[0],args[1]||!1):void args[0].fn(loadItem(args[0].key,args[0].raw||!1))},deleteItem:function(key){delete window.globalStorage[document.domain][key]},getAll:function(fn){var x,items={},count=0,storage=window.globalStorage[document.domain],len=storage.length;for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&(items[key.substr(this.prefix.length)]=this.load(key),count++)}return fn(count>0?items:null)},clearAll:function(){var x,k,keys=[],storage=window.globalStorage[document.domain],len=storage.length;for(x=0;len>x;x++){var key=storage.key(x);0===key.indexOf(this.prefix)&&keys.push(storage.key(x))}var keyLen=keys.length;for(k=0;keyLen>k;k++)this.deleteItem(keys[k]);return!0},removeExpired:function(){var i;for(i in globalStorage[document.domain])0===i.indexOf(this.prefix)&&this.expire.isStale(globalStorage[document.domain][i].value)&&this.deleteItem(i)}};var MSIEStorage=function(main){this.root=main.root,this.main=main};MSIEStorage.prototype={init:function(config){var i;for(i in config)this[i]=config[i];this.expire=new ClientStorageTimeStamp,this.initialized=!1,this.isDocReady=!1;var iframe=document.createElement("iframe");iframe.setAttribute("src",this.frame.src+"?n="+config.namespace+"&s="+this.frame.store),iframe.setAttribute("id",this.frame.id),iframe.setAttribute("name",this.frame.name),iframe.setAttribute("width","5"),iframe.setAttribute("height","5"),iframe.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;"),this.iframe=iframe,this.setFrame()},save:function(item){if(!this.initialized)return!1;this.dataObj||(this.dataObj={});var expires="";"undefined"!=typeof item.expire&&(expires=this.expire.setToExpire(item.expire)?this.expire.set(item.expire):""),this.dataObj[item.key]=item.value.toString()+expires;try{return this.dataStorage.reloadIEStorage(),!0}catch(err){return showToConsole("[IEStorage save] Error Saving: "+err),!1}},load:function(){function loadItem(key,raw){if(!SM.initialized)return null;var obj=SM.dataObj;if(obj[key]){var value=obj[key];if(!SM.expire.isStale(value))return raw?value:SM.expire.removeExpireStr(value);SM.deleteItem(key)}return null}var SM=this,args=arguments;if(1!==args.length||"object"!=typeof args[0])return loadItem(args[0],args[1]||!1);var item=args[0],attempt=function(){if(SM.initialized)if(clearTimeout(_timeouts.IELoad),SM.dataObj){var raw=item.raw||!1;item.fn(loadItem(item.key,raw))}else item.fn(null);else _timeouts.IELoad=setTimeout(function(){attempt()},50)};attempt()},deleteItem:function(key){this.initialized&&(delete this.dataObj[key],this.dataStorage.reloadIEStorage())},getAll:function(fn){function attempt(){if(SM.initialized){if(clearTimeout(_timeouts.IEGetAll),"undefined"!=typeof SM.dataObj){var i,obj={},count=0;for(i in SM.dataObj){var value=SM.load(i);value&&(obj[i]=value,count++)}return fn(count>0?obj:null)}return fn(null)}return getDataAttempts>=2?(clearTimeout(_timeouts.IEGetAll),fn(null)):(getDataAttempts++,void(_timeouts.IEGetAll=setTimeout(function(){attempt()},50)))}var SM=this,getDataAttempts=0;attempt()},clearAll:function(){this.initialized&&(delete this.dataObj,this.dataStorage.reloadIEStorage())},removeExpired:function(){if(this.initialized){var i,obj=this.dataObj;for(i in obj)this.expire.isStale(obj[i])&&delete obj[i];this.dataObj=obj,this.dataStorage.reloadIEStorage()}},loadClientData:function(data){this.dataObj=this.processStrToObj(data)},processStrToObj:function(data){var x,obj={},pairs=data.split(CONST._splitVars),len=pairs.length;for(x=0;len>x;x++){var value=pairs[x].split("=");obj[value[0]]=decodeURIComponent(value[1])}return obj},processObjToStr:function(obj){var i,dataArr=[];if(obj)for(i in obj)dataArr.push(i+"="+encodeURIComponent(obj[i]));return dataArr.length>0?dataArr.join(CONST._splitVars):""},setFrame:function(){function loadIFrame(){document.getElementById(SM.frameId)||document.documentElement.appendChild(thisObj.iframe),thisObj.isDocReady=!0,thisObj.removeExpired()}var SM=this,checkComplete=function(){"complete"===document.readyState&&(loadIframe(),document.detachEvent("onreadystatechange",checkComplete))};if(document.attachEvent("onreadystatechange",checkComplete),document.documentElement.doScroll&&window===window.top){var checkDoc=function(){if(!SM.isDocReady)try{document.documentElement.doScroll("left"),loadIFrame()}catch(error){setTimeout(function(){checkDoc()},50)}};checkDoc()}}};var CookieStorage=function(main){this.root=main.root,this.main=main,this._isCookieEnabled=function(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var ret=-1!==document.cookie.indexOf("cookietest=")?!0:!1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",ret}()};return CookieStorage.prototype={init:function(config){var i;for(i in config)this[i]=config[i];this.expire=new ClientStorageTimeStamp,this.initialized=!0,this.removeExpired()},save:function(item){if(!this._isCookieEnabled)return!1;var data,cookieValue=this.getStorageCookie(),expires="";item.expire&&!this.sessionCookie&&this.expire.setToExpire(item.expire)&&(expires=this.expire.set(item.expire,"cookieValue"));var value=encodeURIComponent(item.value.toString())+expires;if(cookieValue){var obj=this.processStrToObj(cookieValue);obj[item.key]=value,data=this.processObjToStr(obj)}else data=item.key+"="+value;return data?(this.saveCookie(data),!0):void 0},saveCookie:function(data){if(!this._isCookieEnabled)return!1;var expires=this.sessionCookie?"":"; expires="+this.expire.set(CONST._cookiePersistence,"cookie"),cookieStr=this.cookieName+"="+CONST._splitVars+data+expires+"; path=/";try{document.cookie=cookieStr}catch(err){showToConsole("[Cookie save] Error Saving: "+err)}},load:function(){function loadItem(key,raw){var cookieStr=SM.getStorageCookie();if(cookieStr){var obj=SM.processStrToObj(cookieStr);if(obj[key]){var value=obj[key];return SM.expire.isStale(value)&&SM.deleteItem(key),raw?value:SM.expire.removeExpireStr(value)}}return null}if(!this._isCookieEnabled)return!1;var SM=this,args=arguments;return 1!==args.length||"object"!=typeof args[0]?loadItem(args[0],args[1]||!1):void args[0].fn(loadItem(args[0].key,args[0].raw||!1))},deleteItem:function(key){if(!this._isCookieEnabled)return!1;var cookieStr=this.getStorageCookie();if(cookieStr){var obj=this.processStrToObj(cookieStr);obj[key]&&delete obj[key],this.saveCookie(this.processObjToStr(obj))}},getAll:function(fn){if(!this._isCookieEnabled)return!1;var cookieStr=this.getStorageCookie(),data={},count=0;if(cookieStr){var i,obj=this.processStrToObj(cookieStr);for(i in obj)obj[i]&&(this.expire.isStale(obj[i])?delete obj[i]:(data[i]=obj[i],count++));return fn(count>0?data:null)}return fn(null)},clearAll:function(){return this._isCookieEnabled?void this.saveCookie(""):!1},removeExpired:function(){if(!this._isCookieEnabled)return!1;var cookieStr=this.getStorageCookie();if(cookieStr){var i,obj=this.processStrToObj(cookieStr);for(i in obj)obj[i]&&this.expire.isStale(obj[i])&&delete obj[i];this.saveCookie(this.processObjToStr(obj))}},getStorageCookie:function(){if(!this._isCookieEnabled)return!1;var x,cookies=document.cookie.split(";"),len=cookies.length;for(x=0;len>x;x++){var cookie=cookies[x].replace(/^\s+|\s+$/g,"");if(cookie.substring(0,this.cookieName.length+1)===this.cookieName+"=")return decodeURIComponent(cookie.substring(this.cookieName.length+1))}return null},processStrToObj:function(data){var x,obj={},pairs=data.split(CONST._splitVars),len=pairs.length;for(x=0;len>x;x++){var value=pairs[x].split("=");value[1]&&(obj[value[0]]=value[1])}return obj},processObjToStr:function(obj){var i,dataArr=[];for(i in obj)i.length>0&&dataArr.push(i+"="+obj[i]);return dataArr.join(CONST._splitVars)}},Medium}(),getAvailableBrowserStorageType=function(){try{return window.localStorage?"localStorage":window.globalStorage?"globalStorage":"cookie"}catch(err){return"cookie"}},insertObjItems=function(obj,items){var i;for(i in items)obj[i]=items[i];return obj},clearAllTimeouts=function(){var i;for(i in _timeouts)clearTimeout(_timeouts[i])},showToConsole=function(str){"object"==typeof window.console&&CONST._showConsole&&console.log(str)},ClientStorageTimeStamp=function(){this.defaultExpire=14,this.expireStr="<!#[${value}]>",this.expireRegex=/<!#\[(.+)\]>/};return ClientStorageTimeStamp.prototype={now:function(){return new Date},set:function(expire,type){expire=expire||this.defaultExpire,type=type||null,addTime=24*expire*36e5;var newTime=new Date(this.now().getTime()+addTime);switch(type){case"cookie":expire=newTime.toUTCString();break;default:expire=this.expireToStr(this.simpleDateStr(newTime))}return expire},simpleDateStr:function(date){var d=date.getUTCMonth()+1+"/"+date.getUTCDate()+"/"+date.getUTCFullYear(),t=date.getHours()+":"+date.getMinutes();return d+" "+t},setToExpire:function(value){return value=value||0,"number"==typeof value&&value>0?!0:!1},getExpire:function(str,full){var match=str.match(this.expireRegex);return match?full?match[0]:match[1]:!1},isStale:function(str){var expireStr=this.getExpire(str);return expireStr&&this.hasExpired(expireStr)?!0:!1},hasExpired:function(timeValue){var dateObj=this.convert(timeValue);return this.now()>dateObj?!0:!1},convert:function(value){var dateVal=new Date(value);return"string"==typeof value&&"Invalid Date"===dateVal.toString()&&(dateVal=new Date(parseInt(value,10))),dateVal},expireToStr:function(expire){return this.expireStr.replace("${value}",expire)},removeExpireStr:function(str){return str.replace(this.expireRegex,"")}},new ClientStorageManager}(window),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:ClientStorageManager",function(){return window.ClientStorageManager}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{};var FoxISATracker=window.FOX_Plugins.FoxISATracker=function(){function showToConsole(str){try{FOX.utils.debug(str)}catch(err){"object"==typeof window.console&&window.location.search.indexOf("stc=y")&&console.log(str)}}var App=function(){this.dataObj={trigger:{pageLoad:!1}},this.initialized=!1};return App.prototype={init:function(data){return data?this.initialized?(showToConsole("[ISA Tracker] Already Initialized"),!1):(this.initialized=!0,this.control.root=this,void this.set(data)):!1},set:function(data){if(!data)return!1;this.initialized||this.init(data);var i;for(i in data){var z,main=data[i];for(z in main)this.dataObj.trigger[z]||(this.dataObj.trigger[z]={}),this.dataObj.trigger[z][i]=main[z]}},track:function(event,data){this.control.count(event);var trigger=this.dataObj.trigger;if(!trigger[event])return showToConsole("[ISA Tracker] No event specified for: "+event),!1;var i,item=trigger[event];for(i in item)this.control.execTrigger({event:event,trigger:item[i],data:data,count:item._count})}},App.prototype.control={count:function(event){if(event=event||!1,!event)return!1;var root=this.root,trigger=root.dataObj.trigger;if(!trigger[event])return!1;var count=(isNaN(trigger[event]._count)?0:trigger[event]._count)+1;root.dataObj.trigger[event]._count=count},execTrigger:function(obj){if("object"!=typeof obj)return!1;if(!obj.trigger)return!1;var event=obj.event||!1,freq=obj.trigger.frequency||!1,callback=obj.trigger.callback||!1,data=obj.data||!1,trigger=obj.trigger||!1,count=obj.count||!1;if(!event||isNaN(freq)||!trigger)return!1;this.root;"function"==typeof callback&&("pageLoad"===event&&1===count?callback(data):0===event.indexOf("click")?callback(data):count>1&&count%freq===0&&callback(data))}},App}(jQuery);!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:FoxISATracker",function(){return window.FOX_Plugins.FoxISATracker}):!1}(window.Modulr),window.LocationLookup=function(){var CONST={map:[{z:99500,s:"AK"},{z:98e3,s:"WA"},{z:97e3,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:9e4,s:"CA"},{z:89e3,s:"NV"},{z:88500,s:"TX"},{z:87e3,s:"NM"},{z:85e3,s:"AZ"},{z:84e3,s:"UT"},{z:83200,s:"ID"},{z:82e3,s:"WY"},{z:8e4,s:"CO"},{z:75e3,s:"TX"},{z:73e3,s:"OK"},{z:71600,s:"AR"},{z:7e4,s:"LA"},{z:68e3,s:"NE"},{z:66e3,s:"KS"},{z:63e3,s:"MO"},{z:6e4,s:"IL"},{z:59e3,s:"MT"},{z:58e3,s:"ND"},{z:57e3,s:"SD"},{z:56900,s:"DC"},{z:55e3,s:"MN"},{z:53e3,s:"WI"},{z:5e4,s:"IA"},{z:48e3,s:"MI"},{z:46e3,s:"IN"},{z:43e3,s:"OH"},{z:4e4,s:"KY"},{z:38600,s:"MS"},{z:37e3,s:"TN"},{z:35e3,s:"AL"},{z:34e3,s:"AA"},{z:32e3,s:"FL"},{z:3e4,s:"GA"},{z:29e3,s:"SC"},{z:27e3,s:"NC"},{z:24700,s:"WV"},{z:22e3,s:"VA"},{z:20600,s:"MD"},{z:2e4,s:"DC"},{z:19700,s:"DE"},{z:15e3,s:"PA"},{z:1e4,s:"NY"},{z:7e3,s:"NJ"},{z:6e3,s:"CT"},{z:5e3,s:"VT"},{z:3900,s:"ME"},{z:3e3,s:"NH"},{z:2800,s:"RI"},{z:1e3,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}},LocationLookup=function(config){"object"==typeof config&&config.region&&(CONST.region=config.region)};LocationLookup.prototype={getByZip:function(zip){var rawZip=zip;if(zip=/(^\d{5}$)/.test(zip)?parseInt(zip,10):!1,!zip)return!1;var state=getState(zip),region=getRegion(state);return{zip:rawZip,state:state,region:region}},getByState:function(state){if("string"!=typeof state)return!1;state=state.toUpperCase();var i,region=!1;for(i in CONST.region)if(CONST.region[i].indexOf(state)>-1){region=getRegion(state);break}return region?{state:state,region:region}:!1},getByDMA:function(zip,fn){if("function"!=typeof fn)return!1;var rawZip=zip;return(zip=/(^\d{5}$)/.test(zip)?zip:!1)?void getDMA(zip,function(data){data||fn(!1),fn(data.dma&&data.region&&data.city?{zip:rawZip,state:data.region,region:data.city,dma:data.dma}:!1)}):!1}};var getState=function(zip){var i,map=CONST.map,oneoff=CONST.mapOneOff;for(i in oneoff)if(zip===oneoff[i])return i;for(i=0;i<map.length;i++){var item=map[i];if(zip>=item.z)return item.s}return!1},getRegion=function(state){var i,map=CONST.region;for(i in map)if(map[i].indexOf(state)>-1)return i;return!1},getDMA=function(zip,fn){window[CONST.dma.cb]=fn;var url=CONST.dma.feed;url=url.replace("${zip}",zip),$.ajax({url:url,dataType:"script",async:!0,cache:!0})};return LocationLookup}(),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:LocationLookup",function(){return window.LocationLookup}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{};var FOX_DependencyManager=window.FOX_Plugins.DependencyManager=function($){var CONST={prefix:"___"},ManagerPrototype=function(){this._TYPES=[]};ManagerPrototype.prototype.addInstance=function(type,dependencyArr){if("string"!=typeof type&&type.length<1)return!1;var self=this;self[prefixed(type)]?log("[DependencyManager.addDependency] '"+type+"' already exists."):(self._TYPES.push(type),self[prefixed(type)]=new Manager(type,this),$.isArray(dependencyArr)&&self.setDependency(type,dependencyArr))},ManagerPrototype.prototype.onReady=function(type,callback){if("string"!=typeof type||"function"!=typeof callback)return!1;var self=this;$.loadAttempt(60,500,function(){return self[prefixed(type)]?!0:!1},function(){self[prefixed(type)].onReady(function(data){callback(data)})},function(){log("[DependencyManager.onReady] Max attempts to check for the instance of '"+type+"' reached.")})},ManagerPrototype.prototype.setDependency=function(type,dependencyArr){if("string"!=typeof type||!$.isArray(dependencyArr))return!1;var self=this;return type=prefixed(type),self[type]?void self[type].setDependency(dependencyArr):!1},ManagerPrototype.prototype.fireReady=function(type,data){if("string"!=typeof type)return!1;var self=this;type=prefixed(type),self[type]&&self[type].EVENT.fireReady(data)};var Manager=function(){var Manager=function(type,root){this.root=root,this._TYPE=type,this._DEPENDENCY=!1,this._IS_READY=!1,this._pooler={},this.EVENT=new ReadyEvent(this)};Manager.prototype.setDependency=function(dependencyArr){var self=this;return self._DEPENDENCY?!1:void($.isArray(dependencyArr)&&isValidDependency(dependencyArr)?(self._DEPENDENCY=dependencyArr,self.isReady(),log("[DependencyManager."+self._TYPE+".setDependency] Dependency set.")):log("[DependencyManager."+self._TYPE+".setDependency] Invalid setting."))},Manager.prototype.isReady=function(){var self=this,root=this.root;if(!self._DEPENDENCY)return!1;if(self._IS_READY&&!self._pooler.isReady)return self._IS_READY;self._pooler.isReady=!0;var isReadyTrigger=function(){var x,dArr=self._DEPENDENCY,ready=!0;for(x=0;x<dArr.length;x++){var type=prefixed(dArr[x]);if(root[type]&&!root[type].EVENT.inquire()){ready=!1;break}}return ready},isReady=!1,attempts=0,max=360,pooler=function(){attempts++,isReady||(isReady=isReadyTrigger()),isReady?(self._IS_READY=!0,self._pooler.isReady=!1):attempts>max?log("[DependencyManager."+self._TYPE+".isReady] Max attempts reached to check ready state."):setTimeout(function(){pooler()},500)};pooler()},Manager.prototype.onReady=function(callback){if("function"!=typeof callback)return!1;var self=this;$.loadAttempt(360,500,function(){return self._IS_READY?!0:!1},function(){callback(self._READY_DATA)})};var isValidDependency=function(){return!0};return Manager}(),ReadyEvent=function(){var Event=function(main){this.root=main.root,this.main=main,this._IS_READY=!1,this._READY_DATA=null};return Event.prototype.fireReady=function(data){var self=this;self._IS_READY||(self._IS_READY=!0,data&&(self._READY_DATA=data))},Event.prototype.inquire=function(){var self=this;return self._IS_READY},Event}(),log=function(str){window.console&&window.console.log&&console.log(str)},prefixed=function(str){return CONST.prefix+str};return ManagerPrototype}(jQuery);!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:DependencyManager",function(){return window.FOX_Plugins.DependencyManager}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{};var MultiFeedParser=window.FOX_Plugins.MultiFeedParser=function($){var CONST={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:.5},App=function(config){config=config||{};var self=this;self.__vars={};var v=self.__vars;v._config=config,v._fn={},v._data={},v._xhr={},v._callStack={},v._initExe={},v._refreshObj={},self.event=new Events(self),v._fn.log=v._config.logging?log:function(){};var i,initOnLoad="boolean"!=typeof v._config.initOnLoad||v._config.initOnLoad?!0:!1,feeds=v._config&&v._config.feeds?v._config.feeds:!1;if(initOnLoad&&feeds)for(i in feeds)loadFeed(v,i),feeds[i].refresh&&setRefreshRate(self,i,feeds[i])},Events=function(){var Event=function(root){this.__vars={};var v=this.__vars;v.root=root};return Event.prototype.reload=function(types){var i,x,hasLoad=!1,self=this,root=self.__vars.root,v=root.__vars,feeds=v._config&&v._config.feeds?v._config.feeds:!1,arr=[];if(!feeds)return!1;var setRefresh=function(type){v._refreshObj[type]||setRefreshRate(root,type,feeds[type])};if("string"==typeof types&&(types=trimStr(types).replace(/\s+/g," "),arr=types.split(" ")),arr.length>0)for(x=0;x<arr.length;x++)feeds[arr[x]]&&(v._fn.log(CONST.logName+" Reloading {type}: '"+arr[x]+"'"),loadFeed(v,arr[x]),setRefresh(arr[x]),hasLoad=!0);else{v._fn.log(CONST.logName+" Reloading all feed {type}");for(i in feeds)loadFeed(v,i),setRefresh(i);hasLoad=!0}},Event.prototype.addFeed=function(){var self=this,root=self.__vars.root,v=root.__vars,feeds=v._config&&v._config.feeds?v._config.feeds:{},args=arguments,config={type:!1,url:!1};if("string"==typeof args[0]&&"string"==typeof args[1]?(config.type=args[0],config.url=args[1]):"object"==typeof args[0]&&args[0].type&&args[0].url&&(config=args[0]),!config.type||!config.url)return v._fn.log(CONST.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}."),!1;if(feeds[config.type])return v._fn.log(CONST.logName+" Cannot fire event.addFeed() for {type}: '"+config.type+"'. This type already exists."),!1;var i,cfg={};for(i in config)"type"!==i&&(cfg[i]=config[i]);root.__vars._config.feeds||(root.__vars._config.feeds={}),root.__vars._config.feeds[config.type]=cfg,loadFeed(v,config.type),config.refresh&&setRefreshRate(root,config.type,cfg)},Event.prototype.removeFeed=function(type){var self=this,root=self.__vars.root,hasFeeds=(root.__vars,root.__vars._config&&root.__vars._config.feeds?!0:!1);if(!hasFeeds||"string"!=typeof type)return!1;type=trimStr(type).replace(/\s+/g," ");type.split(" ")},Event.prototype.onLoad=function(){var self=this,root=self.__vars.root,v=root.__vars,feeds=v._config&&v._config.feeds?v._config.feeds:{},args=setLoaderArgs(arguments);if(!args.type||!args.callback||!feeds[args.type])return!1;var type=args.type,callback=args.callback;v._callStack[type]||(v._callStack[type]=[]),v._callStack[type].push(callback),v._initExe[type]&&callback(v._data[type])},Event.prototype.getData=function(){var self=this,root=self.__vars.root,v=root.__vars,args=(v._config&&v._config.feeds?v._config.feeds:{},setLoaderArgs(arguments));if(!args.type||!args.callback)return!1;var timeoutObj,type=args.type,callback=args.callback,cntr=0,max=120,attempt=function(){"undefined"!=typeof v._data[type]?callback(v._data[type]):max>=cntr&&(clearTimeout(timeoutObj),timeoutObj=setTimeout(function(){attempt()},250),cntr++)};attempt()},Event}(),setRefreshRate=function(self,type,info){if(!isNaN(info.refresh)){var config=self.__vars._config,refresh=!1;if(config.ignoreMinRefreshRate?refresh=info.refresh.toFixed(2):parseFloat(info.refresh)>=CONST.minRefreshRate&&(refresh=info.refresh.toFixed(2)),!refresh)return log(CONST.logName+" Warning: Cannot set refresh for {type}: '"+type+"' refresh rate less than minimum rate allowed."),!1;refresh=6e4*refresh,clearInterval(self.__vars._refreshObj[type]),self.__vars._refreshObj[type]=setInterval(function(){self.event&&"function"==typeof self.event.reload?self.event.reload(type):log(CONST.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+type+"' not fired.")},refresh)}},loadFeed=function(vars,type){function commonSuccessFN(data){var normFN=getNormalizationFN(info.normalize,feeds),normalized=normFN?normFN(data):data;log(CONST.logName+" Loaded Feed for {type}: '"+type+"'"),vars._data[type]=normalized,vars._initExe[type]||(vars._initExe[type]=!0),triggerStack(vars._callStack[type],vars._data[type])}var feeds=vars._config.feeds,info=feeds[type]||!1;if(!info)return!1;var url=function(){var ret=!1;return"string"==typeof info?ret=info:info.url&&(ret=info.url),ret}();if(!url)return log(CONST.logName+" URL not defined for feed {type}: '"+type+"'"),!1;var dataType=function(){var ret="json",jsonpCallback=getJSONP(url);return"string"==typeof info.jsonpCallback||jsonpCallback?ret="jsonp":info.type&&inDataType(info.type)&&(ret=info.type),ret=ret.toLowerCase()}(),ajaxConfig={};switch(dataType){case"json":ajaxConfig={dataType:"json",cache:!0,async:!0,success:function(data){commonSuccessFN(data)}};break;case"jsonp":var urlCallback=getJSONP(url),callback=useJSONPCallback(type,"string"==typeof info.jsonpCallback?info.jsonpCallback:!1,urlCallback);window[callback.name]=function(data){commonSuccessFN(data)},ajaxConfig={dataType:"script",async:!0,cache:!0},urlCallback||(ajaxConfig.data={},ajaxConfig.data[callback.param]=callback.name);break;case"xml":break;case"script":break;case"text":}if(ajaxConfig.url=url,function(){var cacheTime=vars._config.cacheTime&&!isNaN(vars._config.cacheTime)?parseFloat(vars._config.cacheTime):!1;cacheTime&&(ajaxConfig.data||(ajaxConfig.data={}),ajaxConfig.data.cb=cacheBuster(cacheTime))}(),"jsonp"!==dataType&&vars._xhr[type])try{"function"==typeof vars._xhr[type].abort&&vars._xhr[type].abort()}catch(err){}vars._xhr[type]=$.ajax(ajaxConfig)},triggerStack=function(stack,data){if(!isArray(stack))return!1;for(var x=0;x<stack.length;x++)"function"==typeof stack[x]&&stack[x](data)},setLoaderArgs=function(args){var type=!1,callbackFN=!1;"string"==typeof args[0]?type=args[0]:"object"!=typeof args[0]||isArray(args[0])||(type=args[0].type?args[0].type:!1),"function"==typeof args[1]&&(callbackFN=args[1]);var obj={type:type,callback:callbackFN};return obj},getNormalizationFN=function(val,feeds){var i,ret=!1;if("function"==typeof val)ret=val;else if("string"==typeof val)for(i in feeds)if(val===i&&"function"==typeof feeds[i].normalize){ret=feeds[i].normalize;break}return ret},useJSONPCallback=function(type,opt1,opt2){var ret={param:"callback"};if(opt1&&2===opt1.split("=").length){var sp=opt1.split("=");ret.param=sp[0],ret.name=sp[1]}else ret.name=opt1?opt1:opt2?opt2:"jsonp"+type;return ret},inDataType=function(type){var x,ret=!1,types=["jsonp","json","xml","html","text","script"];for(x=0;x<types.length;x++)if(types[x]===type.toLowerCase()){ret=!0;break}},getJSONP=function(url){var x,ret=!1,sp=url.split("?"),search=sp[1];if(search){var arr=search.toLowerCase().indexOf(CONST.jsonpParam+"=")>-1?search.split("&"):[];for(x=0;x<arr.length;x++){var pair=arr[x].split("=");if(pair[0].toLowerCase()===CONST.jsonpParam){ret=decodeURI(pair[1]);break}}}return ret},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}},cacheBuster=function(freq){freq=freq||!1;var date=window.AKAMAI_TIME_HELPER&&"function"==typeof AKAMAI_TIME_HELPER.getCurrent?AKAMAI_TIME_HELPER.getCurrent():new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},isArray=function(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)},trimStr=function(val){return val=(val||"").replace(/^\s+|\s+$/g,"")};return App}(jQuery);!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:MultiFeedParser",function(){return window.FOX_Plugins.MultiFeedParser}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{};var CallStackTrigger=window.FOX_Plugins.CallStackTrigger=function(){var App=function(){this.__vars={};var v=this.__vars;v._stack={},v._trigger=!1,v._data={}};App.prototype.trigger=function(trigger,data){var self=this,v=self.__vars;v._trigger=trigger,v._data[trigger]="undefined"!=typeof data?data:null,v._stack[trigger]&&callStack(self,trigger)},App.prototype.bind=function(trigger,callback){var self=this,v=self.__vars,stack=v._stack;return"function"!=typeof callback?!1:(stack[trigger]||(stack[trigger]=[]),void stack[trigger].push(callback))};var callStack=function(self,trigger){var v=self.__vars,stack=v._stack,data=v._data;if(stack[trigger]){var arr=stack[trigger];for(x=0;x<arr.length;x++)"function"==typeof arr[x]&&arr[x](data[trigger]||null)}};return App}();!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:CallStackTrigger",function(){return window.FOX_Plugins.CallStackTrigger}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.MediaOverlay=function($){var CONST={};CONST.domain="//global.fncstatic.com",CONST.size=[118,96,64,48,32,24,16],CONST.type={video:{type:"video",image:"/static/v/all/img/vd-overlay_${dim}.png"},slideshow:{type:"slideshow",image:"/static/v/all/img/ss-overlay_${dim}.png"},interactive:{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},freeform:{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},magnify:{type:"magnify",image:"/static/v/all/img/mg-overlay_${dim}.png"},listpage:{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"},"list-article":{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"}};var App=function(){};App.prototype.embed=function(config){var target=config.target,dim=(target.parent(),config.dim||!1),type=config.type;if(!target.attr("src"))return!1;if(!CONST.type[type])return!1;var trigger=function(){dim?setEmbed(config,dim):getDimensions(config,function(info){setEmbed(config,info)})},lazyImg=isLazyLoad(target);if(lazyImg){var lazyLoopIntv=!1,lazyLoop=function(){target.attr("src")===lazyImg?(trigger(),clearTimeout(lazyLoopIntv)):lazyLoopIntv=setTimeout(function(){lazyLoop()},800)};lazyLoop()}else trigger()};var setEmbed=function(config,dim){var target=config.target,parent=target.parent(),position=config.position||"bottom right",size=config.size||getSize(config,dim),edge=config.edge||getEdge(config,dim,size),type=config.type,responsive=config.responsive||!1,typeInfo=CONST.type[type];if(parent.hasClass("overlay-media")&&parent.attr("data-ovr"))return!1;var html=$('<div class="overlay-media" data-ovr="1"></div>');html.css(responsive?{position:"relative"}:{width:dim[0],height:dim[1],position:"relative"});var overlay=$('<div class="ovr ovr-'+size+'"></div>'),overlayImg=CONST.domain+typeInfo.image.replace("${dim}",size),css={background:"url('"+overlayImg+"') no-repeat center center",position:"absolute",width:size,height:size,"background-position":"0px 0px","z-index":1,opacity:0,"-webkit-transition":"opacity 0.3s","-moz-transition":"opacity 0.3s","-o-transition":"opacity 0.3s",transition:"opacity 0.3s"};switch(position){case"bottom left":css.left=edge[0]+"px",css.bottom=edge[1]+"px";break;case"top right":css.right=edge[0]+"px",css.top=edge[1]+"px";break;case"top left":css.left=edge[0]+"px",css.top=edge[1]+"px";break;case"center":css.left=edge[0]+"px",css.top=edge[1]+"px";break;default:css.right=edge[0]+"px",css.bottom=edge[1]+"px"}overlay.css(css),html.append(overlay),html.append(target.clone()),target.replaceWith(html),setTimeout(function(){parent.find(".ovr").css("opacity","1"),parent.find(".overlay-media").hover(function(){$(this).find(".ovr").css("background-position","0px -"+size+"px")},function(){$(this).find(".ovr").css("background-position","0px 0px")})},150),"function"==typeof config.onDone&&config.onDone()},isLazyLoad=function(elm){var ret=elm.attr("data-src")||elm.attr("dest_src")||!1;return ret},getDimensions=function(config,callback){var target=config.target,img=new Image,src=target.attr("src");return img.onload=function(){var dim=[target.width(),target.height()];callback(dim)},img.src=src,!1},getEdge=function(config,dim,size){var ret=[10,10],ratio=[.05,.05];return ret="center"===config.position?[Math.floor(.5*dim[0]-.5*size),Math.floor(.5*dim[1]-.5*size)]:[Math.floor(dim[0]*ratio[0]),Math.floor(dim[1]*ratio[1])]},getSize=function(config,dim){var x,ratio=.16,w=Math.floor(dim[0]*ratio),ret=!1;if(map=["118","96","64","48","32","24","16"],!isNaN(w))if(w>=map[0]&&(ret=map[0]),20>=w)ret=map[map.length-1];else for(x=0;x<map.length;x++){var val=map[x],nVal=map[x+1]?map[x+1]:0,diffH=Math.abs(val-w),diffL=Math.abs(val-nVal);if(val>=w&&w>nVal){ret=diffH>diffL?nVal:val;break}}return ret?ret:!1},MediaApp=App;return window.FOX_MediaIconOverlay=function(){var App=function(){this.deprecated=[],this.deprecatedAlert=!1};App.prototype.set=function(obj){var self=this;
if(!obj)return!1;var config={};for(var i in obj)obj.hasOwnProperty(i)&&("elm"===i?config.target=obj[i].find("img:first"):config[i]=obj[i]);config.type=config.type||self.getType(obj.elm),config._legacy=!0,self.deprecatedAlert||(self.deprecatedAlert=!0,log("[FOX.MediaIconOverlay] Deprecated Implementation"),log("[FOX.MediaIconOverlay] Access Deprecated implementations @ window.FOX_MediaIconOverlay.deprecated")),self.deprecated.push(config);var newPlugin=new MediaApp;newPlugin.embed(config)},App.prototype.getType=function(holder){var ret=!1,types=CONST.type;for(var i in types)if(holder.hasClass(i+"-ct")){ret=types[i].type;break}return ret};var log=function(){var loggerON=window.location.search.indexOf("_log=y")?!0:!1;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return new App}(jQuery),App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:MediaIconOverlay",function(){return window.FOX_Plugins.MediaOverlay}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},window.OutbrainWidgetConnector=window.FOX_Plugins.OutbrainWidgetConnector=function($){var CONST={OBVar:"OB_elements",src:window.location.protocol+"//widgets.outbrain.com/outbrain.js",legacySrc:window.location.protocol+"//widgets.outbrain.com/outbrainWidget.js"},App=function(config){return config?void this.addWidget(config):!1};App.prototype.addWidget=function(config,callback){var x;if(!config)return!1;window[CONST.OBVar]||(window[CONST.OBVar]=[]);var conf=setConfig(config);for(x=0;x<conf.length;x++){var cf=conf[x],modify=cf.addWidgetType&&"data-widget"===cf.addWidgetType?!1:!0;cf.permalink=setPermaLink(cf.permalink),$("#"+cf.containerId).attr("data-src",cf.permalink),modify&&(cf.containerId&&modifyContainer(cf.containerId),window[CONST.OBVar].push(cf)),cf.overlayDim&&setOverlay(cf.widgetId,cf.overlayDim)}triggerScript(callback)},App.prototype.refreshWidgets=function(permaLink){if(!window.OBR)return!1;permaLink=permaLink||window.location.href;try{OBR.extern.refreshWidget(permaLink)}catch(err){}},App.prototype.addWidgetLegacy=function(config,callback){config=isArray(config)?config[0]:config,config.containerId&&modifyContainer(config.containerId),config.permalink=setPermaLink(config.permalink),window.OB_permalink=config.permalink,window.OB_widgetId=config.widgetId,window.OB_Template=config.Template,window.OB_langJS=config.langJS,window.OB_isLateStarter=!0,triggerScript(callback,!0),config.overlayDim&&setOverlay(config.widgetId,config.overlayDim)};var triggerScript=function(callback,legacy){if(callback="function"==typeof callback?callback:function(){},window.OB_Script&&window.OutbrainStart)try{window.OutbrainStart(),callback()}catch(err){log("[Outbrain.Connector] Error: "+err)}else{var s=document.getElementsByTagName("script")[0],ob=document.createElement("script");ob.type="text/javascript",ob.onreadystatechange=ob.onload=function(){window.OB_Script=!0,callback()},ob.async=!0,ob.src=legacy?CONST.legacySrc:CONST.src,s.parentNode.insertBefore(ob,s)}},setOverlay=function(id,dim){dim=dim||"32";var overlayMarkup='<div class="media-overlay" style="position: absolute; bottom: 8px; width: '+dim+"px; min-height: "+dim+"px; background: url('http://global.fncstatic.com/static/v/all/img/vd-overlay_"+dim+".png') no-repeat scroll 0px 0px transparent; right: 8px;\"></div>",check=function(){return $("div[data-widget-id='"+id+"'] .ob-rec-link-img").size()>0?!0:!1},trigger=function(){setTimeout(function(){$("div[data-widget-id='"+id+"'] .ob-rec-link-img").each(function(){var el=$(this);if(el.find(".ob_video").size()>0){el.prepend(overlayMarkup);var overlay=el.find("> .media-overlay");el.hover(function(){overlay.css("background-position","0px -"+dim+"px")},function(){overlay.css("background-position","0px 0px")})}})},100)};if($.loadAttempt)$.loadAttempt(25,250,function(){var bool=check();return bool},function(){trigger()});else{var timeoutObj=!1,cntr=0,timeoutFn=function(){check()?trigger():25>=cntr&&(cntr++,timeoutObj=setTimeout(function(){timeoutFn()},250))};timeoutFn()}},modifyContainer=function(containerId){var container=$("#"+containerId);container.addClass("OBR"),container.attr("data-fbk")||container.attr("data-fbk","1")},setConfig=function(info){return info&&!isArray(info)&&(info=[info]),info},setPermaLink=function(permalink){{var loc=window.location;loc.host||loc.hostname}return permalink},isArray=function(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:OutbrainWidgetConnector",function(){return window.FOX_Plugins.OutbrainWidgetConnector}):!1}(window.Modulr),window.CrowdIgniteWidgetConnector=function(){var CONST={};CONST.globalVar="_CI",CONST.widgetId={},CONST.widgetId["crowd-ignite"]={"fnc/entertainment/style":"28567"},CONST.widgetId["crowd-ignite-rail"]={"fnc/entertainment/style":"28569"};var App=function(config){var self=this;self.__vars={};var v=self.__vars;return v._widget={},window[CONST.globalVar]||(window[CONST.globalVar]={}),config?void this.addWidget(config):!1};App.prototype.addWidget=function(config,callback){{var x,self=this;self.__vars}if(!config)return!1;window[CONST.OBVar]||(window[CONST.OBVar]=[]);var conf=setConfig(config);for(x=0;x<conf.length;x++){var cf=conf[x];triggerScript(cf)}"function"==typeof callback&&callback()};var triggerScript=function(info){var widgetId=CONST.widgetId[info.container]&&CONST.widgetId[info.container][info.section]?CONST.widgetId[info.container][info.section]:!1;if(!widgetId)return!1;var count=incrementCounter(),elementId="_CI_widget_"+count,url="//widget.crowdignite.com/widgets/"+widgetId+"?_ci_wid="+elementId,mod=info.holder;mod.attr("id",elementId);var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=url,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(s)},incrementCounter=function(){return window[CONST.globalVar].counter=window[CONST.globalVar].counter?window[CONST.globalVar].counter+1:1,window[CONST.globalVar].counter},setConfig=function(info){return info&&!isArray(info)&&(info=[info]),info},isArray=function(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:CrowdIgniteWidgetConnector",function(){return window.CrowdIgniteWidgetConnector}):!1}(window.Modulr),window.ScribolWidgetConnector=function($){var CONST={};CONST.embedUrl="//scribol.com/txwidget1.2.js",CONST.globalVar="Scribol",CONST.widgetId={},CONST.widgetId["scribol-hrz"]={"fnc/entertainment/movies":"3251149"},CONST.widgetId["scribol-rail"]={"fnc/entertainment/movies":"3251079"};var App=function(config){var self=this;self.__vars={};var v=self.__vars;return v._widget={},config?void this.addWidget(config):!1};App.prototype.addWidget=function(config,callback){{var x,self=this;self.__vars}if(!config)return!1;window[CONST.globalVar]||(window[CONST.globalVar]={},window[CONST.globalVar].frames=[],window[CONST.globalVar].site="http://scribol.com/",window[CONST.globalVar].is_preview=!1);var conf=setConfig(config);for(x=0;x<conf.length;x++){var cf=conf[x];triggerScript(cf)}self._hasEmbbed||(self._hasEmbbed=!0,$(document).ready(function(){var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=CONST.embedUrl,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(s)})),"function"==typeof callback&&callback()};var triggerScript=function(info){var widgetId=CONST.widgetId[info.container]&&CONST.widgetId[info.container][info.section]?CONST.widgetId[info.container][info.section]:!1;return widgetId?(Scribol.frames.push(widgetId),void info.holder.html('<iframe class="scribol" width="'+info.dim[0]+'" height="'+info.dim[1]+'" id="scribol_'+widgetId+'" scrolling="no" frameborder="0"></iframe>')):!1},setConfig=function(info){return info&&!isArray(info)&&(info=[info]),info},isArray=function(val){return val=val||!1,"[object Array]"===Object.prototype.toString.call(val)};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:ScribolWidgetConnector",function(){return window.ScribolWidgetConnector}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{};var DateTime=window.FOX_Plugins.DateTime=function(){var DateTime=function(date,formatStr){formatStr=formatStr||null;var i,obj={month:date.getMonth(),day:date.getDay(),year:date.getFullYear(),date:date.getDate(),hour:date.getHours(),minutes:date.getMinutes(),seconds:date.getSeconds(),ampm:date.getHours()<12?"am":"pm",fullStr:date.toString()},oldEnglish=function(n){if(n=n||"",n=n.toString(),n.length<1)return n;var s="",lastDigit=parseInt(n.charAt(n.length-1),10);switch(lastDigit){case 1:s="st";break;case 2:s="nd";break;case 3:s="rd";break;default:s="th"}return n+s},getMonthString=function(n,type){type=type||"full";var month=["January","February","March","April","May","June","July","August","September","October","November","December"],ret=month[n]||"";return"short"===type&&(ret=ret.slice(0,3)),ret},toStr=function(val){return val=isNaN(val)?"":val,val.toString()},getDayString=function(n,type){type=type||"full";var day=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ret=day[n];return"short"===type&&(ret=ret.slice(0,3)),ret},replace={"${mm}":obj.month+1,"${month}":getMonthString(obj.month),"${month:short}":getMonthString(obj.month,"short"),"${day}":getDayString(obj.day),"${day:short}":getDayString(obj.day,"short"),"${yr}":obj.year,"${yr:short}":toStr(obj.year).substr(2),"${dd}":obj.date<10?"0"+toStr(obj.date):toStr(obj.date),"${ddTH}":oldEnglish(obj.date),"${hr}":obj.hour>12?obj.hour-12:obj.hour,"${hr:mil}":obj.hour<10?"0"+toStr(obj.hour):toStr(obj.hour),"${min}":obj.minutes<10?"0"+toStr(obj.minutes):toStr(obj.minutes),"${sec}":obj.seconds<10?"0"+toStr(obj.seconds):toStr(obj.seconds),"${ampm}":obj.ampm,"${AMPM}":obj.ampm.toUpperCase(),"${AmPm}":obj.ampm.charAt(0).toUpperCase()+obj.ampm.charAt(1)};for(i in replace)for(var idx=formatStr.indexOf(i);-1!==idx;)formatStr=formatStr.replace(i,replace[i]),idx=formatStr.indexOf(i);return formatStr};return DateTime}();!function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:DateTime",function(){return window.FOX_Plugins.DateTime}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},window.WatchNow=window.FOX_Plugins.WatchNow=function($){var CONST={};CONST.feeds={},CONST.feeds.FN={"sched-tool":"//www.foxnews.com/feeds/schedule/channel/foxnewscom-live/feed/json",playlist:"//interactive.foxnews.com/projects/watch-now/live.js"},CONST.feeds.FB={"sched-tool":"//www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"//video.foxbusiness.com/v/feed/playlist/932683241001.js?template=fox"},CONST.feeds.SBC={"sched-tool":"//www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"//video.foxbusiness.com/v/feed/playlist/937116525001.js?template=fox"},CONST.config={},CONST.config.imageDimension=[132,74],CONST.config.imagePattern="/static/p/video/img/live/schedule/144x81-live-${machineTitle}.jpg";var App=function(config){if(!window.MultiFeedParser||!window.AKAMAI_TIME_HELPER)return!1;var self=this;self.__vars={};var v=self.__vars;v.data={},config="object"!=typeof config||$.isArray(config)?{}:config,v._config=config,config.parserOnly||setFeedParser(v)};App.prototype.getData=function(callbackFN){var self=this,v=self.__vars,parserOnly=v._config&&v._config.parserOnly?!0:!1;return"function"!=typeof callbackFN||parserOnly?!1:void v._parser.event.onLoad("sched-tool",function(schedData){v.data["sched-tool"]=schedData,v._parser.event.getData("playlist",function(playlistData){v.data.playlist=playlistData;var normalize=normalizeBoth(schedData,playlistData);callbackFN(normalize)})})},App.prototype.getScheduleFeed=function(callbackFN){var self=this,v=self.__vars,parserOnly=v._config&&v._config.parserOnly?!0:!1;return"function"!=typeof callbackFN||parserOnly?!1:void v._parser.event.onLoad("sched-tool",function(data){v.data["sched-tool"]=data,callbackFN(data)})},App.prototype.getPlaylistFeed=function(callbackFN){var self=this,v=self.__vars,parserOnly=v._config&&v._config.parserOnly?!0:!1;return"function"!=typeof callbackFN||parserOnly?!1:void v._parser.event.onLoad("playlist",function(data){v.data.playlist=data,callbackFN(data)})},App.prototype.parseScheduleData=function(feedData,config,full){var ret=normalizeSchedTool(feedData,config,full);return ret};var setFeedParser=function(vars){var config=vars._config,feed=CONST.feeds.FN;"foxbusiness"===config.site?feed=CONST.feeds.FB:"smallbusiness"===config.site&&(feed=CONST.feeds.SBC);var refresh=!1;config.refresh&&!isNaN(config.refresh)&&(refresh=parseInt(config.refresh,10));var feedConfig={};feedConfig.feeds={},feedConfig.logging=!0,feedConfig.initOnLoad=!0,refresh&&(feedConfig.cacheTime=refresh),feedConfig.feeds.playlist={url:feed.playlist,jsonpCallback:"FOX_WatchNowPlaylist",normalize:function(data){var ret=data;return data&&(ret=normalizePlaylist(config,data)),ret}},feedConfig.feeds["sched-tool"]={url:feed["sched-tool"],jsonpCallback:"FOX_WatchNowSchedTool",normalize:function(data){var ret=data,full=config.fullSchedule?!0:!1;return data&&(ret=normalizeSchedTool(data,config,full)),ret}},vars._parser=new MultiFeedParser(feedConfig)},normalizeBoth=function(sched,playlist){var maxLen=999,len=playlist.length>maxLen?maxLen:playlist.length,arr=[];sched&&arr.push(sched);for(var cntr=0,liveArr=[];cntr<playlist.length;)playlist[cntr]&&playlist[cntr].isLive?(liveArr.push(playlist[cntr]),playlist.splice(cntr,1)):cntr+=1;for(playlist.reverse(),liveArr.reverse(),playlist=playlist.concat(liveArr),playlist.reverse(),x=0;x<len;x+=1)arr.push(playlist[x]);return arr.length%2!==0&&arr.pop(),arr},normalizePlaylist=function(config,data){var info=data&&data.channel&&data.channel.item?data.channel.item:!1;if(!info)return!1;info=$.isArray(info)?info:[info];var x,arr=[],len=info.length,dim=config.imageDimension?config.imageDimension:CONST.config.imageDimension,isLive=function(val){var ret=!1;if(val){val=$.isArray(val)?val:[val];for(var i=0;i<val.length;i+=1)if(val[i].indexOf("live_stream")>-1){ret=!0;break}}return ret},set=function(item){var img=setResizerDimension(item["media-group"]["media-thumbnail"]["@attributes"].url,dim),obj={isLive:isLive(item.category),title:item.title,link:item.link,guid:item.guid,img:img,raw:item};return obj};for(x=0;len>x;x+=1)arr.push(set(info[x]));return arr},normalizeSchedTool=function(data,config,full){var x,ret,arr=[],latest=[],currentShow=!1,items=data.day,nowDate=window.AKAMAI_TIME_HELPER.getCurrent(),maxLatestLen=config&&config.maxLatest?config.maxLatest:3,pushShow=function(showInfo,idx,isCurrent){isCurrent=isCurrent||!1,latest.push({current:isCurrent,show:showInfo,index:idx})},setItem=function(item){var z,shows=item.show||[];for(shows=$.isArray(shows)?shows:[shows],z=0;z<shows.length;z+=1){var show=shows[z];show.start=setSchedTime(show.start),show.end=setSchedTime(show.end),show.description="string"!=typeof show.description?"":$("<div></div>").text(show.description).text(),show.showImg=function(macTitle,custom){macTitle="string"==typeof macTitle?$.trim(macTitle):"";var ret="//global.fncstatic.com/static/v/all/img/clear.gif",dim=config.imageDimension?config.imageDimension:CONST.config.imageDimension;if(custom)ret=setImageResizer(custom,dim);else if(macTitle.length>0){var pat,macImg="http://global.fncstatic.com";config.imagePatternFull?(pat=config.imagePatternFull,pat=pat.replace("${machineTitle}",macTitle),macImg=pat):config.imagePattern?(pat=config.imagePattern,pat=pat.replace("${machineTitle}",macTitle),macImg+=pat):macImg+=CONST.config.imagePattern.replace("${machineTitle}",macTitle),ret=setImageResizer(macImg,dim)}return ret}(show["machine-title"],show.image),arr.push(show),show.start_early=new Date(show.start.getTime()-3e5),!currentShow&&show.start_early<=nowDate&&show.end>=nowDate?(latest=[],pushShow(show,arr.length-1,!0),currentShow=!0):latest.length<maxLatestLen&&currentShow?pushShow(show,arr.length-1):latest.length<maxLatestLen&&show.start>=nowDate&&pushShow(show,arr.length-1)}};for(x=0;x<items.length;x+=1)setItem(items[x]);ret={latest:latest,normalized:arr,raw:data};var norm={};return latest=ret&&ret.latest[0]&&ret.latest[0].current?ret.latest[0].show:!1,latest?(norm={title:latest.title,img:latest.showImg,isLive:!0,link:latest.link,guid:latest["machine-title"],webShow:!0,raw:latest,rawDump:ret},ret=norm):full?(norm={rawDump:ret},ret=norm):ret=latest,ret},setResizerDimension=function(url,dim){if(!dim)return url;var arr=url.split("/"),len=arr.length,width=arr[len-3],height=arr[len-2];return arr[len-3]=isNaN(width)?width:dim[0],arr[len-2]=isNaN(height)?height:dim[1],arr.join("/")},setImageResizer=function(url,dim){if(!dim)return url;var resizerDomain="//a57.foxnews.com/",src=url.replace("http://",""),arr=src.split("/"),len=arr.length;arr[len-1]=dim.join("/")+"/"+arr[len-1];var resized=resizerDomain+arr.join("/");return resized},setSchedTime=function(val){var ret;if(val instanceof Date)ret=val;else{var sp=val.split(val.indexOf("T")>-1?"T":" "),date=sp[0],time=sp[1].split("-")[0];date=date.split("-"),date=[date[1],date[2],date[0]].join("/"),ret=new Date([date,time].join(" "))}return ret};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:WatchNow",function(){return window.FOX_Plugins.WatchNow}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},window.HashListener=window.FOX_Plugins.HashListener=function(){var CONST={timer:500},App=function(){this.__vars={};var v=this.__vars;v._callStack=[],v._stackReady=!0,v._hashData={curr:!1,stored:!1},this.event=new Events(this),setListener(this,function(info){if(v._callStack.length<1)return!1;if(v._stackReady){v._stackReady=!1;for(var obj={str:info.curr},x=0;x<v._callStack.length;x++)v._callStack[x](obj);v._stackReady=!0}})};App.prototype.getValue=function(){var self=this,v=self.__vars;return v._hashData.curr};var Events=function(){var Event=function(root){this.__vars={};var v=this.__vars;v.root=root};return Event.prototype.onChange=function(callback){var self=this,root=self.__vars.root;return"function"!=typeof callback?!1:void root.__vars._callStack.push(callback)},Event}(),setListener=function(app,callback){var timer=CONST.timer,v=app.__vars,hash=v._hashData,trigger=function(){hash.curr=window.location.hash,"string"!=typeof hash.stored&&hash.curr.length>0?(hash.stored=hash.curr,callback(hash)):hash.curr!==hash.stored&&v._stackReady&&(hash.stored=hash.curr,callback(hash))};trigger(),"onhashchange"in window?window.attachEvent?window.attachEvent("onhashchange",function(){trigger()}):window.addEventListener("hashchange",function(){trigger()},!1):setInterval(function(){trigger()},timer)};return App}(),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:HashListener",function(){return window.FOX_Plugins.HashListener}):!1}(window.Modulr),window.NewslettersForm=function($){var CONST={};CONST.SLID={FB_Breaking_Alerts:"5C84B893BD6D939E84FAE1A8E6E9525A",FB_CEO_Newsbrief:"3DC725E303A24F8D870B96401050B31F",FB_Morning_Headlines:"3DC725E303A24F8D518A0FB222399489",FB_Most_Popular_Content:"3DC725E303A24F8D39740C7B45D15F45",FB_Small_Business_Weekly_Report:"3DC725E303A24F8D3540B4B6FB335FC8",FB_Stock_Alerts:"",FB_The_Willis_Report_Promotional:"3DC725E303A24F8D5E4CD875B68955A6",FB_Weekly_Personal_Finance:"3DC725E303A24F8D7E5F3A553E2E6154",FB_Claman_On_Call:"3DC725E303A24F8D12785ABB73469705",FN_Autos:"3DC725E303A24F8D197DA3C8590F80E2",FN_Breaking_Alerts:"C2F278094FACCEA62391025B7A52D8EB",FN_Food_And_Drink:"3DC725E303A24F8D1C12D1E24CDEA25E",FN_FOX_411_Newsletter:"3DC725E303A24F8D9C92271F5026F381",FN_FOX_411_Partner_Pitch_Email:"3DC725E303A24F8DD2821C1AF73D49D4",FN_Health_Newsletter:"3DC725E303A24F8DA5DBC7FFD49BC2B8",FN_Leisure_Headlines:"3DC725E303A24F8D02B1F9D9AAF16982",FN_Monthly_Politics_Update:"3DC725E303A24F8D836CEAE9B885C87D",FN_Morning_Headlines:"3DC725E303A24F8DCF015F07C61BABFD",FN_Most_Popular:"3DC725E303A24F8DB05092D232355E43",FN_Opinion_Headlines:"3DC725E303A24F8D95ACD1C9C0564C20",FN_Politics:"3DC725E303A24F8DA102192D9D5143D9",FN_Promotional_Emails:"3DC725E303A24F8D41CEA8699C0FE71E",FN_Science_And_Technology:"3DC725E303A24F8DAB69E1C048904762",FN_Weekly_Travel:"3DC725E303A24F8DE5173CCC4F027046",Fox_Nation_Fired_Up:"3DC725E303A24F8D64B4C05965F09E1A",uReport_Launch_Email:"3DC725E303A24F8D41CEA8699C0FE71E",uReport_Monthly:"3DC725E303A24F8D41CEA8699C0FE71E",FN_Latino_Morning_Headlines:"3DC725E303A24F8D555BC7C7F3FD748B"},CONST.defaultStr="Enter Email Address";var App=function(config){var self=this,elm=config.elm;self._elm=elm,self._SLID=config.SLID?config.SLID:elm.find("input[type='hidden'][name='slid']").val(),self._INPUT=config.INPUT?config.INPUT:elm.find("input[type='text'][name='signup']"),self._INPUT_STR=config.INPUT_STR?config.INPUT_STR:CONST.defaultStr,self._onSuccess="function"==typeof config.onSuccess?config.onSuccess:function(){},self._onError="function"==typeof config.onError?config.onError:function(){},self._onFocus="function"==typeof config.onFocus?config.onFocus:function(){},self._onBlur="function"==typeof config.onBlur?config.onBlur:function(){},"3DC725E303A24F8D9C92271F5026F381"===self._SLID&&(self._INPUT_STR="Enter your email address"),self._INPUT.val(self._INPUT_STR),setFocus(self._INPUT,self._INPUT_STR,self._onFocus,self._onBlur),elm.submit(function(){return self.submit(),!1})};App.prototype.submit=function(){var self=this;if(self._submitting)return!1;self._submitting=!0;var elm=self._elm,email=self._INPUT.val().trim(),SLID=self._SLID,valid=isValidEmail(email);if(valid&&SLID)self._onSuccess(),sendSubscription(email,SLID,elm);else{var err=valid?"slid":"email";self._onError(err)}return setTimeout(function(){self._submitting=!1},500),!1};var setFocus=function(input,str,onFocus,onBlur){input.focus(function(){var val=$(this).val();$.trim(val.toLowerCase())===str.toLowerCase()&&$(this).val(""),onFocus()}),input.blur(function(){var val=$(this).val();""===$.trim(val.toLowerCase())&&$(this).val(str),onBlur()})},sendSubscription=function(email,SLID,elm){var list=elm.attr("data-list")||"email-sign-up-success";$.ajax({type:"GET",url:"/portal/newsalertsubscribe",data:{slids:SLID,email:email,format:"html"},dataType:"text",success:function(){$.ad.track({"email-sign-up-success":{listName:list}})}})},isValidEmail=function(email){var pattern=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7}$/i;return"me@example.com"===email?!1:pattern.test(email)?!0:!1};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:NewslettersForm",function(){return window.NewslettersForm}):!1}(window.Modulr);var json_parse=function(){"use strict";var at,ch,text,value,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected '"+c+"' instead of '"+ch+"'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isFinite(number)?number:void error("Bad number")},string=function(){var hex,i,uffff,string="";if('"'===ch)for(;next();){if('"'===ch)return next(),string;if("\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected '"+ch+"'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key "'+key+'"'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}();window.LoadMore=function($){var spinnerCss=".spinner { width: 40px; height: 50%; display: inline-block; opacity: 1; -webkit-transition: opacity 0.25s; -moz-transition: opacity 0.25s; -o-transition: opacity 0.25s; transition: opacity 0.25s; }.spinner > div { background-color: #666; height: 100%; width: 2px; display: inline-block; margin-left: 2px; -webkit-animation: stretchdelay 1s infinite ease-in-out; animation: stretchdelay 1s infinite ease-in-out; }.spinner .rect2 { -webkit-animation-delay: -0.9s; animation-delay: -0.9s; }.spinner .rect3 { -webkit-animation-delay: -0.8s; animation-delay: -0.8s; }.spinner .rect4 { -webkit-animation-delay: -0.7s; animation-delay: -0.7s; }.spinner .rect5 { -webkit-animation-delay: -0.6s; animation-delay: -0.6s; }@-webkit-keyframes stretchdelay { 0%, 40%, 100% { -webkit-transform: scaleY(0.4) } 20% { -webkit-transform: scaleY(1.0) } }@keyframes stretchdelay { 0%, 40%, 100% { transform: scaleY(0.4) } 20% { transform: scaleY(1.0) } }";$("<style>"+spinnerCss+"</style>").appendTo("head");var CONST={};CONST.protocol=window.location.protocol,CONST.config={},CONST.config.type="current",CONST.config.itemsOnLoad=10,CONST.config.showStr="Showing ${show} Results",CONST.config.btnStr="Show More",CONST.config.renderer="SectionFronts",CONST.eyebrow={},CONST.eyebrow.disableChannels=["fnc/weather","fnc/us/religion","fnc/health"],CONST.feed="/feeds/web/${sectionType}/component/latest-news/feed/json/?rows=10&callback=${callback}&max_date=${timestamp}";var App=function(elm,config){if(!elm)return!1;var self=this;self.__vars={};var v=self.__vars;config="object"!=typeof config||$.isArray(config)?{}:config;for(var i in CONST.config)"undefined"==typeof config[i]&&(config[i]=CONST.config[i]);v._config=config||{},v._elm=elm,v._fn=new Functions(self),v._renderer=new Renderer(self),self.event=new Events(self),v._elm.find("ul.dv-encap:first > li").addClass("show"),v._fn.setButton(),v._fn.setButtonBindings(),window.FOX&&FOX.utils&&FOX.utils.pageRefresh&&FOX.utils.pageRefresh.disable()},Events=function(){var Event=function(root){this.root=root};return Event.prototype.onLoadMore=function(){{var root=this.root;root.__vars}},Event}(),Renderer=function(){var Renderer=function(root){this.root=root};return Renderer.prototype.SectionFronts=function(data){var x,root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("ul.dv-encap:first"),clone=list.children(".dv-item:first").clone(),holder=$('<ul id="temp"></ul>'),section=getPageSection(),channel=getPageChannel(),items=data.items,numFound=data.numFound?data.numFound:!1;$.isArray(items)||(items=[items]);var showByLines=function(){var ret=!1;return"fnc"===channel&&"opinion"===section?ret="opinion":"fnl"===channel&&(ret="fnl"),ret}(),sizes=function(){var obj={image:[252,142],overlay:48};return config.sizes&&$.extend(!0,obj,config.sizes),obj}(),trigger=function(item){var title=item.use_title,imgUrl=item.image_url,url=item.url,type=item.content_type,authors=item.authors,maxAuthors="number"==typeof config.maxAuthors?config.maxAuthors:3,datePublished=item.date,eyebrow="boolean"!=typeof config.eyebrow||config.eyebrow?item.eyebrow:!1,cloned=clone.clone(),desc=function(){var ret=item.description||"&nbsp;",tmp=$("<span>"+item.description+"</span>");if(0===tmp.find("span > p").size()){var text=$.trim(tmp.text());text=$.strTruncate(text,200,!0,!0),ret="<p>"+text+"</p>"}return ret}();if(cloned.attr("class","dv-item show new-ajax-item"),type&&cloned.addClass(type),cloned.find("> h3 a").text(title),cloned.find("> h3 a").attr("href",url),cloned.find("> .summary").html(desc),cloned.find("> .m:first").remove(),cloned.find(".author-headshot").remove(),cloned.find("p.author").remove(),authors&&showByLines){switch(showByLines){case"fnl":$('<p class="author">by </p>').insertAfter(cloned.find("h3"));break;default:cloned.find("h3").append('<p class="author">by </p>')}for(var len=authors.length>maxAuthors?maxAuthors:authors.length,displayArr=[],i=0;len>i;i++){var author=authors[i],authorImg=author.headshot_image_url;if(displayArr.push(author.display_name),"opinion"===showByLines&&0===i&&authorImg){var authorImgUrl=resizeImage(authorImg,48,48);cloned.find("> h3").before('<img class="author-headshot" data-src="'+authorImgUrl+'" src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" width="48" height="48" />')}}cloned.find("p.author").append(displayArr.join(", "))}if(imgUrl&&(imgUrl=resizeImage(imgUrl,sizes.image[0],sizes.image[1]),imgUrl+="?ve=1&tl=1",cloned.prepend('<div class="m"><a href="'+url+'"><img data-src="'+imgUrl+'" src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" width="'+sizes.image[0]+'" height="'+sizes.image[1]+'"/></a></div>'),$.browser.msie&&parseInt($.browser.version,10)<8&&cloned.addClass("ie7-m")),cloned.find("> meta[itemprop='datePublished']:first").attr("content",datePublished),eyebrow){var cat=cloned.find("> .cat-name"),eyebrowStr="";0===cat.size()&&$('<span class="cat-name"></span>').insertBefore(cloned.find("> h3:first")),eyebrowStr=eyebrow.url?'<a href="'+eyebrow.url+'">'+eyebrow.title+"</a>":eyebrow.title,cloned.find("> .cat-name").html(eyebrowStr)}else cloned.find("> .cat-name").remove();holder.append(cloned)};for(x=0;x<items.length;x++)trigger(items[x]);if($(holder.children()).insertBefore(list.children(":last-child")),list.children().removeClass("dv-item-last"),list.children(":last-child").prev().addClass("dv-item-last"),list.find("> .dv-item").each(function(){var dv=$(this);dv.find("img[data-src][data-src-loaded!='1']").each(function(){var el=$(this),img=new Image,src=el.attr("data-src");dv.addClass("loading"),el.attr("data-src-loaded","1").css("opacity",0),img.onload=function(){el.attr("src",src).animate({opacity:1},200,"linear"),el.removeAttr("width").removeAttr("height"),dv.removeClass("loading")},img.src=src})}),FOX&&FOX.site&&FOX.site.mediaIconOverlay){list.children(":not(:last-child)").each(function(){var elm=$(this);FOX.site.mediaIconOverlay.set({elm:elm,position:"bottom right",size:sizes.overlay,dim:sizes.image})})}else log("[LoadMore] No Media Overlay script found!");FOX&&FOX.site&&FOX.site.SocialMediaCount?list.children(".new-ajax-item").each(function(){var el=$(this);FOX.site.SocialMediaCount.set(el.find(".social-count")),el.removeClass("new-ajax-item")}):log("[LoadMore] No Social Media script found!"),vars._fn.setButton(numFound)},Renderer.prototype.Politics=function(data){var root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("div ul:first"),holder=(list.children("li:first").clone(),$('<ul id="temp"></ul>')),subsection=(getPageSection(),getPageSubSection()),$doc=(getPageChannel(),$(document)),items=data.items,numFound=data.numFound?data.numFound:!1;$.isArray(items)||(items=[items]);var template='<ul>                    <% for (var z = 0; z < items.length; z++) { %>                        <li class="<%= items[z].type %>">                            <article itemid="" itemtype="http://schema.org/NewsArticle" itemscope="">                                <div>                                    <% if (items[z].eyebrow) { %>                                        <h4>                                            <% if (items[z].eyebrow.url) { %>                                                <a href="<%= items[z].eyebrow.url %>"><%= items[z].eyebrow.title %></a>                                            <% } else { %>                                                <%= items[z].eyebrow.title %>                                            <% } %>                                        </h4>                                    <% } %>                                    <a href="<%= items[z].link %>">                                        <% if (items[z].authors && items[z].authors[0].politics_headshot_image_url) { %>                                            <div itemtype="http://schema.org/MediaObject" itemscope="" itemprop="associatedMedia" class="m">                                                <img itemprop="image" alt="<%= items[z].authors[0].display_name %>" src="<%= items[z].authors[0].politics_headshot_image_url %>">                                            </div>                                        <% } %>                                        <% if (items[z].image_url && !subsection) { %>                                            <img class="n" src="<%= items[z].image_url %>" alt="<%= items[z].export_headline %>" itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/MediaObject">                                        <% } %>                                        <h3 itemprop="headline"><%= items[z].title %></h3>                                    </a>                                    <% if (items[z].authors) { %>                                        <p itemtype="http://schema.org/Person" itemscope="" itemprop="author">                                            by <span itemprop="name">                                                <% for (var i = 0; i < items[z].authors.length; i++) { %>                                                    <% if (i > 0) { %>                                                        ,                                                    <% } %>                                                    <a href="<%= items[z].authors[i].author_link %>"><%= items[z].authors[i].display_name %></a>                                                <% } %>                                            </span>                                        </p>                                    <% } %>                                </div>                            </article>                            <meta itemprop="datePublished" content="<%= items[z].date %>">                        </li>                    <% } %>                    </ul>                ',maxAuthors="number"==typeof config.maxAuthors?config.maxAuthors:3,mediaOverlay=new FOX_Plugins.MediaOverlay,markup=_.template(template,function(){var data={subsection:subsection};
data.items=[];for(var setEyebrow=function(eyebrow){var ret=!1;return ret="string"==typeof eyebrow?{title:eyebrow}:eyebrow},setAuthors=function(authors){var ret=!1;if(authors&&$.isArray(authors)&&authors.length>0){var len=authors.length>maxAuthors?maxAuthors:authors.length;ret=[];for(var x=0;len>x;x++)ret.push(authors[x])}return ret},i=0;i<items.length;i++){var item=items[i],resizedImg=item.image_url&&"string"==typeof item.image_url?resizeImage(item.image_url,165,93):null;data.items.push({title:item.use_title,link:item.url,type:item.content_type,image_url:resizedImg,export_headline:item.export_headline,authors:setAuthors(item.authors),eyebrow:setEyebrow(item.eyebrow),date:item.date})}return data}());holder=$(markup),$(holder.children()).insertAfter(list.children(":last-child")),list.children().each(function(){var li=$(this);li.hasClass("video-ct")&&mediaOverlay.embed({target:li.find("img.n"),type:"video",size:32,dim:[165,93]})}),vars._fn.setButton(numFound),setTimeout(function(){$doc.trigger("/politics/toggle-throbber")},300)},Renderer.prototype.LiveEvents=function(data){var root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,holder=$('<ul id="temp"></ul>'),$doc=(getPageSection(),getPageChannel(),$(document)),items=data.items,numFound=data.numFound?data.numFound:!1;$.isArray(items)||(items=[items]);var template='<div class="more-stuff">								<% for (var z = 0; z < items.length; z++) { %>									<div class="ct-item">										<div class="media">											<div class="m m-l">												<a href="<%= items[z].link %>">													<img src="<%= items[z].image %>" alt="" width="156" height="88">												</a>											</div>										</div>										<div class="info">											<h3><a href="<%= items[z].link %>"><%= items[z].title %></a></h3>											<div class="summary">												<p></p>												<p><%= items[z].desc %></p>												<p></p>											</div>										</div>									</div>									<meta itemprop="datePublished" content="<%= items[z].date %>">								<% } %>                            </div>',maxAuthors="number"==typeof config.maxAuthors?config.maxAuthors:3,markup=_.template(template,function(){var data={};data.items=[];for(var setEyebrow=function(eyebrow){var ret=!1;return ret="string"==typeof eyebrow?{title:eyebrow}:eyebrow},setAuthors=function(authors){var ret=!1;if(authors&&$.isArray(authors)&&authors.length>0){var len=authors.length>maxAuthors?maxAuthors:authors.length;ret=[];for(var x=0;len>x;x++)ret.push(authors[x])}return ret},i=0;i<items.length;i++){var item=items[i];data.items.push({image:item.image_url,title:item.use_title,desc:item.description,link:item.url,authors:setAuthors(item.authors),eyebrow:setEyebrow(item.eyebrow),date:item.date})}return data}());holder=$(markup),$(holder.children()).insertBefore(elm.children(":last-child")),vars._fn.setButton(numFound),setTimeout(function(){$doc.trigger("/politics/toggle-throbber")},300)},Renderer.prototype.Perspectives=function(data){var root=this.root,vars=root.__vars,elm=vars._elm,list=(vars._config,elm.find("div ul:first")),holder=(list.children("li:first").clone(),$('<ul id="temp"></ul>')),$doc=(getPageSection(),getPageChannel(),$(document)),items=data.items,numFound=data.numFound?data.numFound:!1;$.isArray(items)||(items=[items]);var template='<ul>					<% for (var z = 0; z < items.length; z++) { %>					<li>                            <div class="m">							<% if (items[z].archive_url) { %>								<a href="<%= items[z].archive_url %>">							<% } %>							<% if (items[z].img) { %>								<img src="<%= items[z].img %>">							<% } else { %>								<img src="http://global.fncstatic.com/static/v/fb2/img/96x96-fb-logo.png">							<% } %>							<% if (items[z].tax_url) { %>								</a>							<% } %>                            </div>                        <div>                            <p class="column">                                <a href="<%= items[z].tax_url %>"><%= items[z].show_title %></a>                            </p>                            <a class="title" href="<%= items[z].link %>"><%= items[z].title %></a>                            <% if (items[z].desc) { %>                                <p><%= items[z].desc %></p>                            <% } %>                            <% if (items[z].author) { %>                            <p class="author" itemtype="http://schema.org/Person" itemscope="" itemprop="author">                                by <span itemprop="name"><a href="<%= items[z].archive_url %>"><%= items[z].author %></a></span>                            </p>                            <% } %>                        </div>                        <meta itemprop="datePublished" content="<%= items[z].date %>">                    </li>					<% } %>				</ul>			',getShowTitle=function(path){var show_title=path.substr(path.lastIndexOf("/")+1);return show_title},markup=_.template(template,function(){var data={};data.items=[];for(var i=0;i<items.length;i++){var item=items[i],show=null,tax_url=null,host_img=null,author=null,archive_url=null;if(item.authors&&item.authors!==!1&&(author=item.authors[0].display_name,archive_url=item.authors[0].url,null!==item.authors[0].square_image_url&&(host_img=resizeImage(item.authors[0].square_image_url,128,128))),item.taxonomy)for(var j=0;j<item.taxonomy.length;j++){var item_path=item.taxonomy[j].path;null!==item_path&&item_path.length>0&&item_path.indexOf("COLUMNS")>-1&&(show=getShowTitle(item_path),null!==item.taxonomy[j].url&&item.taxonomy[j].url.length>0&&(tax_url=item.taxonomy[j].url))}data.items.push({title:item.use_title,link:item.url,date:item.date,desc:item.description,tax_url:tax_url,img:host_img,show_title:show,author:author,archive_url:archive_url})}return data}());holder=$(markup),$(holder.children()).insertAfter(list.children(":last-child")),vars._fn.setButton(numFound),setTimeout(function(){$doc.trigger("/perspectives/toggle-throbber")},300)},Renderer.prototype.Slideshows=function(data){var root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("ul:first"),holder=(list.children("li:first").clone(),$('<ul id="temp"></ul>')),items=(getPageSection(),getPageChannel(),data.items),numFound=data.numFound?data.numFound:!1;$.isArray(items)||(items=[items]);var template=_.template('<li class="slideshow-ct"><article itemid="" itemtype="http://schema.org/NewsArticle" itemscope=""><a href="<%= url %>"><div itemtype="http://schema.org/MediaObject" itemscope="" class="m"><img class="faded" itemprop="image" alt="<%= title %>" data-src="<%= image_url %>" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></div><h3 itemprop="headline"><%= title %></h3></a><meta itemprop="datePublished" content="<%= date %>"></article></li>'),mediaOverlay=("number"==typeof config.maxAuthors?config.maxAuthors:3,new FOX_Plugins.MediaOverlay),resizeImage=function(u,w,h){if(isNaN(w)||isNaN(h))return u;var url=u.split("/"),dim="/"+w+"/"+h+"/";return url.splice(0,2),url.unshift("http://a57.foxnews.com"),url=url.slice(0,url.length-1).join("/")+dim+url.slice(url.length-1)},markup="";_.each(items,function(item){item.image_url&&(item.image_url=resizeImage(item.image_url,193,109),item.image_url=item.image_url+="?ve=1&tl=1"),markup+=template(item)}),holder=$("<ul>"+markup+"<ul>"),$(holder.children()).insertAfter(list.children(":last-child")),list.find(".faded").each(function(){var $this=$(this);$this.attr("src",$this.attr("data-src"));var m=$this.parent();$this.load(function(){$this.removeClass("faded"),mediaOverlay.embed({target:m,type:"slideshow",size:32,dim:[193,109]})})}),vars._fn.setButton(numFound)},Renderer.prototype.Entertainment=function(data){var root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("ul:first"),holder=(list.children("li:first").clone(),$('<ul id="temp"></ul>')),items=(getPageSection(),getPageChannel(),data.items),numFound=data.numFound?data.numFound:!1,mediaOverlay=new FOX_Plugins.MediaOverlay,$doc=$(document);$.isArray(items)||(items=[items]);var template=_.template('<li class="just-added <%= content_type %>">					<article itemid="" itemtype="http://schema.org/NewsArticle" itemscope="">         <% if (image_url) { %> 					<div class="faded m">						<a href="<%= url %>">									<div itemtype="http://schema.org/MediaObject" itemscope="" itemprop="associatedMedia">									<img itemprop="image" alt="<%= title %>" data-src="<%= image_url %>" width=240 height=143 src="http://global.fncstatic.com/static/v/all/img/clear.gif">									</div>							</a>						<% if (sponsored) { %> 							<h2 class ="sponsored"><a href="<%= eyebrow.url %>">Sponsored</a></h2> 						<% } else { %>							<h2><a href="<%= eyebrow.url %>"><%= eyebrow.title %></a></h2> 						<% } %>					</div>         <% } %>					<div class="item-info faded">						<h3>							<a href="<%= url %>"><%= use_title %></a>						</h3>						<p> <%= use_description %> </p>					</div>					</article>					<meta itemprop="datePublished" content="<%= date %>">			</li>'),resizeImage=("number"==typeof config.maxAuthors?config.maxAuthors:3,function(u,w,h){if(isNaN(w)||isNaN(h))return u;var url=u.split("/"),dim="/"+w+"/"+h+"/";return url.splice(0,2),url.unshift("http://a57.foxnews.com"),url=url.slice(0,url.length-1).join("/")+dim+url.slice(url.length-1)}),getType=function(holder){for(var sp=(holder.attr("class")||"").split(" "),type=!1,x=0;x<sp.length;x++)if(sp[x].indexOf("-ct")>-1){var t=sp[x].split("-ct")[0]||!1;if(t){type=t;break}}return type},set=function(item){var taxonomy=item.taxonomy||!1,section=item.section||!1,isSlideshow="string"==typeof item.content_type&&item.content_type.indexOf("slideshow")>-1?!0:!1,isVideo="string"==typeof item.content_type&&item.content_type.indexOf("video")>-1?!0:!1;switch(item.sponsored="yes"===item.sponsored?!0:!1,item.eyebrow=function(){var ret=!1;return ret=isVideo?{title:"Video",url:"http://video.foxnews.com/"}:setTaxonomyPath(taxonomy,section)}(),isSlideshow?(item.use_title=item.export_headline||item.title,item.use_description=item.description):(item.use_title=item.export_headline||item.title,item.use_description=item.export_headline===item.title?"":item.title),item.url=$.trim($.isArray(item.url)?item.url[0]:item.url),item.image_url=item.image_url?$.isArray(item.image_url)?item.image_url[0]:item.image_url:!1,item.image_url&&(item.image_url=item.image_url+="?ve=1&tl=1"),item.content_type){case"video":item.content_type="video-ct";break;case"slideshow":item.content_type="slideshow-ct";break;case"article":item.content_type="article-ct";break;case"listpage":item.content_type="listpage-ct"}return item},markup="";_.each(items,function(item){item.image_url&&(item.image_url=resizeImage(item.image_url,240,143)),markup+=template(set(item))}),holder=$("<ul>"+markup+"</ul>"),$(holder.children()).insertAfter(list.children(":last-child")),setTimeout(function(){$doc.trigger("/FOX.site.LoadMoreV2/load-more-clicked"),$doc.trigger("/entertainment/toggle-spinner")},300),list.find("li.just-added").each(function(index,li){var $this=$(li),$m=$this.find(".m"),$img=$m.find("img"),$desc=$this.find(".item-info");$img.attr("src",$img.attr("data-src")),$this.removeClass("just-added"),setTimeout(function(){$desc.removeClass("faded")},13*index),$img.load(function(){setTimeout(function(){$m.removeClass("faded"),setTimeout(function(){mediaOverlay.embed({target:$img,type:getType($this)})},100)},13*index)})}),vars._fn.setButton(numFound)},Renderer}(),Functions=function(){var Functions=function(root){this.root=root};return Functions.prototype.loadFeed=function(){var self=this,root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("ul.dv-encap:first"),button=list.find("> .more-btn .btn-smll"),callbackFN="FX_LM";if("Politics"===config.renderer&&(list=elm.find("div > ul"),button=list.find(".load")),vars._loading)return!1;vars._loading=!0,button.addClass("off");var section=getPageSection(),subsection=getPageSubSection();if(!section)return log("[LoadMore] No Section found for this page."),!1;var fullSectionPath=section+(subsection?"/"+subsection:"");if(arguments.length>1){var max,options=arguments[1];options&&options.max&&(max=options.max)}var url=function(){var ret=config.feed||!1;if("legacy"===config.type?(ret=ret.replace("${callback}",callbackFN),ret=ret.replace("${sectionType}",fullSectionPath),ret=ret.replace("${startVal}",showNum(list,!1,config.addToResultsCount||0))):(ret=ret||CONST.feed,ret=ret.replace("${callback}",callbackFN),ret=ret.replace("${sectionType}",fullSectionPath),ret=ret.replace("${timestamp}",self.getMaxDate())),"contributor"===$.ad._meta.raw.section&&"undefined"!=typeof $.ad._meta&&"undefined"!=typeof $.ad._meta.raw&&"undefined"!=typeof $.ad._meta.raw.identifier){var sp=($("meta[property='og:url']").attr("content")||"").split("/"),authorId=sp[sp.length-1],videoTag=decodeURI(elm.attr("data-video-tag")||"");ret+="&person_id="+authorId+(videoTag?"&video_tag="+videoTag:""),ret=ret.replace("contributor","author").replace("latest-news","detail")}return max&&(ret=ret.replace(/rows=([\d]*)/,"rows="+max)),ret}();config.domain&&(url=config.domain+url),window[callbackFN]=function(data){if(data){var norm=FeedNormalizer.normalize(data,config);if(!norm)return!1;var renderFN=config.renderer||CONST.config.renderer;vars._renderer[renderFN](norm)}else log("[LoadMore] No Data!");setTimeout(function(){vars._loading=!1},500)},$.ajax({url:url,dataType:"script",async:!0,cache:!0})},Functions.prototype.setButton=function(numFound,disable){var self=this,root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config,list=elm.find("ul.dv-encap:first"),buffer=config.addToResultsCount||0;disable="boolean"==typeof disable?disable:null;var showStr=config.showStr||CONST.config.showStr,btnStr=config.btnStr||CONST.config.btnStr,markup='<li class="show more-btn"><span class="showing-num">${showStr}</span><a href="#" class="btn-smll">${btnStr}</a></li>',button=list.find("> .more-btn");if(0===button.size())markup=markup.replace("${showStr}",showNum(list,showStr,buffer)),markup=markup.replace("${btnStr}",btnStr),list.append(markup);else{{var span=button.find(".showing-num");span.html()}button.find(".showing-num").html(showNum(list,showStr,buffer))}self.setButtonState(disable,numFound)},Functions.prototype.setButtonState=function(disable,numFound){var root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config||{},list=elm.find("ul.dv-encap:first"),more=list.find("> .more-btn"),minItems=config.itemsOnLoad,buffer=config.addToResultsCount||0;disable="boolean"==typeof disable?disable:null,numFound="number"==typeof numFound?numFound:!1;var enableBtn=function(){more.removeClass("off"),more.find(".btn-smll").removeClass("off")},disableBtn=function(){more.addClass("off"),more.find(".btn-smll").addClass("off")};"legacy"===config.type?null!==disable&&disable||numFound&&numFound<config.itemsOnLoad||showNum(list,!1,config.addToResultsCount||0)>39?disableBtn():enableBtn():null!==disable&&disable||showNum(list,!1,buffer)<minItems||numFound&&numFound<config.itemsOnLoad?disableBtn():enableBtn()},Functions.prototype.setButtonBindings=function(){var self=this,root=this.root,vars=root.__vars,elm=vars._elm,config=vars._config||{},list=elm.find("ul.dv-encap:first"),more=list.find("> .more-btn"),$doc=$(document);if(("Politics"===config.renderer||"Perspectives"===config.renderer)&&(list=elm.find("div > ul"),more=elm.find(".load")),"LiveEvents"===config.renderer&&(list=elm.find("div.ct-item"),more=elm.find(".btn-lrg.more")),("Slideshows"===config.renderer||"Entertainment"===config.renderer)&&(list=elm.find("div > ul"),more=elm.find(".load")),0===more.size())return!1;if(more.find("a").bind("click",function(){return more.hasClass("off")||(self.loadFeed(self),$.ad.track({"show-more":{}})),!1}),"Politics"===config.renderer||"Perspectives"===config.renderer){var path;more.prepend(-1!==navigator.appVersion.indexOf("MSIE 9.")||-1!==navigator.appVersion.indexOf("MSIE 8.")?'<div id="throbber" class="ie-fix"></div>':'<div id="throbber"><div class="throbber throbber-1"></div><div class="throbber throbber-2"></div><div class="throbber throbber-3"></div></div>');var throbber=more.find("#throbber").addClass("faded");"Politics"===config.renderer&&(path="/politics/toggle-throbber"),"Perspectives"===config.renderer&&(path="/perspectives/toggle-throbber"),$doc.bind(path,function(){throbber.toggleClass("faded")}),more.bind("click",function(){return more.hasClass("off")||($doc.trigger(path),self.loadFeed(self),$.ad.track({"show-more":{}})),!1})}if("Entertainment"===config.renderer){more.append('<div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');var spinner=more.find(".spinner").addClass("faded");$doc.bind("/entertainment/toggle-spinner",function(){spinner.toggleClass("faded")}),more.bind("click",function(){return more.hasClass("off")||($doc.trigger("/entertainment/toggle-spinner"),self.loadFeed(self),$.ad.track({"show-more":{}})),!1})}"LiveEvents"===config.renderer&&(config.itemsOnLoad=12,more.bind("click",function(){return more.hasClass("off")||(self.loadFeed(self,{max:10}),$.ad.track({"show-more":{}})),!1})),"Slideshows"===config.renderer&&(config.itemsOnLoad=12,more.bind("click",function(){return more.hasClass("off")||(self.loadFeed(self,{max:12}),$.ad.track({"show-more":{}})),!1}))},Functions.prototype.getMaxDate=function(){var ret="",root=this.root,vars=root.__vars,config=vars._config,elm=vars._elm,list=elm.find("ul.dv-encap:first");return list.find("> li.dv-item:last meta[itemprop='datePublished']:first").each(function(){ret=$(this).attr("content")||""}),("Politics"===config.renderer||"Perspectives"===config.renderer)&&(list=elm.find("ul"),list.find("li:last meta[itemprop='datePublished']:first").each(function(){ret=$(this).attr("content")||""})),("Slideshows"===config.renderer||"Entertainment"===config.renderer)&&(list=elm.find("ul"),list.find("li:last meta[itemprop='datePublished']:first").each(function(){ret=$(this).attr("content")||""})),"LiveEvents"===config.renderer&&(list=elm.find("> div:last").prev(),ret=list.attr("content")||""),ret},Functions}(),FeedNormalizer=function(){FeedNormalizer={},FeedNormalizer.normalize=function(data,config){var items=data&&data.response&&$.isArray(data.response.docs)?data.response.docs:!1,numFound=data&&data.response&&data.response.numFound?data.response.numFound:!1;if(!items)return!1;items=items.slice(0,config.itemsOnLoad);for(var set=function(item){var taxonomy=item.taxonomy||!1,section=item.section||!1,isVideo="string"==typeof item.content_type&&item.content_type.indexOf("video")>-1?!0:!1;switch(item.eyebrow=function(){var ret=!1;return allowEyebrow()&&(ret=isVideo?{title:"Video",url:"http://video.foxnews.com/"}:setTaxonomyPath(taxonomy,section)),ret}(),item.use_title=isVideo?item.title||item.export_headline:item.export_headline||item.title,item.url=$.trim($.isArray(item.url)?item.url[0]:item.url),item.image_url=item.image_url?$.isArray(item.image_url)?item.image_url[0]:item.image_url:!1,item.authors=getAuthors(item.authors),item.content_type){case"video":item.content_type="video-ct";break;case"slideshow":item.content_type="slideshow-ct";break;case"article":item.content_type="article-ct";break;case"listpage":item.content_type="listpage-ct"}return item},x=0;x<items.length;x++)items[x]=set(items[x]);var obj={items:items};return numFound&&(obj.numFound=numFound),obj},FeedNormalizer.legacy=function(data,config){var items=data&&data.response&&$.isArray(data.response.docs)?data.response.docs:!1,numFound=data&&data.response&&data.response.numFound?data.response.numFound:!1;if(!items)return!1;items=items.slice(0,config.itemsOnLoad);for(var set=function(item){var taxonomy=item.taxonomy||!1,section=item.section||!1;return item.eyebrow=setTaxonomyPath(taxonomy,section),item.use_title=item.export_headline||item.title,item.url=$.trim($.isArray(item.url)?item.url[0]:item.url),item.authors=getAuthors(item.authors),item.image_url=item.image_url?$.isArray(item.image_url)?item.image_url[0]:item.image_url:!1,item.content_type=item.content_type||function(){var ret="article-ct";return 0===item.url.indexOf("http://video.")?ret="video-ct":val.indexOf("/slideshow/")>-1&&(ret="slideshow-ct"),ret}(),item},x=0;x<items.length;x++)items[x]=set(items[x]);var obj={items:items};return numFound&&(obj.numFound=numFound),obj};var getAuthors=function(authors){var x,ret=!1,arr=authors&&$.isArray(authors)&&authors.length>0?authors:!1;if(arr)for(ret=arr,x=0;x<ret.length;x++){var author=ret[x],fmtStr=[];author.first_name&&fmtStr.push($.trim(author.first_name)),author.last_name&&fmtStr.push($.trim(author.last_name)),ret[x].display_name=fmtStr.join(" "),ret[x].headshot_image_url=author.headshot_image_url||!1;var machineName=$.trim(ret[x].display_name).replace(/\s+/gi,"-").toLowerCase();ret[x].author_link=author.url?author.url:"http://www.foxnews.com/archive/author/"+machineName+"/index.html"}return ret};return FeedNormalizer}(),showNum=function(list,str,buffer){var num=list.children(".show:not(.more-btn)").size();num="number"==typeof buffer?num+parseInt(buffer,10):num;var ret=str?str.replace("${show}",num):num;return ret},setTaxonomyPath=function(taxonomies,sections){var x,ret=!1,alt=!1;if(taxonomies&&$.isArray(taxonomies)){var foundColumn=!1;for(x=0;x<taxonomies.length;x++){var taxonomy=taxonomies[x];if(taxonomy&&taxonomy.path){var sp=taxonomy.path.split("|");if(sp.length>1?sp=$.trim(sp[sp.length-2]||""):1===sp.length&&(sp=$.trim(sp[0]||"")),sp.length>0&&!foundColumn){var spp=sp.split("/");spp=$.trim(spp[spp.length-1]||""),sp.length>0&&(alt||(alt=spp),taxonomy.url&&(ret={title:spp,url:taxonomy.url})),sp.toLowerCase().indexOf("/columns/")>-1&&(foundColumn=!0)}}}}if(!ret&&sections&&$.isArray(sections))for(x=0;x<sections.length;x++){var section=sections[x];if(section.title){var title=$.trim(section.title);if(alt||(alt=title),section.url){ret={title:title,url:section.url};break}}}return!ret&&alt&&(ret={title:alt,url:!1}),ret},allowEyebrow=function(){var x,ret=!0,disallow=CONST.eyebrow.disableChannels,channel=$.ad&&$.ad._meta&&$.ad._meta.channel?$.ad._meta.channel:!1;if(channel)for(x=0;x<disallow.length;x++)if(channel.indexOf(disallow[x])>-1){ret=!1;break}return ret},getPageSection=function(){var ret=$("head meta[name='prism.section']").attr("content")||!1;return ret},getPageSubSection=function(){var ret=!1,sub=[];return $("head meta[name^='prism.subsection']").each(function(){var subVal=$.trim($(this).attr("content")||"");subVal.length>0&&sub.push(subVal)}),sub.length>0&&(ret=sub.join("/")),ret},getPageChannel=function(){var ret=$("head meta[name='prism.channel']").attr("content")||!1;return ret},resizeImage=function(u,w,h){if(isNaN(w)||isNaN(h))return u;var url=u.split("/"),dim="/"+w+"/"+h+"/";return url.splice(0,2),url.unshift("http://a57.foxnews.com"),url=url.slice(0,url.length-1).join("/")+dim+url.slice(url.length-1)},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:LoadMore",function(){return window.LoadMore}):!1}(window.Modulr);var FOX_POLLS_PLUGIN=function(window,$){var cache={},tmpl=function tmpl(str,data){var fn=/\W/.test(str)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');return p.join('');"):cache[str]=cache[str]||tmpl(document.getElementById(str).innerHTML);return data?fn(data):fn},cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},state="www",CONFIG={getFiltersUrl:"http://"+state+".foxnews.com/feeds/poll/affiliate/json?callback=",getAffiliateByIdUrl:"http://"+state+".foxnews.com/feeds/poll/{id}/json?callback={jsonpCallback}",getLatestPollUrl:"http://"+state+".foxnews.com/feeds/latest/poll/json?callback={jsonpCallback}&rows=10",getMoreLatestPollsUrl:"http://"+state+".foxnews.com/feeds/latest/poll/json?callback={jsonpCallback}&max_date={maxDate}&rows=10",getPollsByAffiliateId:"http://"+state+".foxnews.com/feeds/poll/affiliate/{id}/json?callback={jsonpCallback}&rows=10",getMoreAffiliatePollsUrl:"http://"+state+".foxnews.com/feeds/poll/affiliate/{id}/json?callback={jsonpCallback}&max_date={maxDate}&rows=10",getPollOfTheDateUrl:"http://"+state+".foxnews.com/feeds/poll/affiliate/3379509/json?callback={jsonpCallback}&rows=1",getAffiliateInformationUrl:"",getSodaHeadPollUrl:""},App=function(implementationType,mapOptions,target,callback,url,context,domConfig){var _t=this;_t.affiliateIDList={FoxBusiness:3634735,FoxNation:3634725},_t.affiliateID=null,_t.sponsored=!1,window._shmapq=window._shmapq||[],_t.type=implementationType,_t.subtype=null,_t.target=target||null,_t.affiliateUrl=url||null,_t.APP=context||null,_t.affiliateTitle=null,_t.callback=function(){var ret=null;return callback&&(ret=function(html,type){type=type||"onLoad","function"==typeof callback?callback(html):"object"==typeof callback&&callback[type]&&callback[type](html)}),ret}(),_t.mapConfig={coloring:"plain",colors:["#c83f3f","#d39142","#5786a4","#999966","#505e68","#c3a866","#b56164","#998675","#999999","#c6789b"],color_no_vote:"#CCC",minimap:!1,stroke:"#444",color_tie:"#fff",width:251,constraints:"topleft",zoom:!1,tooltip:!0},_t.domConfig={pollClassIdentifier:".sodahead-poll",voteOptions:"form > ul > li > input",voteList:"form > ul > li",viewAllPolls:"form > input:eq(1)",backToPoll:".percentage-bars > a.back-to-poll",pollList:".pList",backToPolls:"> input",backToPollsDetail:".polls-detail > input:first-child",filterOptions:".poll-filter",viewPollHeader:".poll-filter > h3",showResults:".show.more-btn > .showing-num",showMore:".show.more-btn > .btn-smll",filterContainer:"div.choose",filterDropDown:"a:eq(0)",castYourVote:"form > input.btn.g",rrOptions:'form input[type="radio"]',voteInMorePolls:".column2 > a",vote:"form > input:eq(0)",socialButtons:".social-count",animateVote:".percentage-bars > div",collumn1:".column1",collumn2:".column2",percentageHolder:".percentage-bars",genericDiscuss:".column1 > a:eq(0)",genericSeeAll:".column1 > a:last-child",navOptions:".poll-nav-options",seeAllQuestions:".column1 > a"},_t.id=function(){var switchType=null;"string"==typeof implementationType&&(switchType=implementationType.indexOf(":")>-1?implementationType.split(":")[0]:implementationType);var type={rrPollWidget:function(){return null},genericPoll:function(){return _t.id?_t.id:$(_t.target)[0].id.match(/\d/gi).join("")},pollsArchive:function(){return _t.listPolls=[],_t.target=_t.domConfig.pollClassIdentifier,[]},detailedPoll:function(){var location={div:function(){var sodaHead=$(_t.domConfig.pollClassIdentifier);return sodaHead.size()>0?(_t.target="#"+sodaHead[0].id,_t.target.match(/\d/gi).join("")):null},meta:function(){var sodaHead=$(_t.domConfig.pollClassIdentifier);return sodaHead.size()>0&&(_t.target="#"+sodaHead[0].id),_t.target.match(/\d/gi).join("")}};return location[target]()},pollWithMap:function(){if(".polloftheday"===target){var classTarget=$(target);return classTarget.size()>0?(_t.target="#"+classTarget[0].id,classTarget[0].id.match(/\d/gi).join("")):!1}return target.match(/\d/gi).join("")},genericPollWithMap:function(){return _t.id?_t.id:$(_t.target)[0].id.match(/\d/gi).join("")},affiliateID:function(){return _t.id}};if(switchType&&type[switchType])return type[switchType]();var elm=implementationType,dataOptions={};return dataOptions["class"]=function(){var val=elm.attr("class")||!1;return val&&(_t.target="."+val,_t.domConfig.pollClassIdentifier="."+val),val}(),elm.attr("data-poll-id")&&(dataOptions["data-poll-id"]=function(){var val=elm.attr("data-poll-id");return elm.attr("id","poll_"+val),_t.target="#poll_"+val,_t.id=val,val}()),elm.attr("data-affiliate-id")&&(dataOptions["data-affiliate-id"]=function(){var val=elm.attr("data-affiliate-id")||!1;return!_t.id&&val&&(elm.attr("id","poll_"+val),_t.target="#poll_"+val,"genericPollWithMap"===dataOptions["data-widget-type"]&&(_t.subtype="genericPollWithMap"),_t.affiliateID=val),val}()),dataOptions["data-widget-type"]=function(){var t=elm.attr("data-widget-type")||!1,val=!1;if(t)switch(t){case"poll":val="genericPoll";break;case"map":val="genericPollWithMap"}return dataOptions["data-affiliate-id"]&&(val="affiliateID"),_t.type=val,val}(),dataOptions["data-is-sponsored"]=function(){var val=elm.attr("data-is-sponsored")||"false";return _t.sponsored=val,val}(),dataOptions["data-widget-type"]?type[dataOptions["data-widget-type"]]():void 0}.call(_t),_t.template=null,_t.pollData=null,_t.map=null,domConfig&&$.extend(_t.domConfig,domConfig),mapOptions&&$.extend(_t.mapConfig,mapOptions),"string"==typeof _t.type&&_t.init(_t.type)},protoApp=App.prototype,Template=function(type,context){var _t=this,_app=context?context:{sponsored:"false"},state="";_t.type=type,_t.templateList={percentageBars:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %><div class="poll-nav-options"><a href=""><span></span>Sound Off</a><a href=""><span></span>View All Questions</a></div>',percentageBarsAlone:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %>',percentageBarsByAffiliateID:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %>',percentageBarsGenericPoll:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %>',percentageBarsGenericPollMap:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %><div class="poll-nav-options"><a href=""><span></span>Sound Off</a><a href=""><span></span>View All Questions</a></div>',percentageBarsDetails:'<% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %><span class="total-votes">( <%= obj.poll.totalVotes %> votes )</span>',detailedPoll:'<div class="polls-detail"><h3><%= obj.poll.title %></h3><div class="social-count "><a href="#" class="fbk">Facebook</a><span class="fbk"></span><a href="#" class="twt">Twitter</a><span class="twt"></span></div><div class="detail-container"><div class="poll-item"><div class="column1"><form action=""><ul class="radio-select"><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><li><label><%= obj.poll.answers[i].title %></label><span class="option<%= i %>"></span><input type="radio" class="option<%= i %>" name="myRadio<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span></span></li><% } %></ul><input type="submit" class="btn g" value="Vote" name="vote"></form><div class="percentage-bars"></div><!--/percentage-bars--></div><div class="column2"><a class="detail" href=""></a><div id="map-<%= obj.poll.id %>-'+_t.type+'" class="pmap"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></div></div></div></div><!--detail-container--><a href="//nation.foxnews.com/poll/index.html" class="btn g return">Back to Questions</a></div>',pollWithMap:'<div class="poll-item <% if (obj.poll.closed) {%> alt <% }%>"><div class="column1"><h3 data-affiliate-id="<%= obj.poll.affiliates.primary.id %>"><%= obj.poll.affiliates.primary.name %></h3><p>Q: <%= obj.poll.title %> </p><div class="social-count "><a href="#" class="fbk">Facebook</a><span class="fbk"></span><a href="#" class="twt">Twitter</a><span class="twt"></span></div><form action=""><% if (!obj.poll.closed) {%><ul class="radio-select"><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><li><label><%= obj.poll.answers[i].title %></label><span class="option<%= i %>"></span><input type="radio" class="option<%= i %>" name="myRadio<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span></span></li><% } %></ul><% } %><input type="submit" class="btn g" value="Vote" name="vote"><div class="poll-nav-options"><a href=""><span></span>Sound Off</a><a href=""><span></span>View All Questions</a></div></form><div class="percentage-bars"><% if (obj.poll.closed) {%><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %><input type="button" class="btn g" value="Poll Closed" name="vote" disabled><% } %></div></div><div class="column2"><a class="detail" href=""></a><div id="map-<%= obj.poll.id %>-'+_t.type+'" class="pmap"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></div></div>'+("true"===_app.sponsored?'<div class="sponsor-ad"><div id="business-88x31" class="ad dc"></div><img src="//'+state+'global.fncstatic.com/static/v/all/img/poll-sponsor.gif"></div>':"")+"</div>",pollsArchive:'<div class="polls-home"><h2><a href="">You Decide</a></h2><h3><span>*</span>Unofficial polls based on user votes</h3><div class="poll-filter"><span>You are viewing</span><h3>Latest Questions</h3><form><fieldset></fieldset></form></div><!--/poll-filter--><ul class="pList"><p class="preloader">Loading Polls...<img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></p></ul><div class="show more-btn"><a class="btn-smll" href="#">Show More</a></div></div>',rrPollWidget:'<h2 class="title">Question of the Day</h2><div class="poll-widget"><div class="poll-item"><div class="column1"><p><span>Q:</span> <%= obj.poll.title %></p><form action=""><% if (!obj.poll.closed) {%><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div><input type="radio" name="Option<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span><%= obj.poll.answers[i].title %></span></div><% } %><% } %><input type="submit" class="btn g" value="Vote" name="vote"></form><div class="percentage-bars"></div></div><div class="column2"><a href="#">See All Questions <span>&rsaquo;</span></a>​<ul style="display:none;"><li><a href="#"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget1.gif"/>Full Details</a></li><li><a href="#"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget2.gif"/>Discuss</a></li><li><a href="#"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget3.gif"/>View Map</a></li></ul></div></div></div>',affiliateID:'<div class="poll-widget"><div class="poll-item"><div class="column1"><p><span>Q:</span> <%= obj.poll.title %></p><form action=""><% if (!obj.poll.closed) {%><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div><input type="radio" name="Option<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span><%= obj.poll.answers[i].title %></span></div><% } %><% } %><input type="submit" name="vote" value="Vote" class="btn g"></form><div class="percentage-bars"></div><div class="column2"><a href="#">See All Questions <span>&rsaquo;</span></a><ul style="display:none"><li><a href="#" class="sound-off"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget2.gif"/>Sound Off</a></li><li><a href="#" class="view-map"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget3.gif"/>View Map</a></li><li><a href="http://nation.foxnews.com/poll/index.html" class="all-polls"><img src="//'+state+'global.fncstatic.com/static/v/all/img/right-rail-widget1.gif"/>View All Polls</a></li></ul></div></div></div>'+("true"===_app.sponsored?'<div class="sponsor-ad"><div id="business-88x31" class="ad dc"></div><img src="//'+state+'global.fncstatic.com/static/v/all/img/poll-sponsor.gif"></div>':"")+"</div>",genericPoll:'<div class="poll-widget"><div class="poll-item"><div class="column1"><p><span>Q:</span> <%= obj.poll.title %></p><form action=""><% if (!obj.poll.closed) {%><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div><input type="radio" name="Option<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span><%= obj.poll.answers[i].title %></span></div><% } %><% } %><input type="submit" name="vote" value="Vote" class="btn g"></form><div class="percentage-bars"></div></div></div>'+("true"===_app.sponsored?'<div class="sponsor-ad"><div id="business-88x31" class="ad dc"></div><img src="//'+state+'global.fncstatic.com/static/v/all/img/poll-sponsor.gif"></div>':"")+"</div>",genericPollWithMap:'<div class="poll-item <% if (obj.poll.closed) {%> alt <% }%>"><div class="column1"><h3 data-affiliate-id="<%= obj.poll.affiliates.primary.id %>"><%= obj.poll.affiliates.primary.name %></h3><p>Q: <%= obj.poll.title %> </p><form action=""><% if (!obj.poll.closed) {%><ul class="radio-select"><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><li><label><%= obj.poll.answers[i].title %></label><span class="option<%= i %>"></span><input type="radio" class="option<%= i %>" name="myRadio<%= obj.poll.id %>" value="<%= obj.poll.answers[i].id %>"><span></span></li><% } %></ul><% } %><input type="submit" class="btn g" value="Vote" name="vote"><div class="poll-nav-options"><a href=""><span></span>Sound Off</a><a href=""><span></span>View All Questions</a></div></form><div class="percentage-bars"><% if (obj.poll.closed) {%><% for (var i =0, l = obj.poll.answers.length; i < l; i+= 1) { %><div class="poll-option<%= i %>"><span class="percent"><%= obj.poll.answers[i].percentage %>%</span><span class="option-name"><%= obj.poll.answers[i].title %></span><div class="percent-meter"><span style="width: <%= obj.poll.answers[i].percentage %>%;"></span></div></div><% } %><input type="button" class="btn g" value="Poll Closed" name="vote" disabled><% } %></div></div><div class="column2"><a class="detail" href=""></a><div id="map-<%= obj.poll.id %>-'+_t.type+'" class="pmap"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></div></div>'+("true"===_app.sponsored?'<div class="sponsor-ad"><div id="business-88x31" class="ad dc"></div><img src="//'+state+'global.fncstatic.com/static/v/all/img/poll-sponsor.gif"></div>':"")+"</div>",filters:'<div class="choose poll"></div>',showMore:'<a class="btn-smll" href="#">Show More</a>'},_t.teplateFactory=function(){return{}
},_t[type]()},protoTemplate=Template.prototype,PollData=function(type,context){var _t=this;_t._app=context,_t.type=type,_t.data=null,_t[type]()},protoPollData=PollData.prototype,Render=function(context,type){var _t=this;_t._app=context,_t.type=type,"pollWithMap"===type||"detailedPoll"===type||"genericPollWithMap"===type?_t.generateMap():"filters"===type?_t.renderFilterAndListPollTemplate():"rrPollWidget"===type?_t.renderRRWidget():"affiliateID"===type?_t.renderAffiliateID():"genericPoll"===type&&_t.genericPoll()},protoRender=Render.prototype,Events=function(context,markup){var _t=this;_t.voteCast=!1,_t._app=context,_t.markup=markup,_t.root="",_t.state=_t.root+"foxnews.com",_t.allPollsPath="nation."+_t.state,_t.allPollsUrl=window.location.protocol+"//"+_t.allPollsPath+"/poll/index.html",_t.domConfig=_t._app.domConfig;var eventByType={pollWithMap:function(){_t.buttonFunctionality(),_t.viewAllPolls(),_t.magnifyingGlass(),_t.vote(),_t.socialButtons(),_t.navigationMenu(),_t.filterByAffiliateId()},detailedPoll:function(){_t.buttonFunctionality(),_t.backToPolls(),_t.socialButtons(),_t.vote()},pollsArchive:function(){_t.filterOptions()},rrPollWidget:function(){_t.gotoMorePolls(),_t.gotoDetailPoll(),_t.simpleVoteNoMap()},affiliateID:function(){_t.seeAllQuestions(),_t.gotoMorePolls(),_t.gotoDetailPoll(),_t.simpleVoteNoMap()},genericPoll:function(){_t.genericNavigation(),_t.simpleVoteNoMap()},genericPollWithMap:function(){_t.buttonFunctionality(),_t.viewAllPolls(),_t.magnifyingGlass(),_t.vote(),_t.navigationMenu(),_t.filterByAffiliateId()}};return _t._app.type.indexOf(":")>-1?eventByType[_t._app.type.split(":")[0]]():eventByType[_t._app.type](),_t.markup},protoEvents=Events.prototype;return Events.prototype=protoEvents={url:"http://polls.foxnews.com/api/poll/",test:function(){var _t=this;_t.markup.bind("click",function(){var el=$(this);el.css({border:"1px solid red"})})},buttonFunctionality:function(){var _t=this;_t.markup.find(_t.domConfig.voteList).each(function(){var el=$(this);el.bind("click",function(){var li=$(this);li.find("input").hasClass("checked")||(_t.markup.find(_t.domConfig.voteList).each(function(){var list=$(this);list.find("input").hasClass("checked")&&list.find("input").removeClass("checked")}),li.find("input").addClass("checked"))})})},vote:function(){var voteValue=null,_t=this;_t.markup.find(_t.domConfig.vote).bind("click",function(e){function showResults(){_t.markup.addClass("alt"),_t.animateVote()}$(this);return _t.markup.find(_t.domConfig.voteOptions).each(function(){var el=$(this);(el.is(":checked")||el.hasClass("checked"))&&(voteValue=el.val(),_t.voteCast?showResults():(_t.voteCast=!0,_t.submitVoteAjax(voteValue)))}),e.preventDefault(),!1})},simpleVoteNoMap:function(){var _t=this,voteValue=null;_t.markup.find(_t.domConfig.castYourVote).bind("click",function(e){function showResults(){}return _t.markup.find(_t.domConfig.rrOptions).each(function(){var el=$(this);el.is(":checked")&&(voteValue=el.val(),_t.markup.addClass("poll-results-view"),_t.voteCast?showResults():(_t.voteCast=!0,_t.simpleSubmitVote(voteValue)))}),e.preventDefault(),!1})},simpleSubmitVote:function(voteValue){var _t=this,_app=_t._app,submitVoteCallback="FOX_POLL_VOTE_CB_Widget"+_t._app.id;_t.markup.find(_t.domConfig.collumn1+" > form").html('<img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" />'),window[submitVoteCallback]=function(data){_t.processNewResult(data),_t.markup.find(_t.domConfig.collumn1+" > form").remove(),_t.markup.find(_t.domConfig.collumn2+" > a:eq(0)").remove(),_t.markup.find(_t.domConfig.collumn2+" > ul").show(),_t.markup.find(_t.domConfig.percentageHolder).show(),_t.animateVote(),_app.callback(_t.markup,"onResults")},$.ajax({url:_t.url+_t._app.id+"/vote/?answer="+voteValue+"&jsonp="+submitVoteCallback,dataType:"script",async:!0})},submitVoteAjax:function(voteValue){{var _t=this,_app=_t._app,submitVoteCallback="FOX_POLL_VOTE_CB"+_t._app.id;_t.markup.find(_t.domConfig.vote)}_t.markup.find(_t.domConfig.collumn1+" > form","form").html('<img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" />'),window[submitVoteCallback]=window[submitVoteCallback]||function(data){"detailedPoll"===_app.type?(_t.markup.find("form").remove(),_t.processNewResult(data),_t.animateVote()):(_t.processNewResult(data),_t.navigationMenu(),_t.markup.addClass("alt"),_t.animateVote()),_app.map.set_poll(null,200);var timer=setTimeout(function(){shmap.load_poll({partner:"foxnews",ext:"geo",poll_id:_t._app.id}).then(function(data){_app.map.set_poll(data.poll.id,400)}),window.clearTimeout(timer)},150)},$.ajax({url:_t.url+_t._app.id+"/vote/?answer="+voteValue+"&jsonp="+submitVoteCallback,dataType:"script",async:!0})},processNewResult:function(data){var _t=this,_app=_t._app,processBarType={rrPollWidget:_app.template.templateList.percentageBarsAlone,affiliateID:_app.template.templateList.percentageBarsByAffiliateID,pollWithMap:_app.template.templateList.percentageBars,detailedPoll:_app.template.templateList.percentageBarsDetails,genericPoll:_app.template.templateList.percentageBarsGenericPoll,genericPollWithMap:_app.template.templateList.percentageBarsGenericPollMap},template=_app.type.indexOf(":")>-1?processBarType[_app.type.split(":")[0]]:processBarType[_app.type],markup=tmpl(template,data);"detailedPoll"===_app.type&&$(".percentage-bars").css("display","block"),_t.markup.find(_t.domConfig.percentageHolder).html(markup),_t.backToPoll()},animateVote:function(settings){var _t=this,delay=settings?settings.delay:200,speed=settings?settings.speed:100;_t.markup.find(_t._app.domConfig.animateVote).each(function(){var poll=$(this),bar=poll.find(".percent-meter > span"),width=poll.find("span.percent").html();bar.css("width","0px"),bar.delay(delay).animate({width:width},speed)})},navigationMenu:function(){var _t=this,url=_t.allPollsUrl;_t.getAffiliateUrl(function(affiliateUrl){_t.markup.find(_t.domConfig.navOptions+" > a:first-child").attr("href",affiliateUrl)}),_t.markup.find(_t.domConfig.navOptions+" > a:last-child").attr("href",url)},backToPoll:function(){var _t=this,url=_t.allPollsUrl;FOX_metadescriptor&&("poll"===FOX_metadescriptor.name["prism.subsection1"]?_t.markup.find(_t.domConfig.backToPoll).remove():_t.markup.find(_t.domConfig.backToPoll).attr("href",url))},backToPolls:function(){var _t=this;_t.markup.find(_t.domConfig.backToPolls).bind("click",function(e){return window.location.href=_t.allPollsUrl,e.preventDefault(),!1})},gotoMorePolls:function(){var _t=this,url=_t.allPollsUrl;_t.markup.find(_t.domConfig.voteInMorePolls,_t.domConfig.seeAllQuestions).attr("href",url)},seeAllQuestions:function(){var _t=this,url=_t.allPollsUrl;_t.markup.find(_t.domConfig.seeAllQuestions).attr("href",url)},genericNavigation:function(){var _t=this,url=_t.allPollsUrl;_t.markup.find(_t.domConfig.genericSeeAll).attr("href",url),_t.getAffiliateUrl(function(affiliateUrl){_t.markup.find(_t.domConfig.genericDiscuss).attr("href",affiliateUrl)})},viewAllPolls:function(){var _t=this,url=_t.allPollsUrl;_t.markup.find(_t.domConfig.viewAllPolls).bind("click",function(e){return window.location.href=url,e.preventDefault(),!1})},gotoDetailPoll:function(){var _t=this;_t.getAffiliateUrl(function(affiliateUrl){_t.markup.find(_t.domConfig.collumn2+" > ul > li").each(function(){var a=$(this).find("a");a.attr("href",affiliateUrl)})})},magnifyingGlass:function(){var _t=this,_app=_t._app;_app.affiliateUrl?_t.markup.find(_t.domConfig.collumn2+" > .detail").attr("href",_app.affiliateUrl):_t.getAffiliateUrl(function(affiliateUrl){_t.markup.find(_t.domConfig.collumn2+" > .detail").attr("href",affiliateUrl)})},socialButtons:function(){var _t=this,_app=_t._app;"undefined"!=typeof FOX?FOX&&FOX.site&&FOX.site.SocialMediaCountPolls&&(_app.affiliateUrl?FOX.site.SocialMediaCountPolls.set(_t.markup,_app.affiliateUrl):_t.getAffiliateUrl(function(affiliateUrl){FOX.site.SocialMediaCountPolls.set(_t.markup,affiliateUrl)})):"undefined"!=typeof FOX_Nation&&FOX_Nation&&FOX_Nation.site&&FOX_Nation.site.SocialMediaCountPolls&&(_app.affiliateUrl?FOX_Nation.site.SocialMediaCountPolls.set(_t.markup,_app.affiliateUrl):_t.getAffiliateUrl(function(affiliateUrl){FOX_Nation.site.SocialMediaCountPolls.set(_t.markup,affiliateUrl)}))},getAffiliateUrl:function(callback){var _t=this,_app=_t._app,id=_app.id,jsonpCallback=(_t.type,"FOXAFF1CB"+id),url=CONFIG.getAffiliateByIdUrl+"&cb="+cacheBuster(5),urlRequest=url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback),affiliateUrl=null;return _app.affiliateUrl?(callback(_app.affiliateUrl),!1):(window[jsonpCallback]=function(data){affiliateUrl=data.response.docs[0].url[0].indexOf("www.")>-1?data.response.docs[0].url[0].replace("www.","nation."):data.response.docs[0].url[0],_app.affiliateUrl=affiliateUrl,callback(_app.affiliateUrl)},void $.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0}))},filterOptions:function(){var _t=this,closed=!0,_app=_t._app;_t.markup.find(_t.domConfig.filterContainer).find(_t.domConfig.filterDropDown).bind("click",function(e){var el=$(this),state=el.next("ol").css("display");return"none"===state?(el.next("ol").fadeIn(),closed=!1):(el.next("ol").fadeOut(),closed=!0),e.preventDefault(),!1}),_t.markup.find(_t.domConfig.filterContainer).find("a:gt(0)").each(function(){var el=$(this);el.bind("click",function(e){var li=$(this),val=li.text(),parent=li.parent().parent(),affiliateId=li.attr("data-filter"),trimIt=function(val){var len=val.length,maxLen=27,ellipses="...",holder=val;return len>30&&(holder=val.slice(0,maxLen)+ellipses),holder}(val);return _t.markup.find(_t.domConfig.filterContainer).find(_t.domConfig.filterDropDown).html(trimIt),_t.markup.find(_t.domConfig.filterContainer).find(_t.domConfig.filterDropDown).attr("data-filter",affiliateId),parent.fadeOut(),closed=!1,_t.setViewPollTitle(val),_app.render.renderPollsByAffiliateId(affiliateId),e.preventDefault(),!1})}),$("body").bind("click",function(){closed||_t.markup.find(_t.domConfig.filterContainer).find("ol").fadeOut()})},setViewPollTitle:function(filter){var _t=this,_app=_t._app;_app.affiliateTitle=filter,_t.markup.find(_t.domConfig.viewPollHeader).html(filter)},filterByAffiliateId:function(){var _t=this,_app=_t._app.APP,pollFilter=$(_t.domConfig.filterOptions),viewPollHeader=pollFilter.find("h3"),filterDropDown=pollFilter.find(_t.domConfig.filterDropDown);_app&&"pollsArchive"===_app.type&&0==filterDropDown.attr("data-filter")&&_t.markup.find(_t.domConfig.collumn1+"> h3").bind("click",function(){var el=$(this),id=el.attr("data-affiliate-id");return _app&&"pollsArchive"===_app.type&&0==filterDropDown.attr("data-filter")?(el.css("cursor","pointer"),"Latest Questions"!==el.text()&&(viewPollHeader.text(el.text()),filterDropDown.text(el.text()),filterDropDown.attr("data-filter",id),_app.affiliateTitle=el.text(),_app.render.renderPollsByAffiliateId(id))):el.css("cursor","default"),!1}),_t.markup.find(_t.domConfig.collumn1+"> h3").bind("mouseover",function(){var el=$(this);_app&&"pollsArchive"===_app.type&&0==filterDropDown.attr("data-filter")?el.css("cursor","pointer"):_app&&"pollsArchive"===_app.type&&el.css({cursor:"default",background:"#666"})})}},Render.prototype=protoRender={get:function(property){return this[property]},generateMap:function(){{var _t=this,_app=_t._app,data=(_t.type,_app.template,_app.pollData);_app.target}_t.renderTemplate(),window._shmapq.push(function(){var map=_app.map=shmap.map("map-"+data.data.poll.id+"-"+_app.type,null,_app.mapConfig);shmap.load_poll({partner:"foxnews",ext:"geo",poll_id:data.data.poll.id}).then(function(loadPollResponse){map.set_poll(loadPollResponse.poll.id,400),_t[_t.type]()})})},pollWithMap:function(){var _t=this,_app=_t._app,id=_app.id,jsonpCallback=(_t.type,"FOXAFF1CB"+id),url=CONFIG.getAffiliateByIdUrl+"&cb="+cacheBuster(5),urlRequest=url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback);_app.affiliateUrl&&(_app.map.on("click",function(){return window.location.href=_app.affiliateUrl,!1}),$(".poll-item").find("a.detail").bind("click",function(e){return window.location.href=_app.affiliateUrl,e.preventDefault(),!1})),window[jsonpCallback]=window[jsonpCallback]||function(data){var affiliateUrl=data.response.docs[0].url[0].indexOf("www.")>-1?data.response.docs[0].url[0].replace("www.","nation."):data.response.docs[0].url[0];_app.affiliateUrl=affiliateUrl,_app.map.on("click",function(){window.location.href=affiliateUrl})},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},genericPollWithMap:function(){var _t=this,_app=_t._app,id=_app.id,jsonpCallback=(_t.type,"FOXAFF1CB"+id),url=CONFIG.getAffiliateByIdUrl+"&cb="+cacheBuster(5),urlRequest=url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback);_app.affiliateUrl&&_app.map.on("click",function(){return window.location.href=_app.affiliateUrl,!1}),window[jsonpCallback]=window[jsonpCallback]||function(data){var affiliateUrl=data.response.docs[0].url[0].indexOf("www.")>-1?data.response.docs[0].url[0].replace("www.","nation."):data.response.docs[0].url[0];_app.affiliateUrl=affiliateUrl,_app.map.on("click",function(){window.location.href=affiliateUrl})},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},detailedPoll:function(){{var _t=this,_app=_t._app;_app.id}$(".poll-item").find("a.detail").bind("click",function(e){return e.preventDefault(),_app.mapConfig.width=486,$(".polls-detail").hide(),_t.generateMap(),$(".polls-detail .detail-container").css({border:"12px solid #EEEEEE","float":"left",padding:"25px",position:"relative",width:"586px",height:"550px"}),$(".polls-detail .poll-item .column1").css({width:"590px",height:"200px"}),$(".poll-item .column2").css({width:"590px",height:"366px",clear:"both",position:"static"}),$(".column2 a.detail").remove(),$(".polls-detail").show().stop().css({opacity:"0"}).animate({opacity:"1"},500,["swing"]),!1})},renderTemplate:function(){var _t=this,_app=_t._app,data=_app.pollData,target=_app.target,template=_app.template,domTarget=$(target),html=template.templateReady(data.data);_t.renderMarkup=$(html);new Events(_app,_t.renderMarkup);domTarget.size()>0?(_app.callback&&_app.callback(_t.renderMarkup),domTarget.html(_t.renderMarkup),_t.renderMap()):new Error("Target Element is not on the page!")},renderRRWidget:function(){var _t=this,_app=_t._app,data=_app.pollData,target=_app.target,template=_app.template,domTarget=$(target);_t.renderMarkup=$(template.templateReady(data.data));new Events(_app,_t.renderMarkup);domTarget.size()>0&&(_app.callback&&_app.callback(_t.renderMarkup),domTarget.html(_t.renderMarkup))},renderAffiliateID:function(){var _t=this,_app=_t._app,data=_app.pollData,target=_app.target,template=_app.template,domTarget=$(target);_t.renderMarkup=$(template.templateReady(data.data));new Events(_app,_t.renderMarkup);domTarget.size()>0&&(_app.callback&&_app.callback(_t.renderMarkup),domTarget.html(_t.renderMarkup))},genericPoll:function(){var _t=this,_app=_t._app,data=_app.pollData,target=_app.target,template=_app.template,domTarget=$(target);_t.renderMarkup=$(template.templateReady(data.data));new Events(_app,_t.renderMarkup);domTarget.size()>0&&(_app.callback&&_app.callback(_t.renderMarkup),domTarget.html(_t.renderMarkup))},renderFilterAndListPollTemplate:function(){var _t=this,_app=_t._app,data=_app.filterData,target=_app.target,template=_app.template,templateFilter=_app.templateFilter,domTarget=$(target);_t.renderPollListMarkup=$(template.templateReady());var filterHtml=$(templateFilter.templateReady(data));_t.renderPollListMarkup.find("fieldset").html(filterHtml),new Events(_app,_t.renderPollListMarkup),domTarget.size()>0&&(domTarget.html(_t.renderPollListMarkup),_t.renderLatestPollList())},renderLatestPollList:function(){var _t=this,_app=_t._app,jsonpCallback="FOXLatestPolls",url=CONFIG.getLatestPollUrl+"&cb="+cacheBuster(5),urlRequest=url.replace("{jsonpCallback}",jsonpCallback),affiliateUrl=null;window[jsonpCallback]=window[jsonpCallback]||function(data){function pollRenderer(){for(var i=0,l=data.response.docs.length;l>i;i+=1)data.response.docs[i].secondary_id&&(affiliateUrl=data.response.docs[i].url[0].indexOf("www.")>-1?data.response.docs[i].url[0].replace("www.","nation."):data.response.docs[i].url[0],_t.renderPollListMarkup.find(_app.domConfig.pollList).append('<li><div id="poll_'+data.response.docs[i].secondary_id+'"></div></li>'),window["poll_"+data.response.docs[i].secondary_id]=new App("pollWithMap",{tooltip:_app.mapConfig.tooltip||!1},"#poll_"+data.response.docs[i].secondary_id,function(html){html.find('.column1 input[type="submit"]:eq(1)').remove(),_app.callback&&_app.callback(html)},affiliateUrl,_app));"none"===_t.renderPollListMarkup.find(_app.domConfig.pollList).css("display")&&_t.renderPollListMarkup.find(_app.domConfig.pollList).css("display","block"),data.response.numFound>11?(_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","block"),_t.renderPollListMarkup.find(_app.domConfig.showMore).bind("click",function(e){return _t.loadMorePolls("latest",data.response.docs[data.response.docs.length-1].date,data,0),e.preventDefault(),!1})):_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","none")}_t.renderPollListMarkup.find(_app.domConfig.pollList).find("div").size()>0?_t.renderPollListMarkup.find(_app.domConfig.pollList).fadeOut(125,function(){var pollList=$(this);pollList.html(""),_app.listPolls=[],pollRenderer.call(this)}):(_t.renderPollListMarkup.find(_app.domConfig.pollList).find("p").fadeOut(125,function(){var pollList=$(this);pollList.html("")}),pollRenderer.call(this))},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},renderPollsByAffiliateId:function(id){if(0==id)return this.renderLatestPollList(),!1;var _t=this,_app=_t._app,jsonpCallback="FOXPollsBYAF"+id,url=CONFIG.getPollsByAffiliateId+"&cb="+cacheBuster(5),urlRequest=url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback),affiliateUrl=null;window[jsonpCallback]=window[jsonpCallback]||function(data){_t.renderPollListMarkup.find(_app.domConfig.pollList).fadeOut(125,function(){var pollList=$(this);pollList.html(""),_app.listPolls=[];for(var i=0,l=data.response.docs.length;l>i;i+=1)data.response.docs[i].secondary_id&&(affiliateUrl=data.response.docs[i].url[0].indexOf("www.")>-1?data.response.docs[i].url[0].replace("www.","nation."):data.response.docs[i].url[0],_t.renderPollListMarkup.find(_app.domConfig.pollList).append('<li><div id="poll_'+data.response.docs[i].secondary_id+'"></div></li>'),window["poll_"+data.response.docs[i].secondary_id]=new App("pollWithMap",{tooltip:_app.mapConfig.tooltip||!1},"#poll_"+data.response.docs[i].secondary_id,function(html){html.find('.column1 input[type="submit"]:eq(1)').remove(),html.find("h3").text(_app.affiliateTitle),_app.callback&&_app.callback(html)},affiliateUrl,_app));pollList.css("display","block"),data.response.numFound>11?(_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","block"),_t.renderPollListMarkup.find(_app.domConfig.showMore).unbind("click").bind("click",function(e){return _t.loadMorePolls("latest",data.response.docs[data.response.docs.length-1].date,data,id),e.preventDefault(),!1})):_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","none")})},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},loadMorePolls:function(source,time,data,id){var _t=this,_app=_t._app,origin=source||"affiliate",jsonpCallback="FOXLOAD"+origin,affiliateUrl=null,oldTimes=function(timestamp){var holder=timestamp.split(":"),second=+holder[holder.length-1].slice(0,2)-1;return holder[holder.length-1]=10>second?"0"+second+"Z":second+"Z",holder.join(":")}(time),url="latest"===origin?CONFIG.getMoreLatestPollsUrl+"&cb="+cacheBuster(5):CONFIG.getMoreAffiliatePollsUrl+"&cb="+cacheBuster(5),urlRequest="latest"===origin?url.replace("{jsonpCallback}",jsonpCallback).replace("{maxDate}",oldTimes):url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback).replace().replace("{maxDate}",oldTimes);window[jsonpCallback]=function(data){function pollRenderer(data){for(var i=0,l=data.response.docs.length;l>i;i+=1)data.response.docs[i].secondary_id&&(affiliateUrl=data.response.docs[i].url[0].indexOf("www.")>-1?data.response.docs[i].url[0].replace("www.","nation."):data.response.docs[i].url[0],_t.renderPollListMarkup.find(_app.domConfig.pollList).append('<li><div id="poll_'+data.response.docs[i].secondary_id+'"></div></li>'),window["poll_"+data.response.docs[i].secondary_id]=new App("pollWithMap",{tooltip:_app.mapConfig.tooltip||!1},"#poll_"+data.response.docs[i].secondary_id,function(html){html.find('.column1 input[type="submit"]:eq(1)').remove(),_app.affiliateTitle&&"Latest Questions"!==_app.affiliateTitle&&html.find("h3").text(_app.affiliateTitle),_app.callback&&_app.callback(html)},affiliateUrl,_app));"none"===_t.renderPollListMarkup.find(_app.domConfig.pollList).css("display")&&_t.renderPollListMarkup.find(_app.domConfig.pollList).css("display","block"),data.response.numFound>11?(_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","block"),_t.renderPollListMarkup.find(_app.domConfig.showMore).unbind("click").bind("click",function(e){return _t.loadMorePolls("latest",data.response.docs[data.response.docs.length-1].date,data,id),e.preventDefault(),!1})):_t.renderPollListMarkup.find(_app.domConfig.showMore).css("display","none")}pollRenderer.call(this,data)},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},renderMap:function(){var _t=this,_app=_t._app,target=_app.target;!function(d,s,libs){for(var lib,js,fjs=d.getElementsByTagName(s)[0];lib=libs.shift();){if(d.getElementById(lib[0]))return!1;js=d.createElement(s),js.id=lib[0],js.src=lib[1],fjs.parentNode.insertBefore(js,fjs),fjs.onload=fjs.onerror=fjs.onreadystatechange=function(){!this.readyState||"loaded"===this.readyState||"complete"===this.readyState}}}(document,"script",[["sh-svg-js","http://statics.sodahead.com/js/lib/raphael/raphael-min.js"],["sh-map-js","http://statics.sodahead.com/js/maps/map.js"]]);var pollItem=$(target).find(".poll-item");pollItem.each(function(){var item=$(this);item.is(":hidden")&&item.show()})}},PollData.prototype=protoPollData={url:"http://polls.foxnews.com/api/poll/",get:function(property){return this[property]},jsonpRequest:function(id){var _t=this,_app=_t._app,jsonpCallback="FOX_POLL_CB"+id+_t.type;return 0===$(_app.target).size()?!1:(window[jsonpCallback]=function(data){return _t.data=data,"error"in data?!1:(_t._app.render=new Render(_t._app,_t.type),data)},void $.ajax({url:_t.url+id+"/?jsonp="+jsonpCallback,dataType:"script",async:!0}))},pollWithMap:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)},detailedPoll:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)},rrPollWidget:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)},affiliateID:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)},genericPoll:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)},genericPollWithMap:function(){var _t=this,elId=_t._app.id;_t.jsonpRequest(elId)}},Template.prototype=protoTemplate={get:function(property){return this[property]},pollWithMap:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},detailedPoll:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},pollsArchive:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},rrPollWidget:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},filters:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},genericPoll:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},genericPollWithMap:function(){var _t=this;return _t.templateReady=tmpl(_t.templateList[_t.type]),_t.templateReady},affiliateID:function(){var _t=this;return _t.templateReady=tmpl(_t.type.indexOf(":")>1?_t.templateList[_t.type.split(":")[0]]:_t.templateList[_t.type]),_t.templateReady}},App.prototype=protoApp={init:function(implementationType){var _t=this,pollImplementation={justPoll:function(){},rrPollWidget:function(){$(_t.target).size()>0&&(_t.template=new Template(implementationType,_t),_t.getPollOfTheDay())},genericPoll:function(){$(_t.target).size()>0&&(_t.template=new Template(_t.type,_t),_t.pollData=new PollData(_t.type,_t))},pollsArchive:function(){$(_t.target).size()>0&&(_t.template=new Template(implementationType,_t),_t.getFilters())},genericPollWithMap:function(){$(_t.target).size()>0&&(_t.template=new Template(implementationType,_t),_t.pollData=new PollData(implementationType,_t))},detailedPoll:function(){$(_t.target).size()>0&&(_t.template=new Template(implementationType,_t),_t.pollData=new PollData(implementationType,_t))},pollWithMap:function(){$(_t.target).size()>0&&(_t.template=new Template(implementationType,_t),_t.pollData=new PollData(implementationType,_t))},affiliateID:function(){if($(_t.target).size()>0){var affiliateId=null,type=_t.type;_t.type.indexOf(":")>-1&&(affiliateId=_t.type.split(":")[1],type=_t.type.split(":")[0]),_t.subtype||(_t.template=new Template(type,_t)),_t.getPollByAffiliateID(affiliateId)}}},type=function(){return implementationType.indexOf(":")>-1?implementationType.split(":")[0]:implementationType}();if(!(type in pollImplementation))throw new Error("this "+implementationType+" does not exist please search for pollImplementation");return pollImplementation[type](),_t},get:function(property){return this[property]},getFilters:function(){var _t=this,jsonpCallback="FOXFilterPolls",url=CONFIG.getFiltersUrl+jsonpCallback+"&cb="+cacheBuster(5);window[jsonpCallback]=window[jsonpCallback]||function(data){return _t.filterData=data,_t.templateFilter=new Template("filters"),_t.render=new Render(_t,"filters"),data},$.ajax({url:url,dataType:"script",async:!0,cache:!0})},getPollOfTheDay:function(){var _t=this,jsonpCallback="FOXPollOfTheDay",url=CONFIG.getPollOfTheDateUrl+"&cb="+cacheBuster(5),urlRequest=url.replace("{jsonpCallback}",jsonpCallback);window[jsonpCallback]=function(data){try{if("error"in data)return!1;_t.id=data.response.docs[0].secondary_id,_t.pollData=new PollData(_t.type,_t)}catch(e){console.log("Error in the Latest poll request",e)}},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})},getPollByAffiliateID:function(){var _t=this,id=_t.affiliateID?_t.affiliateID:_t.affiliateIDList[_t.type.split(":")[1]],jsonpCallback="FOXPOLLbyAffiliateID",url=CONFIG.getPollsByAffiliateId+"&cb="+cacheBuster(5),urlRequest=url.replace("{id}",id).replace("{jsonpCallback}",jsonpCallback),type=_t.type.split(":")[0];window[jsonpCallback]=function(data){try{if("error"in data)return!1;if(_t.subtype){_t.id=data.response.docs[0].secondary_id;var temp=_t.type;_t.type=_t.subtype,_t.subtype=temp,_t.type="genericPollWithMap",_t.template=new Template(_t.type,_t),_t.pollData=new PollData(_t.type,_t)}else _t.id=data.response.docs[0].secondary_id,_t.pollData=new PollData(type,_t)}catch(e){console.log("Error in the Latest poll request",e)}},$.ajax({url:urlRequest,dataType:"script",async:!0,cache:!0})}},App}(window,jQuery);window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.TwitterConnector=function($){var CONST={};CONST.apiPath="/feeds/p/twitter/1.1/",CONST.type={search:{feed:CONST.apiPath+"search/tweets/",required:["q"]},timeline:{feed:CONST.apiPath+"statuses/user_timeline/",required:["screen_name"]}};var App=function(){};App.prototype.init=function(){},App.prototype.apiCall=function(config,callback){var type=config.type,refresh=config.refreshUrl||!1,params=config.params||{};if(!CONST.type[type])return log("[Twitter.Connector] Unknown type: "+type),!1;var conf=CONST.type[type],url=conf.feed,required=conf.required;if(refresh)url+=refresh;else if(!validParams(params,required))return log("[Twitter.Connector] Required Parameters missing."),!1;params.cb=cacheBuster(2),"function"==typeof callback&&$.ajax({url:url,data:params,dataType:"json",success:function(data){var norm=FeedNormalizer[type]?FeedNormalizer[type](data):data;callback(norm)}})},App.prototype.formatTweet=function(str,types){var ret="";return ret=formatMessage(str,types)};var FeedNormalizer=function(){var FeedNormalizer={};return FeedNormalizer.search=function(data){var x,items=data.statuses,itemLen=items.length,setItem=function(item){return item.textFormatted=formatMessage(item.text),item};for(x=0;itemLen>x;x++)data.statuses[x]=setItem(items[x]);return data},FeedNormalizer.timeline=function(data){var x,len=data.length,setItem=function(item){return item.textFormatted=formatMessage(item.text),item};for(x=0;len>x;x++)data[x]=setItem(data[x]);return data},FeedNormalizer}(),formatMessage=function(text,types){var x,i,z,replace={},matches={links:text.match(/\http:\/\/\S+/gi),users:text.match(/@[a-zA-Z0-9\-\_]+/gi),terms:text.match(/#[a-zA-Z0-9\-\_]+/gi)},replaceTMP={links:'<a target="_blank" href="${item}" target="_blank" class="hyper-word">${item}</a>',users:'<a target="_blank" href="http://twitter.com/${link}">${item}</a>',terms:'<a target="_blank" href="http://twitter.com/${link}">${item}</a>'};if(types)for(z=0;z<types.lenth;z++){var t=type[z];replaceTMP[t]&&(replace[t]=replaceTMP[t])}else replace=replaceTMP;for(i in matches){var match=matches[i];if(match&&replace[i]){var len=match.length;for(x=0;len>x;x++){var item=match[x];text="users"===i?text.replace(item,replace[i].replace(/(\$\{item\})/g,item).replace(/(\$\{link\})/g,item.slice(1))):"terms"===i?text.replace(item,replace[i].replace(/(\$\{item\})/g,item).replace(/(\$\{link\})/g,"search?q="+item.slice(1))):text.replace(item,replace[i].replace(/(\$\{item\})/g,item))}}}return text},validParams=function(params,required){var x,ret=!0;for(x=0;x<required.length;x++)if(!params[required[x]]){ret=!1;break}return ret},cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:TwitterConnector",function(){return window.FOX_Plugins.TwitterConnector}):!1}(window.Modulr),window.ExternalLink=function($){var App=function(){};return App.prototype.set=function(elm,customLink,validate,icon){elm=elm||$("a[rel*='external']");var self=this,linked="ext-linked";elm.each(function(){{var a=$(this),rel=$.trim(a.attr("rel")||""),href=customLink&&"string"==typeof customLink?customLink:$.trim(a.attr("href")||""),isValid=validate?!self.confirmLink(href):!0;"_blank"===a.attr("target")?!0:!1}if(rel.toLowerCase().indexOf(linked)<0&&href.length>0&&"#"!==href&&isValid&&(a.attr("href",href),a.attr("target")||a.attr("target","_blank"),icon)){var iconImg=(window.FOX_DomainPath||"")+"/static/v/all/img/external-link.png";a.after('<img src="'+iconImg+'" />')}})},App.prototype.confirmLink=function(val){var x,ret=!1,valid=[".foxnews.com",".foxbusiness.com"];for(x=0;x<valid.length;x+=1)if(val.indexOf(valid[x])>-1){ret=!0;break}return ret},new App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:ExternalLink",function(){return window.ExternalLink}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.ElementResizeListener=function($){var CONST={};CONST.eventName="Event.ResizeListener";var App=function(config){this._initialized=!1,this._elm=config.elm,this._DIM={},this._resizeBindArr=[],this.API=new API(this),$.isArray(config.min)&&(this._DIM.min=[fmtVal(config.min[0]),fmtVal(config.min[1])]),$.isArray(config.max)&&(this._DIM.max=[fmtVal(config.max[0]),fmtVal(config.max[1])]),this.init()};App.prototype.init=function(){var self=this,DIM=self._DIM,elm=self._elm;return self._initialized?!1:(self._initialized=!0,DIM.curr=[elm.width(),getRatioHeight(elm.width(),DIM.max)],DIM.curr=setDimFromRange(DIM.curr,DIM.min,DIM.max),elm.bind(CONST.eventName,function(){for(var x=0;x<self._resizeBindArr.length;x++)self._resizeBindArr[x](self._DIM.curr)
}),void AddWindowResizeListener(function(){DIM.curr=[elm.width(),getRatioHeight(elm.width(),DIM.max)],DIM.curr=setDimFromRange(DIM.curr,DIM.min,DIM.max),elm.trigger(CONST.eventName)}))};var API=function(){var API=function(root){this.root=root};return API.prototype.getCurrentSize=function(fn){var self=this,root=self.root,DIM=root._DIM,elm=root._elm;DIM.curr=[elm.width(),getRatioHeight(elm.width(),DIM.max)],DIM.curr=setDimFromRange(DIM.curr,DIM.min,DIM.max),"function"==typeof fn&&fn(DIM.curr)},API.prototype.onWindowResize=function(fn){{var self=this,root=self.root;root._DIM,root._elm}"function"==typeof fn&&root._resizeBindArr.push(fn)},API}(),setDimFromRange=function(curr,min,max){var dim=[curr[0],curr[1]];return max&&(dim[0]=max[0]&&curr[0]<=max[0]?curr[0]:max[0]),min&&(dim[0]=min[0]&&curr[0]>=min[0]?curr[0]:min[0]),dim[1]=getRatioHeight(dim[0],max),dim},fmtVal=function(val){return"string"==typeof val&&(val=val.replace(/[^0-9]/gi,"")),val=isNaN(val)?!1:parseInt(val,10)},getRatioHeight=function(w,full){var ratio=(full[0]-(full[0]-w))/full[0],newH=Math.floor(full[1]*ratio);return newH},AddWindowResizeListener=function(fn){var timeout,hasOrientation="onorientationchange"in window?!0:!1,onEvent=hasOrientation?"orientationchange":"resize",ua=navigator.userAgent.toLowerCase(),isKindle=ua.indexOf("silk")>-1?!0:!1,isAndroid=ua.indexOf("android")>-1?!0:!1,timeoutDelay=isKindle?250:isAndroid?100:!1;$(window).bind(onEvent,function(){timeoutDelay?(clearTimeout(timeout),timeout=setTimeout(function(){fn()},timeoutDelay)):fn()})};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:ElementResizeListener",function(){return window.FOX_Plugins.ElementResizeListener}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.SocialMediaShare=function($){var App=function(config){var self=this;self.__vars={},this.API=new API(self),this.SocialMedia=new SocialMedia(self);var vars=self.__vars;vars._config={};for(var i in config){var provider=i.toLowerCase();self.SocialMedia[provider]?(vars._config[provider]=config[i],self.SocialMedia[provider]()):log("[SocialMediaShare] No Media for: "+provider)}};App.prototype.clickEvent=function(link){window.auth_fox&&window.auth_fox.badgeville&&window.auth_fox.badgeville.trigger("contentShare",link)};var API=function(){var API=function(root){this.root=root};return API}(),SocialMedia=function(){var SocialMedia=function(root){this.root=root};return SocialMedia.prototype.facebook=function(){var x,self=this,root=self.root,data=root.__vars._config.facebook,setClickShare=function(data){data.target.bind("click",function(){var link=encodeURIComponent(data.url);return window.FB&&window.FB.login?FB.login(function(response){response.authResponse&&(root.clickEvent(link),window.open("http://www.facebook.com/sharer/sharer.php?u="+link,"facebook","status=1,height=334,width=660"))}):(root.clickEvent(link),window.open("http://www.facebook.com/sharer/sharer.php?u="+link,"facebook","status=1,height=334,width=660")),!1})},urls=[],hasCountRequest=!1;for(x=0;x<data.length;x++)-1===$.inArray(data[x].url,urls)&&data[x].event&&"function"==typeof data[x].event.count&&(hasCountRequest=!0,urls.push(data[x].url)),setClickShare(data[x]);urls=urls.join(",");var reqURL="https://graph.facebook.com/fql?format=jsonp&callback=foo&q=SELECT%20url,normalized_url,share_count,like_count,comment_count,total_count,commentsbox_count,comments_fbid,click_count%20FROM%20link_stat%20WHERE%20url%20IN%20('"+urls+"')",setCountData=function(info){for(var x=0;x<info.length;x++)for(var inf=info[x],url=inf.url,count=formatNumber(inf.total_count?inf.total_count:inf.like_count?inf.like_count:0),z=0;z<data.length;z++){var item=data[z];item.url===url&&item.event&&item.event.count&&item.event.count(count)}};hasCountRequest&&ajaxCall(reqURL,function(raw){raw&&raw.data&&$.isArray(raw.data)&&raw.data.length>0&&setCountData(raw.data)})},SocialMedia.prototype.twitter=function(){var self=this,root=self.root,data=root.__vars._config.twitter,setClickShare=function(data){data.target.bind("click",function(){var link=encodeURIComponent(data.url),title=data.title||"",url=data.shortUrl?encodeURIComponent(data.shortUrl):link,relateds=data.relateds?data.relateds:"";return root.clickEvent(link),window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(title+" | ")+"&url="+url+relateds,"twitter","status=1,height=334,width=660"),!1})},setCountData=function(info){if(info&&info.url)for(var count=formatNumber(info.count||0),z=0;z<data.length;z++){var item=data[z];info.url.indexOf(item.url)>-1&&item.event&&item.event.count&&item.event.count(count)}};for(x=0;x<data.length;x++){if(data[x].event&&"function"==typeof data[x].event.count){var reqUrl="http://urls.api.twitter.com/1/urls/count.json?callback=?&url="+data[x].url;ajaxCall(reqUrl,function(raw){setCountData(raw)})}setClickShare(data[x])}},SocialMedia.prototype.gplus=function(){var self=this,root=self.root,data=root.__vars._config.gplus,setClickShare=function(data){data.target.bind("click",function(){{var link=encodeURIComponent(data.url);data.title,data.relateds?data.relateds:""}return root.clickEvent(link),window.open("https://plus.google.com/share?url="+link,"googleplus","status=1,height=334,width=660"),!1})},setCountData=function(info){var count=info&&info.result&&info.result.metadata&&info.result.metadata.globalCounts&&"undefined"!=typeof info.result.metadata.globalCounts.count?info.result.metadata.globalCounts.count:!1;if(!isNaN(count)){count=formatNumber(count);for(var z=0;z<data.length;z++){var item=data[z];info.result.id.indexOf(item.url)>-1&&item.event&&item.event.count&&item.event.count(count)}}};for(x=0;x<data.length;x++)data[x].event&&"function"==typeof data[x].event.count&&$.ajax({url:"/feeds/p/gplus/count/?url="+data[x].url,dataType:"json",cache:!0,success:function(raw){setCountData(raw)}}),setClickShare(data[x])},SocialMedia}(),ajaxCall=function(url,callbackFN){$.ajax({url:url,dataType:"jsonp",success:callbackFN})},formatNumber=function(val){return val=parseInt(val,10),val=val>=1e3?Math.floor(val/1e3).toString()+"k":val.toString()},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}},PUBLIC_APP=function(config){if(!config)return!1;var APP=new App(config),PUBLIC_APP=function(){};return PUBLIC_APP.prototype.API=APP.API,new PUBLIC_APP};return PUBLIC_APP}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:SocialMediaShare",function(){return window.FOX_Plugins.SocialMediaShare}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.SocialMediaCount=function($){var App=function(){};App.prototype.get=function(type,config,callback){COUNT[type]&&COUNT[type](config,callback)},App.prototype.getFacebook=function(config,callback){config="string"==typeof config?{url:config}:config,this.get("facebook",config,callback)},App.prototype.getTwitter=function(config,callback){config="string"==typeof config?{url:config}:config,this.get("twitter",config,callback)};var COUNT={};return COUNT.facebook=function(config,callback){var link=encodeURIComponent(config.url);$.ajax({url:"/feeds/p/facebook-api/fql/link_stat/?urls="+link,dataType:"json",cache:!0,success:function(data){var info=!1;config.raw?info=data:data&&data.data&&data.data[0]&&"number"==typeof data.data[0].share_count&&(info={count:data.data[0].share_count}),info&&callback(info)}})},COUNT.twitter=function(config,callback){var link=encodeURIComponent(config.url);$.ajax({url:"//urls.api.twitter.com/1/urls/count.json?callback=?&url="+link,dataType:"jsonp",cache:!0,success:function(data){var info=!1;config.raw?info=data:data&&"number"==typeof data.count&&(info={count:data.count}),info&&callback(info)}})},new App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:SocialMediaCount",function(){return window.FOX_Plugins.SocialMediaCount}):!1}(window.Modulr),function(k){function b(v){if(v in d.style)return v;var u=["Moz","Webkit","O","ms"],r=v.charAt(0).toUpperCase()+v.substr(1);if(v in d.style)return v;for(var t=0;t<u.length;++t){var s=u[t]+r;if(s in d.style)return s}}function e(){return d.style[q.transform]="",d.style[q.transform]="rotateY(90deg)",""!==d.style[q.transform]}function j(r){return"string"==typeof r&&this.parse(r),this}function m(s,r,t){r===!0?s.queue(t):r?s.queue(r,t):t()}function h(s){var r=[];return k.each(s,function(t){t=k.camelCase(t),t=k.transit.propertyMap[t]||k.cssProps[t]||t,t=c(t),-1===k.inArray(t,r)&&r.push(t)}),r}function g(s,v,x,r){var t=h(s);k.cssEase[x]&&(x=k.cssEase[x]);var w=""+l(v)+" "+x;parseInt(r,10)>0&&(w+=" "+l(r));var u=[];return k.each(t,function(z,y){u.push(y+" "+w)}),u.join(", ")}function n(s,r){r||(k.cssNumber[s]=!0),k.transit.propertyMap[s]=q.transform,k.cssHooks[s]={get:function(v){var u=k(v).css("transit:transform");return u.get(s)},set:function(v,w){var u=k(v).css("transit:transform");u.setFromString(s,w),k(v).css({"transit:transform":u})}}}function c(r){return r.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}function o(s,r){return"string"!=typeof s||s.match(/^[\-0-9\.]+$/)?""+s+r:s}function l(s){var r=s;return k.fx.speeds[r]&&(r=k.fx.speeds[r]),o(r,"ms")}k.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),q={},a=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;q.transition=b("transition"),q.transitionDelay=b("transitionDelay"),q.transform=b("transform"),q.transformOrigin=b("transformOrigin"),q.transform3d=e();var i={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},f=q.transitionEnd=i[q.transition]||null;for(var p in q)q.hasOwnProperty(p)&&"undefined"==typeof k.support[p]&&(k.support[p]=q[p]);d=null,k.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},k.cssHooks["transit:transform"]={get:function(r){return k(r).data("transform")||new j},set:function(s,r){var t=r;t instanceof j||(t=new j(t)),s.style[q.transform]="WebkitTransform"!==q.transform||a?t.toString():t.toString(!0),k(s).data("transform",t)}},k.cssHooks.transform={set:k.cssHooks["transit:transform"].set},k.fn.jquery<"1.8"&&(k.cssHooks.transformOrigin={get:function(r){return r.style[q.transformOrigin]},set:function(r,s){r.style[q.transformOrigin]=s}},k.cssHooks.transition={get:function(r){return r.style[q.transition]},set:function(r,s){r.style[q.transition]=s}}),n("scale"),n("translate"),n("rotate"),n("rotateX"),n("rotateY"),n("rotate3d"),n("perspective"),n("skewX"),n("skewY"),n("x",!0),n("y",!0),j.prototype={setFromString:function(t,s){var r="string"==typeof s?s.split(","):s.constructor===Array?s:[s];r.unshift(t),j.prototype.set.apply(this,r)},set:function(s){var r=Array.prototype.slice.apply(arguments,[1]);this.setter[s]?this.setter[s].apply(this,r):this[s]=r.join(",")},get:function(r){return this.getter[r]?this.getter[r].apply(this):this[r]||0},setter:{rotate:function(r){this.rotate=o(r,"deg")},rotateX:function(r){this.rotateX=o(r,"deg")},rotateY:function(r){this.rotateY=o(r,"deg")},scale:function(r,s){void 0===s&&(s=r),this.scale=r+","+s},skewX:function(r){this.skewX=o(r,"deg")},skewY:function(r){this.skewY=o(r,"deg")},perspective:function(r){this.perspective=o(r,"px")},x:function(r){this.set("translate",r,null)},y:function(r){this.set("translate",null,r)},translate:function(r,s){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==r&&void 0!==r&&(this._translateX=o(r,"px")),null!==s&&void 0!==s&&(this._translateY=o(s,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var r=(this.scale||"1,1").split(",");return r[0]&&(r[0]=parseFloat(r[0])),r[1]&&(r[1]=parseFloat(r[1])),r[0]===r[1]?r[0]:r},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),r=0;3>=r;++r)t[r]&&(t[r]=parseFloat(t[r]));return t[3]&&(t[3]=o(t[3],"deg")),t}},parse:function(s){var r=this;s.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,v,u){r.setFromString(v,u)})},toString:function(t){var s=[];for(var r in this)if(this.hasOwnProperty(r)){if(!q.transform3d&&("rotateX"===r||"rotateY"===r||"perspective"===r||"transformOrigin"===r))continue;"_"!==r[0]&&s.push(t&&"scale"===r?r+"3d("+this[r]+",1)":t&&"translate"===r?r+"3d("+this[r]+",0)":r+"("+this[r]+")")}return s.join(" ")}},k.fn.transition=k.fn.transit=function(z,s,y,C){var D=this,u=0,w=!0;"function"==typeof s&&(C=s,s=void 0),"function"==typeof y&&(C=y,y=void 0),"undefined"!=typeof z.easing&&(y=z.easing,delete z.easing),"undefined"!=typeof z.duration&&(s=z.duration,delete z.duration),"undefined"!=typeof z.complete&&(C=z.complete,delete z.complete),"undefined"!=typeof z.queue&&(w=z.queue,delete z.queue),"undefined"!=typeof z.delay&&(u=z.delay,delete z.delay),"undefined"==typeof s&&(s=k.fx.speeds._default),"undefined"==typeof y&&(y=k.cssEase._default),s=l(s);var E=g(z,s,y,u),B=k.transit.enabled&&q.transition,t=B?parseInt(s,10)+parseInt(u,10):0;if(0===t){var A=function(F){D.css(z),C&&C.apply(D),F&&F()};return m(D,w,A),D}var x={},r=function(H){var G=!1,F=function(){G&&D.unbind(f,F),t>0&&D.each(function(){this.style[q.transition]=x[this]||null}),"function"==typeof C&&C.apply(D),"function"==typeof H&&H()};t>0&&f&&k.transit.useTransitionEnd?(G=!0,D.bind(f,F)):window.setTimeout(F,t),D.each(function(){t>0&&(this.style[q.transition]=E),k(this).css(z)})},v=function(F){this.offsetWidth,r(F)};return m(D,w,v),this},k.transit.getTransitionValue=g}(jQuery),window.FOX_Plugins=window.FOX_Plugins||{},FOX_Plugins.Templating=function($){var CONST={};CONST.qa=!1,CONST.frame="//global.fncstatic.com/static/v/all/js/apps/templates/frame.html",CONST.prefix="FOX_TPL_";var App=function(config){this._vars={};var vars=this._vars;vars._store={},config&&(vars._config=config),this._events=new EventMessageHandler};App.prototype.get=function(template,callback){var self=this,Events=self._events,vars=self._vars,store=vars._store,id=generateId(template);if(store[id])callback(store[id]);else{var frameSrc=CONST.frame,iframe='<iframe id="'+id+'" src="'+frameSrc+'" style="display: none; opacity: 0; width: 0px; height: 0px;" />';self.setListener(template,callback);var info={};info.template=template,vars._config&&(info.config=vars._config),$("body").append(iframe),$("#"+id).bind("load",function(){Events.sendMessage(this,"Templating.Embed",info)})}},App.prototype.setListener=function(template,callback){var self=this,vars=self._vars,store=vars._store,id=generateId(template),Events=self._events;Events.addHandler(id,function(str){store[id]=str,callback(str),setTimeout(function(){$("#"+id).remove()},50)})};var generateId=function(val){return val=val.replace(/[^A-Za-z\-\_]/gi,"-"),CONST.prefix+val};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:Templating",function(){return window.FOX_Plugins.Templating}):!1}(window.Modulr),window.FOX_Plugins=window.FOX_Plugins||{},window.OnWindowResize=window.FOX_Plugins.OnWindowResize=function($){var App=function(fn,threshold){if(threshold=threshold||25,"function"!=typeof fn||!$)return!1;var timeout,hasOrientation="onorientationchange"in window?!0:!1,onEvent=hasOrientation?"orientationchange":"resize";$(window).bind(onEvent,function(){clearTimeout(timeout),timeout=setTimeout(function(){fn()},threshold)})};return App}(jQuery),function(Modulr){return Modulr?void Modulr.define("FOX_Plugins:OnWindowResize",function(){return window.FOX_Plugins.OnWindowResize}):!1}(window.Modulr),window.FOX=function($){var FOX=$tartup.newInstance();return FOX.addUtil("queryStr",function(){var App=function(){},Proto=App.prototype;return Proto.getVal=function(name){var self=this,queryObj=self.getAll();return queryObj&&queryObj[name]?decodeURIComponent(queryObj[name]):!1},Proto.getAll=function(){for(var ret={},query=window.location.search.substr(1)||"",vals=query.split("&"),x=0;x<vals.length;x++){var sp=vals[x].split("="),name=sp[0]||!1,value=sp[1]||!1;name&&value&&(ret[name]=decodeURIComponent(value).toString())}return ret},Proto.setToString=function(queryObj){var ret=[];for(var i in queryObj)ret.push(i+"="+queryObj[i]);return ret=ret.join("&")},Proto.get=function(name){return this.getVal(name)},new App}()),FOX.addUtil("debug",function(data){if("y"===FOX.utils.queryStr.get("stc"))try{FOX.utils.console(data)}catch(err){FOX.utils.console("[DEBUG] "+err)}}),FOX.addUtil("console",function(data){"object"==typeof window.console&&data&&console.log(data)}),FOX.addUtil("resizeIFrame",function(obj){if(!obj)return!1;var target=$(obj.target),src=obj.src;$("iframe").each(function(){var IF=$(this);"undefined"!=typeof IF.attr("src")&&IF.attr("src").indexOf(src)>-1&&!IF.data("resized")&&(IF.css({height:target.outerHeight(!0),width:IF.parent().innerWidth()}),IF.data("resized",!0))})}),FOX.addUtil("pageRefresh",{enable:function(){"function"==typeof ew_enableRefresh&&ew_enableRefresh()},disable:function(){"function"==typeof ew_disableRefresh&&ew_disableRefresh()}}),FOX.addUtil("environment",function(){var App=function(){},Proto=App.prototype;return Proto.get=function(){return this.isProd(document.location.hostname)?"prod":"dev"},Proto.getHostByDesc=function(full){if("undefined"==typeof window.FOX_pagedescriptor)return!1;var site=window.FOX_pagedescriptor;switch(site){case"fn2":site="foxnews.com";break;case"fb":site="smallbusiness.foxbusiness.com";break;case"fb2":site="foxbusiness.com";break;case"fn-latino":site="latino.foxnews.com";break;default:return!1}return-1===loc.hostname.indexOf(site)?!1:full?site:loc.protocol+"//"+loc.hostname.substr(0,site.indexOf)+site},Proto.getDomainHost=function(useProtocol,prod){var loc=window.location,host=loc.hostname,protocol=loc.protocol,arr=host.split("."),val=[];return useProtocol&&(val.push(protocol+"//"),!prod)?protocol+"//"+host:(host.indexOf("latino")>-1?val.push("latino."):host.indexOf("smallbusiness.")>-1?val.push("smallbusiness."):prod&&val.push("www."),val.join("")+arr[arr.length-2]+"."+arr[arr.length-1])},Proto.check=function(host,type){host=host.toLowerCase();for(var bool=!1,isProd=!1,env=["smallbusiness.","latino.foxnews.","origin-latino.foxnews.","v8-pvw.","v8-staging.","v8-origin.","v8-origin-www.","www.","origin.","origin-prod.","origin-drupal.","origin-www.","origin-www2.","origin-vignette.","preprod.","preprod2.","pvw.","pvw2.","staging.","staging2.","m."],x=0,len=env.length;len>x;x++)if(0===host.indexOf(env[x])){isProd=!0;break}return"prod"===type?bool=isProd:isProd||(bool=!0),bool},Proto.isProd=function(host){return host=host||document.location.hostname,this.check(host,"prod")},Proto.isDev=function(host){return host=host||document.location.hostname,this.check(host,"dev")},new App}()),FOX.addUtil("datetime",{format:DateTime}),FOX.addUtil("extLink",ExternalLink),FOX.addUtil("MobileTouchEvents",function(){var script_loaded=!1,App=function(){},Proto=App.prototype;Proto.isMobile=function(){var ret=Modernizr.touch?!0:!1;return ret},Proto.onLoad=function(callback){var self=this;if(!window.jQuery||!window.Modernizr)return!1;var $=window.jQuery;if(self.isMobile())if($.mobile)callback();else{if(!$.loadAttempt)return!1;loadScript(),$.loadAttempt(function(){return $.mobile?!0:!1},function(){callback()})}};var loadScript=function(){if(script_loaded)return!1;script_loaded=!0;var doc=document,s=doc.createElement("script");s.src=window.FOX_DomainPath+"/static/v/all/js/jquery/mobile/events.js",s.async=!0,(doc.getElementsByTagName("head")||doc.getElementsByTagName("body"))[0].appendChild(s)};return new App}()),FOX}(jQuery),function($){var Add=FOX.site.Add,PAGE_Ready=FOX.site.OnPageReady,DOC_Ready=FOX.site.OnDocReady;window.FOX_DomainPath=window.FOX_ENV_STATIC_DOMAIN||function(){var ret="global.fncstatic.com",loc=window.location,host=loc.hostname,idx=(FOX.utils.environment.getDomainHost(),function(val){return host.indexOf(val)>-1?!0:!1});if(FOX.utils.environment.isProd()){var sub=idx("staging.")?"staging":"www";ret="staging"===sub?"staging.fbnstatic.com":"global.fncstatic.com"}else idx("-qa.")&&(ret="qa.global.fncstatic.com");return ret=loc.protocol+"//"+ret}(),Add("topInit",function(){FOX.site.ads.init(),FOX.site.metaDescriptor.init(),FOX.site.linkDescriptor.init(),Add("mediaIconOverlay",FOX_MediaIconOverlay)}),Add("bottomInit",function(){FOX.site.ads.init(),FOX.utils.extLink.set($("a[rel*='external']"),null,!0),FOX.site.pageRefresh(),FOX.utils.MobileTouchEvents.isMobile()?FOX.utils.MobileTouchEvents.onLoad(function(){FOX.pageReady()}):FOX.pageReady()}),Add("pageRefresh",function(){window.FOX_metadescriptor&&window.FOX_metadescriptor.name&&"homePage"===window.FOX_metadescriptor.name["prism.genre"]?FOX.utils.pageRefresh.enable():FOX.utils.pageRefresh.disable()}),Add("ads",{init:function(){$(document).ready(function(){$.ad.init()})},writeInline:function(id,type){"dc"===type?$.ad.dc.inline(id):fox.utils.debug("[global.js] inline ads are not enabled")}}),Add("metaDescriptor",{init:function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");nameAttr?(obj.name||(obj.name={}),obj.name[nameAttr]=val?val:!1):propAttr&&(obj.property||(obj.property={}),obj.property[propAttr]=val?val:!1)}),window.FOX_metadescriptor=obj}}),Add("linkDescriptor",{init:function(){var obj={};$("link").each(function(){var item=$(this),relAttr=item.attr("rel"),val=item.attr("href");relAttr&&(obj.rel||(obj.rel={}),obj.rel[relAttr]=val?val:!1)}),window.FOX_linkdescriptor=obj}}),Add("mediaOverlay",{set:function(elm){function set(type){elm.find(".m > a").each(function(){MO.render.common(elm,$(this),type)})}var MO=this;elm.hasClass("slideshow-ct")?set("slideshow"):(elm.hasClass("interactive-ct")||elm.hasClass("freeform-ct"))&&set("interactive")},render:{common:function(parent,elm,type){function trigger(img){var dim=[img.width,img.height],overlay=MO.useOverlay(dim[0],type);if(!overlay)return!1;if(dim[0]<156)return!1;parent.find("h3 span.type-"+type).hide(),elm.css({position:"relative",display:"block"});var html=$('<span class="m-img-overlay"><img src="'+overlay+'" /></span>');html.css({position:"absolute",top:"0px",left:"0px",width:dim[0],height:dim[1]}),html.find("img").css({width:dim[0],height:dim[1]}),elm.append(html),parent.find(".m > .credit").hide();var openWin=function(){window.open(elm.attr("href"),"_self")};parent.children(":not(.related):not(.m)").find("a").click(function(){return openWin(),!1}),parent.find("> .m").click(function(){return openWin(),!1})}var MO=this,imgElm=elm.find("img"),img=new Image,isLazy=function(elm){return elm.hasClass("unloaded_img")?!0:!1},setUp=function(){img.onload=function(){trigger(img)},img.src=imgElm.attr("src")};if(isLazy(imgElm))var interval=setInterval(function(){imgElm.attr("src")===imgElm.attr("dest_src")&&(setUp(),clearInterval(interval))},650);else setUp()},useOverlay:function(width,type){var src=(window.FOX_DomainPath||"")+"/static/v/all/img/"+type+"_${width}x${height}.png",types={slideshow:[132,156,190,228,259,267,328,397,604],interactive:[132,156,190,228,259,267,328,397,604],video:[132,156,190,228,259,267,328],_hVar:[74,88,107,128,146,151,185,224,341]};if(!types[type])return!1;var arr=types[type],idx=0,sel=arr[0];for(x=0;x<arr.length;x++)if(width<=arr[x]){idx=x,sel=arr[x];break}var srcW=sel,srcH=types._hVar[idx];switch(type){case"slideshow":180===width&&(srcW=180,srcH=101)}return src.replace("${width}",srcW).replace("${height}",srcH)}}}),Add("videoIconOverlay",{set:function(){var x,i,FS=this,args=arguments,obj={elm:!1,ratio:!1,dim:!1,position:!1,size:!1,hover:!0};if(1===args.length&&"object"==typeof args[0])for(i in args[0])obj[i]=args[0][i];else for(x=0;x<args.length;x++)switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6];break;case 7:obj.noClick=args[7]}var isLazy=function(elm){return elm.hasClass("unloaded_img")?!0:!1},isVideoAlt=function(elm){return elm.hasClass("m-controller")?!0:!1};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image;if(pObj.elm=item,!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height],FS.setOverlay(pObj)},img.src=imgElm.attr("src")};if(pObj.dim)FS.setOverlay(pObj);else if(isLazy(imgElm))var interval=setInterval(function(){imgElm.attr("src")===imgElm.attr("dest_src")&&(trigger(),clearInterval(interval))},650);else trigger()}})},useAbsImg:function(dim){var x,map=["118","96","64","48","32","24","16"],ret=!1;if(!isNaN(dim))if(dim>=map[0]&&(ret=map[0]),20>=dim)ret=map[map.length-1];else for(x=0;x<map.length;x++){var val=map[x],nVal=map[x+1]?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(val>=dim&&dim>nVal){ret=diffH>diffL?nVal:val;break}}return ret?ret:!1},setOverlay:function(obj){function mFloor(val){return Math.floor(val)}function px(val){return val+"px"}function hover(over){over=altHover?over?!1:!0:over;var dim;return useAbsImg&&absDim&&(dim=absDim),dim=dim?"-"+dim:"",overlaySrc.replace("${dim}",dim).replace("${hover}",over?"-hover":"")}function set(){var resizeVal=dim[1]<dim[0]?dim[1]:dim[0],resize=resizeVal*ratio;resize=resize>size?size:resize;var imgW=resize,imgH=imgW,ovrL=!1,ovrR=!1,ovrT=!1,ovrB=!1,edgeW=.03,edgeH=.05;switch(edgeW=mFloor(dim[0]*edgeW),edgeH=mFloor(dim[1]*edgeH),position){case"top right":ovrR=edgeW,ovrT=edgeH;break;case"bottom right":ovrR=edgeW,ovrB=edgeH;break;case"top left":ovrL=edgeW,ovrT=edgeH;break;case"bottom left":ovrL=edgeW,ovrB=edgeH;break;default:ovrL=Math.floor(.5*dim[0]-.5*imgW),ovrT=Math.floor(.5*dim[1]-.5*imgH)}var css={};ovrR&&(css.right=px(ovrR)),ovrL&&(css.left=px(ovrL)),ovrT&&(css.top=px(ovrT)),ovrB&&(css.bottom=px(ovrB)),useAbsImg&&FS.useAbsImg(imgW)&&(imgW=FS.useAbsImg(imgW),imgH=imgW,absDim=imgW),css.width=px(imgW),css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css),elm.find("a").css({position:"relative"}),elm.find("img").each(function(){function hoverOver(over){over&&!isHover?(isHover=!0,overlayImg.attr("src",hover(!0))):isHover&&(isHover=!1,overlayImg.attr("src",hover()))}var item=$(this),parent=item.parent(),isHover=!1,prevOverlay=parent.find("> .vid-overlay:visible");prevOverlay.size()>0&&prevOverlay.css("display","none"),parent.css({display:"block",padding:"0"}).prepend(overlay),noClick||parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");return useEvent=onclick?onclick:href,onclick?eval(onclick):window.location.href=href,!1});var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");titleLink.hover(function(){hoverOver(!0)},function(){hoverOver()}),parent.hover(function(){hoverOver(!0)},function(){hoverOver()})})}var FS=this,elm=obj.elm,ratio=obj.ratio||.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||!1,noClick=obj.noClick||!1,useAbsImg=!0,absDim=!1,overlaySrc=(window.FOX_DomainPath||"")+"/static/v/all/img/vp-overlay${dim}${hover}.png",hoverImg=new Image;hoverImg.src=hover(!0),set()}});var formatNumber=window.formatNumber=function(num,dec,thou,pnt,curr1,curr2,n1,n2){var i,x=Math.round(num*Math.pow(10,dec));x>=0&&(n1=n2="");var y=(""+Math.abs(x)).split(""),z=y.length-dec;for(0>z&&z--,i=z;0>i;i++)y.unshift("0");for(0>z&&(z=1),y.splice(z,0,pnt),y[0]===pnt&&y.unshift("0");z>3;)z-=3,y.splice(z,0,thou);var r=curr1+n1+y.join("")+n2+curr2;return r};window.AjaxGetEvent=function(event_data,callback){var GE=this;GE.mydata=event_data,GE.mycallback=callback,GE.get=function(url,params,type){$.get(url,params,$.context(this).callback("eventcallback"),type)},GE.eventcallback=function(ajaxdata){GE.mycallback(ajaxdata,GE.mydata)}}}(jQuery),function($){function WeatherService(namespace){this.namespace=namespace;var i,initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:!1,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_HEALTH_CHECK:"http://www.foxnews.com/feeds/web/status/wsi/json/",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};for(i in initVars)this[i]=initVars[i];this.extService=new ExternalServices(this)}function ExternalServices(root){this.root=root,this._DataObj=!1,this._ExtWidgets=[]}function showToConsole(str){"object"==typeof console&&console.log(str)}function cacheBuster(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")}var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};
WeatherService.prototype={init:function(fn){var ws=this;ws.getCurrentLocation(function(data){ws.createWeatherLocationCookie(data),ws.renderWidget(),"function"==typeof fn&&fn()})},getCurrentLocation:function(){var args=arguments,fn=!1,compiled=!1;if(0===args.length)return!1;if(1===args.length?fn=args[0]:(compiled="boolean"==typeof args[0]?args[0]:!1,fn=args[1]),"function"!=typeof fn)return!1;var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}',trigger=function(val){val=compiled?ws.createObjFromJSON(val):val,fn(val)};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);trigger(weatherlocObj&&weatherlocObj.location&&weatherlocObj.location[0].loc_id?cookie:initData)}else window.CONST_Akamai_GEO&&"US"===CONST_Akamai_GEO.countryCode?ws.getGeoLocation(function(data){trigger(data||initData)}):trigger(initData)},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo",ret=function(info){"function"==typeof fn&&fn(info)},zip=function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return isNaN(zip)?!1:zip}();zip?(ws.location_searchresults_callback_geo=function(data){ret(data)},$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0})):ret(!1)},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)},this.extService.reloadWidgets()},weatherCookie:function(name,value,options){if("undefined"==typeof value){var cookieValue=null;if(document.cookie&&""!==document.cookie){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}options=options||{},null===value&&(value="",options.expires=-1);var expires="";if(options.expires&&("number"==typeof options.expires||options.expires.toUTCString)){var date;"number"==typeof options.expires?(date=new Date,date.setTime(date.getTime()+24*options.expires*60*60*1e3)):date=options.expires,expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&""!==city&&""!==country){var expDate=new Date;expDate.setTime(""===tempHi||""===tempLo?expDate.getTime()+6e4:expDate.getTime()+108e5),this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN}),this.renderFavorites()}},createWeatherLocationCookie:function(jsonString){var expDate=new Date;expDate.setTime(expDate.getTime()+864e8),this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN})},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(""!==favLocCookieString){var expDate=new Date;expDate.setTime(expDate.getTime()+864e8),this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN})}else this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN})},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId)},createObjFromJSON:function(jsonString){return""!==jsonString?eval("("+unescape(jsonString).replace(/\s+/g," ")+")"):null},createLocJSObj:function(data){if(!data.loc_id)return null;var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];"city"===i&&(val=val.replace("`","'")),obj[i]=val}var fullArr=[];return fullArr.push(obj.city||""),fullArr.push("US"!==obj.loc_id.substr(0,2).toUpperCase()&&(obj.country||obj.state)?obj.country:obj.state),obj.fullCityString=fullArr.join(", "),obj},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered)return!1;if(this.serviceTriggered=!0,config="object"==typeof config?config:{},"undefined"!=typeof serviceDomain&&(this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS,this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER,this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP,this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP,-1==document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)&&(this.WEATHER_COOKIE_DOMAIN=document.location.hostname)),config)for(i in config){var val=config[i];switch(i){case"icons":24===val&&(self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24"))}}this.init()},renderWidget:function(){$("body").data("weather-rendered",!0);var ws=this;ws.serviceTriggered=!0,setTimeout(function(){ws.renderHeaderWeather(),ws.renderHeaderLocationChange()},500)},renderHeaderWeather:function(){var ws=this,trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current")})};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc")),locObject=this.createLocJSObj(weatherlocObj.location[0]);this.getWeatherDataCookie(locObject.loc_id)?(this.headerDisplayAction(locObject.loc_id),ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id)),ws.renderWeatherWidget(locObject.loc_id)):this.fetchAndSaveWeatherJSONCookie(locObject.loc_id),trigger()}else this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id),trigger()})},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml)},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(0===widgetElm.size())return!1;var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=widgetElm.hasClass("use-lg-icons")?!0:!1,useImgSrc=useLgIcons?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE,imgDim=function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];return val=val.replace("icons_","").split("x")}();if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+(wdObj.stateShort.length>0?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort)});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i],imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT,hiTemp=dataSource.hi,lowTemp=dataSource.lo;0===i&&item.find(".current").html(wdObj.currentTemp+"&#176;"),0===item.find(".media img").size()&&item.find(".media").html("<img />"),item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);if(elm.css({opacity:"0",display:"inline"}),$.browser.opera)elm.css({backgroundImage:"none",display:"inline",opacity:"0"}),elm.attr({src:imgSrc}),animateFn.show(elm,{speed:300,type:"linear"});else{var img=new Image;img.onload=function(){elm.attr("src",imgSrc),animateFn.show(elm,{speed:300,type:"swing"})},img.src=imgSrc}});var hiLow="Hi "+(hiTemp.length>0?hiTemp+"&#176;":"-")+" | Lo "+(lowTemp.length>0?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow),item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort)})}})}return widgetElm.addClass("active"),widgetElm.data("setListeners")?!1:(widgetElm.data("setListeners",!0),void widgetElm.find("form:first").each(function(){var timeout,form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=!0;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val("")}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?elm.data("currVal"):val)}),form.hover(function(){overSearch=!0},function(){overSearch=!1}),$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");val!==curr&&val!==txt&&form.submit()}}),form.submit(function(){return ws.weathetStatusCheck(function(){search.data("currVal",search.val()),ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION)},function(){search.data("currVal",search.val()),widgetElm.addClass("na"),form.find("> fieldset > legend").size()>0&&widgetElm.addClass("w-mod-1"),0===widgetElm.find("p.notice").size()&&$('<p class="notice">Sorry, cannot update location at this time.</p>').insertBefore(form),clearTimeout(timeout),timeout=setTimeout(function(){widgetElm.removeClass("na"),widgetElm.removeClass("active"),search.val(txt),ws.renderWidget()},1e4)}),!1})}))},weathetStatusCheck:function(successFN,failFN){var self=this,callbackFN="FOX_WeatherServ";window[callbackFN]||(window[callbackFN]=function(data){data&&data.online&&"true"===data.online?successFN():failFN()}),$.ajax({type:"GET",url:self.SERVICE_HEALTH_CHECK,data:{cb:cacheBuster(10)},dataType:"script",async:!0,cache:!0})},searchFieldOnFocus:function(inputField){(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD)&&(inputField.value="")},searchFieldOnBlur:function(inputField,message){""===inputField.value&&(inputField.value=message)},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();return reqAC.match(regexp)?void $.ajax({type:"GET",async:!0,cache:!0,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(!(parsed.location.length>0))return showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR),!1;var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER),$(airportLocId).attr("value",airportLocObj.loc_id)}},error:function(){return showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR),!1}}):(showToConsole(ws.MSG_AIRPORT_CODE_ERROR),!1)},getSetLocationAction:function(location,callback){if(!location)return!1;{var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");new RegExp("[^,]*")}locIdEx.exec(location)&&"function"==typeof callback&&ws.fetchAndSaveWeatherJSONCookie(location,!1,function(data){callback(ws.createObjFromJSON(data))})},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId))$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER),$(searchInputId).attr("name","locId"),$(searchInputId).attr("value",ws.currentLocId),action===ws.UPDATE_HEADER_ACTION&&ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget()});else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson)if(1===locationJson.location.length){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);action===ws.UPDATE_HEADER_ACTION?ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget()}):($(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER),$(searchInputId).attr("name","locId"),$(searchInputId).attr("value",exactMatchObj.loc_id))}else qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+"),window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;else qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+"),window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr},$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0})}},gotoYourWeatherPage:function(locId){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);locationId&&""!==locationId||(locationId=ws.WEATHER_DEFAULT_LOCATION),$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& "),feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>'),weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>'),weather_dayly.addClass("c"),weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>'),weather_hourly.addClass("c"),average_records.replaceWith('<h2 class="title">'+text+"</h2>")})},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson)if(locationJson.location.length>1){for(searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>',resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;searchResultsHtml+=resultsIndex%2===0?'<tr class="even">':"<tr>",searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>"}searchResultsHtml+="</table>"}else if(1===locationJson.location.length){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country)}else searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";else searchResultsHtml+=ws.MSG_DEFAULT_ERROR}else searchResultsHtml+=ws.MSG_DEFAULT_ERROR;$(divClass).html(searchResultsHtml)},$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>")}})},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){for(airportDelayHtml+='<div class="delay">',delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>"}airportDelayHtml+="</div>"}else airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";$(divClass).html(airportDelayHtml)}})},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>',$(divClass).html(marineHtml),$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine")});try{FOX.site.channel.listDropdown.init("marineState")}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;""!==stateAbbr&&$.ajax({type:"GET",async:!0,cache:!0,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data){var marineLocJson=ws.createObjFromJSON(data);return marineLocJson&&marineLocJson.marineLocations.length>0?void ws.generateTideLocationsList(marineLocJson.marineLocations):(showToConsole(ws.MSG_DEFAULT_ERROR),!1)}})},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(null!==locArrayObj){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>"}$("#tide-cities-list").html(tideLocDropdown),$("#tide-cities-p").removeClass("disabled")}else tideLocDropdown+='<li lang=""></li>',$("#tide-cities-list").html(tideLocDropdown),$("#tide-cities-p").html("- select -"),$("#tide-cities-p").addClass("disabled");try{FOX.site.channel.listDropdown.init("marineCities")}catch(err){}},generateStatesList:function(statesList){var i,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++)listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";return listHtml},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>',$(divClass).html(skiHtml),$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003")});try{FOX.site.channel.listDropdown.init("skiState")}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;""!==stateAbbr&&$.ajax({type:"GET",async:!0,cache:!0,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data){var skiResortJson=ws.createObjFromJSON(data);if(!skiResortJson)return showToConsole(ws.MSG_DEFAULT_ERROR),!1;if(!(null!==skiResortJson.skiResorts&&skiResortJson.skiResorts.length>0))return!1;for(var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts,x=0;x<skiArray.length;x+=1)0===x?newSkiReportHolder.push(skiArray[0]):newSkiReportHolder[newSkiReportHolder.length-1].resort_name!==skiArray[x].resort_name&&newSkiReportHolder.push(skiArray[x]);ws.generateSkiResortsList(newSkiReportHolder)}})},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(null!==locArrayObj){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>"}$("#ski-resorts-list").html(skiResortsDropdown),$("#ski-resorts-p").removeClass("disabled")}else skiResortsDropdown+='<li lang=""></li>',$("#ski-resorts-list").html(skiResortsDropdown),$("#ski-resorts-p").html("- select -"),$("#ski-resorts-p").addClass("disabled");try{FOX.site.channel.listDropdown.init("skiResorts")}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml)})},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";skiObj.base_min&&skiObj.base_max&&(baseDepth=skiObj.base_min+" of "+skiObj.base_max);var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=this.weatherCookie("weatherfavlocs").split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=!0;for(favIndex=0;favIndex<favLocationArray.length;favIndex++)favLocationArray[favIndex]===locId&&(alert("You have already saved this location to My Favorites."),saveFavorite=!1);saveFavorite&&(favLocationArray.push(locId),this.createWeatherFavoritesCookie(favLocationArray),this.renderFavorites())}else alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.")}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray),this.renderFavorites()}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=this.weatherCookie("weatherfavlocs").split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++)if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break}this.createWeatherFavoritesCookie(favLocationArray)}var li=$("#li_"+locId),ul=li.closest("ul.favorites");li.remove(),0===ul.children().size()&&ul.closest(".weather.favorites > ul").children(":not(:last-child)").remove()},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;"US"!==dataObj.locationId.substr(0,2)&&(stateToDisplay=dataObj.country);var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=ws.weatherCookie("weatherfavlocs").split("|");for(favoritesHtml+='<li><ul class="favorites">',favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie)favDataObj=ws.createObjFromJSON(favDataCookie),favoritesHtml+=ws.generateFavoritesHtml(favDataObj);else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){data&&(ws.createWeatherDataCookie(favLocationId,data),favDataObj=ws.createObjFromJSON(data),favoritesHtml+=ws.generateFavoritesHtml(favDataObj))},$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:{locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0})}}favoritesHtml+="</ul></li><li>&nbsp;</li>"}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml),$("ul.favorites li:last-child",favoritesObj).addClass("last"),$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this)})},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml)},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie="boolean"==typeof setAsCookie?setAsCookie:!0;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){setAsCookie?(ws.createWeatherDataCookie(locId,data),ws.renderWidget()):"function"==typeof callback&&callback(data)},$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:{locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0})},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data),"function"==typeof fn&&fn()},$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:!0,cache:!0})},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";return $.ajax({type:"GET",async:!0,cache:!0,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode)}},error:function(){showToConsole(ws.MSG_DEFAULT_ERROR)}}),regionCode},weatherCityAutoComplete:function(element){function triggerAjaxCall(useCSM){"undefined"==typeof ws.ACListener[ACElementId]&&(ws.ACListener[ACElementId]={init:!1,fchar:initial,ajaxReady:!0}),ws.ACListener[ACElementId].ajaxReady&&(ws.ACListener[ACElementId].ajaxReady=!1,$(preloaderObj).show(),$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:{cityNameInitial:initial,cb:cacheBuster()},dataType:"text",cache:!0,success:function(data){if(data){var cities=data.replace(/var cities\=/,"");useCSM?(ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value},error:function(){}}),"undefined"==typeof ws.weatherCityData[initial]&&(ws.weatherCityData[initial]=cities),triggerAutoComplete(ws.weatherCityData[initial])):(ws.weatherCityData[initial]=cities,triggerAutoComplete(ws.weatherCityData[initial])),$(preloaderObj).fadeOut("slow"),ws.ACListener[ACElementId].ajaxReady=!0}else $(preloaderObj).hide(),ws.ACListener[ACElementId].ajaxReady=!0,showToConsole(ws.MSG_DEFAULT_ERROR)},error:function(){$(preloaderObj).hide(),ws.ACListener[ACElementId].ajaxReady=!0,showToConsole(ws.MSG_DEFAULT_ERROR)}}))}function triggerAutoComplete(cities){cities=eval(cities),"undefined"==typeof ws.ACListener[ACElementId]?ws.ACListener[ACElementId]={init:!1,fchar:initial,ajaxReady:!0}:ws.ACListener[ACElementId].fchar!==initial&&(ws.ACListener[ACElementId].init=!1),ws.ACListener[ACElementId].init||($(element).autocomplete(cities,{max:20,width:193,selectFirst:!1,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t}}).result(function(event,item){ws.currentLocId=item.id,ws.currentCityString=item.t}),ws.ACListener[ACElementId].init=!0,ws.ACListener[ACElementId].fchar=initial)}var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(!(inputValue.length<1)){var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" "),tempIndex>0&&(appendix=appendix.substr(0,tempIndex));var initial=inputValue.charAt(0).toLowerCase();if(null!==initial.match(/[a-z]/))if("undefined"==typeof ws.weatherCityData[initial])if("undefined"==typeof ClientStorageManager)triggerAjaxCall(!1);else{var restrict=["cookie","msiestorage"];
-1===restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())?ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities,triggerAutoComplete(cities)}else triggerAjaxCall(!0)}):triggerAjaxCall(!1)}else triggerAutoComplete(ws.weatherCityData[initial])}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=!1;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>'),htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />'),htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this),clearTimeout(formTimeout)}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",""===val?ws.TXT_HEADER_SEARCH_FIELD:val),formTimeout=setTimeout(function(){ws.changeHeaderLocation()},3e3)}),elm.submit(function(){return clearTimeout(formTimeout),ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION),!1})}),$(".weather-search, #weather_corner").append(htmlElm)},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");info.is(":hidden")?(search.css("display","none"),info.css({opacity:"0",display:"inline"}),animateFn.show(info,{speed:300,type:"swing"})):(info.css("display","none"),search.css({opacity:"0",display:"inline"}),animateFn.show(search,{speed:300,type:"swing"}))},headerDisplayAction:function(locationId){var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px; height:24px;"/></span> '),htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);if(elm.css({opacity:"0",display:"inline"}),0===wdObj.days[0].image.length)elm.css("display","none");else if($.browser.opera)elm.css({backgroundImage:"none",display:"inline",opacity:"0"}),elm.attr({src:imgSrc}),animateFn.show(elm,{speed:300,type:"linear"});else{var img=new Image;img.onload=function(){elm.attr("src",imgSrc),animateFn.show(elm,{speed:300,type:"swing"})},img.src=imgSrc}}),htmlElm.find("a").each(function(){var aTag=$(this),text=aTag.text().toLowerCase();aTag.click(function(){return text.indexOf("forecast")>-1&&ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort),text.indexOf("edit")>-1&&ws.changeHeaderLocation(),!1})}),$(".weather-search, #weather_corner").html(htmlElm)}}},ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;len>x;x++){var fn=widgets[x];"function"==typeof fn&&fn()}},setWidget:function(fn,execute){var EX=this;"function"==typeof fn&&(EX._ExtWidgets.push(fn),execute&&fn())},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm)return!1;var root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",val===txt?"":val)}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",""===val?txt:val)}),form.submit(function(){return root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION),!1})})}};var weather_service=window.weather_service=new WeatherService("weather_service"),animateFn={isIE:function(){return $.browser.msie},animate:function(elm,cfg){this.isIE()?(elm.css(cfg.css),elm.css("opacity",""),cfg.callback&&cfg.callback()):(cfg.speed||(cfg.speed=300),cfg.type||(cfg.type="swing"),elm.animate(cfg.css,cfg.speed,cfg.type,function(){cfg.callback&&cfg.callback()}))},hide:function(elm,cfg){if(!elm)return!1;var i,cssObj={opacity:"0"};if(cfg.css)for(i in cfg.css)cssObj[i]=cfg.css[i];cfg.css=cssObj,this.animate(elm,cfg)},show:function(elm,cfg){if(!elm)return!1;var i,cssObj={opacity:"1"};if(cfg.css)for(i in cfg.css)cssObj[i]=cfg.css[i];cfg.css=cssObj,this.animate(elm,cfg)}}}(jQuery);var FOX_WeatherService=function($){var CONST={};CONST.protocol=window.location.protocol,CONST.feed={info:CONST.protocol+"//www.foxnews.com/feeds/web/weather/conditions/${type}/${zip}.json",airport:CONST.protocol+"//www.foxnews.com/feeds/web/weather/airport/${type}/${code}.json",marine:CONST.protocol+"//www.foxnews.com/feeds/web/weather/marine/${type}/${id}.json",details:CONST.protocol+"//www.foxnews.com/feeds/web/weather/details/zip/${zip}.json"},CONST.state={id:"USNY0996",zip:"10108",city:"New York",state:"NY"},CONST.cookies={},CONST.cookies.domain="foxnews.com",CONST.cookies.location={name:"FXN_w_locinfo",expires:525600},CONST.cookies.info={name:"FXN_w_stinfo",expires:30};var App=function(){this.__vars={};var v=this.__vars;v._INVALID_ZIPS=[],v._CALL_STACK={},this.render=new Renderer(this),this.event=new Events(this),this.init()};App.prototype.init=function(){var self=this,cookieInfo=CONST.cookies.location;!function(){var ck="FXN_w_ckbt_2";Cookie.get(ck)||(Cookie.set(ck,1,365),Cookie.set("FXN_w_ckbt",1,new Date),$.cookie(CONST.cookies.location.name,CONST.state.zip,{expires:new Date,path:"/"}))}(),Cookie.get(cookieInfo.name)?self.__vars._CURRENT_ZIP=Cookie.get(cookieInfo.name):(Cookie.set(cookieInfo.name,CONST.state.zip,cookieInfo.expires),self.__vars._CURRENT_ZIP=CONST.state.zip);try{this.init=function(){}}catch(err){}},App.prototype.getWeatherInfo=function(zip,callback,search){var self=this,vars=this.__vars,STACK=vars._CALL_STACK,callbackFN="FOX_Weather_getWeatherInfo_${zip}",ck=CONST.cookies.info,infoVal=Storage.getItem(ck.name),loc=CONST.cookies.location;if("function"!=typeof callback)return!1;var trigger=function(useZip,data,storedVal,isSearch,callStackName){var info={};storedVal?info=data:(info.data=data,info.zip=useZip),isSearch&&!storedVal&&(vars._CURRENT_ZIP=useZip,Cookie.set(loc.name,useZip,loc.expires),Storage.setItem(ck.name,info,ck.expires)),isSearch&&EventTrigger.trigger("Weather.Event.onWidgetUpdate",info),storedVal?callback(info):CallStack.execStack(STACK,callStackName,info)},isValid=zip?-1===$.inArray(zip,vars._INVALID_ZIPS)?!0:!1:!0;if(infoVal&&(infoVal.zip===zip||!zip&&search)){var useZip=zip?zip:infoVal.zip;log("[Weather.Service] Storage: Getting data for "+useZip),trigger(useZip,infoVal,!0,search)}else if(isValid){if(!zip){if(!search)return log("[Weather.Service] Error: No ZIP Code passed."),!1;zip=self.getCurrentZip()}if(callbackFN=callbackFN.replace("${zip}",zip),CallStack.inStack(STACK,callbackFN))CallStack.setStack(STACK,callbackFN,callback);else{CallStack.setStack(STACK,callbackFN,callback);var url=function(){var url=CONST.feed.info;return url=url.replace("${type}","zip"),url=url.replace("${zip}",zip),url+="?callback="+callbackFN}();window[callbackFN]=function(data){var info=data&&data.weatherData&&data.weatherData.locationId&&data.weatherData.locationId.length>0?data.weatherData:!1;info?trigger(zip,info,!1,search,callbackFN):(-1===$.inArray(zip,vars._INVALID_ZIPS)&&vars._INVALID_ZIPS.push(zip),log("[Weather.Service] Invalid: "+zip),callback(info)),CallStack.killStack(STACK,callbackFN)},log("[Weather.Service] Request: Getting data for "+zip),getJSONP(url)}}else log("[Weather.Service] Invalid: "+zip),callback(!1)},App.prototype.getWeatherDetails=function(zip,callback){{var self=this,vars=self.__vars,STACK=vars._CALL_STACK,callbackFN="FOX_Weather_getWeatherDetails_${zip}";CONST.cookies.location}if("function"!=typeof callback)return!1;zip||(zip=getZipFromQuery()||self.__vars._CURRENT_ZIP);var trigger=function(data,callStackName){var info={};info.zip=data.zipCode,info.data=data,CallStack.execStack(STACK,callStackName,info)},isValid=-1===$.inArray(zip,vars._INVALID_ZIPS)?!0:!1;if(isValid)if(callbackFN=callbackFN.replace("${zip}",zip),CallStack.inStack(STACK,callbackFN))CallStack.setStack(STACK,callbackFN,callback);else{CallStack.setStack(STACK,callbackFN,callback);var url=function(){var url=CONST.feed.details;return url=url.replace("${zip}",zip),url+="?callback="+callbackFN}();window[callbackFN]=function(data){var info=data&&data.weatherData&&data.weatherData.locationId&&data.weatherData.locationId.length>0?data.weatherData:!1;info?trigger(info,callbackFN):(-1===$.inArray(zip,vars._INVALID_ZIPS)&&vars._INVALID_ZIPS.push(zip),log("[Weather.Service] Invalid: "+zip),callback(info)),CallStack.killStack(STACK,callbackFN)},log("[Weather.Service] Request: Getting 'Your Weather' data for "+zip),getJSONP(url)}else callback(!1)},App.prototype.updateWidget=function(zip,callback){var self=this;triggerEvent(self.render.__vars._widgetStack,zip),"function"==typeof callback&&self.event.onWidgetUpdate(callback)},App.prototype.loadImage=function(target,image,dim){loadImage(target,image,dim)},App.prototype.getCurrentZip=function(){var loc=CONST.cookies.location,zip=Cookie.get(loc.name);return zip||(zip=CONST.state.zip),zip};var Events=function(){var Events=function(root){this.__vars={};var v=this.__vars;v._root=root};return Events.prototype.onWidgetUpdate=function(callback){return"function"!=typeof callback?!1:void EventTrigger.bind("Weather.Event.onWidgetUpdate",callback)},Events.prototype.onWeatherInfoUpdate=function(zip,callback){var vars=this.__vars,root=vars._root;return"function"!=typeof callback?!1:void(-1===$.inArray(zip,root.__vars._INVALID_ZIPS)&&EventTrigger.bind("Weather.Event.onWeatherInfoUpdate_"+zip))},Events}(),Renderer=function(){var Renderer=function(root){this.__vars={};var v=this.__vars;v._root=root,v._widgetStack=[]};return Renderer.prototype.WeatherWidget=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("#weather_widgetInput"),region=target.find("form fieldset > .region"),holder=target.find("form fieldset > div:first"),daysHolder=target.find("> ul li"),defaultInputStr="Enter Zip Code",update=function(info){var data=info.data;daysHolder.each(function(i){var image,elm=$(this),span=elm.find(".section-pr span"),day=data.day[i];image=0===i?data.currentImage:day.image;var media=elm.find(".media img");0===media.size()&&(elm.find(".media").html('<img src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />'),media=elm.find(".media img")),loadImage(media,image,[60,60]),0===i&&elm.find(".current").html(data.currentTemp+"&#176;");var hilowStr="Hi "+day.hi+"&#176; | Lo "+day.lo+"&#176;";span.html(hilowStr);var href="/weather/your-weather/index.html";elm.unbind("click").bind("click",function(){window.open(href,"_self")})}),holder.hide(),input.val(defaultInputStr);var labelStr=[data.cityName,data.stateShort].join(", ");region.find("label").html(labelStr),region.show(),target.addClass("active")},onError=function(type){input[type?"addClass":"removeClass"]("error")},onLoading=function(bool){bool?($("input").attr("disabled","disabled"),form.addClass("loading")):($("input").removeAttr("disabled"),form.removeClass("loading"))},initialize=function(data){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized"),region.find(".close").bind("click",function(){return region.hide(),holder.show(),!1});var hoverState=!1;target.hover(function(){hoverState=!0},function(){hoverState=!1}),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val("")}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?elm.data("currVal"):val),hoverState||(region.show(),holder.hide(),onError(!1),elm.val(defaultInputStr))});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):onError(data),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm),$("html, body").bind("mouseup",function(){hoverState||submitting||(region.show(),holder.hide(),onError(!1),input.val(defaultInputStr))})};root.getWeatherInfo(null,function(data){data&&data.data&&(update(data),initialize(data))},!0)},Renderer.prototype.HomeWeatherWidget=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("#weather_widgetInput"),region=target.find("form fieldset > .region"),holder=target.find("form fieldset > div:first"),details=target.find("p.details"),sect=target.find("ul .section-pr"),defaultInputStr="Enter Zip Code",update=function(info){var data=info.data;sect.find(".current").html(data.currentTemp+"&#176;"),sect.find(".day").html("Today");var media=sect.find(".media img");0===media.size()&&(sect.find(".media").html('<img src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px;width:24px;display:inline;" />'),media=sect.find(".media img")),loadImage(media,data.currentImage,[24,24]),holder.hide(),input.val(defaultInputStr);var labelStr=[data.cityName,data.stateShort].join(", ");region.find("label").html(labelStr),region.show();var href="/weather/your-weather/index.html";details.find("a").attr("href",href),sect.bind("click",function(){return window.open(href,"_self"),!1}),details.show(),target.addClass("active"),$(document).trigger("FOX.Events.FormWeatherUpdate")},onError=function(type){var a=details.find("a"),span=details.find("span");if(type){var str=!1;"zip"===type?str="Invalid ZIP Code":"data"===type&&(str="Invalid ZIP Code"),str&&(a.hide(),span.html(str))}else a.show(),span.html("&nbsp;&rsaquo;");details.show()},onLoading=function(bool){bool?($("input").attr("disabled","disabled"),form.addClass("loading")):($("input").removeAttr("disabled"),form.removeClass("loading"))},initialize=function(data){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized"),region.find(".close").bind("click",function(){return region.hide(),holder.show(),details.hide(),!1});var hoverState=!1;target.hover(function(){hoverState=!0},function(){hoverState=!1}),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val("")}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?elm.data("currVal"):val),hoverState||(region.show(),holder.hide(),onError(!1),details.show(),elm.val(defaultInputStr))});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):onError(data),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm),$("html, body").bind("mouseup",function(){hoverState||submitting||(region.show(),holder.hide(),onError(!1),details.show(),input.val(defaultInputStr))})};root.getWeatherInfo(null,function(data){data&&data.data&&(update(data),initialize(data))},!0)},Renderer.prototype.HomeWeatherWidgetNew=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("#weather_widgetInput"),region=target.find("form fieldset > .region"),holder=target.find("form fieldset > div:first"),details=target.find("p.more"),sect=target.find(".current"),defaultInputStr="Enter Zip Code",update=function(info){if(info&&info.data){var data=info.data;sect.find(".temp").html(data.currentTemp+"&#176;");var media=sect.find(".m img");0===media.size()&&(sect.find(".m").html('<img src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px;height:24px;display:inline;" />'),media=sect.find(".m img")),loadImage(media,data.currentImage,[24,24]),holder.hide(),input.val(defaultInputStr);var labelStr=[data.cityName,data.stateShort].join(", ");region.find("span").html(labelStr),region.show();var href="/weather/your-weather/index.html";details.find("a").attr("href",href),sect.bind("click",function(){return window.open(href,"_self"),!1}),details.show(),target.addClass("active"),$(document).trigger("FOX.Events.FormWeatherUpdate",info)}},onError=function(type){var a=details.find("a"),span=details.find("span");if(holder.is(":hidden"))return!1;if(type){var str=!1;"zip"===type?str="Invalid ZIP Code":"data"===type&&(str="Invalid ZIP Code"),str&&(a.hide(),span.html(str))}else a.show(),span.html("&nbsp;&rsaquo;");details.show()},onLoading=function(bool){bool?(form.find("input").attr("disabled","disabled"),form.addClass("loading")):(form.find("input").removeAttr("disabled"),form.removeClass("loading"))},initialize=function(){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized"),region.find(".close").bind("click",function(){return region.hide(),holder.show(),details.hide(),!1});var hoverState=!1;target.hover(function(){hoverState=!0},function(){hoverState=!1}),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val("")}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?elm.data("currVal"):val),hoverState||(region.show(),holder.hide(),onError(!1),details.show(),elm.val(defaultInputStr))}).keypress(function(){onError(!1)});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):(onError("data"),$(document).trigger("FOX.Events.FormWeatherUpdate.HPNew",submitData)),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm),$("html, body").bind("mouseup",function(){hoverState||submitting||(region.show(),holder.hide(),onError(!1),details.show(),input.val(defaultInputStr))})};root.getWeatherInfo(null,function(data){data&&data.data&&(update(data),initialize(data))},!0)},Renderer.prototype.FoxAndFriendsWeatherWidget=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("fieldset > input:eq(0)"),region=target.find(".info > .region"),temp=region.find("strong"),media=target.find(".info > .m > img"),location=region.find("p"),messages=region.find("span"),holder=target.find("form fieldset > div:first"),sect=target.find("ul .section-pr"),defaultInputStr="Enter Zip Code",update=function(info){var data=info.data;temp.html(data.currentTemp+"&#176;<span>F</span>"),0===media.size()&&(sect.find(".media").html('<img src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px;width:24px;display:inline;" />'),media=sect.find(".media img")),loadImage(media,data.currentImage,[96,96]),holder.hide(),input.val(defaultInputStr),input.next().focus();var labelStr=[data.cityName,data.stateShort].join(", ")+"<br/>"+info.zip;location.html(labelStr),$(document).trigger("FOX.Events.FormWeatherUpdate")},onError=function(type){if(type){var str=!1;"zip"===type?str="Invalid ZIP Code":"data"===type&&(str="Invalid ZIP Code"),str&&messages.html(str)}else messages.html("&nbsp;&rsaquo;")},onLoading=function(bool){bool?($("input").attr("disabled","disabled"),form.addClass("loading")):($("input").removeAttr("disabled"),form.removeClass("loading"))},initialize=function(data){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized"),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val("")}).blur(function(){var elm=$(this),val=elm.val();elm.val(""===val?elm.data("currVal"):val)});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):onError(data),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm)};root.getWeatherInfo(null,function(data){data&&data.data&&(update(data),initialize(data))},!0)},Renderer.prototype.LatinoWeatherWidget=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("#weather_widgetInput"),label=target.find("p.state"),daysHolder=target.find("> ul li"),defaultInputStr="Enter Zip Code",update=function(info){var data=info.data,labelStr=[data.cityName,data.stateShort].join(", ");label.html(labelStr),daysHolder.each(function(i){var image,elm=$(this),span=elm.find(".section-pr span"),day=data.day[i];image=0===i?data.currentImage:day.image;var media=elm.find(".media img");0===media.size()&&(elm.find(".media").html('<img src="'+CONST.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />'),media=elm.find(".media img")),loadImage(media,image,[60,60]),0===i&&elm.find(".current").html(data.currentTemp+"&#176;");var hilowStr="Hi "+day.hi+"&#176; | Lo "+day.lo+"&#176;";span.html(hilowStr);var href="/weather/your-weather/index.html";elm.unbind("click").bind("click",function(){window.open(href,"_self")})}),target.addClass("active")},onError=function(type){input[type?"addClass":"removeClass"]("error")},onLoading=function(bool){bool?($("input").attr("disabled","disabled"),form.addClass("loading")):($("input").removeAttr("disabled"),form.removeClass("loading"))},initialize=function(data){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized");var hoverState=!1;form.hover(function(){hoverState=!0},function(){hoverState=!1}),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val(""),onError(!1)}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?defaultInputStr:val),onError(!1)});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):onError(data),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm),$("html, body").bind("mouseup",function(){hoverState||submitting||(onError(!1),input.val(defaultInputStr))})};root.getWeatherInfo(null,function(data){data&&data.data?(update(data),initialize(data)):target.hide()},!0)},Renderer.prototype.YourWeatherLocationWidget=function(target){var self=this,vars=self.__vars,root=vars._root;if(!target)return!1;var form=target.find("form"),input=form.find("#weather_widgetInput"),region=target.find("form fieldset > .region"),holder=target.find("form fieldset > div:first"),details=target.find("p.error"),defaultInputStr="Enter Zip Code",update=function(){onError(!1),holder.hide(),region.show()},onError=function(type){type?details.show():details.not(":hidden")&&details.hide()},onLoading=function(bool){bool?(input.attr("disabled","disabled"),form.addClass("loading")):(input.removeAttr("disabled"),form.removeClass("loading"))},hoverState=!1;target.find("> div:first").hover(function(){hoverState=!0},function(){hoverState=!1});var initialize=function(){if(target.data("_weatherInitialized"))return!1;target.data("_weatherInitialized"),region.find("a").bind("click",function(){return region.hide(),holder.show(),details.hide(),!1}),input.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val),elm.val(""),onError(!1)}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val(""===val?defaultInputStr:val),onError(!1),hoverState||(region.show(),holder.hide(),onError(!1),elm.val(defaultInputStr))});var submitting=!1,submitForm=function(zip){return submitting?!1:(submitting=!0,zip=zip||validateZip(input.val()),onError(!1),void(zip?(onLoading(!0),root.getWeatherInfo(zip,function(submitData){onLoading(!1),submitData&&submitData.data?(onError(!1),update(submitData)):onError("data error"),submitting=!1},!0)):(onError("zip"),submitting=!1)))};form.submit(function(){return submitForm(),!1}),vars._widgetStack.push(submitForm),$("html, body").bind("mouseup",function(){hoverState||submitting||(region.show(),holder.hide(),onError(!1),input.val(defaultInputStr))})};initialize()},Renderer}(),CallStack=(function(){var Parser={};return Parser.LocationInfo=function(data){var info={};info.city=data.cityName,info.state=data.stateShort,info.country=data.country,info.current=data.currentTemp,info.forecast=data.forecast,info.id=data.locationId,info.region=data.regionImage},Parser}(),function(){var CallStack=function(){};return CallStack.prototype.inStack=function(stack,needle,returData){var i,ret=!1;for(i in stack)if(i===needle&&stack[i]){ret=returData?stack[i]:!0;break}return ret},CallStack.prototype.execStack=function(stack,needle,data){var self=this,queue=self.getStack(stack,needle);if(queue)for(var x=0;x<queue.length;x++){var fn=queue[x];"function"==typeof fn&&fn(data)}},CallStack.prototype.getStack=function(stack,needle){var self=this,ret=self.inStack(stack,needle,!0);return ret},CallStack.prototype.setStack=function(stack,needle,data){var self=this,bool=self.inStack(stack,needle);bool?stack[needle].push(data):stack[needle]=[data]},CallStack.prototype.killStack=function(stack,needle){if(stack[needle])try{delete stack[needle]}catch(err){stack[needle]=null}},CallStack=new CallStack}()),EventTrigger=function(){var EventTrigger={};return EventTrigger.bind=function(name,callback){return"function"!=typeof callback?!1:void $(document).bind(name,function(evt,info){callback(info)})},EventTrigger.trigger=function(name,info){$(document).trigger(name,[info])},EventTrigger}(),Storage=function(){function hasExpired(expires){expires=parseInt(expires||0,10);var ret=(new Date).getTime()>expires?!0:!1;return ret||(log("[Weather.Service] info expires:"),log(new Date(expires))),ret}var dataStore=window.localStorage||!1,split="||${expireDate}||",Storage={};return Storage.setItem=function(key,val,expires){var hasJSON=window.JSON&&window.JSON.stringify?!0:!1;if(!hasJSON)return!1;if(val=encodeURIComponent(JSON.stringify(val)),dataStore){var expireDate=new Date((new Date).getTime()+6e4*(expires||0)).getTime();dataStore.setItem(key,[val,expireDate].join(split))}else Cookie.set(key,val,expires)},Storage.getItem=function(key){var val,ret=!1;if(dataStore){if(val=dataStore.getItem(key)){var sp=val.split(split),info=sp[0],expires=sp[1];2!==sp.length||hasExpired(expires)||info&&window.JSON&&window.JSON.parse&&(ret=JSON.parse(decodeURIComponent(info)))}}else{val=Cookie.get(key),ret=val?val:!1;try{ret&&window.JSON&&window.JSON.parse&&(ret=JSON.parse(decodeURIComponent(ret)))}catch(err){ret=!1}}return ret},Storage.removeItem=function(key){dataStore?dataStore.removeItem(key):Cookie.set(key,null)},Storage}(),Cookie=function(){var Cookie={};return Cookie.set=function(name,data,expires){var params={};if(params.path="/",params.domain=CONST.cookies.domain,"number"==typeof expires){var date=new Date;params.expires=new Date(date.setTime(date.getTime()+60*expires*1e3))}else params.expires=expires;$.cookie(name,data,params)},Cookie.get=function(name){var val=$.cookie(name);return val},Cookie}(),validateZip=function(val){var regex=/^\d{5}([\-]\d{4})?$/,ret=regex.test(val);return ret?val.slice(0,5):!1},loadImage=function(media,src,dim){var imgSrc=CONST.protocol+"//global.fncstatic.com/static/v/all/img/weather/icons_"+dim.join("x")+"/"+src+".png",img=new Image;imgSrc!==media.attr("src")&&(media.css("opacity","0"),img.onload=function(){media.attr("src",imgSrc),media.animate({opacity:1},400,"linear")},img.src=imgSrc)},getJSONP=function(url){$.ajax({url:url,data:{cb:cacheBuster(30)},dataType:"script",async:!0,cache:!0})},getZipFromQuery=function(){var x,ret=!1,loc=window.location,params=loc.search.substr(1)||"";if(params.length>0){var pairs=params.split("&");for(x=0;x<pairs.length;x++){var sp=pairs[x].split("=");if("zip"===sp[0]){ret=sp[1];break}}}return ret},triggerEvent=function(stack,data){if(!$.isArray(stack))return!1;for(var x=0;x<stack.length;x++)"function"==typeof stack[x]&&stack[x](data)},cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return new App}(jQuery);window.FOX_AuthJanrain_CONFIG=function(){function HOST(host){return window.location.hostname.indexOf(host)>-1?!0:!1}function isBeta(){return HOST("qa.")||HOST("beta")?!0:!1}function isLive(){var ret=window.FOX_Auth_live_settings?!0:isBeta()?!1:!0;return ret}var CONFIG={},live=!0,hash=window.location.hash;return!live&&(hash.indexOf("live")>-1||window.FOX_Auth_Live_Settings)?live=!0:hash.indexOf("dev")>-1&&(live=!1),live?(CONFIG.livefyre=function(){var conf={network:"foxnewsprod.fyre.co",domain:"cdn.livefyre.com",jsURL:"cdn.livefyre.com/Livefyre.js",commentJS:"cdn.livefyre.com/libs/commentcount/v1.0/commentcount.js",siteid:"310256",siteURL:"http://www.foxnews.com/",profile:"http://quill.foxnews-1.fyre.co/profile/",activityAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://www.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"};return conf}(),CONFIG.janrain=function(){var conf={appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:function(){var url="widget-cdn.rpxnow.com/load/login.foxnews.com";return window.location.protocol.indexOf("https")>-1&&(url="rpxnow.com/load/login.foxnews.com"),url}(),shareAuthWidget:function(){var url="widget-cdn.rpxnow.com/load/login.foxnews.com";return window.location.protocol.indexOf("https")>-1&&(url="rpxnow.com/load/login.foxnews.com"),url}(),appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="};return conf}(),CONFIG.whatcounts=function(){var conf={subdomain:"v8-qa",subscribe:"http://www.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://www.foxnews.com/feeds/app/newsletters/"};return conf}(),CONFIG.styleUrl=["//"+(isLive()?"":"qa.")+"global.fncstatic.com/static/v/all/css/janrain.orig.css"],CONFIG.editProfile="http://www.foxnews.com/community/user/profile/edit",CONFIG.xdcomm=window.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html",CONFIG.logout=window.location.protocol+"//"+location.host+"/static/v/all/html/logout.html",CONFIG.templateUrl="/static/v/all/html/auth-tpl.html"):(CONFIG={livefyre:{network:"foxnews-1.fyre.co",domain:"cdn.livefyre.com",jsURL:"cdn.livefyre.com/Livefyre.js",commmentJS:"cdn.livefyre.com/libs/commentcount/v1.0/commentcount.js",siteid:"310256",profile:"http://quill.foxnews-1.fyre.co/profile/",siteURL:"http://www.foxnews.com/",activityAPI:"http://v8-qa.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://v8-qa.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://v8-qa.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",el:"livefyre_comment_stream"},janrain:{appUrl:"https://fox-news-dev.rpxnow.com",apiURL:"https://fox-news.dev.janraincapture.com/",jsURL:function(){var url="widget-cdn.rpxnow.com/load/fox-news-dev";
return window.location.protocol.indexOf("https")>-1&&(url="rpxnow.com/load/fox-news-dev"),url}(),shareAuthWidget:function(){var url="widget-cdn.rpxnow.com/load/fox-news-dev";return window.location.protocol.indexOf("https")>-1&&(url="rpxnow.com/load/fox-news-dev"),url}(),appId:"n49qmf6h6ssvuvnevbxgj88h97",clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q",captureServer:"https://fox-news.dev.janraincapture.com",federateServer:"https://fox-news-dev.janrainsso.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news-dev",publicRequestAPI:"http://v8-qa.foxnews.com/feeds/app/user/photos?username="},whatcounts:{subdomain:"v8-qa",subscribe:"http://v8-qa.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://v8-qaportala.lan.vig.tpa.foxnews.com:8080/foxnewsletter/unsubscribe.json"}},CONFIG.styleUrl=["http://qa.global.fncstatic.com/static/v/all/css/janrain.orig.css"],CONFIG.editProfile="http://qa.global.fncstatic.com/static/v/all/html/edit-profile.html"),CONFIG}(),window.AuthenticationService_Janrain=function($,window){function isTabletOrMobileView(){return $.browser.device&&$(window).width()<=1025?!0:!1}function cacheBuster(freq,type){freq=freq||2;var date=new Date;type=date.getMilliseconds()||"";var str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString()+type,hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseInt(freq,10)).toString():"")}window.console||(window.console={log:function(){},error:function(){}});var log=function(){var loggerON=window.location.search.indexOf("log=y")>-1?!0:!1;if(loggerON&&window.console)try{console.log.apply(console,arguments)}catch(err){console.log("err",err,arguments)}};$.browser.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());var AUTH=function(){var auth=function(importArrFunc){var x,l,holder={};for(x=0,l=importArrFunc.length;l>x;x+=1)importArrFunc[x][2].prototype=importArrFunc[x][1],holder[importArrFunc[x][0]]=new importArrFunc[x][2];for(var c in holder)auth.prototype[c]=holder[c]};return auth.prototype.badgeville={trigger:function(){return!1}},auth}(),backplaneConst=function(){},janrainConst=function(){},livefyreConst=function(){},toolConst=function(){},eventsConst=function(){},requireConst=function(){},userConst=function(){},omnitureConst=function(){},whatCConst=function(){},domConst=function(){},idmsConst=function(){},backplaneProto={},janrainProto={},livefyreProto={},requireProto={},toolProto={},eventsProto={},userProto={},omnitureProto={},whatCProto={},domProto={},idmsProto={},CONFIG=window.FOX_AuthJanrain_CONFIG;toolConst=function(){},toolProto={loadExtJs:function(src,id,callback,type){var e=document.createElement("script");e.type="text/javascript",e.id=id||"",e.async=!0,e.setAttribute("type","text/javascript"),"share"===type&&(src=CONFIG.janrain.shareAuthWidget),e.src=document.location.protocol+"//"+("www"===type?"www.":"")+src,"function"==typeof callback&&(e.onload=e.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(callback(),e.onload=e.onreadystatechange=null)}),"function"==typeof callback&&(e.onload=e.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(callback(),e.onload=e.onreadystatechange=null)});var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(e,s)},assert:function(entity,type){return typeof entity===type?!0:!1},domTest:function(elm){return 0!==elm.length?!0:!1},getDomain:function(){var loc=window.location,host=loc.hostname,arr=(loc.protocol,host.split("."));return"www."+arr[arr.length-2]+"."+arr[arr.length-1]}},domConst=function(){},domProto={setDomReady:function(callbackFN){var auth,acc,userOptions,multiple=$("div[id='account']").size()>1?!0:!1,body=$("body"),secContent=$("#section-content");multiple?(auth=$("ul[id='authentication']"),acc=$("div[id='account']")):(auth=$("#authentication"),acc=$("#account")),userOptions=acc.find(".user-options"),auth.each(function(){$(this).find("> li:last-child").addClass("acc-btn-login")}),userOptions.each(function(){$(this).find("ul > li:first-child").addClass("uo-btn-profile"),$(this).find("ul > li:last-child").addClass("uo-btn-logout")});var foo={acc:acc,body:body,user:acc.find(".username"),login:auth.find(".acc-btn-login"),authen:auth,name:userOptions.find("strong"),register:auth.find("foo"),noAccount:auth,userOptions:userOptions,accountNav:acc.find(acc.find(".user").size()>0?".user":".encapsulate"),profile:userOptions.find(".uo-btn-profile"),logout:userOptions.find(".uo-btn-logout"),hasAccount:acc.find(".username"),publicProfile:function(){return{likes:$("#fox_lf_likes"),shares:$("#fox_jr_shares"),comments:$("#fox_lf_comments")}},whatCounts:function(){return $(".news-sub-form")},sectionContent:secContent};AUTH_Manager.onReady("capture",function(){}),callbackFN(foo)}},requireConst=function(){},requireProto={token:null,template:null,getToken:function(){var _t=this;try{window.localStorage&&(_t.token=localStorage.getItem("janrainCaptureToken"))}catch(e){log(e)}},classLogin:"capture_modal_open",janrainFlow:!1,state:{janrain:!1,livefyre:!1,template:!1,backplane:!1},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},whatcounts:{}},loadTemplate:function(){var tpl,inline,_t=this,normalFlow=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],profileFlow=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess"],specialFlow=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];if(tpl=document.createElement("div"),tpl.id="templateHolder",inline=window.FOX_Janrain_Auth_TPL?!0:!1){var z,d,template=$(FOX_Janrain_Auth_TPL);if("profileFlow"===_t.janrainFlow||"publicFlow"===_t.janrainFlow){for(domProto.setDomReady.sectionContent.append(tpl),z=0,len=template.length;z<len;z+=1)for(d=0,dlen=profileFlow.length;d<dlen;d+=1)normalFlow[d]===template[z].id&&(template[z].innerHTML="",template[z].id="");$(tpl).html(template),janrainProto.init()}else if("authFlow"===_t.janrainFlow){for(domProto.setDomReady.body.append(tpl),z=0,len=template.length;z<len;z+=1)for(d=0,dlen=normalFlow.length;d<dlen;d+=1)normalFlow[d]===template[z].id&&(template[z].innerHTML="",template[z].id="");$(tpl).html(template),janrainProto.init()}else{domProto.setDomReady.sectionContent.append(tpl);for(z=0,len=template.length;z<len;z+=1){var found=!1;for(d=0,dlen=specialFlow.length;d<dlen;d+=1)specialFlow[d]===template[z].id&&(found=!0);found||(template[z].innerHTML="",template[z].id="")}$(tpl).html(template),janrainProto.init()}requireProto.state.template=!0}else $.ajax({type:"GET",url:CONFIG.templateUrl,dataType:"html",beforeSend:function(){},success:function(data){if("profileFlow"===_t.janrainFlow)domProto.setDomReady.sectionContent.append(tpl),tpl=$(tpl).html(data);else{var holder=data.replace(/\'/gi,"'");domProto.setDomReady.body.append(tpl),tpl=domProto.setDomReady.body.find("#templateHolder"),tpl.html(holder),tpl.find("#editProfile").remove()}requireProto.state.template=!0,janrainProto.init()}})}},backplaneConst=function(){},backplaneProto={},janrainConst=function(){switch(window.janrain={},janrain.settings={},janrain.settings.capture={},janrain.settings.appUrl=CONFIG.janrain.appUrl,janrain.settings.custom=!0,janrain.settings.capture.flowVersion="HEAD",janrain.settings.capture.responseType="token",janrain.settings.capture.flowName="foxNewsFlow",janrain.settings.capture.stylesheets=CONFIG.styleUrl,janrain.settings.tokenUrl=window.location.protocol+"//"+window.location.host+"/",janrain.settings.capture.appId=CONFIG.janrain.appId,janrain.settings.capture.redirectUri=window.location.protocol+"//"+window.location.host,janrain.settings.capture.clientId=CONFIG.janrain.clientId,janrain.settings.capture.captureServer=CONFIG.janrain.captureServer,janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",janrain.settings.capture.editPhotoAfterUpload=!0,janrain.settings.type="embed",janrain.settings.tokenAction="event",janrain.settings.format="two column",janrain.settings.capture.modalBorderOpacity=0,janrain.settings.capture.modalBorderWidth=0,janrain.settings.capture.modalBorderRadius=2,janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>',janrain.settings.capture.modalBorderColor="transparent",janrain.settings.language="en",janrain.settings.capture.setProfileCookie=!0,janrain.settings.capture.keepProfileCookieAfterLogout=!0,janrain.settings.capture.hideSavedProfileMessageDelay=15e3,requireProto.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true",janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=!0,janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify",janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword",janrain.settings.capture.setProfileData="true",janrain.settings.capture.registerFlow="socialRegistration"}janrain.settings.capture.backplane=!0,janrain.settings.capture.backplaneBusName=CONFIG.janrain.backplaneBusName,janrain.settings.capture.federate=!0,janrain.settings.capture.federateServer=CONFIG.janrain.federateServer,janrain.settings.capture.federateXdReceiver=CONFIG.xdcomm,janrain.settings.capture.federateLogoutUri=CONFIG.logout,janrain.settings.share={},janrain.settings.share.providers=["facebook","twitter","linkedin","email"],janrain.settings.share.providersEmail=["google","yahoo"],janrain.settings.share.modes=["broadcast","contact"],janrain.settings.share.attributionDisplay=!1,janrain.settings.share.previewMode=0,janrain.settings.share.modalBackgroundColor="#000000",janrain.settings.share.modalBorderRadius="2",janrain.settings.share.modalOpacity="0",janrain.settings.share.modalWidth="0",janrain.settings.share.shortenUrl=!1,janrain.settings.share.bodyBackgroundColor="#F3F3F3",janrain.settings.share.bodyBackgroundColorOverride=!0,janrain.settings.share.bodyColor="#333",janrain.settings.share.bodyContentBackgroundColor="#ffffff",janrain.settings.share.bodyFontFamily="Helvetica",janrain.settings.share.bodyTabBackgroundColor="#F3F3F3",janrain.settings.share.bodyTabColor="#424242",janrain.settings.share.elementBackgroundColor="#f3f3f3",janrain.settings.share.elementBorderColor="#ccc",janrain.settings.share.elementBorderRadius="3",janrain.settings.share.elementButtonBorderRadius="3",janrain.settings.share.elementButtonBoxShadow="0",janrain.settings.share.elementColor="#333333",janrain.settings.share.elementHoverBackgroundColor="#333333",janrain.settings.share.elementLinkColor="#173951",janrain.settings.social={},janrain.settings.social.providers=["facebook","twitter","native-googleplus"],janrain.settings.social.orientation="horizontal",janrain.settings.social.formFactor="bar",janrain.settings.social.providerFormats={twitter:{message:"{{ message }} | {{ url }} "}},"profileFlow"===requireProto.janrainFlow?janrain.settings.packages=["login","capture"]:"publicFlow"===requireProto.janrainFlow?(janrain.settings.packages=["login","capture"],janrain.settings.capture.stylesheets=[]):janrain.settings.packages=["login","capture","share"],janrain.ready=!0},janrainProto={config:{capture:{url:CONFIG.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:null,sessionType:"",reset:!1,init:function(){var _t=this;return _t.widgetOnload(),_t.captureWidgetOnLoad(),toolProto.loadExtJs(_t.config.capture.url,_t.config.capture.id,_t.loadedJS.loadJan),this},API:{requestSent:!1,url:CONFIG.janrain.apiURL,token:"",updateAPI:function(type,value){var _t=this;return"livefyre"===type?{type_name:"user",access_token:_t.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+userProto.userLivefyre.id+'"}}}'}:"livefyre_temp"===type?{type_name:"user",access_token:_t.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+userProto.uuid+'@foxnewsprod.fyre.co"}}}'}:"share"===type?(null==userProto.userJanrain.shares&&(userProto.userJanrain.shares=0),userProto.userJanrain.shares+=1,{type_name:"user",access_token:_t.token,attributes:'{"shares" : '+userProto.userJanrain.shares+"}"}):"test"===type?{type_name:"user",access_token:_t.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+value+'"}}}'}:void 0},execute:function(entity,attr){var _t=this,successCB="FOX_Janrain_EXEC";attr.jsonp=successCB,"function"!=typeof window[successCB]&&(window[successCB]=function(data){return 414===data.code?(eventsProto.janrain.tokenRefreshed(),eventsProto.janrain.signOut(),eventsProto.domEvents.logoutSuccess(),!1):310===data.code?(eventsProto.domEvents.logoutSuccess(),eventsProto.janrain.signOut(),!1):data.code||data.stat?void("ok"===data.stat&&(_t.requestSent=!0,userProto.uuid=data.result.uuid,userProto.email=data.result.email,userProto.userJanrain=data.result,userProto.displayName=data.result.displayName,eventsProto.displayName(),"block"===$("#authentication").css("display")&&eventsProto.domEvents.loginSuccess(),domProto.setDomReady.acc.hasClass("alt-style")&&eventsProto.displayShowsProfile(),idmsProto.idmsLogin(janrainProto.API.token,userProto.email,userProto.uuid),(null==data.result.externalServices.livefyre.livefyre_id||"null"===data.result.externalServices.livefyre.livefyre_id||""===data.result.externalServices.livefyre.livefyre_id)&&_t.update("entity.update",_t.updateAPI("livefyre_temp")))):(eventsProto.domEvents.logoutSuccess(),eventsProto.janrain.signOut(),!1)}),$.ajax({data:attr,url:_t.url+entity,dataType:"script",async:!0,cache:!0})},update:function(entity,attr){var _t=this,successCB="FOX_Janrain_UPD";attr.jsonp=successCB,"function"!=typeof window[successCB]&&(window[successCB]=function(){}),$.ajax({data:attr,url:_t.url+entity,dataType:"script",async:!0,cache:!0})}},loadedJS:{loadJan:function(){"object"==typeof janrain&&(requireProto.state.janrain=!0)}},widgetOnload:function(){return window.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain")},this},captureWidgetOnLoad:function(){return window.janrainCaptureWidgetOnLoad=function(){var je=janrain.events;AUTH_Manager.fireReady("capture"),je.onCaptureLoginSuccess.addHandler(eventsProto.janrain.successfulLogin),je.onCaptureRegistrationSuccess.addHandler(eventsProto.janrain.successfulRegistration),je.onCaptureRegistrationStart.addHandler(eventsProto.janrain.registrationStart),je.onCaptureAccessDenied.addHandler(eventsProto.janrain.accessDenied),je.onCaptureAccountDeactivateSuccess.addHandler(eventsProto.janrain.deactivateSuccess),je.onCaptureLoginFailed.addHandler(eventsProto.janrain.loginFailed),je.onAuthWidgetLoad.addHandler(eventsProto.janrain.onAuthWidgetLoad),je.onModalClose.addHandler(eventsProto.janrain.onModalClose),je.onModalOpen.addHandler(function(){$(document).keyup(function(event){27===event.keyCode&&$(".janrain_modal_closebutton").trigger("click")})}),je.onCaptureValidationSuccess.addHandler(eventsProto.janrain.validation.onValidationSuccess);var livefyreDom=toolProto.domTest($("#livefyre_comment_stream"))||toolProto.domTest($(".lf-app-embed")),dq=$("#disqus_thread");if(livefyreDom)dq.remove(),requireProto.livefyreSet=!1;else{var lf=document.createElement("div");lf.id="livefyre_comment_stream",dq.length>0&&(dq.attr("id","livefyre_comment_stream"),dq.empty(),livefyreDom=!0),requireProto.livefyreSet=!0}(livefyreDom||window.enableLivefyreLazyload)&&"authFlow"===requireProto.janrainFlow&&je.onCaptureBackplaneReady.addHandler(eventsProto.janrain.backplaneReady),je.onCaptureRenderComplete.addHandler(eventsProto.janrain.screen.onRenderComplete),je.onCaptureProfileSaveSuccess.addHandler(eventsProto.janrain.screen.editProfile.onProfileUpdate),je.onCaptureAutoSaveUpdate.addHandler(eventsProto.janrain.screen.editProfile.onProfileAutoSave),je.onCaptureProfileSaveFailed.addHandler(eventsProto.janrain.screen.editProfile.onProfileFailedSave),je.onCaptureScreenShow.addHandler(eventsProto.janrain.screen.onScreenShow),je.onCaptureModalReady.addHandler(eventsProto.janrain.screen.uiReady),je.onCaptureSessionFound.addHandler(eventsProto.janrain.sessionFound),je.onCaptureSessionNotFound.addHandler(eventsProto.janrain.sessionNotFound),je.onCaptureSessionEnded.addHandler(eventsProto.janrain.sessionEnded),je.onCaptureLoginSuccess.addHandler(janrainProto.isLoggedIn.masterTrigger),je.onCaptureRegistrationSuccess.addHandler(janrainProto.isLoggedIn.masterTrigger),je.onCaptureSessionFound.addHandler(janrainProto.isLoggedIn.masterTrigger),je.onCaptureSessionNotFound.addHandler(janrainProto.isLoggedIn.masterTrigger),je.onCaptureSessionEnded.addHandler(janrainProto.isLoggedIn.masterTrigger),je.onCaptureExpiredToken.addHandler(eventsProto.janrain.tokenExpired),je.onCaptureFederateRefreshedToken.addHandler(eventsProto.janrain.onRefreshToken),je.onCaptureError.addHandler(eventsProto.janrain.errorEvent),je.onCaptureEmailSent.addHandler(eventsProto.janrain.emailSent),window.janrain.capture.ui.start()},this},extend:function(name,func){janrain.events[name].addHandler(func)},isLoggedIn:{buffer:[],hasActiveSession:function(func){func(janrain.capture.ui.hasActiveSession())},eventDriven:function(type,func){var _t=this;_t.buffer.push([type,func])},masterTrigger:function(){var _t=janrainProto.isLoggedIn;if(0===_t.buffer.length)return!1;for(var session=janrain.capture.ui.hasActiveSession(),found=!1,x=0,l=_t.buffer.length;l>x;x+=1){switch(_t.buffer[x][0]){case"found":session&&"found"===janrainProto.sessionType&&(_t.buffer[x][1](session),found=!0);break;case"notfound":session||"notfound"!==janrainProto.sessionType||(_t.buffer[x][1](session),found=!0);break;case"logout":session||"logout"!==janrainProto.sessionType||(_t.buffer[x][1](session),found=!0);break;case"signin":session&&"signin"===janrainProto.sessionType&&(_t.buffer[x][1](session),found=!0);break;case"register":session&&"register"===janrainProto.sessionType&&(_t.buffer[x][1](session),found=!0);break;default:_t.buffer[x][1](session)}if(found)break}}},publicProfileLinkUUID:function(){}},livefyreConst=function(){"undefined"!=typeof LF?(toolProto.loadExtJs(livefyreProto.commentsUrl),livefyreProto.commentsCount(!0)):(toolProto.loadExtJs(livefyreProto.commentsUrl),livefyreProto.commentsCount(!1))},window._livefyreProto=livefyreProto={url:CONFIG.livefyre.jsURL,config:[],network:CONFIG.livefyre.network,commentsUrl:CONFIG.livefyre.commentJS,requiredModules:["fyre.conv#3","auth","backplane-auth-plugin#0"],eventsDelegate:{},commentsNumber:0,customStrings:{sortLabel:"SORT BY",editorDisabled:window._lf_editorDisabled||"This conversation is currently closed to new comments."},init:function(){var self=this;if(self._scriptload)$.loadAttempt(50,150,function(){return"object"==typeof window.Livefyre?!0:!1},function(){livefyreProto.lfLoaded()});else{self._scriptload=!0,AUTH_Manager.addInstance("livefyre.widget",["livefyre.widget"]);var loadOnly=window.enableLivefyreLazyload?!0:!1;toolProto.loadExtJs(livefyreProto.commentsUrl),toolProto.loadExtJs(livefyreProto.url,"",function(){livefyreProto.lfLoaded(loadOnly)})}},lfLoaded:function(loadOnly){var self=this;self._delegated||(self._delegated=!0,livefyreProto.events.eventsDelegate(),AUTH_Manager.fireReady("livefyre.widget")),loadOnly||self._metaSet||(self._metaSet=!0,livefyreProto.grabMetaData())},grabMetaData:function(){var _t=this,holder={},meta=$('meta[name="livefyreconfig"]'),betaTest=!1,siteId=meta.attr("siteId")?meta.attr("siteId"):CONFIG.livefyre.siteid,numVis=null,maxVis=null,livefyreDom=toolProto.domTest($(".lf-app-embed"));isTabletOrMobileView()&&(numVis=5,maxVis=5),meta.length>0?holder={el:CONFIG.livefyre.el,siteId:siteId,checksum:meta.attr("checksum"),articleId:meta.attr("articleId"),collectionMeta:meta.attr("collectionmeta"),initialNumVisible:numVis,maxVisible:maxVis,strings:livefyreProto.customStrings}:(livefyreDom===!1||meta.length<=0)&&($("#livefyre_comment_stream").html(""),holder={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream",initialNumVisible:numVis,maxVisible:maxVis},betaTest=!0),(!betaTest||livefyreDom)&&(livefyreProto.config.push(holder),1===$("#livefyre_comment_stream").length&&_t.setUpLiveFyre())},setUpLiveFyre:function(){if(window.livefyre_collections_flag)return!1;var _t=this,requirePackages=_t.requiredModules,Livefyre=window.Livefyre;Livefyre.require(requirePackages,function(Conv,auth,backplanePluginFactory){log("requirePackages",requirePackages),log("_t.network",_t.network),log("_t.eventsDelegate",_t.eventsDelegate),log("_t.config",_t.config),log("livefyreProto.events.doLivefyreAuth",livefyreProto.events.doLivefyreAuth),window.LFauth=auth,auth.plugin(backplanePluginFactory(_t.network)),auth.delegate(_t.eventsDelegate),new Conv({network:livefyreProto.network,authPageReload:!0},_t.config,livefyreProto.events.doLivefyreAuth)})},commentsCount:function(){if(self._has_requested_commentCount)return!1;self._has_requested_commentCount=!0;var trigger=function(){var target=$(".livefyre-commentcount"),meta=$("meta[name='livefyreconfig']");target.each(function(){var el=$(this),siteId=el.attr("data-lf-site-id")||meta.attr("siteId"),articleId=el.attr("data-lf-article-id")||meta.attr("articleId");siteId&&articleId&&(el.attr("data-lf-site-id",siteId),el.attr("data-lf-article-id",articleId)),"nation"===$("meta[name='prism.section']").attr("content")&&el.attr("data-lf-cc-format","${count}")}),window.LF.CommentCount({replacer:function(element,count){var el=$(element),str=count+" Comment"+(1===count?"":"s");el.attr("data-lf-cc-format")&&(str=el.attr("data-lf-cc-format").replace("${count}",count)),element.innerHTML=str}})};$.loadAttempt(500,150,function(){return"object"==typeof window.LF?!0:!1},function(){trigger()})},events:{eventsDelegate:function(){var authDelegate=livefyreProto.eventsDelegate;authDelegate.login=function(errback){function successCallback(){janrain.events.onCaptureLoginSuccess.removeHandler(successCallback),janrain.events.onModalClose.removeHandler(failureCallback),errback()}function failureCallback(e){janrain.events.onModalClose.removeHandler(failureCallback),janrain.events.onCaptureLoginSuccess.removeHandler(successCallback),errback(e||new Error("Error logging in with Janrain Capture"))}window.Backplane.expectMessages("identity/login"),eventsProto.janrain.signin(),janrain.events.onCaptureLoginSuccess.addHandler(successCallback),janrain.events.onModalClose.addHandler(failureCallback)},authDelegate.logout=function(errback){window.Backplane.resetCookieChannel(),janrain.capture.ui.endCaptureSession(),window.livefyreLogout=function(){window.Backplane.expectMessages("identity/logout")},janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout),errback()},authDelegate.viewProfile=function(user){if(user.id.indexOf("twitter")>-1||user.id.indexOf("facebook")>-1)return!1;var id=user.id.split("@")[0];eventsProto.janrain.displayPublicProfile(id)},authDelegate.editProfile=function(){eventsProto.editProfile()},authDelegate.share=function(data){data.success()}},doLivefyreAuth:function(widget){var self=this;self.FX_LF_MOD_INT=!1,clearTimeout(self.FX_LF_MOD_INT);var CURRENT_USER=!1,triggerModCheck=function(mod){log("[Livefyre] Checking...");var items=$(".fyre-comment-stream article.fyre-comment-article"),len=items.length;items.each(function(i){var el=$(this),target=el.find(".fyre-pending:first"),isPending=0!==target.size()?!0:!1;userId=el.find(".fyre-comment-user:first").attr("data-author-id")||"",mod?(target.addClass("active"),el.is(":hidden")&&el.show()):(target.removeClass("active"),isPending&&(userId===CURRENT_USER?el.show():el.hide())),i===len-1&&(self.FX_LF_MOD_INT=setTimeout(function(){triggerModCheck(mod)},3e3))}),0===len&&(self.FX_LF_MOD_INT=setTimeout(function(){triggerModCheck(mod)},3e3))};triggerModCheck(!1),widget.on("userLoggedIn",function(data){log("[Livefyre] Logged in...");var checkJanrainAuth=setInterval(function(){janrain.capture.ui.hasActiveSession()===!1&&(window.LFauth.logout(),clearInterval(checkJanrainAuth))},1e3),mod=data.isModerator?!0:!1;CURRENT_USER=data.id||!1,clearTimeout(self.FX_LF_MOD_INT),mod?(log("[Livefyre] Moderator"),triggerModCheck(!0)):triggerModCheck(!1)}),widget.on("userLoggedOut",function(){log("[Livefyre] Logged out..."),CURRENT_USER=!1,clearTimeout(self.FX_LF_MOD_INT),triggerModCheck(!1)}),widget.on("commentShared",function(){janrainProto.API.update("entity.update",janrainProto.API.updateAPI("share"))}),widget.on("commentPosted",function(){$(".fyre-editor-editable").html(""),omnitureProto.commentPost()}),widget.on("commentLiked",function(data){data.targetAuthorId.split("@")[0],data.targetId}),widget.on("commentFlagged",function(data){$("#fyre-message-"+data.targetId).find(".fyre-comment-user").attr("data-author-id").split("@")[0]}),widget.on("commentCountUpdated",function(count){$(".livefyre-commentcount").each(function(){var el=$(this),str=count+" Comment"+(1===count?"":"s");el.attr("data-lf-cc-format")&&(str=el.attr("data-lf-cc-format").replace("${count}",count)),el.html(str)}),livefyreProto.commentsNumber=count}),widget.on("initialRenderComplete",function(){window.FOX_LivefyreIntegrationService&&FOX_LivefyreIntegrationService.isReady(),eventsProto.livefyre.displayLogo(),eventsProto.livefyre.hashComment(),livefyreProto.events.omniture()})},omniture:function(){var dom={showMore:$(".fyre-stream-more-container"),displayComments:$(".comments")};dom.showMore.bind("click",function(){omnitureProto.commentLoad()}),dom.displayComments.bind("click",function(){omnitureProto.commentLoad()})}},API:{configUrl:function(uuid,cb){var url=CONFIG.livefyre.activityAPI,ret=url.replace("{uuid}",uuid).replace("{cb}",cb);return ret},displayDataToPublicProfile:function(uuid){var _t=this,callBack="FOX_Livefyre_PublicRequest";window[callBack]=window[callBack]||function(response){userProto.commentCount=response.data.user_comment_count,userProto.likeCount=response.data.user_liked_count,userProto.rating=response.data.user_rating,eventsProto.livefyre.populatePublicProfile()};var url=_t.configUrl(uuid,callBack)+"&userInfoFormat=true";$.ajax({url:url,dataType:"script",data:{cb:cacheBuster(5)},async:!0,cache:!0})},onProfileUpdate:function(){var url=CONFIG.livefyre.apiProfile,cb="FOX_livefyreProfileUpdate";window[cb]=function(){},$.ajax({url:url+janrainProto.API.token+"&callback="+cb,dataType:"script",async:!0,cache:!0})},onLoginSuccessFromJanrain:function(){var commentDiv=$("#livefyre_comment_stream"),loggedOut=commentDiv.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),sText="Signing In...";$.loadAttempt(250,150,function(){return loggedOut&&loggedOut.text()!==sText?!0:!1},function(){loggedOut.text(sText)})},getEventsDelegate:function(){var ret=livefyreProto.eventsDelegate?livefyreProto.eventsDelegate:{};return ret}},activityTab:{configUrl:function(uuid,cb){var url="profileFlow"===requireProto.janrainFlow?CONFIG.livefyre.activityAPI:CONFIG.livefyre.activityActiveAPI;return url.replace("{uuid}",uuid).replace("{cb}",cb)},uuid:null,location:null,activityWraper:null,domStorage:null,ajaxRequestsTries:3,currentNumberAttempts:0,maxCommentsGrab:10,curTime:function(){return window.AKAMAI_TIME_HELPER.getCurrent()},backup:null,user:{name:null,image:null},initCallFromJanrain:function(){var _t=this;_t.cloneMarkUp()},cloneMarkUp:function(){var _t=this,livefyreTemplate=$("#livefyre-wrap"),livefyreCloned=livefyreTemplate.clone();_t.activityWraper=livefyreCloned,livefyreTemplate.remove(),$("#account-wrap").before(livefyreCloned),_t.tabActivity(),_t.gatherData()},tabActivity:function(){eventsProto.domEvents.tabControlsForActivityPages()},assessDom:function(){var _t=this;if(null==_t.dom){var structure=$("#livefyre-Activity").find(".livefyre-pro-activity"),ul=structure.find("ul");_t.dom={image:$("#livefyre-pro-image").find("> img"),ul:ul,name:structure.find("h1"),body_plain:"comment",url:"link",created_at:"time",conv_title:"whereTitle",structure:structure}}return _t.dom},dom:null,manageDomCopy:function(){var _t=this,copy=_t.activityWraper,str=copy.find(".livefyre-pro-activity"),ul=str.find(".prof-activity ul");return{image:copy.find("#livefyre-pro-image").find("> img"),ul:ul,name:str.find("h1")}},gatherData:function(uuid,location){uuid=uuid||userProto.uuid;var _t=this,callBack="FOX_liveFYRE_Activity",loc=location||"private";return _t.uuid=uuid,_t.location=loc,"undefined"==typeof uuid?!1:(_t.location=location||"private","private"===_t.location&&_t.gatherNameAndImage(),window[callBack]||(window[callBack]=function(response){_t.populateMarkup(response)}),void $.ajax({url:_t.configUrl(uuid,callBack),dataType:"script",data:{cb:cacheBuster(5)},async:!0,cache:!0}))},hashTagGatherer:function(){var _t=this,hash=window.location.hash;return""===hash?_t:(_t.user.name=hash.replace("#",""),_t)},hachChanged:function(){},getPhotosAndId:function(){var _t=this;return""===_t.user.name||null==_t.user.name?(_t.populateResponce({response:{status:"fail"}}),!1):void $.ajax({url:CONFIG.janrain.publicRequestAPI+_t.user.name,dataType:"json",data:{cb:cacheBuster(5)},async:!0,cache:!0,success:function(response){_t.populateResponce(response)}})},populateResponce:function(responce){var _t=livefyreProto.activityTab;if("ok"!==responce.status){var dom=_t.assessDom();return dom.image.parent().hide(),dom.structure.html("User not found! Please make sure that the user is correct"),!1}_t.user.image=responce.result.photos.length>0?responce.result.photos[2].value:"http://cdn.quilt.janrain.com/2.1.2/profile_default.png",_t.uuid=responce.result.uuid,_t.gatherData(_t.uuid,"public")},gatherNameAndImage:function(){var _t=this;switch(_t.location){case"private":_t.user.name=userProto.userJanrain.displayName,_t.user.image=userProto.userJanrain.photos.length>0?userProto.userJanrain.photos[2].value:"http://cdn.quilt.janrain.com/2.1.2/profile_default.png";break;case"public":_t.obtainDataFromExternalJanrain()}},obtainDataFromExternalJanrain:function(){},populateMarkup:function(response){var dom,_t=livefyreProto.activityTab,liStorage=[],curTime=_t.curTime();if(404===response.code)return dom=_t.assessDom(),dom.image.parent().hide(),dom.structure.html("User not found! Please make sure that the user is correct"),!1;if(200!==response.code&&_t.gatherData(_t.uuid,_t.location),0===response.data.length)return dom=_t.assessDom(),dom.image.parent().hide(),dom.structure.html("User has no comments"),!1;if(200===response.code&&requireProto.janrainFlow){var comments=response.data,max=10,len=comments.length;len=len>max?max:len;for(var populateFeed=function(comments){function manageBodyHtml(html){var body=$("<div/>").html(html);return body.find("span").length>0?(body.find("span").each(function(){var el=$(this),name=el.text();if(el.text("@"+name),el.wrap("a"),"livefyre"!==el.attr("provider")){var link=el.attr("profile_url");el.parent().attr("target","_blank"),el.parent().attr("href",link)}else el.parent("a").removeAttr("href")}),body.html()):html}var arr=[],commentTime=new Date(_t.correctingCommentTime(comments.created_at)),timeDiffence=_t.createdSinceTime(commentTime,curTime);return arr.push("<li><div>"),arr.push("<p>"+manageBodyHtml(comments.body_html)+"</p>"),arr.push("<span>"+timeDiffence.str+' <a href="'+comments.url+'" >'+comments.conv_title+"</a></span>"),arr.push('</div><a href="'+comments.url+'" >View</a></li>'),arr.join("")},x=0;len>x;x+=1)liStorage.push(populateFeed(comments[x]));if(liStorage=liStorage.join(""),"private"===_t.location){var domCopy=_t.manageDomCopy();
domCopy.ul.html(liStorage),_t.insertNewMarkupIntoTab()}else dom=_t.assessDom(),dom.ul.html(liStorage),_t.insertNewMarkupIntoTab()}},parseThroughSpan:function(){$(".prof-activity > ul").find("li").each(function(){var el=$(this);el.find("span").each(function(){var it=$(this);if("livefyre"===it.attr("provider")){var uuid=it.attr("jid").split("@")[0];it.parent("a").removeAttr("href"),it.bind("click",function(){janrain.capture.ui.getPublicProfile("publicProfile",uuid)})}})})},insertNewMarkupIntoTab:function(){var _t=this;if("public"===_t.location){var dom=_t.assessDom();dom.name.html(_t.user.name),dom.image.attr("src",_t.user.image)}else{var domCopy=_t.manageDomCopy();domCopy.name.html(_t.user.name),domCopy.image.attr("src",_t.user.image)}_t.parseThroughSpan()},correctingCommentTime:function(comTime){var isDST=window.AKAMAI_TIME_HELPER.isDST(),diff="GMT"+(isDST.val?"+100":"-000"),sp=comTime.split("T"),dateStr=sp[0],timeStr=sp[1];dateStr=dateStr.split("-"),dateStr=[dateStr[1],dateStr[2],dateStr[0]].join("/");var date=new Date([dateStr,timeStr,diff].join(" "));return date},createdSinceTime:function(val,currentTime){var _t=this,time=val,str=!1;if(!time)return{str:"",val:!1};var timeAgo=_t.dayDifferences(currentTime,time),strArr=[],plural=function(str,val){var ret=" "+str+(val>1?"s":"");return ret};if(timeAgo.s<0)str="Just Now on";else if(0===timeAgo.m&&0===timeAgo.d&&0===timeAgo.h)strArr.push(timeAgo.s+plural("second",timeAgo.s));else if(timeAgo.m<60&&0===timeAgo.h&&0===timeAgo.d)strArr.push(timeAgo.m+plural("minute",timeAgo.m)),timeAgo.s>0&&strArr.push(timeAgo.s+plural("second",timeAgo.s));else if(timeAgo.h>=1&&0===timeAgo.d)strArr.push(timeAgo.h+plural("hour",timeAgo.h)),timeAgo.m>0&&strArr.push(timeAgo.m+plural("minute",timeAgo.m));else if(timeAgo.d>=1&&timeAgo.d<=30)strArr.push(timeAgo.d+plural("day",timeAgo.d)),timeAgo.h>0&&strArr.push(timeAgo.h+plural("hour",timeAgo.h));else if(timeAgo.d>30&&timeAgo.d<=365){var month=Math.floor(timeAgo.d/30),days=timeAgo.d%30;strArr.push(month+plural("month",month)),days>0&&strArr.push(days+plural("day",days))}else timeAgo.d>365?str="1 year ago on":timeAgo.d>730&&(str="Many years ago on");str=str?str:strArr.join(", ")+" ago on";var obj={str:str,val:val};return obj},dayDifferences:function(curDate,oldDate){var diff=Date.parse(curDate)-Date.parse(oldDate);return isNaN(diff)?0/0:{diff:diff,ms:Math.floor(diff%1e3),s:Math.floor(diff/1e3%60),m:Math.floor(diff/6e4%60),h:Math.floor(diff/36e5%24),d:Math.floor(diff/864e5)}},displayDiffenceTime:function(timeObj){return""+timeObj.ms+" Months"+timeObj.d+" Days "+timeObj.m+" Minutes"},loadDataWhenFailed:function(){var _t=this;_t.copyToCopy()},copyToCopy:function(){var _t=this;$("#account-wrap").before($(_t.activityWraper)),_t.activityTab()}}},whatCConst=function(){this.url=""},whatCProto={config:{url:CONFIG.whatcounts.subscribe,iframeUrl:"http://www.foxnews.com/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",cbust:"&cb=",unsubURL:CONFIG.whatcounts.unsubscribe,token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxbusiness","foxnewsletter"],janrainHost:"&host=fox-news",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]}},dom:{email:null,newsList:null,load:function(){var _t=this;_t.email=$("#capture_editProfile_edit_email"),_t.newsList=$(".news-sub-form").find("label"),_t.signInform=$("#capture_traditionalRegistration_registrationForm"),_t.signInEmail=_t.signInform.find("#capture_traditionalRegistration_form_item_traditionalRegistration_emailAddress input"),_t.signInLabels=_t.signInform.find(".news-sub-form-reg label"),_t.signInIframeTarget=$("body")}},gatherData:function(){},janrainNewsAlerts:function(SLIDnum){var realm,newsId,JanrainIdRealmLookup={"3DC725E303A24F8D197DA3C8590F80E2":["foxnewsletter","172"],"3DC725E303A24F8D1C12D1E24CDEA25E":["foxnewsletter","166"],"3DC725E303A24F8D9C92271F5026F381":["foxnewsletter","106"],"3DC725E303A24F8D555BC7C7F3FD748B":["foxnewsletter","178"],"3DC725E303A24F8D836CEAE9B885C87D":["foxnewsletter","76"],"3DC725E303A24F8DCF015F07C61BABFD":["foxnewsletter","144"],"3DC725E303A24F8DA5DBC7FFD49BC2B8":["foxnewsletter","160"],C2F278094FACCEA62391025B7A52D8EB:["foxnews","35"],"3DC725E303A24F8DE5C63D14EAB8EF63":["foxnewsletter","162"],"3DC725E303A24F8D95ACD1C9C0564C20":["foxnewsletter","96"],"3DC725E303A24F8DA102192D9D5143D9":["foxnewsletter","173"],"3DC725E303A24F8DAB69E1C048904762":["foxnewsletter","153"],"3DC725E303A24F8DB05092D232355E43":["foxnewsletter","71"],"3DC725E303A24F8DE5173CCC4F027046":["foxnewsletter","171"],"3DC725E303A24F8D41CEA8699C0FE71E":["foxnewsletter","133"],D98A625593049BD2AC0F412BA1AF913A:["foxpromos","174"],D98A625593049BD2CBFB283F5508AF71:["foxpromos","43"],"3DC725E303A24F8D64B4C05965F09E1A":["foxnewsletter","99"],"5C84B893BD6D939E84FAE1A8E6E9525A":["foxbusiness","32"],"3DC725E303A24F8D12785ABB73469705":["foxbusiness","203"],"3DC725E303A24F8D870B96401050B31F":["foxnewsletter","90"],"3DC725E303A24F8D518A0FB222399489":["foxnewsletter","151"],"3DC725E303A24F8D39740C7B45D15F45":["foxnewsletter","69"],"3DC725E303A24F8D3540B4B6FB335FC8":["foxnewsletter","108"],"3DC725E303A24F8D5E4CD875B68955A6":["foxnewsletter","141"],"3DC725E303A24F8D7E5F3A553E2E6154":["foxnewsletter","122"],"3DC725E303A24F8D883169054890DC1B":["foxnewsletter","183"],"3DC725E303A24F8D02B1F9D9AAF16982":["foxnewsletter","97"],D98A625593049BD23B5BE4FDF9C2351F:["foxpromos","139"]},newsletterList={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},allListIds=[];if("undefined"!=typeof SLIDnum){var slids="string"==typeof SLIDnum?[SLIDnum]:$.isArray(SLIDnum)?SLIDnum:!1;if(slids)for(var x=0;x<SLIDnum.length;x++){var slid=SLIDnum[x];slid&&JanrainIdRealmLookup[slid]&&(realm=JanrainIdRealmLookup[slid][0],newsId=JanrainIdRealmLookup[slid][1],allListIds.push(newsId),newsletterList[realm].push(newsId))}}else realm="foxbusiness",newsId="32",allListIds="32"},lookUpUser:function(){var _t=this,cfg=_t.config;if(_t.dom.load(),_t.dom.email.length>0){var realmIndex=0,doneLookUp=function(){$(document).ready(function(){_t.checkNewsLetters()})},trigger=function(){var url=[cfg.url,cfg.find,cfg.r+cfg.realms[realmIndex],cfg.email+_t.dom.email.attr("value"),cfg.cbust+cacheBuster(2,"milliseconds")].join("");$.ajax({url:url,dataType:"text",type:"GET",success:function(data){var response;if(data){if($.browser.msie){data=data.replace(/\s+/g,"");var xml=new ActiveXObject("Microsoft.XMLDOM");xml.loadXML(data),response=$(xml).find("lists").text()}else response=$(data).find("lists").text();if(response){response=response.split(",");for(var successTrigger=function(z){""!==response[z]&&cfg.List[cfg.Realms[cfg.realms[realmIndex]]].push(response[z])},z=0,len=response.length;len>z;z+=1)successTrigger(z)}}3>realmIndex?(realmIndex++,trigger()):doneLookUp()},error:function(e){log("Error",e)}})};trigger()}else log("dom not ready!")},checkNewsLetters:function(){this.dom.load();var _t=this,cfg=(_t.dom.newsList,_t.config);for(var i in cfg.List)if(0!==cfg.List[i])for(var j=0;j<cfg.List[i].length;j++){var el=$("#"+i+"_"+cfg.List[i][j]);$(el).checked=!0,$(el[0]).attr("checked","checked")}_t.setEventListener(),eventsProto.janrain.screen.stateLookUp=!1},onFail:function(){window.scrollTo(0,1070),this.dom.load();var _t=this,newsletters=_t.dom.newsList,cfg=_t.config;newsletters.each(function(){var temp,el=$(this).find("input");temp=el.attr("id").split("_"),window._NewsletterBindings.subscribe[cfg.idRealms[temp[0]]].indexOf(temp[1])>-1&&(el[0].checked=!0),window._NewsletterBindings.original[cfg.idRealms[temp[0]]].indexOf(temp[1])>-1&&-1===window._NewsletterBindings.unsubscribe[cfg.idRealms[temp[0]]].indexOf(temp[1])&&(el[0].checked=!0)}),_t.setEventListener()},updateSub:function(){var _t=this,newletters=_t.dom.newsList,cfg=_t.config,subscribeListTemp={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},unsubscribeList={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]};newletters.each(function(){var temp,el=$(this).find("input");temp=el.attr("id").split("_"),el.is(":checked")?subscribeListTemp[cfg.idRealms[temp[0]]].push(temp[1]):eventsProto.janrain.screen.postAjaxInit?cfg.subscribeList[cfg.idRealms[temp[0]]].indexOf(temp[1])>-1&&unsubscribeList[cfg.idRealms[temp[0]]].push(temp[1]):cfg.List[temp[0]].indexOf(temp[1])>-1&&unsubscribeList[cfg.idRealms[temp[0]]].push(temp[1])}),cfg.subscribeList=subscribeListTemp;var realm,idList,url;for(realm in window._NewsletterBindings.unsubscribe)0!==window._NewsletterBindings.unsubscribe[realm].length&&(idList=window._NewsletterBindings.unsubscribe[realm].join(","),url=[cfg.unsubURL,cfg.unsub,cfg.email+_t.dom.email.attr("value"),cfg.listId+idList,cfg.r+realm,cfg.cbust+cacheBuster(2,"milliseconds")].join(""),window[cfg.cb]=function(){},$.ajax({url:url,dataType:"script",async:!0,cache:!0}));eventsProto.janrain.screen.postAjaxInit=!0},subscribeOnSignIn:function(){var _t=this;_t.dom.load();var newsletters=_t.dom.signInLabels,fEmail=_t.dom.signInEmail.val(),iframeTarget=_t.dom.signInIframeTarget,cfg=_t.config;for(var j in cfg.subscribeList)cfg.subscribeList[j]=[];$("#newsletter-subIframe").remove(),newsletters.each(function(){var temp,el=$(this).find("input");temp=el.attr("id").split("_"),el[0].checked&&cfg.subscribeList[cfg.idRealms[temp[0]]].push(temp[1])});for(var realm in cfg.subscribeList)if(0!==cfg.subscribeList[realm].length){var idList=cfg.subscribeList[realm].join(","),url=[cfg.iframeUrl,cfg.sub,cfg.email+fEmail,cfg.listId+idList,cfg.r+realm,cfg.cbust+cacheBuster()].join("");iframeTarget.append('<iframe height=0 width=0 class="subIframe" id="newsletter-subIframe" src="'+url+'"></iframe>')}},updateSubscribeState:function(){var _t=this;this.dom.load();var newletters=_t.dom.newsList,cfg=_t.config;newletters.each(function(){var temp,el=$(this).find("input");temp=el.attr("id").split("_");var realm=cfg.idRealms[temp[0]];if(0!==cfg.subscribeList[realm].length)for(var x=0,len=cfg.subscribeList[realm].length;len>x;x+=1)temp[1]===cfg.subscribeList[realm][x]&&(el[0].checked=!0)}),_t.setEventListener(!0)},setEventListener:function(reload){var NS,_t=this,newsletters=_t.dom.newsList,cfg=_t.config;NS=reload||!window._NewsletterBindings?window._NewsletterBindings={original:{},subscribe:{},unsubscribe:{}}:window._NewsletterBindings;var removeFromArr=function(val,arr){for(var tmp=[],x=0;x<arr.length;x++)arr[x]!==val&&tmp.push(arr[x]);return tmp},storeRealmInfo=function(id,checked,onChange){var sp=id.split("_"),realmId=sp[0],val=sp[1],realm=cfg.idRealms[realmId]?cfg.idRealms[realmId]:!1;if(realm)if(NS.subscribe[realm]||(NS.original[realm]=[],NS.subscribe[realm]=[],NS.unsubscribe[realm]=[]),!onChange&&checked)checked&&-1===NS.subscribe[realm].indexOf(val)&&NS.original[realm].push(val);else if(onChange){var inOrig=NS.original[realm].indexOf(val)>-1?!0:!1;checked?inOrig?NS.unsubscribe[realm].indexOf(val)>-1&&(NS.unsubscribe[realm]=removeFromArr(val,NS.unsubscribe[realm])):NS.subscribe[realm].push(val):inOrig?(NS.subscribe[realm].indexOf(val)>-1&&(NS.subscribe[realm]=removeFromArr(val,NS.subscribe[realm])),-1===NS.unsubscribe[realm].indexOf(val)&&NS.unsubscribe[realm].push(val)):NS.subscribe[realm].indexOf(val)>-1&&(NS.subscribe[realm]=removeFromArr(val,NS.subscribe[realm]))}};newsletters.each(function(){var el=$(this),input=el.find("input"),id=input.attr("id");(!el.data("_bindings")||reload)&&(el.data("_bindings",!0),storeRealmInfo(id,input.is(":checked")?!0:!1),input.unbind("change").bind("change",function(){storeRealmInfo(id,input.is(":checked")?!0:!1,!0)}))})}},idmsConst=function(){var _t=this;_t.defaultDom()},idmsProto={config:{url:"http://www.foxnews.com/auth/info?callback=",token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var wAndP=$("#mod-portfolio-watchlist"),auth=$(".section-mod").find(".authentication"),createNewAccount=auth.find(".auth-new"),theW=wAndP.find("li:eq(0) > .photo "),theP=wAndP.find("li:eq(1) > .photo "),auth_main=$("#investment-tracker"),cNA=auth_main.find(".auth-new"),list=$(".dv-feature-9.m-14"),aW=list.find("li:eq(0)"),aP=list.find("li:eq(1)");return{wAndP:wAndP,auth:auth,theW:theW,theP:theP,authM:auth_main,aW:aW,aP:aP,lCNA:createNewAccount,mCNA:cNA}},domBehaviorLogin:function(){var _t=this,dom=_t.domSet();dom.auth.hide(),dom.authM.hide(),$("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click"),dom.theW.size()>0&&(dom.theW.unbind("click").bind("click",function(e){window.location.href=_t.config.watchList,e.preventDefault()}),dom.theP.unbind("click").bind("click",function(e){window.location.href=_t.config.portFolio,e.preventDefault()})),dom.aW.size()>0&&(dom.aW.unbind("click").bind("click",function(e){window.location.href=_t.config.watchList,e.preventDefault()}),dom.aP.unbind("click").bind("click",function(e){window.location.href=_t.config.portFolio,e.preventDefault()}))},domBehaviorLogout:function(){var _t=this,dom=_t.domSet();dom.auth.show(),dom.authM.show(),dom.theW.size()>0&&(dom.theW.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()}),dom.theP.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()})),dom.aW.size()>0&&(dom.aW.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()}),dom.aP.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()}))},defaultDom:function(){var _t=this,dom=_t.domSet();dom.lCNA.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()}),dom.mCNA.unbind("click").bind("click",function(e){janrain.capture.ui.renderScreen("signIn"),e.preventDefault()})},idmsLogin:function(token,email,username){var _t=this,cb="FOX_idms_SABRE",cfg=_t.config;return null!=$.cookie("p_IDMS")?(_t.domBehaviorLogin(),!1):(window[cb]=function(response){$.cookie("p_IDMS",response.idms,{path:"/",domain:"foxbusiness.com"}),_t.domBehaviorLogin()},void $.ajax({url:cfg.url+cb+cfg.token+token+cfg.email+email+cfg.user+username,async:!0,cache:!0,dataType:"script"}))},idmsLogout:function(){var _t=this;null!=$.cookie("p_IDMS")&&(_t.clearIdmsCookie(),_t.domBehaviorLogout(),(window.location.pathname.indexOf("stock-watchlist")>1||window.location.pathname.indexOf("stock-portfolio")>1)&&setTimeout(function(){window.location.reload()},3e3))},clearIdmsCookie:function(){$.cookie("p_IDMS",null),$.cookie("p_IDMS",null,{path:"/"}),$.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"})}},omnitureConst=function(){},omnitureProto={hasISA:function(){var ret=$&&$.ad&&$.ad.track?!0:!1;return ret},networkShareSuccess:function(){this.hasISA()&&$.ad.track({"network-share-success":{}})},emailShareSuccess:function(){this.hasISA()&&$.ad.track({"email-share-success":{}})},networkShareStart:function(){this.hasISA()&&$.ad.track({"network-share-start":{}})},emailShareStart:function(){this.hasISA()&&$.ad.track({"email-share-start":{}})},registrationStart:function(){this.hasISA()&&$.ad.track({"registration-start":{}})},registrationComplete:function(){this.hasISA()&&$.ad.track({"registration-complete":{}})},logins:function(){this.hasISA()&&$.ad.track({logins:{}})},profileUpdates:function(){this.hasISA()&&$.ad.track({"profile-updates":{}})},fbShare:function(){this.hasISA()&&$.ad.track({"fb-share":{}})},fbLike:function(){this.hasISA()&&$.ad.track({"fb-like":{}})},twttrFollow:function(){this.hasISA()&&$.ad.track({"twttr-follow":{}})},twttrTweet:function(){this.hasISA()&&$.ad.track({"twttr-tweet":{}})},linkedinShare:function(){this.hasISA()&&$.ad.track({"linkedin-share":{}})},commentPost:function(){this.hasISA()&&$.ad.track({"comment-post":{}})},commentLoad:function(){this.hasISA()&&$.ad.track({"comment-load":{}})},commentRead:function(){this.hasISA()&&$.ad.track({"comment-read":{}})}},eventsConst=function(){},eventsProto={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var dom=domProto.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){livefyreProto.API.onLoginSuccessFromJanrain()},500)}),window.AUTH_LoginState&&AUTH_LoginState.trigger("onLogin",{user:userProto,events:eventsProto}),dom.acc.css({display:"block"}),dom.acc.removeClass("none"),dom.hasAccount.css({display:"block"}),dom.noAccount.css({display:"none"}),dom.acc.addClass("inactive")},logoutSuccess:function(){var dom=domProto.setDomReady;window.AUTH_LoginState&&AUTH_LoginState.trigger("onLogout",{events:eventsProto}),dom.acc.css({display:"block"}),dom.acc.removeClass("none"),dom.acc.removeClass("inactive"),dom.acc.removeClass("active"),dom.hasAccount.hide(),dom.noAccount.show()},editProfile:function(){var dom=domProto.setDomReady;dom.profile.bind("click",function(e){eventsProto.editProfile(e)})},tabControlsForActivityPages:function(){"function"==typeof window.refreshUR&&window.refreshUR(),$("#accounts-header").find(".tabs").unbind("click"),$("#accounts-header").find(".tabs").click(function(){var tab=$(this),id=tab.attr("id"),wraps=$(".wrap");wraps.css("display","none"),$(".tabs").removeClass("active"),tab.addClass("active"),"account-tab"===id?$("#account-wrap").css("display","block"):"activity-tab"===id&&$("#livefyre-wrap").css("display","block")})}},onLoginState:function(callback){window.AUTH_LoginState&&AUTH_LoginState.bind("onLogin",callback)},onLogoutState:function(callback){window.AUTH_LoginState&&AUTH_LoginState.bind("onLogout",callback)},accountDisplayBehaviour:function(){var hoverListen,dom=domProto.setDomReady;if(dom.acc.hasClass("alt-style")){var profileBtn=dom.acc.find(".user-options >ul>li:eq(0) > a");profileBtn.size()>0&&profileBtn.click(function(){eventsProto.editProfile()})}else dom.acc.hover(function(){dom.accountNav.addClass("hover"),hoverListen="over;"},function(){dom.accountNav.removeClass("hover"),hoverListen="out"}),dom.accountNav.click(function(){dom.acc.hasClass("active")?dom.acc.removeClass("active").addClass("inactive"):dom.acc.addClass("active").removeClass("inactive")}),dom.body.mousedown(function(){"out"===hoverListen&&dom.acc.hasClass("active")&&dom.acc.removeClass("active").addClass("inactive")});eventsProto.domEvents.editProfile()},janrain:{signin:function(){return window.janrain.capture.ui.renderScreen("signIn"),!1},traditionalSignin:function(){return janrain.capture.ui.modal.open("traditionalRegistration"),!1},traditionalDisplayName:function(result){var displayName=result.displayName,displayNameSpan=document.getElementById("displayNameData");displayName&&displayNameSpan&&(displayNameSpan.innerHTML=displayName)},getJanrainUserAPI:function(entity,attr){janrainProto.API.execute(entity,attr)},signOut:function(){janrain.capture.ui.endCaptureSession(),window.Backplane.expectMessages("identity/logout")},registrationStart:function(){omnitureProto.registrationStart()},successfulRegistration:function(result){if(whatCProto.subscribeOnSignIn(),janrainProto.API.token=result.accessToken,result&&"socialRegister"===result.action){var cb="JANRAIN_socialAvatarUpdate",url="https://signin.foxnews.com/entity.update?type_name=user&access_token="+result.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+cb;"function"!=typeof window[cb]&&(window[cb]=function(res){"ok"===res.stat&&livefyreProto.API.onProfileUpdate()}),$.ajax({url:url,dataType:"script",async:!0,cache:!0})}janrain.capture.ui.createCaptureSession(result.accessToken,!0),window.Backplane.expectMessages("identity/login"),janrainProto.session=!0,janrainProto.sessionType="register",eventsProto.domEvents.loginSuccess(),eventsProto.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:result.accessToken}),omnitureProto.registrationComplete(),result.renders||janrain.capture.ui.modal.close()},successfulLogin:function(result){janrain.capture.ui.modal.close(),janrain.capture.ui.createCaptureSession(result.accessToken,!0),window.Backplane.expectMessages("identity/login"),janrainProto.session=!0,janrainProto.sessionType="signin",eventsProto.janrain.screen.editProfile.reloadProfile(),eventsProto.domEvents.loginSuccess(),janrainProto.API.token=result.accessToken,eventsProto.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:result.accessToken}),"password-reset"===window.FOX_Janrain_Page_Type&&setTimeout(function(){window.location="http://www.foxnews.com/community/user/profile/edit"},1e4),omnitureProto.logins()},sessionFound:function(result){janrainProto.API.requestSent||(janrain.capture.ui.createCaptureSession(result.accessToken,!0),eventsProto.domEvents.loginSuccess(),janrainProto.API.token=result.accessToken,window.Backplane.expectMessages("identity/login"),eventsProto.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:result.accessToken}),janrainProto.session=!0,janrainProto.sessionType="found")},sessionNotFound:function(){eventsProto.domEvents.logoutSuccess(),janrainProto.session=!1,janrainProto.sessionType="notfound"},sessionEnded:function(){janrainProto.session=!1,janrainProto.sessionType="logout",eventsProto.domEvents.logoutSuccess(),idmsProto.idmsLogout()},sessionCreated:function(){},tokenRefreshed:function(){"profileFlow"===requireProto.janrainFlow&&setTimeout(function(){janrain.capture.ui.renderScreen("signIn")},1e3)},tokenExpired:function(){eventsProto.janrain.signOut()},accessDenied:function(){janrain.capture.ui.hasActiveSession()!==!0&&"none"===$("#templateHolder").find("#editProfile").css("display")&&janrain.capture.ui.renderScreen("signIn")},deactivateSuccess:function(){janrain.capture.ui.endCaptureSession(),janrain.capture.ui.modal.close()},loginFailed:function(result){"accountDeactivated"===result.statusMessage&&janrain.capture.ui.modal.close()},onAuthWidgetLoad:function(){},onRefreshToken:function(response){janrain.capture.ui.createCaptureSession(response.accessToken),janrainProto.API.token=response.accessToken},backplaneReady:function(){if(AUTH_Manager.fireReady("backplane"),$.browser.msie&&parseInt($.browser.version,10)<=7){var comments=$(".comments");comments.size()>0&&comments.remove(),$("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>")}else livefyreProto.init(),window.livefyreProtoReady=!0;$(window).trigger("janrainShareInit")},displayPublicProfile:function(uuid){userProto.userLivefyre.lookUpUUID=uuid,janrain.capture.ui.getPublicProfile("publicProfile",uuid)},screen:{currentScreen:null,stateLookUp:!0,postAjaxInit:!1,failedToUpdate:null,stateOfEditProfile:!1,editProfile:{reloadProfile:function(){"profileFlow"===requireProto.janrainFlow&&($("#captureAccessDeniedBuiltIn").remove(),janrain.capture.ui.renderScreen("editProfile"))},onProfileUpdate:function(){window.scrollTo(0,0),livefyreProto.API.onProfileUpdate(),whatCProto.updateSub(),eventsProto.janrain.screen.failedToUpdate=!1,omnitureProto.profileUpdates(),eventsProto.janrain.screen.editProfile.completedProfileCheck()},onProfileAutoSave:function(response){"durationSinceLastUpdate"in response&&(document.getElementById("capture_profile_saved").style.display="block",document.getElementById("capture_alert_callout").innerHTML=response.durationSinceLastUpdate)},completedProfileCheck:function(){},onProfileFailedSave:function(){eventsProto.janrain.screen.failedToUpdate=!0}},registration:{clearInput:function(){}},uiReady:function(){"profileFlow"===requireProto.janrainFlow?janrain.capture.ui.renderScreen("editProfile"):"emailFlow"===requireProto.janrainFlow?janrain.capture.ui.renderScreen("registrationVerify"):"passwordFlow"===requireProto.janrainFlow&&janrain.capture.ui.renderScreen("resetPassword")},onScreenShow:function(response){var _t=eventsProto.janrain.screen;switch(response.screen){case"editProfile":_t.currentScreen="editProfile",$("#captureRetrievingUserDataBuiltIn").hide();var countryEventAdded=!1;setTimeout(function(){function _addListener(element,type,listener){return null==element?!1:void("object"==typeof window.attachEvent?element.attachEvent("on"+type,listener):element.addEventListener(type,listener,!1))}function toggleStateSelect(){if(!countrySelect||!stateSelect)return!1;var stateVal=stateSelect.find("option:selected").attr("value");"United States"===countrySelect.options[countrySelect.selectedIndex].value?stateSelect&&(stateSelect.attr("disabled")&&"state"!==stateVal?(statePublic.removeClass("capture_toggled"),statePrivate.addClass("capture_toggled"),stateCheckPublic.removeClass("capture_checked"),stateCheckPrivate.addClass("capture_checked"),realValue.attr("value","private"),stateSelect.attr("disabled",!1),stateSelect.css({color:"black"})):stateSelect.attr("disabled")&&"state"===stateVal&&(stateSelect.attr("disabled",!1),stateSelect.css({color:"black"}))):stateSelect&&(realValue.attr("value","private"),stateSelect.attr("disabled",!0),stateSelect.css({color:"lightgrey"}),statePublic.removeClass("capture_toggled"),statePrivate.addClass("capture_toggled"),stateCheckPublic.removeClass("capture_checked"),stateCheckPrivate.addClass("capture_checked"))}$(".cancel-button").click(function(){window.history.go(window.location.href.indexOf("#")>1?-2:-1)});var countrySelect=document.getElementById("capture_editProfile_edit_country"),stateSelect=$("#capture_editProfile_edit_state"),statePublic=$("#capture_editProfile_display_indicator_public_edit_state"),statePrivate=$("#capture_editProfile_display_indicator_private_edit_state"),stateCheckPublic=$("#capture_editProfile_display_option_public_edit_state"),stateCheckPrivate=$("#capture_editProfile_display_option_private_edit_state"),realValue=$("#capture_editProfile_form_item_edit_state").find("input");countrySelect&&!countryEventAdded&&(countryEventAdded=!0,_addListener(countrySelect,"change",toggleStateSelect)),toggleStateSelect()},100);try{var loginMethod,passEl=$(".janrain_traditional_account_only"),removePass=function(){"socialSignin"===loginMethod&&passEl.size()>0&&passEl.remove()};"undefined"!=typeof window.localStorage?(loginMethod=localStorage.getItem("janrainLastAuthMethod"),removePass()):(loginMethod=$.cookie("janrainLastAuthMethod"),removePass())}catch(e){}break;case"publicProfile":var createAcc=$(".make-acc");janrainProto.session?createAcc.hide():createAcc.show();break;case"forgotPasswordSuccess":"password-reset"===window.FOX_Janrain_Page_Type&&setTimeout(function(){window.location="http://www.foxnews.com"},5e3);break;case"returnTraditional":setTimeout(function(){var displayName=janrain.capture.ui.getProfileCookieData("displayName"),displayNameSpan=document.getElementById("displayNameData");displayName&&displayNameSpan&&(displayNameSpan.innerHTML=displayName)},500);break;case"registrationVerified":var time=$("#redirectTime"),count=9,secondTimer=function(){setTimeout(function(){0===count&&(window.location="http://www.foxnews.com/community/user/profile/edit"),time.html(" "+count+(1>=count?" second":" seconds")),count-=1,secondTimer()},1e3)};secondTimer()}},onRenderComplete:function(response){function setPoliticalSlider(response){var idText="socialRegistration";"traditionalRegistration"===response.screen&&(idText="traditionalRegistration"),$("#capture_"+idText+"_politicalViewsRegistration").val("50"),isTabletOrMobileView()&&($("#politicalViews_container").removeClass("capture_slider_container"),$("#politicalViews_labels li").each(function(){var elm=$(this),label=elm.text();label=label.substr(0,3),elm.html(label)})),$("#politicalViewsSliderWrapper").insertBefore($("#capture_"+idText+"_politicalViewsRegistration")).show(),$("#capture_"+idText+"_politicalViewsRegistration").hide();var container=$(".capture_slider_container"),holder=$(".capture_slider_base"),marker=$(".capture_slider_marker"),holderWidth=holder.width(),setMark=function(pageX,offset,type){var diff=pageX-offset;diff=0>diff?0:diff>holderWidth?holderWidth:diff,"drag"===type?marker.css("left",diff):marker.animate({left:diff});var capVal=parseInt(diff/holderWidth*100,10);isNaN(capVal)!==!0&&capVal>=0&&$("#capture_"+idText+"_politicalViewsRegistration").val(capVal)};holder.bind("click",function(evt){var el=$(this),offset=el.offset();setMark(evt.pageX,offset.left,"click")}),$(window).bind("mousedown",function(){container.bind("mousemove",function(evt){var el=$(this),offset=el.offset();setMark(evt.pageX,offset.left,"drag")})}).bind("mouseup",function(){container.unbind("mousemove")})}var _t=eventsProto.janrain.screen,tooltip=$(".capture_tip .description");switch($("#politicalViewsInformationLink").hover(function(){tooltip.show()},function(){tooltip.hide()}),$("#capture_traditionalRegistration_registrationForm, #capture_editProfile_editProfileForm").submit(function(evt){var register=$("#capture_traditionalRegistration_registrationForm"),edit=$("#capture_editProfile_editProfileForm"),target=$(register.length>0?"#capture_traditionalRegistration_registration_zip":"#capture_editProfile_edit_zip"),zip=target.val(),error=target.parent().find(".capture_tip_error");return zip.length>0&&"Zip Code"!==zip&&(5!==zip.length||!$.isNumeric(zip)||/^(.)\1+$/.test(zip)===!0)?(evt.preventDefault(),setTimeout(function(){target.parent().addClass("capture_error"),error.html("Please enter a valid zip code."),register.length>0?(register.find(".capture_btn.capture_processing").remove(),$("#capture_traditionalRegistration_createAccountButton").css("display","")):(edit.find(".capture_btn.capture_processing").remove(),$("#capture_editProfile_submitButton").css("display",""))},50),!1):void 0}),response.screen){case"editProfile":_t.stateLookUp?whatCProto.lookUpUser():_t.failedToUpdate?whatCProto.onFail():whatCProto.updateSubscribeState();var domIt=setTimeout(function(){try{"retrievingUserData"===response.builtInScreenRendered&&response.renderingBuiltInScreen?eventsProto.janrain.screen.stateOfEditProfile=!0:eventsProto.janrain.screen.stateOfEditProfile&&null==_t.failedToUpdate?livefyreProto.activityTab.initCallFromJanrain():eventsProto.janrain.screen.stateOfEditProfile&&!_t.failedToUpdate?livefyreProto.activityTab.loadDataWhenFailed():eventsProto.janrain.screen.stateOfEditProfile&&_t.failedToUpdate&&livefyreProto.activityTab.loadDataWhenFailed()}catch(e){eventsProto.janrain.screen.stateOfEditProfile&&livefyreProto.activityTab.initCallFromJanrain()}clearTimeout(domIt)},100);if(!response.renderingBuiltInScreen){var target=$("#capture_editProfile_politicalViews"),targetVal=target.attr("value");targetVal=isNaN(targetVal)?50:parseInt(targetVal,10),target.attr("value",targetVal),$("#politicalViewsSliderWrapper").insertBefore(target),target.hide();var placeholder=$("#politicalViewsSliderWrapper"),container=placeholder.find(".capture_slider_container"),holder=placeholder.find(".capture_slider_base"),marker=placeholder.find(".capture_slider_marker"),holderWidth=holder.width();marker.css("left",holderWidth*(targetVal/100));var setMark=function(pageX,offset,type){var diff=pageX-offset;diff=0>diff?0:diff>holderWidth?holderWidth:diff,"drag"===type?marker.css("left",diff):marker.animate({left:diff});var capVal=parseInt(diff/holderWidth*100,10);!isNaN(capVal)&&capVal>=0&&target.attr("value",capVal)};holder.bind("click",function(evt){var el=$(this),offset=el.offset();setMark(evt.pageX,offset.left,"click")}),$(window).bind("mousedown",function(){container.bind("mousemove",function(evt){var el=$(this),offset=el.offset();setMark(evt.pageX,offset.left,"drag")})}).bind("mouseup",function(){container.unbind("mousemove")})}break;case"publicProfile":response.renderingBuiltInScreen||(janrainProto.publicProfileLinkUUID(),livefyreProto.API.displayDataToPublicProfile("lookUpUUID"in userProto.userLivefyre?userProto.userLivefyre.lookUpUUID:userProto.uuid));
break;case"traditionalRegistration":response.renderingBuiltInScreen||setPoliticalSlider(response);break;case"socialRegistration":response.renderingBuiltInScreen||setPoliticalSlider(response)}var link=document.getElementById("capture_editProfile_resendLink");link&&(link.hasBeenClicked=!1,$(link).click(function(){link.hasBeenClicked=!0}));var div=document.getElementById("forgotPassword");div&&"block"===div.style.display&&janrainProto.reset&&(document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="",document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none")}},share:{shareSendComplete:function(){omnitureProto.emailShareSuccess()}},errorEvent:function(response){try{switch(response.stat){case"error":}}catch(e){}},onModalClose:function(){janrainProto.reset=!0},validation:{onValidationSuccess:function(){var div=document.getElementById("forgotPassword");div&&"block"===div.style.display&&(janrainProto.reset=!1)}},emailSent:function(){var link=document.getElementById("capture_editProfile_resendLink"),linkDiv=$(link).parent();link&&link.hasBeenClicked&&(linkDiv[0].removeChild(link),linkDiv.append('<a style="cursor: default; ">Email Sent</a>'))}},livefyre:{displayLogo:function(){return self.display_livefyre_logo?!1:(self.display_livefyre_logo=!0,void $("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> '))},hashComment:function(){try{if(window.FOX_metadescriptor&&"willisreport"===window.FOX_metadescriptor.name["prism.subsection1"])$("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');else if(window.location.host.indexOf("nation")>-1||"Text.Article"===$('meta[name="dc.type"]').attr("content")){var aHref=$(".dv-util > .dv-util-1 > a:eq(1)"),newUrl=aHref.attr("href");newUrl=newUrl.replace("#disqus_thread","#commentsthread"),aHref.attr("href",newUrl),$("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>')}else $("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>')}catch(e){}},logOut:function(){$.loadAttempt(60,250,function(){return $("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0?!0:!1},function(){window.Backplane.expectMessages("identity/logout")})},populatePublicProfile:function(){var dom=domProto.setDomReady.publicProfile();dom.comments.text(userProto.commentCount),dom.likes.text(userProto.likeCount),userProto.commentCount=0,userProto.likeCount=0}},displayName:function(){var dom=domProto.setDomReady;dom.acc.each(function(){var acc=$(this),alt=acc.hasClass("alt-style");alt?dom.user.find(".user p").html("Welcome, <strong>"+userProto.displayName+"</strong>"):dom.name.size()>0?dom.name.text(userProto.displayName):auth_fox.dom.setDomReady.userOptions.find("p").size()>0&&auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+userProto.displayName+"</span>")}),eventsProto.domEvents.loginSuccess()},accountFuncBehaviour:function(){var dom=domProto.setDomReady;dom.login.addClass(requireProto.classLogin),dom.login.bind("click",eventsProto.janrain.signin),dom.register.bind("click",eventsProto.janrain.traditionalSignin),dom.logout.bind("click",eventsProto.janrain.signOut)},editProfile:function(){window.location=CONFIG.editProfile,window.open(editProfile,"_blank")},displayShowsProfile:function(){var user=domProto.setDomReady.acc.find("strong");user.css("cursor","pointer"),user.click(function(){return eventsProto.editProfile(),!1})}},userConst=function(){},userProto={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{}};var AUTH_Integration=function(){function set(){requireProto.janrainFlow=function(){var flow="authFlow",pageType=window.FOX_Janrain_Page_Type?window.FOX_Janrain_Page_Type:!1;switch(pageType){case"logout":flow="logoutFlow";break;case"email-verification":flow="emailFlow";break;case"edit-profile":flow="profileFlow";break;case"password-reset":flow="passwordFlow";break;case"public-profile":flow="publicFlow";break;default:flow="authFlow"}return flow}();var dom,structure=[["tools",toolProto,toolConst],["dom",domProto,domConst],["require",requireProto,requireConst],["backplane",backplaneProto,backplaneConst],["janrain",janrainProto,janrainConst],["livefyre",livefyreProto,livefyreConst],["events",eventsProto,eventsConst],["user",userProto,userConst],["omniture",omnitureProto,omnitureConst],["whatcounts",whatCProto,whatCConst],["idms",idmsProto,idmsConst]],auth=new AUTH(structure);window.auth_fox=auth;var trigger=function(){auth.require.loadTemplate(),auth.events.accountDisplayBehaviour(),auth.events.accountFuncBehaviour(),$(document).ready(function(){AUTH_LoginState.trigger("onAuthReady",{events:eventsProto,user:userProto})})};"object"==typeof auth.dom.setDomReady?(dom=auth.dom.setDomReady,trigger()):dom=auth.dom.setDomReady(function(domData){domProto.setDomReady=domData,trigger()}),"publicFlow"===auth.require.janrainFlow&&(auth.livefyre.activityTab.tabActivity(),auth_fox.livefyre.activityTab.hashTagGatherer().getPhotosAndId())}function setDependencies(){AUTH_Manager=window.AUTH_Manager=new FOX_DependencyManager,AUTH_Manager.addInstance("janrain",["janrain"]),AUTH_Manager.addInstance("capture",["janrain","capture"]),AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]),AUTH_Manager.addInstance("backplane",["backplane"]),$.loadAttempt(60,500,function(){return window.fyre&&$("#livefyre_comment_stream .fyre-widget").size()>0?!0:!1},function(){AUTH_Manager.fireReady("livefyre")}),AUTH_Manager.onReady("livefyre",function(){log("********** LIVEFYRE IS READY !!! **********")}),AUTH_Manager.onReady("janrain",function(){log("********** JANRAIN IS READY !!! **********")}),AUTH_Manager.onReady("backplane",function(){log("********** BACKPLANE IS READY !!! **********")}),AUTH_Manager.onReady("capture",function(){log("********** CAPTURE IS READY !!! **********")}),executeManagerStack(),window.CallStackTrigger&&(AUTH_LoginState=window.AUTH_LoginState=new CallStackTrigger,AUTH_LoginState.bind("onLogin",function(){log("[AUTH_LoginState] 'onLogin' triggered.")}),AUTH_LoginState.bind("onLogout",function(){log("[AUTH_LoginState] 'onLogout' triggered.")}),executeLoginStateStack())}function executeLoginStateStack(){for(;ON_LOGIN_STATE_STACK.length>0;){var info=ON_LOGIN_STATE_STACK.shift();AUTH_LoginState.bind(info.type,info.callback)}}function executeManagerStack(){for(;ON_AUTH_MANAGER_STACK.length>0;){var info=ON_AUTH_MANAGER_STACK.shift();AUTH_Manager.onReady(info.type,info.callback)}}var INITIALIZED=!1,AUTH_Manager=!1,AUTH_LoginState=!1,ON_LOGIN_STATE_STACK=[],ON_AUTH_MANAGER_STACK=[],Integration=function(){var Proto=this;if(Proto.getConfig=function(){return CONFIG||window.FOX_AuthJanrain_CONFIG||!1},Proto.onLoginState=function(type,callback){return"function"!=typeof callback?!1:void(AUTH_LoginState?AUTH_LoginState.bind(type,callback):ON_LOGIN_STATE_STACK.push({type:type,callback:callback}))},Proto.onAuthManagerReady=function(type,callback){return"function"!=typeof callback?!1:void(AUTH_Manager?AUTH_Manager.onReady(type,callback):ON_AUTH_MANAGER_STACK.push({type:type,callback:callback}))},INITIALIZED)return!1;INITIALIZED=!0;var template=new FOX_Plugins.Templating;template.get("janrain",function(str){window.FOX_Janrain_Auth_TPL=str,setDependencies(),set()})};return Integration}();return $.loadAttempt||!function(){var s=document.createElement("script");s.src="//global.fncstatic.com/static/v/all/js/plugins/LoadAttempt.js",s.async=!0,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(s)}(),AUTH_Integration}(jQuery,window),function($,window){$(document).ready(function(){var valid=window.auth_fox&&window.auth_fox.whatcounts&&window.auth_fox.whatcounts.janrainNewsAlerts?!0:!1;return valid?($("#newsletter_form, #rss_newsletter_form").each(function(){var newsletElm=$(this);newsletElm.find('input[name="submit"]').click(function(){var SLIDnum,email=newsletElm.find("#newsletter_input").size()>-1?newsletElm.find("#newsletter_input").val():newsletElm.find("#newsletter_email").val();$('input:[name="propID_terms"]').size()>0?(SLIDnum=[],newsletElm.find(".option").each(function(){$(this).find('input:[name="propID_terms"]').is(":checked")&&SLIDnum.push($(this).find('input:[name="slid"]').val())})):(SLIDnum=newsletElm.find("#newsletter_slid").val(),email=newsletElm.find("#newsletter_email").val()),auth_fox.whatcounts.janrainNewsAlerts(SLIDnum,email)})}),void $(function(){$("#newsAlertsEmailSignup.component").each(function(){var newsletElm=$(this),FNHPtoSLIDS={BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD23B5BE4FDF9C2351F",DailyNewsletter:"3DC725E303A24F8DA102192D9D5143D9",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D39740C7B45D15F45",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762",ClamanOnCall:"3DC725E303A24F8D12785ABB73469705"};newsletElm.find('input[name="submit"]').click(function(){var email=newsletElm.find('input:[name="email"]').val(),SLIDnum=!1;$('input:[name="propID_terms"]').size()>-1&&(SLIDnum=[],newsletElm.find(".option").each(function(){var thisInputElm=$(this).find('input:[name="propID_terms"]');thisInputElm.is(":checked")&&SLIDnum.push(FNHPtoSLIDS[thisInputElm.attr("id")])})),SLIDnum&&auth_fox.whatcounts.janrainNewsAlerts(SLIDnum,email)})})})):!1});var ShareWrapper,JanrainShare,ArticleInfo;window.janrainShareOnload=function(){window.janrainShareLoaded=!0,$(window).trigger("janrainShareModuleInit")};var utils={domain:function(){return!1},meta:function(attr,type){return"prop"===type&&(type="property"),$("meta["+type+'="'+attr+'"]').attr("content")},metadata:function(metastr){var m=metastr.split("::"),atr=m[0],nme=m[1],cnt=m[2];return utils.meta(nme,atr)===cnt?!0:!1},trim:function(txt,len){return txt?(txt.length>len&&(txt=txt.substring(0,len)+" ..."),txt):""},isDevice:function(){var ret=!1;return ret="createTouch"in document?!0:!1,ret=!ret&&navigator.userAgent.match(/BlackBerry/i)?!0:ret}};JanrainShare=function(){var root=this;this.ready=!1,window.janrainShareLoaded?this.init():$(window).bind("janrainShareModuleInit",function(){root.init()})},JanrainShare.prototype={init:function(){this.ready=!0,this.janrain=window.janrain,this.setCallbacks(),this.setTemplates(),this.articleObj={}},setCallbacks:function(){var jr=this.janrain,resetEmail=this.resetEmail,_t=this;_t.responseProvider=null,jr.events.onShareProviderSelect.addHandler(function(info){"string"==typeof info.provider&&($(document).trigger("Janrain.Events.onShareProviderSelect."+info.provider.toUpperCase(),info),"email"!==info.provider&&window.auth_fox.omniture.networkShareStart())}),jr.events.onShareLoginStart.addHandler(resetEmail),jr.events.onShareLoginCancel.addHandler(resetEmail),jr.events.onShareLoginError.addHandler(resetEmail),jr.events.onShareSendStart.addHandler(function(obj){window.auth_fox&&("facebook"===obj.provider?(window.auth_fox.omniture.fbShare(),_t.responseProvider="facebook"):"twitter"===obj.provider?(window.auth_fox.omniture.twttrTweet(),_t.responseProvider="twitter"):"linkedin"===obj.provider?(window.auth_fox.omniture.linkedinShare(),_t.responseProvider="linkedin"):"email"!==obj.mode?window.auth_fox.omniture.networkShareSuccess():"email"===obj.mode&&(window.auth_fox.omniture.emailShareSuccess(),_t.responseProvider="email"),"email"!==obj.mode&&"email"!==obj.provider&&window.auth_fox.omniture.networkShareSuccess())}),jr.events.onShareSendComplete.addHandler(function(){switch(_t.responseProvider){case"facebook":$("#janrain-share-providerpage-facebook").find("span.janrain-share-login-button-text").text("Shared on Facebook");break;case"twitter":$("#janrain-share-providerpage-twitter").find("span.janrain-share-login-button-text").text("Shared on Twitter");break;case"linkedin":$("#janrain-share-providerpage-linkedin").find("span.janrain-share-login-button-text").text("Shared on LinkedIn");break;default:$("#janrain-share-providerpage-email").find("span.janrain-share-login-button-text").text("Shared by Email")}auth_fox.janrain.API.update("entity.update",auth_fox.janrain.API.updateAPI("share"))})},setTemplates:function(){$(".janrain-share-input").attr("placeholder","Write your message"),$(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact"),$(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name"),$(".janrain-share-bubble").remove(),$(".janrain-share-login-prefs-name").remove();var fooscript="javascript";$(".janrain_modal_closebutton").attr("href",fooscript+":;"),this.resetEmail()},show:function(ev,opts){var self=this,jr=this.janrain,prov=opts.provider,data=opts.data;if(self.articleObj=opts.data,"gplus"===prov){var gpopup=window.open("https://plus.google.com/share?url="+data.actLink,gpopup,"scrollbars=yes,width=700,height=640");return void gpopup.focus()}var customDesc=data.desc,twitterTitleStr=function(title,url){var ret=title,charCount=url.length+title.length;if(charCount>=140){var x,arr=[],cntr=0,limit=90,sp=title.split(" ");for(x=0;x<sp.length;x++){var st=sp[x];if(cntr+=st.length,cntr>limit)break;arr.push(st)}ret=$.trim(arr.join(" ")),ret+=ret!==title?"...":""}return ret}(data.title,data.linkBack),twitterTextArea=[twitterTitleStr,data.linkBack].join(" | ");setTimeout(function(){$("#janrain-share-twitter-messageinput").val(twitterTextArea)},150),jr&&jr.engage&&(jr.engage.share.show(),jr.engage.share.setOrientation("landscape"),jr.engage.share.setTitle(data.title),jr.engage.share.setUrl(data.linkBack),jr.engage.share.setActionLink({name:"Read more",link:data.actLink}),jr.engage.share.setImage(data.image),jr.engage.share.setDescription(customDesc),jr.engage.share.showProvider(prov),this.formatPreviewText({title:data.title,desc:data.desc,url:data.actLink}))},resetEmail:function(){$(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove(),$("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo"),$("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google")},formatPreviewText:function(data){$(".janrain-share-preview-title").text(utils.trim(data.title,70)),$(".janrain-share-preview-url").text(utils.trim(data.url,40)),$(".janrain-share-preview-description").text(utils.trim(data.desc,130))}},ShareWrapper=function(cfg){this.cfg=cfg,this.plugin=cfg.plugin},ShareWrapper.prototype={set:function(elem,opts,cb){var self=this;return elem=$(elem),utils.isDevice()?elem.hide():void elem.unbind("click").bind("click",function(ev){return self.show(ev,opts,cb),!1})},reset:function(elem,opts,cb){var self=this,getData=opts.data;return elem=$(elem),utils.isDevice()?elem.hide():void elem.unbind("click").bind("click",function(ev){return opts.data=getData(ev),self.show(ev,opts,cb),!1})},setLive:function(elem,opts,cb){var self=this,getData=opts.data;return elem=$(elem),utils.isDevice()?elem.hide():void elem.unbind("click").live("click",function(ev){return opts.data=getData(ev),self.show(ev,opts,cb),!1})},show:function(ev,opts,cb){var plugin=this.plugin;return"email"===opts.provider?window.auth_fox.omniture.emailShareStart():window.auth_fox.omniture.networkShareStart(),plugin.show(ev,opts,cb),!1},showShare:function(opts){var plugin=this.plugin;return"email"===opts.provider&&window.auth_fox.omniture.emailShareStart(),plugin.show(null,opts,null),!1},hide:function(){}},ArticleInfo=function(){var parser={},meta=utils.meta,add=function(nm,fn){parser[nm]=fn},useDomain=function(src){return 0!==src.indexOf("http")&&0!==src.indexOf("//")&&(src=window.location.protocol+"//"+(window.location.host||window.location.hostname)+src),src};return add("v8-article",function(){var actLink,linkBack,title=$("#article-title").text()||meta("og:title","prop")||meta("dc.title","name"),image=$("link[rel='image_src']").attr("href")||meta("og:image","prop")||parsers.defaultImg.v8Article,desc=function(){var ret=meta("description","name")||meta("dc.description","name"),articleInfo=window.vcmArticleInfo||window.articleInfo||{};ret=articleInfo.summary||ret;var div=$("<div></div>").html(ret);return ret=div.text()}();return actLink=linkBack=function(){var link,loc=window.location,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0?shortUrl.attr("href"):longURL.size()>0?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname}(),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}),add("recipe-article",function(){var actLink,linkBack,title=$("#article-title").text()||meta("og:title","prop")||meta("dc.title","name"),image=$("link[rel='image_src']").attr("href")||meta("og:image","prop")||parsers.defaultImg.v8Article,desc=meta("description","name")||meta("dc.description","name");return actLink=linkBack=function(){var link,loc=window.location,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0?shortUrl.attr("href"):longURL.size()>0?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname}(),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}),add("fox-nation",function(){var actLink,linkBack,title=meta("og:title","prop")||meta("dc.title","name"),image=meta("og:image","prop")||parsers.defaultImg.v8Article,desc=meta("og:description","prop")||meta("dc.description","name");return actLink=linkBack=function(){var link,loc=window.location,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0?shortUrl.attr("href"):longURL.size()>0?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname}(),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}),add("live-event-article",function(){var actLink,linkBack,title=$("#article-title").text()||meta("og:title","prop")||meta("dc.title","name"),image=$("link[rel='image_src']").attr("href")||meta("og:image","prop")||parsers.defaultImg.v8Article,desc=meta("description","name")||meta("dc.description","name");actLink=linkBack=function(){var link,loc=window.location,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0?shortUrl.attr("href"):longURL.size()>0?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname}();({title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack});return{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}),add("schedule-page",function(){var doc=$(document),obj={title:doc.attr("title"),desc:doc.find("meta[name=description]").attr("content"),image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png")};return obj}),add("drupal6-shows-article",function(){var actLink,linkBack,title=$("#content-main h3 a").text()||meta("dc.title","name")||meta("og:title","name"),desc=function(){{var summary_="";$("#content-main .deck > p, #content-main .transcript > p").each(function(){var _p=$(this);_p.html().indexOf("<script")<0&&_p.html().indexOf("<object")<0&&summary_.length<360&&(summary_+=_p.text())})}return summary_.length>360&&(summary_=summary_.substring(0,357)+"..."),summary_}();actLink=linkBack=function(){var link,loc=window.location,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0?shortUrl.attr("href"):longURL.size()>0?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname,link||meta("og:url","prop")}();var image=function(){var img=$("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return img?"http://"+window.location.host+img:meta("og:image","prop")}();return{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}),add("drupal7-shows-blog",function(){var url=function(){var loc=window.location,link=null,shortUrl=$('link[rel="shorturl"]'),longURL=$('link[rel="canonical"]');return link=shortUrl.size()>0&&shortUrl?shortUrl.attr("href"):longURL.size()>0&&longURL?longURL.attr("href"):loc.protocol+"//"+loc.hostname+loc.pathname,link||meta("og:url","prop")};return function(ev){var actLink,linkBack,target=$(ev.currentTarget),link=target,postTarget=$(".post").size()>0?".post":"#post-detail",post=link.parentsUntil(".content",postTarget),title=post.find(".twitter-tweet-rendered .entry-title").text()||post.find("h2").text()||post.find(".post-content > p").text()||post.find("#twtr-widget > p").text()||post.find("p:first").text()||$("#article-title").text()||meta("og:title","prop")||meta("dc.title","name"),desc=post.find(".twitter-tweet-rendered .entry-title").text()||post.find(".post-content > p").text()||meta("description","name")||meta("dc.description","name");actLink=linkBack=function(){var h2=post.find("h2"),comments=post.find(".comments"),dcType=meta("dc.type","name");return!dcType||"Text.Article"!==dcType&&"InteractiveResource"!==dcType&&"MovingImage"!==dcType?"fox-files"===meta("prism.subsection1","name")||"foxfriendsfirst"===meta("prism.subsection1","name")?meta("og:url","prop"):"redeye"===meta("prism.subsection1","name")?target.parentsUntil(".date").find("li:nth-child(1) a").attr("href"):h2.find("a").length>0&&"willisreport"===meta("prism.subsection1","name")?h2.find("a").attr("href"):"willisreport"===meta("prism.subsection1","name")&&"topfive"===meta("prism.subsection2","name")?url():h2.length>0?h2.find("a").attr("href"):post.length>0?comments.find("a").attr("href"):void 0:meta("og:url","prop")}();var image=$("link[rel='image_src']").attr("href")||$(".post-content").find("img:eq(0)").attr("src")||meta("og:image","prop");try{actLink=linkBack=useDomain(actLink)}catch(err){console.log("err",err)}return{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("willis-report",function(){return function(ev){var target,post,postImg,title,desc,actLink,linkBack;target=$(ev.currentTarget),post=target.parentsUntil(".content"),postImg=target.parentsUntil(".post-content"),"willisreport"===meta("prism.subsection1","name")&&"blogs"===meta("prism.subsection2","name")&&(postImg=post),title=post.find("h2").text()||meta("og:title","prop")||meta("dc.title","name");var image=function(){var img=postImg.find("img").attr("src")||meta("og:image","prop");return img=useDomain(img)}();return desc=post.find(".post-content > p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find("h2 a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("foxnews-sunday",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".post").parent(),title=post.find("h2").text()||meta("og:title","prop")||meta("dc.title","name"),image=post.find(".post-content img").attr("src")||meta("og:image","prop"),desc=post.find(".post-content > p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find("h2 a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("a-healthy-you-blog",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil("article").parent(),title=post.find("h2").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=post.find(".feature-image img").attr("src")||meta("og:image","prop");return img=useDomain(img)}(),desc=post.find(".post-content > p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("taxpayer-calculator",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".dv-item").parent(),title=post.find("h3 a").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=meta("og:image","prop");return img=useDomain(img)}(),desc=post.find("p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find("h3 a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("taxpayer-calculator-detail",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil("#container").parent(),title=post.find("h1").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=meta("og:image","prop");return img=useDomain(img)}(),desc=post.find(".desc p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("hannity",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".featured").parent(),title=post.find("p.title").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=post.find(".image img").attr("src")||meta("og:image","prop");return img=useDomain(img)}(),desc=post.find("div.meta + p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("hannity-transcript",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".featured").parent(),title=post.find(".content-wrap .meta p a").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=post.find(".video-ct img").attr("src")||meta("og:image","prop");return img=useDomain(img)}(),desc=post.find("h3.desc").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find(".content-wrap .meta p a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("hannity-detail",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".content"),title=post.find(".content-wrap .meta p").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=meta("og:image","prop");return img=useDomain(img)}(),desc=meta("dc.description","name")||meta("og:description","prop"),actLink=linkBack=meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("hannity-as-seen",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".featured").parent(),title=post.find(".meta .title a").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=post.find(".image img").attr("src")||meta("og:image","prop");return img=useDomain(img)}(),desc=post.find(".meta .desc").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find(".meta .title a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("a-healthy-you",function(){return function(ev){var target,post,title,image,desc,actLink,linkBack;return target=$(ev.currentTarget),post=target.parentsUntil(".detail").parent(),title=post.find("h2").text()||meta("og:title","prop")||meta("dc.title","name"),image=function(){var img=post.find(".image img").attr("src")||meta("og:image","prop");return img=useDomain(img)}(),desc=post.find(".content > p").text()||meta("description","name")||meta("dc.description","name"),actLink=linkBack=post.find("h2 a").attr("href")||meta("og:url","prop")||window.location.pathname,actLink=useDomain(actLink),linkBack=useDomain(linkBack),{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}}}),add("trending-fbn",function(){return function(e){var tar=$(e.currentTarget),span=tar.find("span"),url=span.attr("data-url"),title=span.attr("data-title");return{title:title,image:unescape("http://global.fncstatic.com/static/v/all/img/fb_128x128.png"),desc:title,userMessage:"",actLink:url,linkBack:url}}}),add("trending-fnc",function(){return function(e){var tar=$(e.currentTarget),span=tar.find("span"),url=span.attr("data-url"),title=span.attr("data-title");return{title:title,image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png"),desc:title,userMessage:"",actLink:url,linkBack:url}}}),add("classification-front",function(){var fn=function(ev){var title,image,desc,actLink,linkBack,li=$(ev.currentTarget).parentsUntil("ul");return image=li.find(".m img").attr("src")||"",title=li.find("h3").text()||"",desc=li.find(".summary").text()||"",actLink=linkBack=li.find("h3 a").attr("href")||"",{title:title,image:unescape(image),desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}};return fn}),add("foxandfriends",function(){var fn=function(ev){var target=$(ev.currentTarget).parent().parent(),title="On Fox and Friends",image=unescape(target.find(".m > a > img").attr("src"))?unescape(target.find(".m > a > img").attr("src")):"",desc=target.find("p").text(),actLink=window.location.href,linkBack=window.location.href;return{title:title,image:image,desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}};return fn}),add("foxandfriends-blog",function(){var fn=function(ev){var target=$(ev.currentTarget).parentsUntil("article").parent(),title=target.find("h1:eq(0)").html(),desc=target.find("p:eq(0)").text()?target.find("p:eq(0)").text():target.find("p:eq(1)").text(),actLink=target.find("header > a").attr("href"),linkBack=target.find("header > a").attr("href");actLink=useDomain(actLink),linkBack=useDomain(linkBack);var image=function(){var img=target.find(".m > img").attr("src")||meta("og:image","prop");return img=useDomain(img)}();return window.tar=target,{title:title,image:image,desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}};return fn}),add("foxandfriends-as-seen",function(){var fn=function(ev){var target=$(ev.currentTarget).parentsUntil("article").parent(),title=target.find("h1:eq(0)").html(),desc=utils.meta("og\\:description","prop"),actLink=$("link[rel='canonical']").attr("href"),linkBack=useDomain(actLink);actLink=useDomain(actLink);var image=function(){var img=utils.meta("og\\:image","prop");return img=useDomain(img)}();try{desc=$("<div></div>").html(desc).text()}catch(err){}return window.tar=target,{title:title,image:image,desc:desc,userMessage:"",actLink:actLink,linkBack:linkBack}};return fn}),function(type){var par={};try{par=parser[type]()
}catch(err){}return par}},$(function(){var janrainShare=new JanrainShare,share=new ShareWrapper({plugin:janrainShare}),articleInfo=new ArticleInfo,metadata=utils.metadata;window.FOX_ShareMedia=share;var FNC,FBN,FNL,FSB,setArticle=function(type){var data=articleInfo(type+"-article");share.set(".user-interaction .share",{provider:"facebook",data:data}),share.set(".user-interaction .email",{provider:"email",data:data})};FNC=function(){var data;if(metadata("name::prism.section::nation")){var m=metadata;(m("name::dc.type::PhysicalObject")||m("name::dc.type::InteractiveResource")||m("name::prism.aggregationType::subsection"))&&(data=articleInfo("fox-nation"),share.set(".fbk",{provider:"facebook",data:data}),share.set(".twt",{provider:"twitter",data:data}),share.set(".share",{provider:"share",data:data}),share.set(".email",{provider:"email",data:data}))}else if(metadata("name::prism.section::tv-schedule"))data=articleInfo("schedule-page"),share.set(".share",{provider:"share",data:data});else if(metadata("name::prism.section::tax-calculator")&&metadata("name::prism.genre::homePage"))data=articleInfo("taxpayer-calculator"),share.reset(".social-count a.fbk",{provider:"facebook",data:data}),share.reset(".social-count a.twt",{provider:"twitter",data:data}),"function"==typeof wsTaxCalData&&$(".show.more-btn a").click(function(){setTimeout(function(){share.reset(".social-count a.fbk",{provider:"facebook",data:data}),share.reset(".social-count a.twt",{provider:"twitter",data:data})},500)});else if(metadata("name::prism.section::tax-calculator")&&metadata("name::prism.genre::interactiveContent"))data=articleInfo("taxpayer-calculator-detail"),share.reset(".social-count a.fbk",{provider:"facebook",data:data}),share.reset(".social-count a.twt",{provider:"twitter",data:data});else if(metadata("name::prism.aggregationType::topics"))data=articleInfo("classification-front"),share.setLive(".trending-fbk",{provider:"facebook",data:data}),share.setLive(".trending-twt",{provider:"twitter",data:data});else if((metadata("name::prism.section::topics")||metadata("name::prism.section::social"))&&metadata("name::prism.aggregationType::subsection"))data=articleInfo("live-event-article"),share.set(".facebook",{provider:"facebook",data:data}),share.set(".twitter",{provider:"twitter",data:data});else if(metadata("name::dc.type::Text.Article",!0)&&metadata("name::prism.genre::transcript"))data=articleInfo("drupal7-shows-blog"),share.reset(".user-interaction .recommend a",{provider:"facebook",data:data}),share.reset(".user-interaction .tweet a",{provider:"twitter",data:data}),metadata("name::prism.section::shows")&&(share.reset(".share",{provider:"facebook",data:data}),share.reset(".email",{provider:"email",data:data}));else if(metadata("name::prism.section::shows"))!metadata("property::og:type::article")||metadata("name::prism.subsection1::specialreport")||metadata("name::prism.subsection1::foxnewssunday")||metadata("name::prism.subsection1::fox-files")||metadata("name::prism.subsection1::foxfriendsfirst")||metadata("name::prism.subsection1::redeye")||metadata("name::prism.subsection1::warstories")||metadata("name::prism.subsection1::media-buzz")||(data=articleInfo("drupal6-shows-article"),share.set(".share",{provider:"facebook",data:data}),share.set(".email",{provider:"email",data:data})),(metadata("name::prism.subsection1::specialreport")||metadata("name::prism.subsection1::foxnewssunday")||metadata("name::prism.subsection1::fox-files")||metadata("name::prism.subsection1::redeye")||metadata("name::prism.subsection1::foxfriendsfirst")||metadata("name::prism.subsection1::americas-newsroom")||metadata("name::prism.subsection1::therealstory")||metadata("name::prism.subsection1::a-healthy-you"))&&(data=articleInfo("drupal7-shows-blog"),share.reset(".date li a.facebook",{provider:"facebook",data:data}),share.reset(".date li a.twitter",{provider:"twitter",data:data}),metadata("name::prism.subsection1::fox-files")&&share.reset("#post-detail a.share",{provider:"facebook",data:data}),metadata("name::prism.subsection1::a-healthy-you")&&!metadata("name::prism.subsection2::blog")&&(data=articleInfo("a-healthy-you"),share.reset(".social .fbk",{provider:"facebook",data:data}),share.reset(".social .twt",{provider:"twitter",data:data})),metadata("name::prism.subsection1::a-healthy-you")&&metadata("name::prism.subsection2::blog")&&(data=articleInfo("a-healthy-you-blog"),share.reset(".social-count .fbk",{provider:"facebook",data:data}),share.reset(".social-count .twt",{provider:"twitter",data:data}))),metadata("name::prism.subsection1::foxnewssunday")&&metadata("name::prism.subsection3::wallacewatch")&&(data=articleInfo("foxnews-sunday"),share.reset(".date li a.facebook",{provider:"facebook",data:data}),share.reset(".date li a.twitter",{provider:"twitter",data:data})),metadata("name::prism.subsection1::hannity")&&(data=articleInfo("hannity"),share.reset("a.social-share-btn",{provider:"facebook",data:data})),metadata("name::prism.subsection1::hannity")&&metadata("name::prism.subsection2::interview")&&(data=articleInfo("hannity-transcript"),share.reset("a.social-share-btn",{provider:"facebook",data:data})),metadata("name::prism.subsection1::hannity")&&metadata("name::prism.subsection2::interview")&&$("body").hasClass("node-type-transcript")&&(data=articleInfo("hannity-detail"),share.reset(".contact-container a.fbk",{provider:"facebook",data:data}),share.reset(".contact-container a.twt",{provider:"twitter",data:data})),metadata("name::prism.subsection1::hannity")&&metadata("name::prism.subsection2::as-seen")&&(data=articleInfo("hannity-as-seen"),share.reset("a.social-share-btn",{provider:"facebook",data:data})),metadata("name::prism.subsection1::foxfriendsfirst")&&(share.reset(".post-detail a.trending-fbk",{provider:"facebook",data:data}),share.reset(".post-detail a.trending-twt",{provider:"twitter",data:data})),metadata("name::prism.subsection1::americas-newsroom")&&(share.reset("li.share a",{provider:"facebook",data:data}),share.reset("li.twitter a",{provider:"twitter",data:data})),metadata("name::prism.subsection1::therealstory")&&(share.reset("li.facebook a",{provider:"facebook",data:data}),share.reset("li.twitter a",{provider:"twitter",data:data})),(metadata("name::prism.subsection1::specialreport")||metadata("name::prism.subsection1::redeye")||metadata("name::prism.subsection1::foxnewssunday"))&&metadata("name::prism.subsection2::transcript")&&setArticle("v8"),metadata("name::prism.subsection1::foxfriends")&&(metadata("name::prism.subsection2::blogs")&&(data=articleInfo("foxandfriends-blog"),share.reset(".sharing",{provider:"facebook",data:data})),metadata("name::prism.subsection2::as-seen-on")&&(data=articleInfo("foxandfriends-as-seen"),share.reset(".sharing",{provider:"facebook",data:data})));else if(metadata("name::prism.subsection1::trend")){var setupShare=function(){$(".fbkshares").css("visibility","hidden"),$(".twtshares").css("visibility","hidden");var data=articleInfo("trending-fnc");share.reset(".fbkshares",{provider:"facebook",data:data}),share.reset(".twtshares",{provider:"twitter",data:data}),setTimeout(function(){$(".fbkshares").css("visibility","visible").hide().fadeIn(120),$(".twtshares").css("visibility","visible").hide().fadeIn(120)},2e3)};window.setupSharingLinks=function(){try{setupShare()}catch(err){}};try{setupShare()}catch(err){}}else metadata("name::prism.section::community")&&metadata("name::prism.subsection1::newsletter")?window.excludeNewsletterShare=!0:metadata("name::prism.section::politics")&&metadata("name::prism.subsection1::blogs")?setArticle("v8"):metadata("property::og:type::article")?setArticle("v8"):metadata("name::prism.aggregationType::recipe")&&setArticle("recipe")},FBN=function(){var data;if(metadata("property::og:type::article")&&!metadata("name::prism.subsection1::willisreport")&&(data=articleInfo("drupal6-shows-article"),share.set(".share",{provider:"facebook",data:data}),window.FOX_pagedescriptor||share.set(".email",{provider:"email",data:data})),metadata("name::prism.section::social")&&metadata("name::prism.aggregationType::subsection")&&(data=articleInfo("live-event-article"),share.set(".facebook",{provider:"facebook",data:data}),share.set(".twitter",{provider:"twitter",data:data})),metadata("name::prism.section::poll")&&(share.set(".fbk",{provider:"facebook",data:data}),share.set(".twt",{provider:"twitter",data:data})),metadata("name::prism.subsection1::willisreport"))data=articleInfo("willis-report"),share.reset(".date li a.facebook",{provider:"facebook",data:data}),share.reset(".date li a.twitter",{provider:"twitter",data:data});else if(metadata("name::prism.subsection1::trend")){var setupShare=function(){$(".fbkshares").css("visibility","hidden"),$(".twtshares").css("visibility","hidden");var data=articleInfo("trending-fbn");share.reset(".fbkshares",{provider:"facebook",data:data}),share.reset(".twtshares",{provider:"twitter",data:data}),setTimeout(function(){$(".fbkshares").css("visibility","visible").hide().fadeIn(120),$(".twtshares").css("visibility","visible").hide().fadeIn(120)},2e3)};window.setupSharingLinks=function(){try{setupShare()}catch(err){}};try{setupShare()}catch(err){}}else metadata("property::og:type::article")&&setArticle("v8")},FNL=function(){metadata("property::og:type::article")&&setArticle("v8")},FSB=function(){metadata("property::og:type::article")&&setArticle("v8")},metadata("name::prism.channel::fnc")&&FNC(),metadata("name::prism.channel::fbn")&&FBN(),metadata("name::prism.channel::fnl")&&FNL(),metadata("name::prism.channel::fsb")&&FSB()})}(jQuery,window),function($){"undefined"==typeof window.printTrackFunc&&(window.printTrackFunc=function(){$(document).ready(function(){$(".print a").click(function(){$.ad.track({"print-open":{}})})}),$(document).ready(function(){$(".user-control a").click(function(){$.ad.track({print:{}})})})},window.printTrackFunc())}(jQuery),function($){"undefined"!=typeof _cbVarStr?_cbVarStr:"b1020";!function(){var cb=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseInt(freq,10)).toString():"")};document.write('<script type="text/javascript" src="'+window.location.protocol+"//global.fncstatic.com/static/v/all/js/geo.js?cb="+cb(1)+'"></script>')}();var SITE_BY_DOMAIN=function(){var ret="FOXNEWS",loc=window.location,host=loc.host||loc.hostname,idx=function(val){return host.indexOf(val)>-1?!0:!1};return idx("foxnews.com")?ret=idx("latino.foxnews.com")?"LATINO":"FOXNEWS":idx("foxbusiness.com")&&(ret=idx("smallbusiness.foxbusiness.com")?"SMALLBUSINESS":"FOXBUSINESS"),ret}(),FOX_Header=function(){var App=function(){};App.prototype.init=function(){var self=this;return this._initialized?!1:(this._initialized=!0,setMetaDescriptor(),Authentication(),self.setNav(),void(self[SITE_BY_DOMAIN]&&self[SITE_BY_DOMAIN]()))},App.prototype.setNav=function(){var domain=function(){var ret=[],d=(window.location.hostname||window.location.host).toLowerCase(),sp=d.split("."),len=sp.length;return"foxbusiness"===sp[len-2]||"foxnews"===sp[len-2]&&len>2?ret=[sp[len-3],sp[len-2],sp[len-1]]:len>1&&(ret=[sp[len-2],sp[len-1]]),ret.join(".").toLowerCase()}(),network=$("#util ul li");network.each(function(){var el=$(this),href=(el.find("a:first"),el.attr("href")||!1);href&&href.indexOf(domain)&&!el.hasClass("active")&&(network.removeClass("active"),el.addClass("active"))})},App.prototype.FOXNEWS=function(){ShowsHeader(),OnAirShows()},App.prototype.FOXBUSINESS=function(){FB_WhatsHot(),FB_SearchAutoComplete()},App.prototype.LATINO=function(){},App.prototype.SMALLBUSINESS=function(){};var APP=new App;return function(){APP.init()}}(),Authentication=function(){var App=function(){window.FOX_Auth_Use_Janrain=!0};App.prototype.init=function(){if(this._initialized)return!1;if(this._initialized=!0,window.AuthenticationService_Janrain){$("#account").css("visibility","visible"),$("p.login-link").hide();{window.authentication_service_v3=new AuthenticationService_Janrain}}else log("[head.Authentication] Fatal Error: Janrain service not found.")};var APP=new App;return function(){APP.init()}}(),ShowsHeader=function(){var App=function(){};App.prototype.init=function(){var self=this;$("#section-head #promo").each(function(){self._HOLDER=$(this),self.set()})},App.prototype.set=function(){var self=this;if(window.FOX_Plugins&&window.FOX_Plugins.SchedulePromo){var plugin=new FOX_Plugins.SchedulePromo;plugin.API.getLatest(function(data){data&&self.render(data)})}},App.prototype.render=function(data){var self=this,holder=self._HOLDER,template='<div class="m">                        <% if (info.info_link !== "#") { %>                             <a href="<%= info.link %>"><img src="<%= info.image %>" width="171" height="96" alt=""></a></div>                        <% } else { %>                             <img src="<%= info.image %>" width="171" height="96" alt=""></a></div>                        <% } %>                    <div class="info">                            <% if (info.info_link !== "#") { %>                                 <h3><a href="<%= info.info_link %>"><%= info.title %></a> <time><%= info.showTime %></time></h3>                            <% } else { %>                                 <h3><span><%= info.title %></span> <time><%= info.showTime %></time></h3>                            <% } %>                        <p class="summary"><%= info.description %></p>                        <% if (info.feature) { %>                        <p class="more"><a href="<%= info.feature.link %>"><%= info.feature.title %></a> <span>&rsaquo;</span></p>                        <% } %>                    </div>';data.data.info.info_link=data.data.info.link?data.data.info.link:"";var markup=_.template(template,{info:data.data.info});"promo"===data.type&&holder.addClass("alt"),holder.html(markup),holder.addClass("active"),holder.find("a").each(function(){var a=$(this),href=a.attr("href");href&&"#"!==$.trim(href)&&a.attr("href",self.setHref(href))})},App.prototype.setHref=function(href){var query="",hash="";href.indexOf("?")>-1&&(query=href.substr(href.indexOf("?")+1).split("?")[0],href=href.substring(0,href.indexOf("?")),query=$.trim(query),1===query.length&&(query="")),href.indexOf("#")>-1&&(hash=href.substr(href.indexOf("#")+1).split("#")[0],href=href.substring(0,href.indexOf("#")));var queryVal="intcmp=fnheader";return href=href+"?"+queryVal+(query.length>1?"&"+query:""),href+=hash.length>1?"#"+hash:""};var APP=new App;return function(){APP.init()}}(),OnAirShows=function(){var CONST={};CONST.feed="//www.foxnews.com/js/onair.js",CONST.callback="FeedSource_FNCTV";var App=function(){};App.prototype.init=function(){var self=this;$("#section-head #show-data").each(function(){self._HOLDER=$(this),self.set()})},App.prototype.set=function(){var self=this;window[CONST.callback]=function(data){return data?void self.render(data):!1},loadScript(CONST.feed)},App.prototype.render=function(data){var x,self=this,holder=self._HOLDER,list=holder.children("ul:first"),schedules=data.schedules.today,nextDay=data.schedules.tomorrow,renderHtml=function(index,over){over=over||!1;var x,html=[],end=over?index:index+1,cntr=0,markup=function(info){cntr++;var str="<li"+(1===cntr?' class="first"':"")+'>                                <p class="media"><a href="'+info.link+'"><img src="'+info.img+'" alt="" /></a></p>                                <p class="time">'+setTime(info.time)+'</p>                                <div class="info">                                    <p class="summary"><a href="'+info.link+'" title="'+info.dek+'">'+info.title+'</a></p>                                    <p class="relation">'+setDescription(info.dek)+"</p>                                    "+(1===cntr?'<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>':"")+"                                </div>                            </li>";return str};for(x=index;end>=x;x++)html.push(markup(schedules[x]));over&&nextDay[0]&&html.push(markup(nextDay[0])),list.html(html.join(""))},current=new Date(data.now.date+" "+data.now.time),currentMil=parseInt(current.getHours()+""+(current.getMinutes()<10?"0"+current.getMinutes():current.getMinutes()),10);for(x=0;x<schedules.length;x++){var info=schedules[x],nextSched=schedules[x+1]?schedules[x+1]:!1;try{var tm=$.trim(info.time).toLowerCase();tm=" "!==tm.charAt(tm.indexOf("m")-2)?tm.replace("pm"," pm").replace("am"," am"):tm;var schedDate=new Date(data.now.date+" "+tm),schedDateMil=parseInt(schedDate.getHours()+""+(schedDate.getMinutes()<10?"0"+schedDate.getMinutes():schedDate.getMinutes()),10);if(!nextSched){renderHtml(x,!0);break}var tm2=$.trim(nextSched.time).toLowerCase();tm2=" "!==tm2.charAt(tm2.indexOf("m")-2)?tm2.replace("pm"," pm").replace("am"," am"):tm2;var nextSchedDate=new Date(data.now.date+" "+tm2),nextSchedDateMil=parseInt(nextSchedDate.getHours()+""+(nextSchedDate.getMinutes()<10?"0"+nextSchedDate.getMinutes():nextSchedDate.getMinutes()),10);if(currentMil>=schedDateMil&&nextSchedDateMil>currentMil){renderHtml(x);break}}catch(err){log("[head.onAir] Error: "+err)}}};var setTime=function(info){return info=$.trim(info),info.split(":")[0]+info.charAt(info.length-2)+"<span>et</span>"},setDescription=function(desc){var limit=35;return desc.length>limit?desc.substring(0,limit)+"...":desc},APP=new App;return function(){APP.init()}}(),FB_WhatsHot=function(){var CONST={};CONST.feed="//global.fncstatic.com/static/all/generated/js/fb2-whatshot.js",CONST.callback="fox_header_whatshot";var App=function(){};App.prototype.init=function(){var self=this;$("#headlines .dv-list:first").each(function(){self._HOLDER=$(this),self.set()})},App.prototype.set=function(){var self=this;window[CONST.callback]=function(data){return data?void self.render(data):!1},loadScript(CONST.feed)},App.prototype.render=function(data){var self=this,holder=self._HOLDER,arr=[],len=data.length;arr.push("<h2>What's Hot</h2><ul>");for(var x=0;len>x;x++){var item=data[x],css=0===x?" dv-item-first":x===len-1?" dv-item-last":"";arr.push('<li class="dv-item'+css+'">'),arr.push('<a href="'+item.link+'">'+item.title+"</a>"),arr.push("</li>")}arr.push("</ul>"),holder.html(arr.join(""))};var APP=new App;return function(){APP.init()}}(),FB_SearchAutoComplete=function(){var App=function(){};App.prototype.init=function(){var self=this;$("form#searchArea").each(function(){self._HOLDER=$(this),self.set()})},App.prototype.set=function(){var self=this,holder=self._HOLDER;holder.each(function(){var form=$(this),input=form.find("input[type='text']"),inputOrigVal=(form.find("input[type='image'],input[type='submit']"),input.attr("value"));input.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var inp=$(this),str=inp.attr("value").length>0?inp.attr("value"):inputOrigVal;inp.attr("value",str)}).focus(function(){var inp=$(this),str=inp.attr("value").indexOf(inputOrigVal)>-1?"":inp.attr("value");inp.attr("value",str)}),IDC_quoteComplete.init()})},window.IDC_quoteComplete=function(){var quoteComplete={index:-1,totalResults:0,results:!1,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){$("."+quoteComplete.resultsDiv).html(""),quoteComplete.results=!1,quoteComplete.index=-1},init:function(){$(quoteComplete.field).focus(function(){$(this).val()===quoteComplete.defaultText&&$(this).val(""),quoteComplete.reset()}),$(quoteComplete.field).blur(function(){""===$(this).val()&&$(this).val(quoteComplete.defaultText),setTimeout(function(){quoteComplete.reset()},500)}),$(quoteComplete.field).parents("form").submit(function(){return quoteComplete.index>-1&&$(quoteComplete.field).val($("#search_drop_overlay ul li:eq("+quoteComplete.index+") a span.ticker").text()),quoteComplete.index>-1&&(quoteComplete.action=quoteComplete.quoteUrl),quoteComplete.action+=encodeURIComponent($(quoteComplete.field).val()),quoteComplete.index>-1&&quoteComplete.reset(),document.location=quoteComplete.action,!1});var callbackFN="FOX_IDC_QuoteResponse";window[callbackFN]=function(data){quoteComplete.response(data)},$(quoteComplete.field).keyup(function(event){if(event.keyCode>=65&&event.keyCode<=90||event.keyCode>=97&&event.keyCode<=122||8===event.keyCode){quoteComplete.index=-1;var val=$(quoteComplete.field).val();$("."+quoteComplete.resultsDiv).html(""),""!==val?($.getJSON(quoteComplete.url+"?q="+val+"&callback="+callbackFN+"&jsonp=?"),quoteComplete.results=!0):quoteComplete.results=!1}else 40===event.keyCode||38===event.keyCode?quoteComplete.results&&($("#search_drop_overlay ul li:eq("+quoteComplete.index+")").removeClass("selected"),$("#search_drop_overlay ul li a:eq("+quoteComplete.index+")").removeClass("selected"),40===event.keyCode?quoteComplete.index<quoteComplete.totalResults-1?quoteComplete.index++:quoteComplete.index=0:quoteComplete.index>0?quoteComplete.index--:quoteComplete.index=quoteComplete.totalResults-1,$("#search_drop_overlay ul li:eq("+quoteComplete.index+")").addClass("selected"),$("#search_drop_overlay ul li a:eq("+quoteComplete.index+")").addClass("selected")):27===event.keyCode&&quoteComplete.reset()}),$(quoteComplete.field).parents("form").after('<div class="'+quoteComplete.resultsDiv+'"></div>')},response:function(data){var list="",val=$(quoteComplete.field).val();""!==data?(quoteComplete.totalResults=$(data).size(),list+="<ul>",$.each(data,function(){var re=new RegExp(val,"i"),symPos=this.s.search(re),symNamePos=this.n.search(re),sym=symPos>-1?this.s.replace(re,"<strong>"+this.s.slice(symPos,symPos+val.length)+"</strong>"):this.s,symName=symNamePos>-1?this.n.replace(re,"<strong>"+this.n.slice(symNamePos,symNamePos+val.length)+"</strong>"):this.n,symLink=this.s;list+='<li><a href="'+quoteComplete.quoteUrl+symLink+'"><span class="ticker">'+sym+'</span><span class="corporation">'+symName+"</span></a></li>"}),list+="</ul>"):(quoteComplete.totalResults=0,list="<p>No suggestions available</p>"),$("."+quoteComplete.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+list+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+quoteComplete.action+val+'">Search for News &amp; Videos "<strong>'+val.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>'),quoteComplete.initMouseEvents()},initMouseEvents:function(){$("."+quoteComplete.resultsDiv+" ul li").mouseover(function(){quoteComplete.index>-1&&$("."+quoteComplete.resultsDiv+" ul li:eq("+quoteComplete.index+")").removeClass("selected"),$(this).addClass("selected")}),$("."+quoteComplete.resultsDiv+" ul li").mouseout(function(){$(this).removeClass("selected")}),$("."+quoteComplete.resultsDiv+" ul li a").mouseover(function(){quoteComplete.index>-1&&$("."+quoteComplete.resultsDiv+" ul li a:eq("+quoteComplete.index+")").removeClass("selected"),$(this).addClass("selected")}),$("."+quoteComplete.resultsDiv+" ul li a").mouseout(function(){$(this).removeClass("selected")})}};return quoteComplete}();var APP=new App;return function(){APP.init()}}(),setMetaDescriptor=function(){window.FOX_metadescriptor=window.FOX_metadescriptor||function(){var obj={};return $("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");nameAttr?(obj.name||(obj.name={}),obj.name[nameAttr]=val?val:!1):propAttr&&(obj.property||(obj.property={}),obj.property[propAttr]=val?val:!1)}),obj}()},loadScript=function(src){var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=src,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(script)},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};!function(){var docReady=function(){$(document).ready(function(){FOX_Header()})};try{if(window.FOX&&FOX.site&&"function"==typeof FOX.site.bottomInit){var cloned=FOX.site.bottomInit;FOX.site.bottomInit=function(){FOX_Header(),cloned()}}else window.FOX_HP&&FOX_HP.site.OnPageReady?FOX_HP.site.OnPageReady(function(){FOX_Header()}):docReady()}catch(err){docReady()}}()}(jQuery);var swfobject=function(){function callDomLoadFunctions(){if(!isDomLoaded){try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=!0;for(var dl=domLoadFnArr.length,i=0;dl>i;i++)domLoadFnArr[i]()}}function addDomLoadEvent(fn){isDomLoaded?fn():domLoadFnArr[domLoadFnArr.length]=fn}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF)win.addEventListener("load",fn,!1);else if(typeof doc.addEventListener!=UNDEF)doc.addEventListener("load",fn,!1);else if(typeof win.attachEvent!=UNDEF)addListener(win,"onload",fn);else if("function"==typeof win.onload){var fnOld=win.onload;win.onload=function(){fnOld(),fn()}}else win.onload=fn}function main(){plugin?testPlayerVersion():matchVersions()}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0],o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;!function(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");d&&(d=d.split(" ")[1].split(","),ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)])}else if(10>counter)return counter++,void setTimeout(arguments.callee,10);b.removeChild(o),t=null,matchVersions()}()}else matchVersions()}function matchVersions(){var rl=regObjArr.length;if(rl>0)for(var i=0;rl>i;i++){var id=regObjArr[i].id,cb=regObjArr[i].callbackFn,cbObj={success:!1,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj)if(!hasPlayerVersion(regObjArr[i].swfVersion)||ua.wk&&ua.wk<312)if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall,att.width=obj.getAttribute("width")||"0",att.height=obj.getAttribute("height")||"0",obj.getAttribute("class")&&(att.styleclass=obj.getAttribute("class")),obj.getAttribute("align")&&(att.align=obj.getAttribute("align"));for(var par={},p=obj.getElementsByTagName("param"),pl=p.length,j=0;pl>j;j++)"movie"!=p[j].getAttribute("name").toLowerCase()&&(par[p[j].getAttribute("name")]=p[j].getAttribute("value"));showExpressInstall(att,par,id,cb)}else displayAltContent(obj),cb&&cb(cbObj);else setVisibility(id,!0),cb&&(cbObj.success=!0,cbObj.ref=getObjectById(id),cb(cbObj))}else if(setVisibility(id,!0),cb){var o=getObjectById(id);o&&typeof o.SetVariable!=UNDEF&&(cbObj.success=!0,cbObj.ref=o),cb(cbObj)}}}function getObjectById(objectIdStr){var r=null,o=getElementById(objectIdStr);if(o&&"OBJECT"==o.nodeName)if(typeof o.SetVariable!=UNDEF)r=o;else{var n=o.getElementsByTagName(OBJECT)[0];n&&(r=n)}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=!0,storedCallbackFn=callbackFn||null,storedCallbackObj={success:!1,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){"OBJECT"==obj.nodeName?(storedAltContent=abstractAltContent(obj),storedAltContentId=null):(storedAltContent=obj,storedAltContentId=replaceElemIdStr),att.id=EXPRESS_INSTALL_ID,(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310)&&(att.width="310"),(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137)&&(att.height="137"),doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF?par.flashvars+="&"+fv:par.flashvars=fv,ua.ie&&ua.win&&4!=obj.readyState){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew",newObj.setAttribute("id",replaceElemIdStr),obj.parentNode.insertBefore(newObj,obj),obj.style.display="none",function(){4==obj.readyState?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&4!=obj.readyState){var el=createElement("div");obj.parentNode.insertBefore(el,obj),el.parentNode.replaceChild(abstractAltContent(obj),el),obj.style.display="none",function(){4==obj.readyState?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}else obj.parentNode.replaceChild(abstractAltContent(obj),obj)}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie)ac.innerHTML=obj.innerHTML;else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c)for(var cl=c.length,i=0;cl>i;i++)1==c[i].nodeType&&"PARAM"==c[i].nodeName||8==c[i].nodeType||ac.appendChild(c[i].cloneNode(!0))}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312)return r;if(el)if(typeof attObj.id==UNDEF&&(attObj.id=id),ua.ie&&ua.win){var att="";for(var i in attObj)attObj[i]!=Object.prototype[i]&&("data"==i.toLowerCase()?parObj.movie=attObj[i]:"styleclass"==i.toLowerCase()?att+=' class="'+attObj[i]+'"':"classid"!=i.toLowerCase()&&(att+=" "+i+'="'+attObj[i]+'"'));var par="";for(var j in parObj)parObj[j]!=Object.prototype[j]&&(par+='<param name="'+j+'" value="'+parObj[j]+'" />');el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>",objIdArr[objIdArr.length]=attObj.id,r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj)attObj[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?o.setAttribute("class",attObj[m]):"classid"!=m.toLowerCase()&&o.setAttribute(m,attObj[m]));for(var n in parObj)parObj[n]!=Object.prototype[n]&&"movie"!=n.toLowerCase()&&createObjParam(o,n,parObj[n]);el.parentNode.replaceChild(o,el),r=o}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName),p.setAttribute("value",pValue),el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);obj&&"OBJECT"==obj.nodeName&&(ua.ie&&ua.win?(obj.style.display="none",function(){4==obj.readyState?removeObjectInIE(id):setTimeout(arguments.callee,10)}()):obj.parentNode.removeChild(obj))}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj)"function"==typeof obj[i]&&(obj[i]=null);obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn),listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");return v[0]=parseInt(v[0],10),v[1]=parseInt(v[1],10)||0,v[2]=parseInt(v[2],10)||0,pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?!0:!1}function createCSS(sel,decl,media,newStyle){if(!ua.ie||!ua.mac){var h=doc.getElementsByTagName("head")[0];if(h){var m=media&&"string"==typeof media?media:"screen";if(newStyle&&(dynamicStylesheet=null,dynamicStylesheetMedia=null),!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css"),s.setAttribute("media",m),dynamicStylesheet=h.appendChild(s),ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0&&(dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]),dynamicStylesheetMedia=m}if(ua.ie&&ua.win)try{sel=sel.replace(/\:/g,"\\:"),dynamicStylesheet.addRule(sel,decl)}catch(err){try{dynamicStylesheet.addRule(sel,decl)}catch(err){}}else dynamicStylesheet&&typeof doc.createTextNode!=UNDEF&&dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))
}}}function setVisibility(id,isVisible){if(autoHideShow){var v=isVisible?"visible":"hidden";isDomLoaded&&getElementById(id)?getElementById(id).style.visibility=v:createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/,hasBadChars=null!=regex.exec(s);return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}{var storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,dynamicStylesheet,dynamicStylesheetMedia,UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=!1,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],isDomLoaded=!1,isExpressInstallActive=!1,autoHideShow=!0,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=/win/.test(p?p:u),mac=/mac/.test(p?p:u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,ie=!1,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT)d=nav.plugins[SHOCKWAVE_FLASH].description,!d||typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin||(plugin=!0,ie=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);a&&(d=a.GetVariable("$version"),d&&(ie=!0,d=d.split(" ")[1].split(","),playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]))}catch(e){}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}();!function(){ua.w3&&((typeof doc.readyState!=UNDEF&&"complete"==doc.readyState||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))&&callDomLoadFunctions(),isDomLoaded||(typeof doc.addEventListener!=UNDEF&&doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,!1),ua.ie&&ua.win&&(doc.attachEvent(ON_READY_STATE_CHANGE,function(){"complete"==doc.readyState&&(doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee),callDomLoadFunctions())}),win==top&&!function(){if(!isDomLoaded){try{doc.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}callDomLoadFunctions()}}()),ua.wk&&!function(){return isDomLoaded?void 0:/loaded|complete/.test(doc.readyState)?void callDomLoadFunctions():void setTimeout(arguments.callee,0)}(),addLoadEvent(callDomLoadFunctions)))}(),function(){ua.ie&&ua.win&&window.attachEvent("onunload",function(){for(var ll=listenersArr.length,i=0;ll>i;i++)listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2]);for(var il=objIdArr.length,j=0;il>j;j++)removeSWF(objIdArr[j]);for(var k in ua)ua[k]=null;ua=null;for(var l in swfobject)swfobject[l]=null;swfobject=null})}()}return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr,regObj.swfVersion=swfVersionStr,regObj.expressInstall=xiSwfUrlStr,regObj.callbackFn=callbackFn,regObjArr[regObjArr.length]=regObj,setVisibility(objectIdStr,!1)}else callbackFn&&callbackFn({success:!1,id:objectIdStr})},getObjectById:function(objectIdStr){return ua.w3?getObjectById(objectIdStr):void 0},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:!1,id:replaceElemIdStr};ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr?(setVisibility(replaceElemIdStr,!1),addDomLoadEvent(function(){widthStr+="",heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT)for(var i in attObj)att[i]=attObj[i];att.data=swfUrlStr,att.width=widthStr,att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT)for(var j in parObj)par[j]=parObj[j];if(flashvarsObj&&typeof flashvarsObj===OBJECT)for(var k in flashvarsObj)typeof par.flashvars!=UNDEF?par.flashvars+="&"+k+"="+flashvarsObj[k]:par.flashvars=k+"="+flashvarsObj[k];if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);att.id==replaceElemIdStr&&setVisibility(replaceElemIdStr,!0),callbackObj.success=!0,callbackObj.ref=obj}else{if(xiSwfUrlStr&&canExpressInstall())return att.data=xiSwfUrlStr,void showExpressInstall(att,par,replaceElemIdStr,callbackFn);setVisibility(replaceElemIdStr,!0)}callbackFn&&callbackFn(callbackObj)})):callbackFn&&callbackFn(callbackObj)},switchOffAutoHideShow:function(){autoHideShow=!1},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){return ua.w3?createSWF(attObj,parObj,replaceElemIdStr):void 0},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){ua.w3&&canExpressInstall()&&showExpressInstall(att,par,replaceElemIdStr,callbackFn)},removeSWF:function(objElemIdStr){ua.w3&&removeSWF(objElemIdStr)},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){ua.w3&&createCSS(selStr,declStr,mediaStr,newStyleBoolean)},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)&&(q=q.split("?")[1]),null==param)return urlEncodeIfNecessary(q);for(var pairs=q.split("&"),i=0;i<pairs.length;i++)if(pairs[i].substring(0,pairs[i].indexOf("="))==param)return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);obj&&storedAltContent&&(obj.parentNode.replaceChild(storedAltContent,obj),storedAltContentId&&(setVisibility(storedAltContentId,!0),ua.ie&&ua.win&&(storedAltContent.style.display="block")),storedCallbackFn&&storedCallbackFn(storedCallbackObj)),isExpressInstallActive=!1}}}}();(function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:b+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:b+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var a=e[u],i=r[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(u=l(),u["false"]=u["null"]=u["true"]=u.undefined=!1,o=l(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function l(){return y.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function f(n){return"function"!=typeof n.toString&&"string"==typeof(n+"")}function c(n){n.length=0,v.length<w&&v.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<w&&y.push(n)}function s(n,t,e){t||(t=0),"undefined"==typeof e&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function g(e){function v(n){return n&&"object"==typeof n&&!qe(n)&&we.call(n,"__wrapped__")?n:new y(n)}function y(n,t){this.__chain__=!!t,this.__wrapped__=n}function w(n){function t(){if(r){var n=s(r);je.apply(n,arguments)}if(this instanceof t){var o=nt(e.prototype),n=e.apply(o,n||arguments);return xt(n)?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return ze(t,n),t}function Y(n,t,e,r,u){if(e){var o=e(n);if("undefined"!=typeof o)return o}if(!xt(n))return n;var a=he.call(n);if(!V[a]||!Le.nodeClass&&f(n))return n;var l=Te[a];switch(a){case L:case z:return new l(+n);case W:case M:return new l(n);case J:return o=l(n.source,S.exec(n)),o.lastIndex=n.lastIndex,o}if(a=qe(n),t){var p=!r;r||(r=i()),u||(u=i());for(var g=r.length;g--;)if(r[g]==n)return u[g];o=a?l(n.length):{}}else o=a?s(n):Ye({},n);return a&&(we.call(n,"index")&&(o.index=n.index),we.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(a?Xe:tr)(n,function(n,a){o[a]=Y(n,t,e,r,u)}),p&&(c(r),c(u)),o):o}function nt(n){return xt(n)?Se(n):{}}function tt(n,t,e){if("function"!=typeof n)return Ht;if("undefined"==typeof t||!("prototype"in n))return n;var r=n.__bindData__;if("undefined"==typeof r&&(Le.funcNames&&(r=!n.name),r=r||!Le.funcDecomp,!r)){var u=be.call(n);Le.funcNames||(r=!A.test(u)),r||(r=B.test(u),ze(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function et(n){function t(){var n=l?a:this;if(u){var h=s(u);je.apply(h,arguments)}return(o||c)&&(h||(h=s(arguments)),o&&je.apply(h,o),c&&h.length<i)?(r|=16,et([e,p?r:-4&r,h,null,a,i])):(h||(h=arguments),f&&(e=n[g]),this instanceof t?(n=nt(e.prototype),h=e.apply(n,h),xt(h)?h:n):e.apply(n,h))}var e=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],l=1&r,f=2&r,c=4&r,p=8&r,g=e;return ze(t,n),t}function rt(e,r){var u=-1,a=ht(),i=e?e.length:0,l=i>=_&&a===n,f=[];if(l){var c=o(r);c?(a=t,r=c):l=!1}for(;++u<i;)c=e[u],0>a(r,c)&&f.push(c);return l&&p(r),f}function ot(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qe(a)||dt(a))){t||(a=ot(a,t,e));var i=-1,l=a.length,f=o.length;for(o.length+=l;++i<l;)o[f++]=a[i]}else e||o.push(a)}return o}function at(n,t,e,r,u,o){if(e){var a=e(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&X[typeof n]||t&&X[typeof t]))return!1;if(null==n||null==t)return n===t;var l=he.call(n),p=he.call(t);if(l==T&&(l=G),p==T&&(p=G),l!=p)return!1;switch(l){case L:case z:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case J:case M:return n==ie(t)}if(p=l==$,!p){var s=we.call(n,"__wrapped__"),g=we.call(t,"__wrapped__");if(s||g)return at(s?n.__wrapped__:n,g?t.__wrapped__:t,e,r,u,o);if(l!=G||!Le.nodeClass&&(f(n)||f(t)))return!1;if(l=!Le.argsObject&&dt(n)?oe:n.constructor,s=!Le.argsObject&&dt(t)?oe:t.constructor,l!=s&&!(jt(l)&&l instanceof l&&jt(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}for(l=!u,u||(u=i()),o||(o=i()),s=u.length;s--;)if(u[s]==n)return o[s]==t;var h=0,a=!0;if(u.push(n),o.push(t),p){if(s=n.length,h=t.length,(a=h==s)||r)for(;h--;)if(p=s,g=t[h],r)for(;p--&&!(a=at(n[p],g,e,r,u,o)););else if(!(a=at(n[h],g,e,r,u,o)))break}else nr(t,function(t,i,l){return we.call(l,i)?(h++,a=we.call(n,i)&&at(n[i],t,e,r,u,o)):void 0}),a&&!r&&nr(n,function(n,t,e){return we.call(e,t)?a=-1<--h:void 0});return u.pop(),o.pop(),l&&(c(u),c(o)),a}function it(n,t,e,r,u){(qe(t)?Dt:tr)(t,function(t,o){var a,i,l=t,f=n[o];if(t&&((i=qe(t))||er(t))){for(l=r.length;l--;)if(a=r[l]==t){f=u[l];break}if(!a){var c;e&&(l=e(f,t),c="undefined"!=typeof l)&&(f=l),c||(f=i?qe(f)?f:[]:er(f)?f:{}),r.push(t),u.push(f),c||it(f,t,e,r,u)}}else e&&(l=e(f,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(f=l);n[o]=f})}function lt(n,t){return n+de(Fe()*(t-n+1))}function ft(e,r,u){var a=-1,l=ht(),f=e?e.length:0,s=[],g=!r&&f>=_&&l===n,h=u||g?i():s;for(g&&(h=o(h),l=t);++a<f;){var v=e[a],y=u?u(v,a,e):v;(r?!a||h[h.length-1]!==y:0>l(h,y))&&((u||g)&&h.push(y),s.push(v))}return g?(c(h.k),p(h)):u&&c(h),s}function ct(n){return function(t,e,r){var u={};if(e=v.createCallback(e,r,3),qe(t)){r=-1;for(var o=t.length;++r<o;){var a=t[r];n(u,a,e(a,r,t),t)}}else Xe(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function pt(n,t,e,r,u,o){var a=1&t,i=4&t,l=16&t,f=32&t;if(!(2&t||jt(n)))throw new le;l&&!e.length&&(t&=-17,l=e=!1),f&&!r.length&&(t&=-33,f=r=!1);var c=n&&n.__bindData__;return c&&!0!==c?(c=s(c),c[2]&&(c[2]=s(c[2])),c[3]&&(c[3]=s(c[3])),!a||1&c[1]||(c[4]=u),!a&&1&c[1]&&(t|=8),!i||4&c[1]||(c[5]=o),l&&je.apply(c[2]||(c[2]=[]),e),f&&Ee.apply(c[3]||(c[3]=[]),r),c[1]|=t,pt.apply(null,c)):(1==t||17===t?w:et)([n,t,e,r,u,o])}function st(){Q.h=F,Q.b=Q.c=Q.g=Q.i="",Q.e="t",Q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n)Q[e]=n[e];t=Q.a,Q.d=/^[^,]+/.exec(t)[0],n=ee,t="return function("+t+"){",e=Q;var r="var n,t="+e.d+",E="+e.e+";if(!t)return E;"+e.i+";";e.b?(r+="var u=t.length;n=-1;if("+e.b+"){",Le.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+e.g+";}}else{"):Le.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+e.g+";}}else{"),Le.enumPrototypes&&(r+="var G=typeof t=='function';"),Le.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var u=[];if(Le.enumPrototypes&&u.push('!(G&&n=="prototype")'),Le.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),e.j&&e.f)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}";else if(r+="for(n in t){",e.j&&u.push("m.call(t, n)"),u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}",Le.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)r+="n='"+e.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",e.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+e.g+"}";r+="}"}return(e.b||Le.nonEnumArgs)&&(r+="}"),r+=e.c+";return E",n("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+r+"}")(tt,q,ce,we,d,dt,qe,kt,Q.f,pe,X,$e,M,se,he)}function gt(n){return Ve[n]}function ht(){var t=(t=v.indexOf)===zt?n:t;return t}function vt(n){return"function"==typeof n&&ve.test(n)}function yt(n){var t,e;return!n||he.call(n)!=G||(t=n.constructor,jt(t)&&!(t instanceof t))||!Le.argsClass&&dt(n)||!Le.nodeClass&&f(n)?!1:Le.ownLast?(nr(n,function(n,t,r){return e=we.call(r,t),!1}),!1!==e):(nr(n,function(n,t){e=t}),"undefined"==typeof e||we.call(n,e))}function mt(n){return He[n]}function dt(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==T||!1}function bt(n,t,e){var r=We(n),u=r.length;for(t=tt(t,e,3);u--&&(e=r[u],!1!==t(n[e],e,n)););return n}function _t(n){var t=[];return nr(n,function(n,e){jt(n)&&t.push(e)}),t.sort()}function wt(n){for(var t=-1,e=We(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function jt(n){return"function"==typeof n}function xt(n){return!(!n||!X[typeof n])}function Ct(n){return"number"==typeof n||n&&"object"==typeof n&&he.call(n)==W||!1}function kt(n){return"string"==typeof n||n&&"object"==typeof n&&he.call(n)==M||!1}function Et(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;)u[t]=n[e[t]];return u}function Ot(n,t,e){var r=-1,u=ht(),o=n?n.length:0,a=!1;return e=(0>e?Be(0,o+e):e)||0,qe(n)?a=-1<u(n,t,e):"number"==typeof o?a=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):Xe(n,function(n){return++r<e?void 0:!(a=n===t)}),a}function St(n,t,e){var r=!0;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&(r=!!t(n[e],e,n)););}else Xe(n,function(n,e,u){return r=!!t(n,e,u)});return r}function At(n,t,e){var r=[];if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}}else Xe(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){if(t=v.createCallback(t,e,3),!qe(n)){var r;return Xe(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r}e=-1;for(var u=n.length;++e<u;){var o=n[e];if(t(o,e,n))return o}}function Dt(n,t,e){if(t&&"undefined"==typeof e&&qe(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else Xe(n,t,e);return n}function Nt(n,t,e){var r=n,u=n?n.length:0;if(t=t&&"undefined"==typeof e?t:tt(t,e,3),qe(n))for(;u--&&!1!==t(n[u],u,n););else{if("number"!=typeof u)var o=We(n),u=o.length;else Le.unindexedChars&&kt(n)&&(r=n.split(""));Xe(n,function(n,e,a){return e=o?o[--u]:--u,t(r[e],e,a)})}return n}function Bt(n,t,e){var r=-1,u=n?n.length:0,o=Zt("number"==typeof u?u:0);if(t=v.createCallback(t,e,3),qe(n))for(;++r<u;)o[r]=t(n[r],r,n);else Xe(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function Pt(n,t,e){var u=-1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i>o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){e=t(n,e,r),e>u&&(u=e,o=n)});return o}function Rt(n,t,e,r){var u=3>arguments.length;if(t=v.createCallback(t,r,4),qe(n)){var o=-1,a=n.length;for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n)}else Xe(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Ft(n,t,e,r){var u=3>arguments.length;return t=v.createCallback(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Zt("number"==typeof e?e:0);return Dt(n,function(n){var e=lt(0,++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&!(r=t(n[e],e,n)););}else Xe(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Lt(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=v.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[0]:h;return s(n,0,Pe(Be(0,r),u))}function zt(t,e,r){if("number"==typeof r){var u=t?t.length:0;r=0>r?Be(0,u+r):r||0}else if(r)return r=Kt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if("number"!=typeof t&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=v.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Be(0,t);return s(n,r)}function Kt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?v.createCallback(e,r,1):Ht,t=e(t);o>u;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;return u}function Wt(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(e=v.createCallback(e,r,3)),ft(n,t,e)}function Gt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?Pt(ar(n,"length")):0,r=Zt(0>e?0:e);++t<e;)r[t]=ar(n,t);return r}function Jt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||qe(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?pt(n,17,s(arguments,2),null,t):pt(n,1,null,null,t)}function Vt(n,t,e){var r,u,o,a,i,l,f,c=0,p=!1,s=!0;if(!jt(n))throw new le;if(t=Be(0,t)||0,!0===e)var g=!0,s=!1;else xt(e)&&(g=e.leading,p="maxWait"in e&&(Be(t,e.maxWait)||0),s="trailing"in e?e.trailing:s);var v=function(){var e=t-(ir()-a);e>0?l=Ce(v,e):(u&&me(u),e=f,u=l=f=h,e&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null)))},y=function(){l&&me(l),u=l=f=h,(s||p!==t)&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null))};return function(){if(r=arguments,a=ir(),i=this,f=s&&(l||!g),!1===p)var e=g&&!l;else{u||g||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=me(u)),c=a,o=n.apply(i,r)):u||(u=Ce(y,h))}return m&&l?l=me(l):l||t===p||(l=Ce(v,t)),e&&(m=!0,o=n.apply(i,r)),!m||l||u||(r=i=null),o}}function Ht(n){return n}function Ut(n,t,e){var r=!0,u=t&&_t(t);t&&(e||u.length)||(null==e&&(e=t),o=y,t=n,n=v,u=_t(t)),!1===e?r=!1:xt(e)&&"chain"in e&&(r=e.chain);var o=n,a=jt(o);Dt(u,function(e){var u=n[e]=t[e];a&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,a=[e];if(je.apply(a,arguments),a=u.apply(n,a),r||t){if(e===a&&xt(a))return this;a=new o(a),a.__chain__=t}return a})})}function Qt(){}function Xt(n){return function(t){return t[n]}}function Yt(){return this.__wrapped__}e=e?ut.defaults(Z.Object(),e,ut.pick(Z,R)):Z;var Zt=e.Array,ne=e.Boolean,te=e.Date,ee=e.Function,re=e.Math,ue=e.Number,oe=e.Object,ae=e.RegExp,ie=e.String,le=e.TypeError,fe=[],ce=e.Error.prototype,pe=oe.prototype,se=ie.prototype,ge=e._,he=pe.toString,ve=ae("^"+ie(he).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ye=re.ceil,me=e.clearTimeout,de=re.floor,be=ee.prototype.toString,_e=vt(_e=oe.getPrototypeOf)&&_e,we=pe.hasOwnProperty,je=fe.push,xe=pe.propertyIsEnumerable,Ce=e.setTimeout,ke=fe.splice,Ee=fe.unshift,Oe=function(){try{var n={},t=vt(t=oe.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e}(),Se=vt(Se=oe.create)&&Se,Ae=vt(Ae=Zt.isArray)&&Ae,Ie=e.isFinite,De=e.isNaN,Ne=vt(Ne=oe.keys)&&Ne,Be=re.max,Pe=re.min,Re=e.parseInt,Fe=re.random,Te={};Te[$]=Zt,Te[L]=ne,Te[z]=te,Te[K]=ee,Te[G]=oe,Te[W]=ue,Te[J]=ae,Te[M]=ie;var $e={};$e[$]=$e[z]=$e[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$e[L]=$e[M]={constructor:!0,toString:!0,valueOf:!0},$e[q]=$e[K]=$e[J]={constructor:!0,toString:!0},$e[G]={constructor:!0},function(){for(var n=F.length;n--;){var t,e=F[n];for(t in $e)we.call($e,t)&&!we.call($e[t],e)&&($e[t][e]=!1)}}(),y.prototype=v.prototype;var Le=v.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},r=[];n.prototype={valueOf:1,y:1};for(var u in new n)r.push(u);for(u in arguments);Le.argsClass=he.call(arguments)==T,Le.argsObject=arguments.constructor==oe&&!(arguments instanceof Zt),Le.enumErrorProps=xe.call(ce,"message")||xe.call(ce,"name"),Le.enumPrototypes=xe.call(n,"prototype"),Le.funcDecomp=!vt(e.WinRTError)&&B.test(g),Le.funcNames="string"==typeof ee.name,Le.nonEnumArgs=0!=u,Le.nonEnumShadows=!/valueOf/.test(r),Le.ownLast="x"!=r[0],Le.spliceObjects=(fe.splice.call(t,0,1),!t[0]),Le.unindexedChars="xx"!="x"[0]+oe("x")[0];try{Le.nodeClass=!(he.call(document)==G&&!({toString:0}+""))}catch(o){Le.nodeClass=!0}}(1),v.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:v}},Se||(nt=function(){function n(){}return function(t){if(xt(t)){n.prototype=t;var r=new n;n.prototype=null}return r||e.Object()}}());var ze=Oe?function(n,t){U.value=t,Oe(n,"__bindData__",U)}:Qt;Le.argsClass||(dt=function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&we.call(n,"callee")&&!xe.call(n,"callee")||!1});var qe=Ae||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==$||!1},Ke=st({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),We=Ne?function(n){return xt(n)?Le.enumPrototypes&&"function"==typeof n||Le.nonEnumArgs&&n.length&&dt(n)?Ke(n):Ne(n):[]}:Ke,Ge={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:We,g:"if(e(t[n],n,g)===false)return E"},Je={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:We,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Me={i:"if(!B[typeof t])return E;"+Ge.i,b:!1},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=wt(Ve),Ue=ae("("+We(He).join("|")+")","g"),Qe=ae("["+We(Ve).join("")+"]","g"),Xe=st(Ge),Ye=st(Je,{i:Je.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Ze=st(Je),nr=st(Ge,Me,{j:!1}),tr=st(Ge,Me);jt(/x/)&&(jt=function(n){return"function"==typeof n&&he.call(n)==K});var er=_e?function(n){if(!n||he.call(n)!=G||!Le.argsClass&&dt(n))return!1;var t=n.valueOf,e=vt(t)&&(e=_e(t))&&_e(e);return e?n==e||_e(n)==e:yt(n)}:yt,rr=ct(function(n,t,e){we.call(n,e)?n[e]++:n[e]=1}),ur=ct(function(n,t,e){(we.call(n,e)?n[e]:n[e]=[]).push(t)}),or=ct(function(n,t,e){n[e]=t}),ar=Bt,ir=vt(ir=te.now)&&ir||function(){return(new te).getTime()},lr=8==Re(j+"08")?Re:function(n,t){return Re(kt(n)?n.replace(D,""):n,t||0)};return v.after=function(n,t){if(!jt(t))throw new le;return function(){return 1>--n?t.apply(this,arguments):void 0}},v.assign=Ye,v.at=function(n){var t=arguments,e=-1,r=ot(t,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Zt(t);for(Le.unindexedChars&&kt(n)&&(n=n.split(""));++e<t;)u[e]=n[r[e]];return u},v.bind=Mt,v.bindAll=function(n){for(var t=1<arguments.length?ot(arguments,!0,!1,1):_t(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=pt(n[u],1,null,null,n)}return n},v.bindKey=function(n,t){return 2<arguments.length?pt(t,19,s(arguments,2),null,n):pt(t,3,null,null,n)},v.chain=function(n){return n=new y(n),n.__chain__=!0,n},v.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},v.compose=function(){for(var n=arguments,t=n.length;t--;)if(!jt(n[t]))throw new le;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},v.constant=function(n){return function(){return n}},v.countBy=rr,v.create=function(n,t){var e=nt(n);return t?Ye(e,t):e},v.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Xt(n);var u=We(n),o=u[0],a=n[o];return 1!=u.length||a!==a||xt(a)?function(t){for(var e=u.length,r=!1;e--&&(r=at(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},v.curry=function(n,t){return t="number"==typeof t?t:+t||n.length,pt(n,4,null,null,null,t)},v.debounce=Vt,v.defaults=Ze,v.defer=function(n){if(!jt(n))throw new le;var t=s(arguments,1);return Ce(function(){n.apply(h,t)},1)},v.delay=function(n,t){if(!jt(n))throw new le;var e=s(arguments,2);return Ce(function(){n.apply(h,e)},t)},v.difference=function(n){return rt(n,ot(arguments,!0,!0,1))},v.filter=At,v.flatten=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(n=Bt(n,e,r)),ot(n,t)},v.forEach=Dt,v.forEachRight=Nt,v.forIn=nr,v.forInRight=function(n,t,e){var r=[];nr(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},v.forOwn=tr,v.forOwnRight=bt,v.functions=_t,v.groupBy=ur,v.indexBy=or,v.initial=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return s(n,0,Pe(Be(0,u-r),u))},v.intersection=function(){for(var e=[],r=-1,u=arguments.length,a=i(),l=ht(),f=l===n,s=i();++r<u;){var g=arguments[r];(qe(g)||dt(g))&&(e.push(g),a.push(f&&g.length>=_&&o(r?e[r]:s)))}var f=e[0],h=-1,v=f?f.length:0,y=[];n:for(;++h<v;){var m=a[0],g=f[h];if(0>(m?t(m,g):l(s,g))){for(r=u,(m||s).push(g);--r;)if(m=a[r],0>(m?t(m,g):l(e[r],g)))continue n;y.push(g)}}for(;u--;)(m=a[u])&&p(m);return c(a),c(s),y},v.invert=wt,v.invoke=function(n,t){var e=s(arguments,2),r=-1,u="function"==typeof t,o=n?n.length:0,a=Zt("number"==typeof o?o:0);return Dt(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},v.keys=We,v.map=Bt,v.mapValues=function(n,t,e){var r={};return t=v.createCallback(t,e,3),tr(n,function(n,e,u){r[e]=t(n,e,u)}),r},v.max=Pt,v.memoize=function(n,t){if(!jt(n))throw new le;var e=function(){var r=e.cache,u=t?t.apply(this,arguments):b+arguments[0];return we.call(r,u)?r[u]:r[u]=n.apply(this,arguments)};return e.cache={},e},v.merge=function(n){var t=arguments,e=2;if(!xt(n))return n;if("number"!=typeof t[2]&&(e=t.length),e>3&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else e>2&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=s(arguments,1,e),u=-1,o=i(),a=i();++u<e;)it(n,t[u],r,o,a);return c(o),c(a),n},v.min=function(n,t,e){var u=1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];o>i&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){e=t(n,e,r),u>e&&(u=e,o=n)});return o},v.omit=function(n,t,e){var r={};if("function"!=typeof t){var u=[];nr(n,function(n,t){u.push(t)});for(var u=rt(u,ot(arguments,!0,!1,1)),o=-1,a=u.length;++o<a;){var i=u[o];r[i]=n[i]}}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)||(r[e]=n)});return r},v.once=function(n){var t,e;if(!jt(n))throw new le;return function(){return t?e:(t=!0,e=n.apply(this,arguments),n=null,e)}},v.pairs=function(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},v.partial=function(n){return pt(n,16,s(arguments,1))},v.partialRight=function(n){return pt(n,32,null,s(arguments,1))},v.pick=function(n,t,e){var r={};if("function"!=typeof t)for(var u=-1,o=ot(arguments,!0,!1,1),a=xt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},v.pluck=ar,v.property=Xt,v.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(ke.call(n,o--,1),u--);return n},v.range=function(n,t,e){n=+n||0,e="number"==typeof e?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Be(0,ye((t-n)/(e||1)));for(var u=Zt(t);++r<t;)u[r]=n,n+=e;return u},v.reject=function(n,t,e){return t=v.createCallback(t,e,3),At(n,function(n,e,r){return!t(n,e,r)})},v.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=v.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),ke.call(n,r--,1),u--);return o},v.rest=qt,v.shuffle=Tt,v.sortBy=function(n,t,e){var r=-1,o=qe(t),a=n?n.length:0,f=Zt("number"==typeof a?a:0);for(o||(t=v.createCallback(t,e,3)),Dt(n,function(n,e,u){var a=f[++r]=l();o?a.m=Bt(t,function(t){return n[t]}):(a.m=i())[0]=t(n,e,u),a.n=r,a.o=n}),a=f.length,f.sort(u);a--;)n=f[a],f[a]=n.o,o||c(n.m),p(n);return f},v.tap=function(n,t){return t(n),n},v.throttle=function(n,t,e){var r=!0,u=!0;if(!jt(n))throw new le;return!1===e?r=!1:xt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),H.leading=r,H.maxWait=t,H.trailing=u,Vt(n,t,H)},v.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Zt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},v.toArray=function(n){return n&&"number"==typeof n.length?Le.unindexedChars&&kt(n)?n.split(""):s(n):Et(n)},v.transform=function(n,t,e,r){var u=qe(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=v.createCallback(t,r,4),(u?Xe:tr)(n,function(n,r,u){return t(e,n,r,u)})),e},v.union=function(){return ft(ot(arguments,!0,!0))},v.uniq=Wt,v.values=Et,v.where=At,v.without=function(n){return rt(n,s(arguments,1))},v.wrap=function(n,t){return pt(t,16,[n])},v.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(qe(e)||dt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},v.zip=Gt,v.zipObject=Jt,v.collect=Bt,v.drop=qt,v.each=Dt,v.eachRight=Nt,v.extend=Ye,v.methods=_t,v.object=Jt,v.select=At,v.tail=qt,v.unique=Wt,v.unzip=Gt,Ut(v),v.clone=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e=t,t=!1),Y(n,t,"function"==typeof e&&tt(e,r,1))},v.cloneDeep=function(n,t,e){return Y(n,!0,"function"==typeof t&&tt(t,e,1))},v.contains=Ot,v.escape=function(n){return null==n?"":ie(n).replace(Qe,gt)},v.every=St,v.find=It,v.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=v.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},v.findKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.findLast=function(n,t,e){var r;return t=v.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},v.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=v.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},v.findLastKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),bt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.has=function(n,t){return n?we.call(n,t):!1},v.identity=Ht,v.indexOf=zt,v.isArguments=dt,v.isArray=qe,v.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&he.call(n)==L||!1},v.isDate=function(n){return n&&"object"==typeof n&&he.call(n)==z||!1},v.isElement=function(n){return n&&1===n.nodeType||!1},v.isEmpty=function(n){var t=!0;if(!n)return t;var e=he.call(n),r=n.length;return e==$||e==M||(Le.argsClass?e==T:dt(n))||e==G&&"number"==typeof r&&jt(n.splice)?!r:(tr(n,function(){return t=!1}),t)},v.isEqual=function(n,t,e,r){return at(n,t,"function"==typeof e&&tt(e,r,2))},v.isFinite=function(n){return Ie(n)&&!De(parseFloat(n))},v.isFunction=jt,v.isNaN=function(n){return Ct(n)&&n!=+n},v.isNull=function(n){return null===n},v.isNumber=Ct,v.isObject=xt,v.isPlainObject=er,v.isRegExp=function(n){return n&&X[typeof n]&&he.call(n)==J||!1
},v.isString=kt,v.isUndefined=function(n){return"undefined"==typeof n},v.lastIndexOf=function(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(0>e?Be(0,r+e):Pe(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},v.mixin=Ut,v.noConflict=function(){return e._=ge,this},v.noop=Qt,v.now=ir,v.parseInt=lr,v.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&("boolean"==typeof n&&u?(e=n,n=1):u||"boolean"!=typeof t||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Fe(),Pe(n+e*(t-n+parseFloat("1e-"+((e+"").length-1))),t)):lt(n,t)},v.reduce=Rt,v.reduceRight=Ft,v.result=function(n,t){if(n){var e=n[t];return jt(e)?n[t]():e}},v.runInContext=g,v.size=function(n){var t=n?n.length:0;return"number"==typeof t?t:We(n).length},v.some=$t,v.sortedIndex=Kt,v.template=function(n,t,e){var r=v.templateSettings;n=ie(n||""),e=Ze({},e,r);var u,o=Ze({},e.imports,r.imports),r=We(o),o=Et(o),i=0,l=e.interpolate||N,f="__p+='",l=ae((e.escape||N).source+"|"+l.source+"|"+(l===I?O:N).source+"|"+(e.evaluate||N).source+"|$","g");n.replace(l,function(t,e,r,o,l,c){return r||(r=o),f+=n.slice(i,c).replace(P,a),e&&(f+="'+__e("+e+")+'"),l&&(u=!0,f+="';"+l+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),f+="';",l=e=e.variable,l||(e="obj",f="with("+e+"){"+f+"}"),f=(u?f.replace(x,""):f).replace(C,"$1").replace(E,"$1;"),f="function("+e+"){"+(l?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var c=ee(r,"return "+f).apply(h,o)}catch(p){throw p.source=f,p}return t?c(t):(c.source=f,c)},v.unescape=function(n){return null==n?"":ie(n).replace(Ue,mt)},v.uniqueId=function(n){var t=++m;return ie(null==n?"":n)+t},v.all=St,v.any=$t,v.detect=It,v.findWhere=It,v.foldl=Rt,v.foldr=Ft,v.include=Ot,v.inject=Rt,Ut(function(){var n={};return tr(v,function(t,e){v.prototype[e]||(n[e]=t)}),n}(),!1),v.first=Lt,v.last=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[u-1]:h;return s(n,Be(0,u-r))},v.sample=function(n,t,e){return n&&"number"!=typeof n.length?n=Et(n):Le.unindexedChars&&kt(n)&&(n=n.split("")),null==t||e?n?n[lt(0,n.length-1)]:h:(n=Tt(n),n.length=Pe(Be(0,t),n.length),n)},v.take=Lt,v.head=Lt,tr(v,function(n,t){var e="sample"!==t;v.prototype[t]||(v.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);return u||null!=t&&(!r||e&&"function"==typeof t)?new y(o,u):o})}),v.VERSION="2.4.1",v.prototype.chain=function(){return this.__chain__=!0,this},v.prototype.toString=function(){return ie(this.__wrapped__)},v.prototype.value=Yt,v.prototype.valueOf=Yt,Xe(["join","pop","shift"],function(n){var t=fe[n];v.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new y(e,n):e}}),Xe(["push","reverse","sort","unshift"],function(n){var t=fe[n];v.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(n){var t=fe[n];v.prototype[n]=function(){return new y(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Le.spliceObjects||Xe(["pop","shift","splice"],function(n){var t=fe[n],e="splice"==n;v.prototype[n]=function(){var n=this.__chain__,r=this.__wrapped__,u=t.apply(r,arguments);return 0===r.length&&delete r[0],n||e?new y(u,n):u}}),v}var h,v=[],y=[],m=0,d={},b=+new Date+"",_=75,w=40,j=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",x=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,E=/(__e\(.*?\)|\b__t\))\+'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,D=RegExp("^["+j+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,P=/['\n\r\t\u2028\u2029\\]/g,R="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),T="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",q="[object Error]",K="[object Function]",W="[object Number]",G="[object Object]",J="[object RegExp]",M="[object String]",V={};V[K]=!1,V[T]=V[$]=V[L]=V[z]=V[W]=V[G]=V[J]=V[M]=!0;var H={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},Q={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,nt=X[typeof exports]&&exports&&!exports.nodeType&&exports,tt=X[typeof module]&&module&&!module.nodeType&&module,et=tt&&tt.exports===nt&&nt,rt=X[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var ut=g();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=ut,define(function(){return ut})):nt&&tt?et?(tt.exports=ut)._=ut:nt._=ut:Z._=ut}).call(this),window.Modernizr=function(a,b,c){function A(a){i.cssText=a}function C(a,b){return typeof a===b}function D(a,b){return!!~(""+a).indexOf(b)}function E(a,b){for(var d in a){var e=a[d];if(!D(e,"-")&&i[e]!==c)return"pfx"==b?e:!0}return!1}function F(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:C(f,"function")?f.bind(d||b):f}return!1}function G(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+n.join(d+" ")+d).split(" ");return C(b,"string")||C(b,"undefined")?E(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),F(e,b,c))}var j,v,z,d="2.8.3",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,k={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={svg:"http://www.w3.org/2000/svg"},q={},t=[],u=t.slice,w=function(a,c,d,e){var h,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),l.appendChild(j);return h=["&#173;",'<style id="s',g,'">',a,"</style>"].join(""),l.id=g,(m?l:n).innerHTML+=h,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=f.style.overflow,f.style.overflow="hidden",f.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),f.style.overflow=k),!!i},x=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=C(e[d],"function"),C(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),y={}.hasOwnProperty;z=C(y,"undefined")||C(y.call,"undefined")?function(a,b){return b in a&&C(a.constructor.prototype[b],"undefined")}:function(a,b){return y.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},q.canvastext=function(){return!!e.canvas&&!!C(b.createElement("canvas").getContext("2d").fillText,"function")},q.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:w(["@media (",l.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},q.postmessage=function(){return!!a.postMessage},q.hashchange=function(){return x("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},q.history=function(){return!!a.history&&!!history.pushState},q.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},q.cssanimations=function(){return G("animationName")},q.csstransitions=function(){return G("transition")},q.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},q.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},q.localstorage=function(){try{return localStorage.setItem(g,g),localStorage.removeItem(g),!0}catch(a){return!1}},q.sessionstorage=function(){try{return sessionStorage.setItem(g,g),sessionStorage.removeItem(g),!0}catch(a){return!1}},q.svg=function(){return!!b.createElementNS&&!!b.createElementNS(p.svg,"svg").createSVGRect},q.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==p.svg},q.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(k.call(b.createElementNS(p.svg,"clipPath")))};for(var H in q)z(q,H)&&(v=H.toLowerCase(),e[v]=q[H](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if("object"==typeof a)for(var d in a)z(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},A(""),h=j=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=n(c));var g;return g=d.cache[a]?d.cache[a].cloneNode():f.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!g.canHaveChildren||e.test(a)||g.tagUrn?g:d.frag.appendChild(g)}function p(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||n(a);for(var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;g>e;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var g,k,c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",i=0,j={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){g=!0,k=!0}}();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=l,e._domPrefixes=o,e._cssomPrefixes=n,e.hasEvent=x,e.testProp=function(a){return E([a])},e.testAllProps=G,e.testStyles=w,e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var A,B,l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};B=function(a){function b(a){var e,f,g,a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a};for(f=0;d>f;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;b>f;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var m,n,h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var l,o,k=b.createElement("script"),e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.Akamai_ExtCallbackHandler=function(){var CONST={callbackName:"jsCallbackHandler"},App=function(){this.__vars={};var self=this,v=self.__vars;if(v._callStack={},window.AEP&&"function"==typeof window.AEP[CONST.callbackName]){var oldFN=window.AEP[CONST.callbackName];window.AEP[CONST.callbackName]=function(){setCallStack(self,arguments),oldFN.apply(this,arguments)}}else window.AEP?window.AEP[CONST.callbackName]=function(){setCallStack(self,arguments)}:(window.AEP={},window.AEP[CONST.callbackName]=function(){setCallStack(self,arguments)})};App.prototype.onEvent=function(type,callback){var self=this,v=self.__vars;v._callStack[type]||(v._callStack[type]=[]),v._callStack[type].push(callback)};var setCallStack=function(self,args){var x,v=self.__vars,id=args[0],eventName=args[1],body=args[2];if(eventName&&v._callStack[eventName]){var stack=v._callStack[eventName];for(x=0;x<stack.length;x++)stack[x]({id:id,eventName:eventName,body:body,raw:args})}};return App}(jQuery),window.FOX_AkamaiVideo=function(){function getQuery(param){var x,val=!1,query=window.location.search.substr(1),qArr=query.split("&"),len=qArr.length;for(x=0;len>x;x++){var pair=qArr[x].split("=");if(pair[0]===param){val=decodeURIComponent(pair[1]).toString();break}}return val}function log(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}}var CONST={};CONST.playerName="embed",CONST.secure=window.location.protocol.indexOf("https")>-1?!0:!1,CONST.feedPath="/v/feed/video/${videoId}.js?template=fox",CONST.configUrl=function(){var url=(window.location.host||window.location.hostname,window.location.protocol+"//foxnewsplayer-a.akamaihd.net/player/${version}/amp.foxnews/amp.foxnews.central.xml"),params=[];return params.push("sec="+(CONST.secure?"1":"0")),params.push("site=${site}"),params.push("param=${configParam}"),params.push("ns=${namespace}"),url=[url,params.join("&")].join("?")}(),CONST.bundleUrl=function(){var ret=window.location.protocol+"//foxnewsplayer-a.akamaihd.net/player/${version}/amp.foxnews/amp.foxnews.js",patch=getQuery("_prodpatch");return patch&&(log("patched version: "+patch),ret=window.location.protocol+"//foxnewsplayer-a.akamaihd.net/player/7.2.0004/amp.foxnews/amp.foxnews.prodpatch"+patch+".js"),ret}(),CONST.AISAuthIdentUrl="http://idp.securetve.com/rest/1.0/urn:foxnews:com:sp:${env}:2/identity/resourceAccess/${channel}?format=jsonp&responsefield=${callback}",CONST.configSiteParam={foxnews:"fn",foxbusiness:"fb","live.foxbusiness":"fblive","latino.foxnews":"latino","insider.foxnews":"insider","imag.foxnews":"imag","nation.foxnews":"nation","ureport.foxnews":"ureport","magazine.foxnews":"magazine"};var App=function(){this.GET=new GET(this),this.API=new API(this),this.__vars={}},API=function(){var API=function(root){this.root=root};return API.prototype.setVersion=function(val){var self=this,root=self.root,vars=root.__vars,queryVersion=(root.GET,function(){var ver=getQuery("_ver");return ver?ver:!1}),version=window._FOX_VID_BUNDLE_VER||queryVersion()||val;vars._VERSION=version},API.prototype.setVideoId=function(val){{var self=this,root=self.root,vars=root.__vars;root.GET}vars._VIDEO_ID=val},API.prototype.getPageVars=function(){var self=this,root=self.root,GET=(root.__vars,root.GET),pageVars={};for(var i in GET)"function"==typeof GET[i]&&(pageVars[i]=GET[i]());return pageVars},API.prototype.getVar=function(type,data){var self=this,ret=!1,root=self.root,GET=(root.__vars,root.GET);return GET[type]&&(ret=GET[type](data)),ret},API.prototype.getAuthChannelAccess=function(env,channel,callback){if("function"!=typeof callback)return!1;var url=CONST.AISAuthIdentUrl,callbackFN="FOX_ais_auth_"+channel.toLowerCase();url=url.replace("${env}",env),url=url.replace("${channel}",channel),url=url.replace("${callback}",callbackFN),window[callbackFN]=function(data){callback(data)},$.ajax({url:url,dataType:"script",cache:!0,async:!0})},API.prototype.getQuery=function(param){var ret=getQuery(param);return ret},API.prototype.showShareEmbedOverlay=function(){var self=this,root=self.root,body=$("body"),markup='<div class="share-panel embed">                    <h1>Embed</h1>                    <a href="#" title="Close">Close</a>                    <textarea>Embed code inserted here</textarea>                </div>',embed=body.find("> .share-panel.embed");0===embed.length&&($("body").prepend(markup),embed=body.find("> .share-panel.embed"),embed.find("textarea").unbind("focus").bind("focus",function(){var elm=$(this);elm.select(),elm.bind("mouseup",function(){return elm.unbind("mouseup"),!1})}),embed.find("> a:first").unbind("click").bind("click",function(evt){return evt.preventDefault(),embed.removeClass("show"),!1}),self._overlay_center||(self._overlay_center=!0,centerOverlay(embed,!0)));var textarea=embed.find("textarea"),domain="video."+root.GET.domain()+".com",siteLink=domain.indexOf("video.foxbusiness")>-1?"video.foxbusiness.com":"video.foxnews.com",videoId=root.GET.videoId(),code='<script type="text/javascript" src="http://'+domain+"/v/embed.js?id="+videoId+'&w=466&h=263"></script><noscript>Watch the latest video at <a href="http://'+siteLink+'">'+siteLink+"</a></noscript>";textarea.val(code),embed.addClass("show")},API}(),GET=function(){var GET=function(root){this.root=root};return GET.prototype.videoId=function(){var self=this,root=self.root,vars=root.__vars,id=vars._VIDEO_ID||getQuery("id")||getQuery("video_id")||"";return id=/[0-9]/.test(id)?id:!1},GET.prototype.version=function(){var self=this,root=self.root,vars=root.__vars,ret=vars._VERSION?vars._VERSION:!1;return ret},GET.prototype.feed=function(){var self=this,ret=(self.root,self.videoId()?CONST.feedPath.replace("${videoId}",self.videoId()):"");return ret},GET.prototype.configUrl=function(site){var self=this,root=self.root,ret=(root.__vars,CONST.configUrl.replace("${version}",self.version()).replace("${site}",site||self.site()).replace("${configParam}",self.configParam())),namespace=self.namespace();return ret=namespace?ret.replace("${namespace}",namespace):ret.replace("&ns=${namespace}","")},GET.prototype.bundleUrl=function(){var self=this,root=self.root,ret=(root.__vars,CONST.bundleUrl.replace("${version}",self.version()));return ret},GET.prototype.playerName=function(){var name=getQuery("pn");return name?name:CONST.playerName},GET.prototype.mode=function(){var ret=!1,mode=getQuery("_vtcomp")||getQuery("mode");return ret=mode&&"y"===mode?"html":ret},GET.prototype.domain=function(custom){var loc=custom?custom:window.location.host||window.location.hostname,ret="foxnews";return idx("latino.",loc)?ret="latino.foxnews":idx("foxbusiness.",loc)||"fb"===getQuery("ais_domain")?ret="foxbusiness":idx("insider.",loc)?ret="insider.foxnews":idx("imag.",loc)?ret="imag.foxnews":idx("ureport.",loc)?ret="ureport.foxnews":idx("nation.foxnews",loc)&&(ret="nation.foxnews"),ret},GET.prototype.site=function(){var self=this,cust=getQuery("_xcf")||self.domain(getQuery("loc")),domain=cust||self.domain(),host=window.location.host||window.location.hostname,param=CONST.configSiteParam,ret=param.foxnews;return"foxbusiness"===domain&&host.indexOf("live.foxbusiness")>-1&&(domain="live.foxbusiness"),param[domain]&&(ret=param[domain]),ret},GET.prototype.hostname=function(){var param=CONST.configSiteParam,ret=getQuery("d")||!1,loc=getQuery("loc")||!1;return ret&&loc?ret=loc:ret||loc&&!param[loc]&&(ret=loc),ret},GET.prototype.configParam=function(inArray){for(var ret=getQuery("_cparam")||"",arr=ret.split(","),i=0;i<arr.length;i++)arr[i]=$.trim(arr[i]);return inArray?arr:arr.join(",")},GET.prototype.namespace=function(){var ret=getQuery("_ns")||"";return ret},GET.prototype.shareURL=function(){var ret=decodeURIComponent(getQuery("_surl")||"");return ret},GET.prototype.shareTitle=function(){var ret=decodeURIComponent(getQuery("_stitle")||"");return ret},GET}(),idx=function(needle,haystack){var ret=haystack.indexOf(needle)>-1?!0:!1;return ret},centerOverlay=function(target,force){var listener=!1,body=$("body"),win=$(window),overlayW=target.outerWidth(),overlayH=target.outerHeight(),px=function(val){return val+"px"},topScroll=function(){var r,w=win.height(),s=win.scrollTop(),h=overlayH;return h=Math.floor(w/2-h/2),r=s+(0>h?0:h)},leftScroll=function(){var l=body.offset().left,w=body.width();return w=Math.floor(w/2-overlayW/2),l+w},trigger=function(){clearTimeout(listener),listener=setTimeout(function(){target.animate({top:px(topScroll()),left:leftScroll()},150,"swing")},150)};force&&target.css({top:px(topScroll()),left:leftScroll()});var hasOrientation="onorientationchange"in window?!0:!1;win.bind("resize",function(){trigger()}),hasOrientation&&win.bind("orientationchange",function(){trigger()})},PUBLIC_APP=function(){var APP=new App,PUBLIC_APP=function(){};return PUBLIC_APP.prototype.API=APP.API,new PUBLIC_APP}();return PUBLIC_APP}(),window.FOX_Video_Instance=window.FOX_Video_Instance||{},window.FOX_Video_Instance.Config=window.FOX_Video_Instance.Config||function($){var CONFIG={};return CONFIG.staticDomain="global.fncstatic.com",CONFIG.Env="",CONFIG.optionsVar="_fox_video_opt",CONFIG.playerLocation=window.location.protocol+"//${videoDomain}/static/p/video/app/embed/iframe/${videoType}.html",CONFIG.sandbox=window.location.protocol+"//${videoDomain}/static/p/video/app/embed/iframe/sandbox.html",CONFIG.useSandbox=function(){var ret=!0,host=window.location.host||window.location.hostname;return host.indexOf("insider.foxnews")>-1&&(ret=!1),ret}(),CONFIG.bundleVersion="7.25.0.0000",CONFIG.events={prefix:"AMP.PLAYER.PASSEVENT."},CONFIG.feed={video:"/v/feed/video/${id}.js",playlist:"/v/feed/playlist/${id}.js"},CONFIG.playerVarsDef=function(){return{autoplay:!1,autoadvance:{enabled:!1},flash:{params:{wmode:"opaque"},vars:{share_enabled_providers:"facebook,twitter,linkedin"}}}},CONFIG.dependencies=[["//"+CONFIG.staticDomain+"/static/v/all/js/plugins/LoadAttempt.js",function(){return $.loadAttempt?!0:!1}],["//"+CONFIG.staticDomain+"/static/v/all/js/plugins/EventMessageHandler.js",function(){return window.EventMessageHandler?!0:!1}],["//"+CONFIG.staticDomain+"/static/v/all/js/plugins/MediaIconOverlay.js",function(){return window.FOX_MediaIconOverlay||window.FOX_Plugins&&window.FOX_Plugins.MediaOverlay?!0:!1}],["//"+CONFIG.staticDomain+"/static/p/video/app/embed/iframe/js/main.js",function(){return window.FOX_AkamaiVideo?!0:!1}]],CONFIG.CSSDependencies=[],CONFIG}(jQuery),window.FOX_Video_Instance=window.FOX_Video_Instance||{},window.FOX_Video_Instance.Dependencies=window.FOX_Video_Instance.Dependencies=function($){var CONFIG=window.FOX_Video_Instance.Config,dependencies=CONFIG.dependencies,CSSFiles=CONFIG.CSSDependencies,CSSLoaded=!1,loadScript=function(src){if(src=window.location.protocol+src,0===$("script[src*='"+src+"']").size()){var s=document.createElement("script");s.src=src,s.async=!0,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(s)}},loadCSS=function(){for(var trigger=function(url){if(url=window.location.protocol+url,document.createStyleSheet)document.createStyleSheet(url);else{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=url,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(l)}},i=0;i<CSSFiles.length;i++)trigger(CSSFiles[i])},Dependencies=function(callback){var timeout=!1;CSSLoaded||(CSSLoaded=!0,loadCSS());var isReady=function(){for(var ret=!0,i=0,len=dependencies.length;len>i;i++)if(!dependencies[i][1]()){loadScript(dependencies[i][0]),ret=!1;break}ret?"function"==typeof callback()&&setTimeout(function(){callback()},1e3):(clearTimeout(timeout),timeout=setTimeout(function(){isReady()},50))};isReady()};return Dependencies}(jQuery),window.FOX_Video_Instance=window.FOX_Video_Instance||{},window.FOX_Video_Instance.Renderer=window.FOX_Video_Instance.Renderer=function($){var CONFIG=window.FOX_Video_Instance.Config,CONST={};CONST.Instance=window.FOX_Video_Instance;var App=function(root){var self=this;self.root=root,self.__vars={};self.__vars};App.prototype.set=function(widget){var self=this,root=self.root,vars=root.__vars,SANDBOX_INFO=vars._SANDBOX_INFO;SANDBOX_INFO&&"flash"!==SANDBOX_INFO.mode&&widget.config&&widget.config.app&&widget.config.app.overlay?self.iframe(widget):widget.config&&widget.config.app&&widget.config.app.overlay&&widget.config.player&&!widget.config.player.autoplay?self.overlay(widget):self.iframe(widget),self.postRender(widget)},App.prototype.postRender=function(widget){var self=this,root=self.root,uid=widget.data.uniqueId,hash=window.location.hash.length>1?window.location.hash.substr(1):"";if(hash.indexOf("st=")>-1&&!isNaN(hash.split("st=")[1])){var s=parseInt(hash.split("st=")[1],10);root.MessageHandler.AMP_Events.setCurrentTime(uid,s)}},App.prototype.overlay=function(widget){var self=this,root=self.root,config=widget.config||{},Feed=root.Feed,trigger=function(src){var html='<a href="#"><img src="'+src+'" /></a>',target=widget.dom;target.html(html);var overlay=new FOX_Plugins.MediaOverlay;overlay.embed({target:target.find("img"),type:"video"}),target.find("a:first").bind("click",function(){var tmp={player:{autoplay:!0}};return widget.config=$.extend(!0,config,tmp),self.iframe(widget),!1})},setImage=function(imgSrc,noResize){var loc=window.location,dim=function(){var ret;return ret=config.app&&config.app.height&&config.app.width?[config.app.width,config.app.height]:[widget.dom.width(),widget.dom.height()]}();-1===imgSrc.indexOf("http")&&(imgSrc=loc.protocol+"//"+(loc.host||loc.hostname)+("/"===imgSrc.charAt(0)?imgSrc:"/"+imgSrc));var src=noResize?imgSrc:resizeImage(imgSrc,dim[0],dim[1]),img=new Image;img.onload=function(){trigger(src,dim)},img.src=src};widget.config&&widget.config.app&&widget.config.app.altImg?setImage(widget.config.app.altImg,widget.config.app.noAltImgResize?!0:!1):Feed.getVideoFeed(widget,function(data){widget.videoData=data,setImage(data.image.url)})},App.prototype.iframe=function(widget){var self=this,root=self.root,MessageHandler=(root.__vars,root.MessageHandler),target=widget.dom,config=widget.config||{},data=widget.data,videoId=data.videoId,videoType=config.app&&config.app.ais?"ais":"vod",info=CONFIG.playerVarsDef();$.extend(!0,info,config.player||{});var videoDomain=setVideoDomain(widget.data.videoDomain);target.css(config.app&&config.app.height&&config.app.width?{width:config.app.width,height:config.app.height}:{height:"100%"});var html='<iframe src="${src}" border="0" frameborder="0" scrolling="no" style="width: 100%; height: 100%;"></iframe>',src=CONFIG.playerLocation;src=src.replace("${videoDomain}",videoDomain),src=src.replace("${videoType}",videoType);var params=[];getQuery("_ver")&&params.push("_ver="+getQuery("_ver")),params.push("video_id="+videoId),params.push("_fx=y"),config.app.xmlSiteConfig&&params.push("_xcf="+config.app.xmlSiteConfig),"y"===getQuery("_vtcomp")&&params.push("_vtcomp=y"),"true"===getQuery("amp-debug")&&params.push("amp-debug=true"),getQuery("loc")&&params.push("loc="+getQuery("loc")),getQuery("d")&&params.push("d="+getQuery("d")),config.app.configParam&&params.push("_cparam="+config.app.configParam),config.app.uid&&params.push("_ns="+config.app.uid),getQuery("_prodpatch")&&params.push("_prodpatch="+getQuery("_prodpatch")),getQuery("share_url")&&params.push("_surl="+getQuery("share_url")),getQuery("share_title")&&params.push("_stitle="+encodeURIComponent(getQuery("share_title"))),src=src+"?"+params.join("&"),html=html.replace("${src}",src),target.html(html),info.uid=data.uniqueId,"string"==typeof config.app.aisPrefix&&(info.aisPrefix=config.app.aisPrefix),getQuery("ref")?(info.params||(info.params={}),info.params.parentEmbedUrl=decodeURIComponent(getQuery("ref"))):data.parentEmbedUrl&&(info.params||(info.params={}),info.params.parentEmbedUrl=data.parentEmbedUrl),target.find("> iframe:first").bind("load",function(){MessageHandler.sendMessage(this,"FOXVIDEO.IFRAME.Embed",info)})},App.prototype.sandbox=function(callback){var self=this,root=self.root,vars=root.__vars,MessageHandler=root.MessageHandler;
MessageHandler.addHandler("Utils.PlaybackMode",function(data){vars._SANDBOX_INFO||(vars._SANDBOX_INFO={}),vars._SANDBOX_INFO.mode=data});var src=CONFIG.sandbox,host=window.location.host||window.location.hostname;hostname="foxnews",host.indexOf("insider.foxnews")>-1&&(hostname="insider.foxnews");var videoDomain=setVideoDomain(hostname),domainSrc=src.replace("${videoDomain}",videoDomain),html='<iframe id="fox-video-sandbox" src="${src}" border="0" frameborder="0" scrolling="no" style="width: 0px; height: 0px; opacity: 0; visibility: hidden; position: absolute; float: left"></iframe>';html=html.replace("${src}",domainSrc),$("#fox-video-sandbox").remove(),$("body").append(html),$.loadAttempt(150,150,function(){return"undefined"!=typeof vars._SANDBOX_INFO?!0:!1},function(){callback()})};var setVideoDomain=function(domain){var ret=[],env=CONFIG.Env;return env.length>0&&ret.push(env),ret.push("video"),ret.push(domain),ret.push("com"),ret=ret.join(".")},resizeImage=function(u,w,h){if(isNaN(w)||isNaN(h))return u;var url=u;if(u.indexOf("a57.foxnews.com")>-1||u.indexOf("nyc.imagesizer.foxnews.com")>-1){url=u.split("/");var idx=url.length;url[idx-3]=w,url[idx-2]=h,url=url.join("/")}else{url=u.split("/");var dim="/"+w+"/"+h+"/";0===url[0].indexOf("http")&&url.splice(0,2),url.unshift("http://a57.foxnews.com"),url=url.slice(0,url.length-1).join("/")+dim+url.slice(url.length-1)}return url},getQuery=function(param){var x,val=!1,query=window.location.search.substr(1),qArr=query.split("&"),len=qArr.length;for(x=0;len>x;x++){var pair=qArr[x].split("=");if(pair[0]===param){val=decodeURIComponent(pair[1]).toString();break}}return val};return App}(jQuery),window.FOX_Video_Instance=window.FOX_Video_Instance||{},window.FOX_Video_Instance.Events=window.FOX_Video_Instance.Events=function($){var CONFIG=window.FOX_Video_Instance.Config,App=function(root){this.root=root,this._receivers=new Receiver(this),this.AMP_Events=new AMP_Events(this),this.Handler=new EventMessageHandler({prefix:CONFIG.events.prefix});var self=this,events=self._receivers,setEvent=function(eventName){"function"==typeof self._receivers[eventName]&&self.Handler.addHandler(eventName,function(data){self._receivers[eventName](data)})};for(var evtN in events)setEvent(evtN)};App.prototype.sendMessage=function(target,name,data){this.Handler.sendMessage(target,name,data)},App.prototype.addHandler=function(name,callback){this.Handler.addHandler(name,callback)},App.prototype.fireToWidget=function(event,data){var self=this,root=self.root,Widget=root.Widget,uid=data.uid||!1;if(!uid)return!1;var target=Widget.getWidgetById(uid);if(!target)return!1;if(!(target.config.app&&target.config.app.inline||target.dom.attr("data-unique-id")===uid))return!1;if(target.config&&target.config.app&&target.config.app.events&&target.config.app.events[event]){target.config.app.events[event]=$.isArray(target.config.app.events[event])?target.config.app.events[event]:[target.config.app.events[event]];for(var x=0,len=target.config.app.events[event].length;len>x;x++)target.config.app.events[event][x](data)}};var Receiver=function(){var Receiver=function(root){this.root=root};return Receiver.prototype.playerReady=function(){var self=this,root=self.root,main=root.root,data=arguments[0],uid=data.uid||!1;if(!uid)return!1;var target=main.Widget.getWidgetById(uid);target.data.playerReady=!0,root.fireToWidget("playerReady",data)},Receiver.prototype.advance=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("advance",data)},Receiver.prototype.ads_companion=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("ads_companion",data);var set=function(content,target){if(content&&"string"!=typeof content.data)return!1;var iframe=$('<iframe frameborder="0" scrolling="no" allowTransparency="true"></iframe>').css({width:content.width||300,height:content.height||60});target.html(iframe);try{var ifr=target.find("> iframe").get(0).contentWindow.document,ifrContent=content.data;ifrContent="<style> body { margin: 0; padding: 0; } </style>"+ifrContent,ifr.open(),ifr.write(ifrContent),ifr.close()}catch(err){}},companion=!1;if(data.eventData&&$.isArray(data.eventData)&&data.eventData.length>0?companion=data.eventData:data.eventData&&data.eventData.companions&&$.isArray(data.eventData.companions)&&(companion=data.eventData.companions),companion){var id="cb_medrect300x60_div",mod=$("div[data-video-mod='companion']:visible:first"),cTarget=mod.length>0?mod:$("#"+id+":visible");cTarget.each(function(){var i,target=$(this);for(target.attr("id",id),i=0;i<companion.length;i++)if(companion[i].data){target.empty(),set(companion[i],target);break}})}},Receiver.prototype.ads_started=function(){var self=this,root=self.root,data=arguments[0],hasCompanionAd=!1;data.eventData&&data.eventData.companions&&$.isArray(data.eventData.companions)&&data.eventData.companions.length>0&&(hasCompanionAd=!0),root.fireToWidget("ads_started",{hasCompanionAd:hasCompanionAd})},Receiver.prototype.ads_ended=function(){var self=this,root=self.root,data=arguments[0],hasCompanionAd=!1;data.eventData&&data.eventData.companions&&$.isArray(data.eventData.companions)&&data.eventData.companions.length>0&&(hasCompanionAd=!0),root.fireToWidget("ads_started",{hasCompanionAd:hasCompanionAd})},Receiver.prototype.authenticatedHandler=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("authenticatedHandler",data)},Receiver.prototype.currentTimeUTC=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("currentTimeUTC",data)},Receiver.prototype.currentTime=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("currentTime",data)},Receiver.prototype.loadedmetadata=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("loadedmetadata",data)},Receiver.prototype.ended=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("ended",data)},Receiver.prototype.logoutAIS=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("logoutAIS",data)},Receiver.prototype.currentVolume=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("currentVolume",data)},Receiver.prototype.currentPauseState=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("currentPauseState",data)},Receiver.prototype.share=function(){var self=this,root=self.root,main=root.root,Widget=main.Widget,arg=arguments[0];root.fireToWidget("share",arg);var widget=Widget.getWidgetById(arg.uid);if(!widget)return!1;var data=arg.eventData,feedItem=data&&data._FEED_DATA&&data._FEED_DATA.channel&&data._FEED_DATA.channel.item?data._FEED_DATA.channel.item:!1,smallPlayer=data&&data._PLAYER_TYPE&&"small"===data._PLAYER_TYPE?!0:!1,info=data&&data.clipData?data.clipData:!1,provider=data&&data.provider?data.provider:!1;if("share"===provider&&smallPlayer&&(provider="facebook"),"share"===provider||"embed"===provider)return!1;if(!info&&feedItem&&(info={},info.id=feedItem.guid,info.title=feedItem.title,info.description=feedItem.description,info.thumbnail=feedItem["media-group"]["media-thumbnail"]["@attributes"].url),!info||!provider)return alert("No provider or clip data"),!1;var url=window.location.protocol+"//video."+widget.data.videoDomain+".com/v/"+info.id,shareInfo={};shareInfo.title=info.title,shareInfo.desc=info.description,shareInfo.image=info.thumbnail,shareInfo.actLink=url,shareInfo.linkBack=url,shareInfo.userMessage="",provider=provider.toLowerCase();var options={provider:provider,data:shareInfo};if(window.FOX_ShareMedia&&"function"==typeof window.FOX_ShareMedia.showShare)window.FOX_ShareMedia.showShare(options);else if(!smallPlayer){var shareURL=encodeURIComponent(data._SHARE_URL||shareInfo.actLink),shareTitle=encodeURIComponent(data._SHARE_TITLE||shareInfo.title);switch(provider){case"facebook":window.open("http://www.facebook.com/sharer/sharer.php?u="+shareURL,"_blank","status=1,height=334,width=660");break;case"twitter":window.open("https://twitter.com/intent/tweet?text="+shareTitle+"&url="+shareURL,"_blank","status=1,height=334,width=660");break;case"email":var mailto="mailto:?subject="+shareTitle+"&body="+shareURL;window.open(mailto,"_self")}}},Receiver.prototype["Flash.AEP.jsCallbackHandler"]=function(){var self=this,root=self.root,main=root.root,Widget=main.Widget,arg=arguments[0];"mediaPlayerShareRequest"!==arg.type&&root.fireToWidget("Flash.AEP.jsCallbackHandler",arg);var widget=Widget.getWidgetById(arg.uid);if(!widget)return!1;switch(arg.type){case"mediaPlayerShareRequest":}},Receiver.prototype.ais_launchLogin=function(){var self=this,root=self.root,data=arguments[0];root.fireToWidget("ais_launchLogin",data)},Receiver}(),AMP_Events=function(){var AMP_Events=function(root){this.root=root};return AMP_Events.prototype.setCurrentTime=function(id,val){var self=this,root=self.root,main=root.root,widget=main.Widget.getWidgetById(id),event="amp.setCurrentTime",data={s:val};widget.config.app&&widget.config.app.inline?$.loadAttempt(250,350,function(){return widget.config.app.events[event]?!0:!1},function(){FOX_Videos.API.sendEventMessage(id,event,data)}):$.loadAttempt(250,350,function(){var w=main.Widget.getWidgetById(id),ret=w.data.playerReady||!1;return ret?!0:!1},function(){root.Handler.sendMessage(widget.dom.find("iframe").get(0),event,data)})},AMP_Events.prototype.mute=function(id,val){var self=this,root=self.root,main=root.root,widget=main.Widget.getWidgetById(id),event=val?"amp.mute":"amp.unmute",data={s:val};widget.config.app&&widget.config.app.inline?$.loadAttempt(250,350,function(){return widget.config.app.events[event]?!0:!1},function(){FOX_Videos.API.sendEventMessage(id,event,data)}):$.loadAttempt(250,350,function(){var w=main.Widget.getWidgetById(id),ret=w.data.playerReady||!1;return ret?!0:!1},function(){root.Handler.sendMessage(widget.dom.find("iframe").get(0),event,data)})},AMP_Events}();return App}(jQuery),window.FOX_Video_Instance=window.FOX_Video_Instance||{},window.FOX_Video_Instance.AISHandler=window.FOX_Video_Instance.AISHandler=function(){var CONFIG=window.FOX_Video_Instance.Config,CONST={};CONST.Environment=CONFIG.qa?"staging":"site",CONST.platformID="urn:foxnews:com:sp:"+CONST.Environment+":2",CONST.responseTargets={foxnews:{redirect:"live_fn",popup:"live_fn_winpopup"},foxbusiness:{redirect:"live_fb",popup:"live_fb_winpopup"}};var App=function(){this._AuthEnv=CONST.Environment};App.prototype.getEnvironment=function(){return this._AuthEnv},App.prototype.getAuthZChannel=function(){return this._AuthZChannel},App.prototype.createConfigBlock=function(data){var self=this,ret={},config=data.config,resourceID=data.resourceID?data.resourceID:config&&config.ais&&config.ais.resourceID?config.ais.resourceID:!1;if(resourceID){this._AuthZChannel=resourceID;var AuthZChannel=(self._AuthEnv,resourceID);ret={ais:{platformID:CONST.platformID,resourceID:AuthZChannel,contentID:"#{media.guid}",responseTargets:setResponseTarget(AuthZChannel),logos:{base:"http://global.fncstatic.com/static/p/watch/img/logo/chooser/",group:"top_providers",key:"filename"}}}}return ret};var setResponseTarget=function(channel){channel=(channel||"").toLowerCase();var ret=CONST.responseTargets.foxnews;return CONST.responseTargets[channel]&&(ret=CONST.responseTargets[channel]),ret};return new App}(jQuery),window.FOX_Videos=window.FOX_Videos||function($){var CONFIG=window.FOX_Video_Instance.Config,CONST={};CONST.classDef={widget:"fox-video",rendered:"fox-video-rendered"},CONST.dataStoreVar="_VIDEO_CONFIG",CONST.typeDef="embed",CONST.scopeNamespace="FXVP_DTSET",CONST.Instance=window.FOX_Video_Instance;var App=function(){var self=this;self.__vars={};var vars=self.__vars;vars._READY=!1,self.API=new API(self);var trigger=function(){self.Feed=new Feed(self),self.Widget=new Widget(self),self.MessageHandler=new CONST.Instance.Events(self),self.Renderer=new CONST.Instance.Renderer(self),self.Integrations=new Integrations(self),vars._READY=!0,Options.set(self)};FOX_Video_Instance.Dependencies(function(){trigger()})};App.prototype.onReady=function(callback){var self=this,vars=self.__vars,trigger=function(){vars._READY?callback():setTimeout(function(){trigger()},150)};trigger()};var API=function(){var API=function(root){this.root=root};return API.prototype.embed=function(targets,config){var self=this,root=self.root,vars=root.__vars;config=config||{app:{},player:{}};var trigger=function(){!targets.jquery&&targets.nodeType&&(targets=$(targets)),config=root.Widget.setConfig(config),targets.each(function(){var elm=$(this);if(config.legacy&&!root.Widget.isWidgetCurrent(elm,config.legacy.videoId,!0)){var domain=config.legacy.domain,videoId=config.legacy.videoId;elm.addClass(CONST.classDef.widget),elm.attr({"data-widget-type":"embed","data-video-domain":domain,"data-video-id":videoId}),root.Widget.embed(elm,config)}else root.Widget.isWidgetCurrent(elm,config.app.videoId)||root.Widget.embed(elm,config)})};root.onReady(function(){CONFIG.useSandbox&&"undefined"==typeof vars._SANDBOX_INFO?root.Renderer.sandbox(function(){trigger()}):trigger()})},API.prototype.getWidgetData=function(elm){return this.root.Widget.getWidgetData(elm)},API.prototype.getVideoFeedById=function(videoId,domain,callback){if("function"!=typeof callback)return!1;var self=this,root=self.root,trigger=function(){root.Feed.getVideoFeedById(videoId,domain,callback)};root.onReady(function(){trigger()})},API.prototype.getPlaylistFeed=function(id,domain,callback){if("function"!=typeof callback)return!1;var self=this,root=self.root,trigger=function(){root.Feed.getPlaylistFeed(id,domain,callback)};root.onReady(function(){trigger()})},API.prototype.getXDomain=function(target){var x,sp,ret=!1,classes=(target.attr("class")||"").split(" ");for(x=0;x<classes.length;x++){var t=classes[x];if(0===t.indexOf("vid-"))switch(sp=t.split("-"),sp.shift(),sp.join("-")){case"fn2":ret="foxnews";break;case"fb2":ret="foxbusiness";break;case"fb":ret="foxbusiness";break;case"fn-latino":ret="latino.foxnews"}}return ret},API.prototype.addEventHandler=function(uid,event,callback){var self=this,root=self.root,trigger=function(){var widget=root.Widget.getWidgetById(uid);return widget?(widget.config=widget.config||{},widget.config.app=widget.config.app||{},widget.config.app.events=widget.config.app.events||{},widget.config.app.events[event]=widget.config.app.events[event]?$.isArray(widget.config.app.events[event])?widget.config.app.events[event]:[widget.config.app.events[event]]:[],void widget.config.app.events[event].push(callback)):!1};root.onReady(function(){trigger()})},API.prototype.sendEventMessage=function(uid,event,data){var self=this,root=self.root,trigger=function(){var widget=root.Widget.getWidgetById(uid);if(!widget)return!1;var target;if(widget.config&&widget.config.app&&widget.config.app.inline){if(widget.config.app.events[event]){widget.config.app.events[event]=$.isArray(widget.config.app.events[event])?widget.config.app.events[event]:[widget.config.app.events[event]];for(var x=0;x<widget.config.app.events[event].length;x++)widget.config.app.events[event][x](data)}}else target=widget.dom.find("> iframe:first").get(0),root.MessageHandler.sendMessage(target,event,data)};root.onReady(function(){trigger()})},API.prototype.ampEvent=function(uid,event,data){var self=this,root=self.root,trigger=function(){var widget=root.Widget.getWidgetById(uid);return widget?void(root.MessageHandler.AMP_Events[event]&&root.MessageHandler.AMP_Events[event](uid,data)):!1};root.onReady(function(){trigger()})},API.prototype.getVideoDateFromRaw=function(val){var ret=setVideoDateTime(val);return ret},API}(),Widget=function(){var Widget=function(root){var self=this;self.root=root,self.__vars={},self.__vars._widgets={}};return Widget.prototype.saveWidget=function(widget){var self=this,vars=self.__vars;if(!widget.dom.jquery&&widget.dom.nodeType?(widget.dom=$(widget.dom),s=!0):widget.dom.jquery?s=!0:log("[FOX.Videos] Widget failed to save: ",item),s&&validateWidgetData(widget)){widget=Normalize.WidgetData(widget);var id=widget.data.uniqueId;vars._widgets[id]=widget}},Widget.prototype.getWidgetById=function(id){var self=this,vars=self.__vars,widgets=vars._widgets,ret=!1;return"all"===id?ret=widgets:widgets[id]&&(ret=widgets[id]),ret},Widget.prototype.getWidgetData=function(elm){var self=this,id=getWidgetId(elm),ret=!1;return id&&(ret=self.getWidgetById(id)),ret},Widget.prototype.embed=function(elm,config,type){{var self=this;self.root}type=type||CONST.typeDef,elm?!elm.jquery&&elm.nodeType&&(elm=$(elm)):elm=$("."+CONST.classDef.widget),config.app&&config.app.videoId&&elm.attr("data-video-id",config.app.videoId),elm.each(function(){var el=$(this),data=getDataAttr(this),widget={dom:el,data:data,config:config||!1};validateWidgetData(widget)&&(self.saveWidget(widget),self.render(widget))})},Widget.prototype.render=function(widget){{var self=this,root=self.root;self.__vars}widget.data._initialized||(widget.data._initialized=!0,root.Renderer.set(widget))},Widget.prototype.setConfig=function(config){var self=this,root=self.root,vars=root.__vars;return config.app=config.app||{},config.player=config.player||{},config.player=$.extend({},CONFIG.playerVarsDef(),config.player),"boolean"==typeof config.app.ads&&(config.player=Normalize.setAdsEnabled(config.app.ads,config.player)),"boolean"==typeof config.app.autoplay&&(config.player=Normalize.setAutoplay(config.app.autoplay,config.player)),config.app.domain&&config.app.domain.indexOf("foxbusiness")>-1?config.app.domain="foxbusiness":config.app.domain&&(config.app.domain="foxnews"),$.extend(!0,config,root.Integrations.AAMParams()),$.extend(!0,config,{app:{xmlSiteConfig:FOX_AkamaiVideo.API.getVar("domain",FOX_AkamaiVideo.API.getQuery("loc"))||config.app&&config.app.xmlSiteConfig?config.app.xmlSiteConfig:!1}}),config.app.userAutoplay&&"undefined"!=typeof vars._SANDBOX_INFO.autoplay&&$.extend(!0,config,{player:{autoplay:vars._SANDBOX_INFO.autoplay}}),config=setConfigParam(config)},Widget.prototype.isWidgetCurrent=function(elm,videoId,isLegacy){var ret=!1;isLegacy&&(elm=elm.find("> .fox-video"));var currentId=elm.attr("data-video-id")||!1;return currentId&&(currentId=""+currentId,videoId=""+videoId,currentId===videoId&&(ret=!0)),ret},Widget}(),Normalize=function(){var Normalize={};return Normalize.WidgetData=function(widget){var data=widget.data;return data.uniqueId=generateWidgetId(data),data.parentEmbedUrl=getCurrentWindowUrl(),widget.dom.attr("data-unique-id",data.uniqueId),widget},Normalize.grabVideo=function(data){var obj={};obj.raw=data;var channel=data.channel,item=channel.item;return obj.image=item["media-group"]["media-thumbnail"]["@attributes"],obj.norm={},item["dc-date"]&&(obj.norm["dc-date"]=setVideoDateTime(item["dc-date"])),obj},Normalize.grabPlaylist=function(data){var obj={};obj.raw=data;var channel=data.channel,item=channel.item;return item=$.isArray(item)?item:[item],obj.items=item,obj},Normalize.setAdsEnabled=function(bool,config){var obj={ima:{enabled:bool},flash:{vars:{core_ads_enabled:bool}}};return config=$.extend(!0,config,obj)},Normalize.setAutoplay=function(bool,config){var obj={autoplay:bool};return config=$.extend(!0,config,obj)},Normalize}(),Feed=function(){var Feed=function(root){this.root=root,this.__vars={};var vars=this.__vars;vars._dataStore={}};return Feed.prototype.getVideoFeed=function(widget,callback){var self=this,vars=(self.root,self.__vars),dataStore=vars._dataStore,path=CONFIG.feed.video,videoDomain=setVideoDomain(widget),videoId=widget.data.videoId,uid=widget.data.uniqueId.replace(/[^A-Za-z0-9_]/gi,"_"),namespace=[CONST.scopeNamespace,uid].join("_");if(dataStore[namespace])callback(dataStore[namespace]);else{path=path.replace("${id}",videoId);var url="//"+videoDomain+path;self.loadFeed(url,namespace,function(data){callback(Normalize.grabVideo(data))})}},Feed.prototype.getVideoFeedById=function(videoId,domain,callback){var self=this,path=(self.root,CONFIG.feed.video),videoDomain=setVideoDomain(domain),namespace=[CONST.scopeNamespace,"raw",videoId].join("_");path=path.replace("${id}",videoId);var url="//"+videoDomain+path;self.loadFeed(url,namespace,function(data){callback(Normalize.grabVideo(data))})},Feed.prototype.getPlaylistFeed=function(id,domain,callback){var self=this,url="//"+setVideoDomain(domain)+CONFIG.feed.playlist.replace("${id}",id),namespace=[CONST.scopeNamespace,"ps",id].join("_");self.loadFeed(url,namespace,function(data){callback(Normalize.grabPlaylist(data))})},Feed.prototype.loadFeed=function(url,namespace,callback){var self=this,vars=self.__vars,params=(vars._dataStore,[]);window[namespace]=function(data){callback(data)},params.push("template=fox"),params.push("callback="+namespace),params.push("cb="+cacheBuster(2)),url=url+"?"+params.join("&"),$.ajax({url:url,dataType:"script",async:!0,cache:!0})},Feed}(),Integrations=function(){var Integrations=function(root){this.root=root};return Integrations.prototype.AAMParams=function(){var config={};if(window.AamGpt&&"function"==typeof window.AamGpt.getCookie){config.player={params:{}};var aam=AamGpt.getCookie("fngpt")||!1;aam&&(aam=aam.split("="),aam=aam.length>1?aam[1]:aam[0],config.player.params.aam=aam);var aamId=AamGpt.getCookie("aam_did")||!1;aamId&&(aamId=aamId.split("="),aamId=aamId.length>1?aamId[1]:aamId[0],config.player.params.aamId=aamId)}return config},Integrations}(),Options=function(){var Options=function(){};return Options.prototype.set=function(root){var optsIntervals,self=this,setOpts=function(){for(var opts=window[CONFIG.optionsVar],len=opts.length,i=0;len>0;)opts[i]&&opts[i].type&&self.triggerOpts(root,opts[i]),opts.splice(i,1),len=opts.length};optsIntervals=setInterval(function(){window[CONFIG.optionsVar]&&$.isArray(window[CONFIG.optionsVar])&&window[CONFIG.optionsVar].length>0&&setOpts()},500)},Options.prototype.triggerOpts=function(root,opt){var API=root.API,store=(root.Feed,CONST.dataStoreVar),dom=$(opt.target);switch(opt.type){case"embed":!opt.config&&dom.data(store)&&(opt.config=dom.data(store)),API.embed(opt.target,opt.config||!1,opt.type)}},new Options}(),generateWidgetId=function(data){for(var cntr=0,videoId=(data.videoId||"").toString(),type=(data.widgetType||"").toString(),classDef=CONST.classDef.widget,uid=["uid",type,videoId,cntr].join("-");$("."+classDef+"[data-unique-id='"+uid+"']").size()>0;)cntr++,uid=["uid",type,videoId,cntr].join("-");return uid},getWidgetId=function(elm){var ret=elm.attr("data-unique-id")||!1;return ret},validateWidgetData=function(widget){var ret=!1;return widget.dom&&(widget.dom.jquery||widget.dom.nodeType)&&widget.data.widgetType&&widget.data.videoId&&widget.data.videoDomain&&(ret=!0),ret},getDataAttr=function(dom){var data={},attr=dom.attributes;for(x=0;x<attr.length;x++){var node=attr[x],name=node.nodeName,val=node.nodeValue;if(0===name.indexOf("data-")){var id=formatDataAttr(name);data[id]=val}}return data},formatDataAttr=function(attr){var x,ret=[],id=attr.replace(/^data\-/gi,""),sp=id.split("-");for(x=0;x<sp.length;x++){var s=0===x?sp[x]:sp[x].charAt(0).toUpperCase()+sp[x].slice(1);ret.push(s)}return ret=ret.length>0?ret.join(""):attr},setVideoDomain=function(domain){var ret=[],env=CONFIG.Env;return domain="string"==typeof domain?domain:domain.data.videoDomain,env.length>0&&ret.push(env),ret.push("video"),ret.push(domain),ret.push("com"),ret=ret.join(".")},setVideoDateTime=function(val){var sp=val.split("T"),date=sp[0],time=sp[1].split("-")[0];date=date.split("-"),date=[date[1],date[2],date[0]].join("/");var ret=new Date([date,time].join(" "));return ret},setConfigParam=function(config){for(var params=config.app&&config.app.configParam?config.app.configParam.split(","):[],i=0;i<params.length;i++)params[i]=$.trim(params[i]);if(params=modifyArr("notitle",params,"add"),config.app&&config.app.ui)for(var prop in config.app.ui){var param,val=config.app.ui[prop];if("boolean"==typeof val)switch(prop){case"title":param="notitle",params=modifyArr(param,params,val?"remove":"add");break;case"small":param="small",params=modifyArr(param,params,val?"add":"remove");break;case"shareBtn":param="noshare",params=modifyArr(param,params,val?"remove":"add")}}return config.app.configParam=params.join(","),config},modifyArr=function(val,arr,type){if("add"===type&&-1===$.inArray(val,arr))arr.push(val);else if("remove"===type){var index=$.inArray(val,arr);index>-1&&arr.splice(index,1)}return arr},getCurrentWindowUrl=function(){var loc=window.location,url=loc.protocol+"//"+(loc.host||loc.hostname)+loc.pathname;return url},cacheBuster=function(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(min/parseFloat(freq)).toString():"")},PUBLIC_APP=function(){var APP=new App,PUBLIC_APP=function(){this.API=APP.API};return new PUBLIC_APP}();return PUBLIC_APP}(jQuery),function(audiojs,audiojsInstance,container){var path="//global.fncstatic.com/static/v/all/js/apps/audio/";container[audiojs]={instanceCount:0,instances:{},flashSource:'      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance='+audiojs+'.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance='+audiojs+'.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:path+"player-graphics.gif",swfLocation:path+"audiojs.swf",useFlash:function(){var a=document.createElement("audio");return!(a.canPlayType&&a.canPlayType("audio/mpeg;").replace(/no/,""))}(),hasFlash:function(){if(navigator.plugins&&navigator.plugins.length&&navigator.plugins["Shockwave Flash"])return!0;if(navigator.mimeTypes&&navigator.mimeTypes.length){var mimeType=navigator.mimeTypes["application/x-shockwave-flash"];return mimeType&&mimeType.enabledPlugin}try{{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}return!0}catch(e){}return!1}(),createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em><strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',trackEnded:function(){},flashError:function(){var player=this.settings.createPlayer,errorMessage=getByClass(player.errorMessageClass,this.wrapper),html='Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';this.mp3&&(html+=' <a href="'+this.mp3+'">Download audio file</a>.'),container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),container[audiojs].helpers.addClass(this.wrapper,player.errorClass),errorMessage.innerHTML=html},loadError:function(){var player=this.settings.createPlayer,errorMessage=getByClass(player.errorMessageClass,this.wrapper);container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),container[audiojs].helpers.addClass(this.wrapper,player.errorClass),errorMessage.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){var player=this.settings.createPlayer;container[audiojs].helpers.addClass(this.wrapper,player.loadingClass)},loadStarted:function(){var player=this.settings.createPlayer,duration=getByClass(player.durationClass,this.wrapper),m=Math.floor(this.duration/60),s=Math.floor(this.duration%60);container[audiojs].helpers.removeClass(this.wrapper,player.loadingClass),duration.innerHTML=(10>m?"0":"")+m+":"+(10>s?"0":"")+s},loadProgress:function(percent){var player=this.settings.createPlayer,loaded=getByClass(player.loaderClass,this.wrapper);loaded.style.width=100*percent+"%"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){var player=this.settings.createPlayer;
container[audiojs].helpers.addClass(this.wrapper,player.playingClass)},pause:function(){var player=this.settings.createPlayer;container[audiojs].helpers.removeClass(this.wrapper,player.playingClass)},updatePlayhead:function(percent){var player=this.settings.createPlayer,progress=getByClass(player.progressClass,this.wrapper);progress.style.width=100*percent+"%";var played=getByClass(player.playedClass,this.wrapper),p=this.duration*percent,m=Math.floor(p/60),s=Math.floor(p%60);played.innerHTML=(10>m?"0":"")+m+":"+(10>s?"0":"")+s}},create:function(element,options){var options=options||{};return element.length?this.createAll(options,element):this.newInstance(element,options)},createAll:function(options,elements){var audioElements=elements||document.getElementsByTagName("audio"),instances=[];options=options||{};for(var i=0,ii=audioElements.length;ii>i;i++)instances.push(this.newInstance(audioElements[i],options));return instances},newInstance:function(element,options){{var element=element,s=this.helpers.clone(this.settings),id="audiojs"+this.instanceCount,wrapperId="audiojs_wrapper"+this.instanceCount;this.instanceCount++}null!=element.getAttribute("autoplay")&&(s.autoplay=!0),null!=element.getAttribute("loop")&&(s.loop=!0),"none"==element.getAttribute("preload")&&(s.preload=!1),options&&this.helpers.merge(s,options),s.createPlayer.markup?element=this.createPlayer(element,s.createPlayer,wrapperId):element.parentNode.setAttribute("id",wrapperId);var audio=new container[audiojsInstance](element,s);return s.css&&this.helpers.injectCss(audio,s.css),s.useFlash&&s.hasFlash?(this.injectFlash(audio,id),this.attachFlashEvents(audio.wrapper,audio)):s.useFlash&&!s.hasFlash&&this.settings.flashError.apply(audio),(!s.useFlash||s.useFlash&&s.hasFlash)&&this.attachEvents(audio.wrapper,audio),this.instances[id]=audio,audio},createPlayer:function(element,player,id){var wrapper=document.createElement("div"),newElement=element.cloneNode(!0);return wrapper.setAttribute("class","audiojs"),wrapper.setAttribute("className","audiojs"),wrapper.setAttribute("id",id),newElement.outerHTML&&!document.createElement("audio").canPlayType?(newElement=this.helpers.cloneHtml5Node(element),wrapper.innerHTML=player.markup,wrapper.appendChild(newElement),element.outerHTML=wrapper.outerHTML,wrapper=document.getElementById(id)):(wrapper.appendChild(newElement),wrapper.innerHTML=wrapper.innerHTML+player.markup,element.parentNode.replaceChild(wrapper,element)),wrapper.getElementsByTagName("audio")[0]},attachEvents:function(wrapper,audio){if(audio.settings.createPlayer){var player=audio.settings.createPlayer,playPause=getByClass(player.playPauseClass,wrapper),scrubber=getByClass(player.scrubberClass,wrapper),leftPos=function(elem){var curleft=0;if(elem.offsetParent)do curleft+=elem.offsetLeft;while(elem=elem.offsetParent);return curleft};container[audiojs].events.addListener(playPause,"click",function(){audio.playPause.apply(audio)}),container[audiojs].events.addListener(scrubber,"click",function(e){var relativeLeft=e.clientX-leftPos(this);audio.skipTo(relativeLeft/scrubber.offsetWidth)}),audio.settings.useFlash||(container[audiojs].events.trackLoadProgress(audio),container[audiojs].events.addListener(audio.element,"timeupdate",function(){audio.updatePlayhead.apply(audio)}),container[audiojs].events.addListener(audio.element,"ended",function(){audio.trackEnded.apply(audio)}),container[audiojs].events.addListener(audio.source,"error",function(){clearInterval(audio.readyTimer),clearInterval(audio.loadTimer),audio.settings.loadError.apply(audio)}))}},attachFlashEvents:function(element,audio){audio.swfReady=!1,audio.load=function(mp3){audio.mp3=mp3,audio.swfReady&&audio.element.load(mp3)},audio.loadProgress=function(percent,duration){audio.loadedPercent=percent,audio.duration=duration,audio.settings.loadStarted.apply(audio),audio.settings.loadProgress.apply(audio,[percent])},audio.skipTo=function(percent){percent>audio.loadedPercent||(audio.updatePlayhead.call(audio,[percent]),audio.element.skipTo(percent))},audio.updatePlayhead=function(percent){audio.settings.updatePlayhead.apply(audio,[percent])},audio.play=function(){audio.settings.preload||(audio.settings.preload=!0,audio.element.init(audio.mp3)),audio.playing=!0,audio.element.pplay(),audio.settings.play.apply(audio)},audio.pause=function(){audio.playing=!1,audio.element.ppause(),audio.settings.pause.apply(audio)},audio.setVolume=function(v){audio.element.setVolume(v)},audio.loadStarted=function(){audio.swfReady=!0,audio.settings.preload&&audio.element.init(audio.mp3),audio.settings.autoplay&&audio.play.apply(audio)}},injectFlash:function(audio,id){var flashSource=this.flashSource.replace(/\$1/g,id);flashSource=flashSource.replace(/\$2/g,audio.settings.swfLocation),flashSource=flashSource.replace(/\$3/g,+new Date+Math.random());var html=audio.wrapper.innerHTML,div=document.createElement("div");div.innerHTML=flashSource+html,audio.wrapper.innerHTML=div.innerHTML,audio.element=this.helpers.getSwf(id)},helpers:{merge:function(obj1,obj2){for(attr in obj2)(obj1.hasOwnProperty(attr)||obj2.hasOwnProperty(attr))&&(obj1[attr]=obj2[attr])},clone:function(obj){if(null==obj||"object"!=typeof obj)return obj;var temp=new obj.constructor;for(var key in obj)temp[key]=arguments.callee(obj[key]);return temp},addClass:function(element,className){var re=new RegExp("(\\s|^)"+className+"(\\s|$)");re.test(element.className)||(element.className+=" "+className)},removeClass:function(element,className){var re=new RegExp("(\\s|^)"+className+"(\\s|$)");element.className=element.className.replace(re," ")},injectCss:function(audio,string){for(var prepend="",styles=document.getElementsByTagName("style"),css=string.replace(/\$1/g,audio.settings.imageLocation),i=0,ii=styles.length;ii>i;i++){var title=styles[i].getAttribute("title");if(title&&~title.indexOf("audiojs")){if(style=styles[i],style.innerHTML===css)return;prepend=style.innerHTML;break}}var head=document.getElementsByTagName("head")[0],firstchild=head.firstChild,style=document.createElement("style");head&&(style.setAttribute("type","text/css"),style.setAttribute("title","audiojs"),style.styleSheet?style.styleSheet.cssText=prepend+css:style.appendChild(document.createTextNode(prepend+css)),firstchild?head.insertBefore(style,firstchild):head.appendChild(styleElement))},cloneHtml5Node:function(audioTag){var fragment=document.createDocumentFragment(),doc=fragment.createElement?fragment:document;doc.createElement("audio");var div=doc.createElement("div");return fragment.appendChild(div),div.innerHTML=audioTag.outerHTML,div.firstChild},getSwf:function(name){var swf=document[name]||window[name];return swf.length>1?swf[swf.length-1]:swf}},events:{memoryLeaking:!1,listeners:[],addListener:function(element,eventName,func){element.addEventListener?element.addEventListener(eventName,func,!1):element.attachEvent&&(this.listeners.push(element),this.memoryLeaking||(window.attachEvent("onunload",function(){if(this.listeners)for(var i=0,ii=this.listeners.length;ii>i;i++)container[audiojs].events.purge(this.listeners[i])}),this.memoryLeaking=!0),element.attachEvent("on"+eventName,function(){func.call(element,window.event)}))},trackLoadProgress:function(audio){if(audio.settings.preload){var readyTimer,loadTimer,audio=audio,ios=/(ipod|iphone|ipad)/i.test(navigator.userAgent);readyTimer=setInterval(function(){audio.element.readyState>-1&&(ios||audio.init.apply(audio)),audio.element.readyState>1&&(audio.settings.autoplay&&audio.play.apply(audio),clearInterval(readyTimer),loadTimer=setInterval(function(){audio.loadProgress.apply(audio),audio.loadedPercent>=1&&clearInterval(loadTimer)},200))},200),audio.readyTimer=readyTimer,audio.loadTimer=loadTimer}},purge:function(d){var i,a=d.attributes;if(a)for(i=0;i<a.length;i+=1)"function"==typeof d[a[i].name]&&(d[a[i].name]=null);if(a=d.childNodes)for(i=0;i<a.length;i+=1)purge(d.childNodes[i])},ready:function(){return function(fn){var win=window,done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){("readystatechange"!=e.type||"complete"==doc.readyState)&&(("load"==e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)&&fn.call(win,e.type||e))},poll=function(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}init("poll")};if("complete"==doc.readyState)fn.call(win,"lazy");else{if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(e){}top&&poll()}doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}}}()}},container[audiojsInstance]=function(element,settings){this.element=element,this.wrapper=element.parentNode,this.source=element.getElementsByTagName("source")[0]||element,this.mp3=function(element){var source=element.getElementsByTagName("source")[0];return element.getAttribute("src")||(source?source.getAttribute("src"):null)}(element),this.settings=settings,this.loadStartedCalled=!1,this.loadedPercent=0,this.duration=1,this.playing=!1},container[audiojsInstance].prototype={updatePlayhead:function(){var percent=this.element.currentTime/this.duration;this.settings.updatePlayhead.apply(this,[percent])},skipTo:function(percent){percent>this.loadedPercent||(this.element.currentTime=this.duration*percent,this.updatePlayhead())},load:function(mp3){this.loadStartedCalled=!1,this.source.setAttribute("src",mp3),this.element.load(),this.mp3=mp3,container[audiojs].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){return this.element.duration?(this.duration=this.element.duration,this.updatePlayhead(),void this.settings.loadStarted.apply(this)):!1},loadProgress:function(){if(null!=this.element.buffered&&this.element.buffered.length){this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted());var durationLoaded=this.element.buffered.end(this.element.buffered.length-1);this.loadedPercent=durationLoaded/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent])}},playPause:function(){this.playing?this.pause():this.play()},play:function(){var ios=/(ipod|iphone|ipad)/i.test(navigator.userAgent);ios&&0==this.element.readyState&&this.init.apply(this),this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),container[audiojs].events.trackLoadProgress(this)),this.playing=!0,this.element.play(),this.settings.play.apply(this)},pause:function(){this.playing=!1,this.element.pause(),this.settings.pause.apply(this)},setVolume:function(v){this.element.volume=v},trackEnded:function(){this.skipTo.apply(this,[0]),this.settings.loop||this.pause.apply(this),this.settings.trackEnded.apply(this)}};var getByClass=function(searchClass,node){var matches=[];if(node=node||document,node.getElementsByClassName)matches=node.getElementsByClassName(searchClass);else{var i,l,els=node.getElementsByTagName("*"),pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(i=0,l=els.length;l>i;i++)pattern.test(els[i].className)&&matches.push(els[i])}return matches.length>1?matches:matches[0]}}("audiojs","audiojsInstance",this),window.FOX_Polls_Instance=window.FOX_Polls_Instance||{},window.FOX_Polls_Instance.Config=window.FOX_Polls_Instance.Config||function($){var CONFIG={};return CONFIG.qa=!1,function(s){s.indexOf("_poll=staging")>-1&&(CONFIG.qa=!0)}(window.location.search),CONFIG.staticDomain=(CONFIG.qa?"qa.":"")+"global.fncstatic.com",CONFIG.Env=(CONFIG.qa?"v8-qa":"www")+".foxnews.com",CONFIG.EnvHost="//"+CONFIG.Env,CONFIG.SodaheadEnv=CONFIG.qa?"foxnews-qa.sodahead.com":"polls.foxnews.com",CONFIG.SodaheadEnvHost="//"+CONFIG.SodaheadEnv,CONFIG.feed={api:CONFIG.SodaheadEnvHost+"/api/poll/${id}/?jsonp=${callback}&cb=${cb}",apiVote:CONFIG.SodaheadEnvHost+"/api/poll/${id}/vote/?answer=${answer}&jsonp=${callback}&cb=${cb}",poll:CONFIG.EnvHost+"/feeds/poll/${id}/json?callback=${callback}&cb=${cb}",affiliate:CONFIG.EnvHost+"/feeds/poll/affiliate/${id}/json?callback=${callback}&rows=${rows}&cb=${cb}",filtersLatest:CONFIG.EnvHost+"/feeds/latest/poll/json?callback=${callback}${datestamp}&rows=${rows}&cb=${cb}"},CONFIG.mapFiles=["//"+(CONFIG.qa?"qa.":"")+"global.fncstatic.com/static/v/all/js/apps/polls/dependencies/raphael.js","//"+(CONFIG.qa?"qa.":"")+"global.fncstatic.com/static/v/all/js/apps/polls/dependencies/map.js"],CONFIG.mapPollConfig={partner:CONFIG.qa?"foxnews-qa":"foxnews",ext:"geo"},CONFIG.EventBindings={onPollRender:"Polls.Widget.Rendered",onPollSubmitStart:"Polls.Submit.Start",onPollSubmitEnd:"Polls.Submit.End",onPollSubmitNoSelection:"Polls.Submit.NoSelection",onPollResultsRendered:"Polls.Submit.ResultsRendered",onPollMapRender:"Polls.Map.Rendered",onPollMapRedraw:"Polls.Map.Redraw"},CONFIG.dependencies=[["//"+CONFIG.staticDomain+"/static/v/all/js/plugins/LoadAttempt.js",function(){return $.loadAttempt?!0:!1}],["//"+CONFIG.staticDomain+"/static/v/all/js/lodash.js",function(){return window._?!0:!1}]],CONFIG.CSSDependencies=["//"+CONFIG.staticDomain+"/static/v/all/js/apps/polls/polls.css"],CONFIG}(jQuery),window.FOX_Polls_Instance=window.FOX_Polls_Instance||{},window.FOX_Polls_Instance.Dependencies=window.FOX_Polls_Instance.Dependencies=function($){var CONFIG=window.FOX_Polls_Instance.Config,dependencies=CONFIG.dependencies,CSSFiles=CONFIG.CSSDependencies,CSSLoaded=!1,loadScript=function(src){if(src=window.location.protocol+src,0===$("script[src*='"+src+"']").size()){var s=document.createElement("script");s.src=src,s.async=!0,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(s)}},loadCSS=function(){for(var trigger=function(url){if(url=window.location.protocol+url,document.createStyleSheet)document.createStyleSheet(url);else{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=url,(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(l)}},i=0;i<CSSFiles.length;i++)trigger(CSSFiles[i])},Dependencies=function(callback){var timeout=!1;CSSLoaded||(CSSLoaded=!0,loadCSS());var isReady=function(){for(var ret=!0,i=0,len=dependencies.length;len>i;i++)if(!dependencies[i][1]()){loadScript(dependencies[i][0]),ret=!1;break}ret?"function"==typeof callback()&&callback():(clearTimeout(timeout),timeout=setTimeout(function(){isReady()},50))};isReady()};return Dependencies}(jQuery),window.FOX_Polls_Instance=window.FOX_Polls_Instance||{},window.FOX_Polls_Instance.EventListeners=window.FOX_Polls_Instance.EventListeners||function($){var CONFIG=window.FOX_Polls_Instance.Config,EventListeners={};EventListeners.GENERIC=function(MAIN,widget){var self=this,Feed=(MAIN.Widget,MAIN.Feed),Renderer=(MAIN.Storage,MAIN.Renderer),id=widget.data.uniqueId,holder=widget.dom,data=widget.data,question=holder.find(".poll-options"),form=question.find("form"),inputs=form.find("input[type='radio']");inputs.each(function(){var el=$(this);el.bind("click",function(){form.data("_selected",el.attr("value"))})}),form.submit(function(){var form=$(this),pollId=data._pollData.api.poll.id,selectedValue=form.data("_selected")||!1;return selectedValue?(self.trigger(MAIN,"submit-start",widget),holder.find(".poll-widget").addClass("poll-submitting"),holder.find(".poll-selections").addClass("poll-loading"),Feed.submitVote(pollId,id,selectedValue,function(voteData){widget.data._pollVoteData=voteData,form.data("_selected",!1),self.trigger(MAIN,"submit-done",widget),holder.find(".poll-selections").removeClass("poll-loading"),Renderer.generateResults("GENERIC_RESULTS",widget,function(){self.trigger(MAIN,"results",widget),holder.find(".poll-widget").removeClass("poll-submitting")})})):self.trigger(MAIN,"submit-no-selection",widget),!1})},EventListeners.trigger=function(MAIN,type,widget,moreInfo){var Storage=(MAIN.Widget,MAIN.Storage);switch(moreInfo=moreInfo||widget,type){case"results":Event.trigger(widget,CONFIG.EventBindings.onPollResultsRendered,moreInfo),Storage.setData(widget);break;case"submit-no-selection":Event.trigger(widget,CONFIG.EventBindings.onPollSubmitNoSelection,moreInfo);break;case"submit-start":Event.trigger(widget,CONFIG.EventBindings.onPollSubmitStart,moreInfo);break;case"submit-done":Event.trigger(widget,CONFIG.EventBindings.onPollSubmitEnd,moreInfo);break;case"map-rendered":Event.trigger(widget,CONFIG.EventBindings.onPollMapRender,moreInfo);break;case"map-redraw":Event.trigger(widget,CONFIG.EventBindings.onPollMapRedraw,moreInfo);break;case"poll-rendered":Event.trigger(widget,CONFIG.EventBindings.onPollRender,moreInfo)}};var Event=function(){var Event={};return Event.bind=function(widget,eventName,callback){var dom=!1;widget&&widget.jquery?dom=widget:widget&&widget.dom&&widget.dom.jquery&&(dom=widget.dom),dom&&dom.bind(eventName,callback)},Event.trigger=function(widget,eventName,additionalData){var dom=!1;widget&&widget.jquery?dom=widget:widget&&widget.dom&&widget.dom.jquery&&(dom=widget.dom),dom&&dom.trigger(eventName,additionalData)},Event}();return EventListeners}(jQuery),window.FOX_Polls_Instance=window.FOX_Polls_Instance||{},window.FOX_Polls_Instance.Templates=window.FOX_Polls_Instance.Templates||function($){var CONFIG=window.FOX_Polls_Instance.Config,CONST={};CONST.Instance=window.FOX_Polls_Instance;var Templates={},closed=!1,hash=window.location.hash;hash.indexOf("closed")>-1&&(closed=!0),Templates.GENERIC=function(widget,callback,MAIN){var template='   <div class="poll-widget" style="visibility: hidden;">                <div class="poll-item">                    <div class="poll-question">                        <p><span>Q:</span> <%= title %></p>                    </div>                    <% if (!closed) { %>                    <div class="poll-selections hide">                        <div class="poll-options">                            <form action="">                                <% for (var i = 0, len = items.length;  i < len; i += 1) { %>                                <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>">                                    <input type="radio" name="group-<%= id %>" value="<%= items[i].id %>">                                    <div><%= items[i].title %></div>                                </div>                                <% } %>                                <div class="poll-buttons">                                    <input type="submit" name="vote" value="Vote" class="btn">                                    <div class="poll-links">                                        <a class="all" href="<%= allUrl %>">See All Questions</a>                                        <% if (detailUrl) { %>                                        <a class="discuss" href="<%= detailUrl %>">Discuss</a>                                        <% } %>                                    </div>                                </div>                            </form>                        </div>                    </div>                    <% } %>                </div>                <% if (isSponsored) { %>                <div class="sponsor-ad">                    <div id="business-88x31" class="ad dc"></div>                        <img src="//global.fncstatic.com/static/v/all/img/poll-sponsor.gif">                    </div>                </div>                <% } %>            </div>        ';widget.data.template&&CustomTemplateMarkup[widget.data.template]&&(template=CustomTemplateMarkup[widget.data.template]);var markup=_.template(template,function(){var data=widget.data,info=data._pollData,allUrl="//"+CONFIG.Env+"/poll/",detailUrl=$.isArray(info.feed.poll.url)?info.feed.poll.url[0]:"string"==typeof info.feed.poll.url&&info.feed.poll.url.length>0?info.feed.poll.url:!1,tplData={info:info,id:info.api.poll.id,uid:data.uniqueId,closed:info.api.poll.closed,title:info.feed.poll.title,items:info.api.poll.items,detailUrl:detailUrl,allUrl:allUrl,isSponsored:data.isSponsored};return tplData}());widget.dom.html(markup),widget.data._storedLimitType||widget.dom.find(".poll-item > .poll-selections").removeClass("hide"),(widget.data._pollData.api.poll.closed||"3"===widget.data._storedLimitType||closed===!0)&&Templates.GENERIC_RESULTS(widget,function(){CONST.Instance.EventListeners.trigger(MAIN,"type",widget),callback("results")}),widget.data._pollMapConfig&&Templates.GENERIC_MAP(widget,function(){callback("map")})},Templates.GENERIC_RESULTS=function(widget,callback){var template='   <div class="poll-results hide">                <div class="poll-options">                    <% for (var i = 0, len = items.length; i < len; i += 1) { %>                        <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>" data-answer-id="<%= items[i].id %>" data-votes="<%= items[i].totalVotes %>" data-pct="<%= items[i].percentage %>">                            <div class="pct"><%= items[i].percentage %>&#37;</div>                            <div class="name"><%= items[i].title %></div>                            <div class="bar">                                <span></span>                            </div>                        </div>                    <% } %>                </div>                <div class="poll-links">                    <a class="all" href="<%= allUrl %>">See All Questions</a>                    <% if (detailUrl) { %>                    <a class="discuss" href="<%= detailUrl %>">Discuss</a>                    <% } %>                </div>            </div>        ';widget.data.template&&CustomTemplateMarkup[widget.data.template+"_RESULTS"]&&(template=CustomTemplateMarkup[widget.data.template+"_RESULTS"]);var markup=_.template(template,function(){var voteData=widget.data._pollVoteData&&widget.data._pollVoteData.poll&&widget.data._pollVoteData.poll.answers?widget.data._pollVoteData.poll.answers:widget.data._pollData.api.poll.items,info=widget.data._pollData,allUrl="//"+CONFIG.Env+"/poll/",detailUrl=$.isArray(info.feed.poll.url)?info.feed.poll.url[0]:"string"==typeof info.feed.poll.url&&info.feed.poll.url.length>0?info.feed.poll.url:!1,combinedVotes=info.api.raw.poll.totalVotes,tplData={info:info,items:voteData,detailUrl:detailUrl,allUrl:allUrl,combinedVotes:combinedVotes};return tplData}()),target=widget.dom;target.find(".poll-item > .poll-results").remove();var question=target.find(".poll-item > .poll-question"),selections=target.find(".poll-item > .poll-selections");$(markup).insertAfter(selections.length?selections:question),target.find(".poll-item > .poll-selections").addClass("hide");var show=!1;widget.data.voteLimit?!widget.data.voteLimit||"1"!==widget.data.voteLimit&&"3"!==widget.data.voteLimit||(show=!0):show=!0,show&&target.find(".poll-item > .poll-results").removeClass("hide"),setTimeout(function(){target.find(".poll-item > .poll-results .poll-option").each(function(){var el=$(this),bar=el.find("> .bar span"),pct=parseInt(el.attr("data-pct")||0,10),pctN=pct/100,bWidth=Math.floor(parseInt(bar.parent().innerWidth(),10)*pctN);bar.css({width:bWidth})})},500),"function"==typeof callback&&callback()},Templates.GENERIC_MAP=function(widget,callback){var template=' <div class="poll-map">                <div id="<%= uid %>" class="poll-map-canvas"></div>            </div>        ';widget.data.template&&CustomTemplateMarkup[widget.data.template+"_MAP"]&&(template=CustomTemplateMarkup[widget.data.template+"_MAP"]);{var markup=_.template(template,function(){var data=widget.data,info=data._pollData,detailUrl=("//"+CONFIG.Env+"/poll/",$.isArray(info.feed.poll.url)?info.feed.poll.url[0]:"string"==typeof info.feed.poll.url&&info.feed.poll.url.length>0?info.feed.poll.url:!1),tplData={info:info,uid:data.uniqueId,detailUrl:detailUrl};return tplData}()),target=widget.dom;widget.data.uniqueId}target.find(".poll-item > .poll-map").remove(),target.find(".poll-item").append(markup),"function"==typeof callback&&callback()};var CustomTemplateMarkup={};return CustomTemplateMarkup.FOXNATION=function(){var template='   <div class="poll-widget" style="visibility: hidden;">                <% if (info.api && info.api.raw && info.api.raw.poll && info.api.raw.poll.affiliates && info.api.raw.poll.affiliates.primary && info.api.raw.poll.affiliates.primary.name) { %>                    <h3><%= info.api.raw.poll.affiliates.primary.name %></h3>                <% } else { %>                    <h3>NONE</h3>                <% } %>                <div class="poll-item">                    <div class="poll-question">                        <p><span>Q:</span> <%= title %></p>                    </div>                    <% if (!closed) { %>                    <div class="poll-selections poll-home-widget-view hide">                        <div class="poll-options radio-opts">                            <form action="">                                <% for (var i = 0, len = items.length;  i < len; i += 1) { %>                                <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>">                                    <span></span>                                    <input type="radio" name="group-<%= id %>" value="<%= items[i].id %>">                                    <div><%= items[i].title %></div>                                </div>                                <% } %>                                <div class="poll-buttons">                                    <input type="submit" name="vote" value="Vote" class="btn">                                    <div class="poll-links">                                        <ul>                                            <li class="discuss"><a href="<%= detailUrl %>">Sound Off</a>                                            <li class="all"><a href="<%= allUrl %>">View All Questions</a></li>                                        </ul>                                    </div>                                </div>                            </form>                        </div>                    </div>                    <% } %>                </div>                <% if (isSponsored) { %>                <div class="sponsor-ad">                    <div id="business-88x31" class="ad dc"></div>                        <img src="//global.fncstatic.com/static/v/all/img/poll-sponsor.gif">                    </div>                </div>                <% } %>            </div>        ';return template}(),CustomTemplateMarkup.FOXNATION_RESULTS=function(){var template='   <div class="poll-results poll-home-widget-view hide">                <div class="poll-options">                    <% for (var i = 0, len = items.length; i < len; i += 1) { %>                        <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>" data-answer-id="<%= items[i].id %>" data-votes="<%= items[i].totalVotes %>" data-pct="<%= items[i].percentage %>">                            <div class="pct"><%= items[i].percentage %>&#37;</div>                            <div class="name"><%= items[i].title %></div>                            <div class="bar">                                <span></span>                            </div>                        </div>                    <% } %>                    <p class="total">(<%= combinedVotes %> votes)</p>                </div>                <div class="poll-links">                    <ul>                        <% if (detailUrl) { %>                        <li class="discuss"><a href="<%= detailUrl %>">Sound Off</a>                        <% } %>                        <li class="all"><a href="<%= allUrl %>">View All Questions</a></li>                    </ul>                </div>            </div>        ';return template}(),CustomTemplateMarkup.FOXNATION_MAP=function(){var template=' <div class="poll-map">                <div id="<%= uid %>" class="poll-map-canvas"></div>                <% if (detailUrl) { %>                <a class="detail" href="<%= detailUrl %>">detail</a>                <% } %>            </div>        ';return template}(),CustomTemplateMarkup.RISKREWARD=function(){var template='   <div class="poll-widget" style="visibility: hidden;">                <div class="poll-item">                    <div class="poll-question">                        <p><%= title %></p>                    </div>                    <% if (!closed) { %>                        <div class="poll-selections hide">                            <div class="poll-options">                                <form action="">                                    <% for (var i = 0, len = items.length;  i < len; i += 1) { %>                                        <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>" data-item-id="<%= items[i].id %>">                                            <a href="#"><%= items[i].title %></a>                                            <input type="radio" name="group-<%= id %>" value="<%= items[i].id %>">                                            <span><%= items[i].percentage %>&#37;</span>                                        </div>                                    <% } %>                                </form>                            </div>                        </div>                    <% } %>                </div>                <% if (isSponsored) { %>                <div class="sponsor-ad">                    <div id="business-88x31" class="ad dc"></div>                        <img src="//global.fncstatic.com/static/v/all/img/poll-sponsor.gif">                    </div>                </div>                <% } %>            </div>        ';return template}(),CustomTemplateMarkup.RISKREWARD_RESULTS=function(){var template='   <div class="poll-results hide">                <div class="poll-options">                    <form action="">                        <% for (var i = 0, len = items.length;  i < len; i += 1) { %>                            <div class="poll-option opt-<%= (i+1) %> <%= (i === 0) ? "first" : (i === len-1) ? "last" : "" %>" data-item-id="<%= items[i].id %>">                                <a href="#"><%= items[i].title %></a>                                <input type="radio" value="<%= items[i].id %>">                                <span><%= items[i].percentage %>&#37;</span>                            </div>                        <% } %>                    </form>                </div>            </div>        ';return template}(),Templates}(jQuery),window.FOX_Polls_Instance=window.FOX_Polls_Instance||{},window.FOX_Polls_Instance.Embed=window.FOX_Polls_Instance.Embed||function(){var CONST={};CONST.classname="poll",CONST.instanceSrc="//global.fncstatic.com/static/v/all/js/apps/polls/ag.script.js",CONST.embedSrc="/static/v/all/js/apps/polls/embed.js";var App=function(){var self=this;return self.__vars={},self.__vars._widgets=[],window.jQuery?void(onPageReady()?self.init():window.domready?domready(function(){self.init()}):bindEvent(window,"load",function(){self.init()})):(log("[FOX.Polls.Embed] Polls require jQuery and certain jQuery plugins..."),!1)};App.prototype.init=function(){var self=this,vars=self.__vars;vars._host=window.location.host||window.location.hostname;var targets=getElementsByClassName(CONST.classname);if(targets.length>0)for(var x=0;x<targets.length;x++)self.set(targets[x]);window.FOX_Polls?FOX_Polls.API.embed():self.loadInstance(),this.init=function(){}},App.prototype.set=function(target){window._fox_polls_opt=window._fox_polls_opt||[],window._fox_polls_opt.push({type:"embed",target:target})},App.prototype.loadInstance=function(){var s=document.createElement("script");s.src=CONST.instanceSrc,s.async=!0,(document.getElementsByTagName("head")||document.getElementsByTagName("head"))[0].appendChild(s)};var onPageReady=function(){var i,scripts=document.getElementsByTagName("script"),target=!1,ret=!1;for(i=0;i<scripts.length;i++){var src=scripts[i].src||"";
if(src.indexOf(CONST.embedSrc)>-1){target=src;break}}if(target){var sp=target.split("?");sp[1]&&sp[1].indexOf("ready=true")>-1&&(ret=!0)}return ret},getElementsByClassName=function(classname){{var ret=[];document.body}if(document.getElementsByClassName)ret=document.getElementsByClassName(classname);else for(var regex=new RegExp("(^| )"+classname+"( |$)"),elm=document.body.getElementsByTagName("div"),x=0;x<elm.length;x++)regex.test(elm[x].className)&&ret.push(elm[x]);return ret},bindEvent=function(element,type,handler){element.addEventListener?element.addEventListener(type,handler,!1):element.attachEvent("on"+type,handler)},log=function(){var loggerON=!0;if(loggerON&&window.console)try{return console.log.apply(console,arguments)}catch(err){console.log(arguments)}};return!function(a,ctx,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):ctx[a]=b()}("domready",this,function(a){function m(a){for(l=1;a=b.shift();)a()}var c,b=[],d=!1,e=document,f=e.documentElement,g=f.doScroll,h="DOMContentLoaded",i="addEventListener",j="onreadystatechange",k="readyState",l=/^loade|c/.test(e[k]);return e[i]&&e[i](h,c=function(){e.removeEventListener(h,c,d),m()},d),g&&e.attachEvent(j,c=function(){/^c/.test(e[k])&&(e.detachEvent(j,c),m())}),a=g?function(c){self!=top?l?c():b.push(c):function(){try{f.doScroll("left")}catch(b){return setTimeout(function(){a(c)},50)}c()}()}:function(a){l?a():b.push(a)}}),new App}(),window.FOX_Polls=window.FOX_Polls||function($){var CONFIG=window.FOX_Polls_Instance.Config,CONST={};CONST.classDef={polls:"poll",rendered:"poll-rendered"},CONST.Instance=window.FOX_Polls_Instance,CONST.defaultTemplate="GENERIC",CONST.widgetTypes=["poll","map"],CONST.map={config:{coloring:"plain",colors:["#c83f3f","#d39142","#5786a4","#999966","#505e68","#c3a866","#b56164","#998675","#999999","#c6789b"],color_no_vote:"#CCC",minimap:!1,stroke:"#444",color_tie:"#fff",width:250,constraints:"topleft",zoom:!1,tooltip:!1},dataUID:"_poll_map_config"};var App=function(widgets){var x,self=this;self.API=new API(this),self.Widget=new Widget(this),self.Feed=new Feed(this),self.Renderer=new Renderer(this),self.Storage=new Storage(this),self.__vars={};var trigger=(self.__vars,function(){if(widgets){var valid=[];for(widgets=$.isArray(widgets)?widgets:[widgets],x=0;x<widgets.length;x++){var widget=widgets[x];validateWidgetData(widget)&&valid.push(widget)}valid.length>0&&(self.Widget.saveWidget(valid),self.Widget.render())}Options.set(self)});FOX_Polls_Instance.Dependencies(function(){trigger()})},API=function(){var API=function(root){var self=this;self.root=root};return API.prototype.embed=function(elm){this.root.Widget.embed(elm)},API.prototype.getWidgetData=function(elm){return this.root.Widget.getWidgetData(elm)},API.prototype.getFiltersLatest=function(datestamp,callback){return this.root.Feed.getFiltersLatest(datestamp,callback)},API.prototype.resetPollLimit=function(id){this.root.Storage.removeData(id)},API}(),Widget=function(){var Widget=function(root){var self=this;self.root=root,self.__vars={},self.__vars._widgets={}};return Widget.prototype.saveWidget=function(widget){var self=this,vars=self.__vars;if(!widget.dom.jquery&&widget.dom.nodeType?(widget.dom=$(widget.dom),s=!0):widget.dom.jquery?s=!0:log("[FOX.Polls] Widget failed to save: ",widget),s&&validateWidgetData(widget)){widget=Normalize.WidgetData(widget);var id=widget.data.uniqueId;self.getWidgetById(id)?log("[FOX.Polls] Only one widget allowed (widget: '"+id+"'')."):vars._widgets[id]=widget}},Widget.prototype.getWidgetById=function(id){var self=this,vars=self.__vars,widgets=vars._widgets,ret=!1;return"all"===id?ret=widgets:widgets[id]&&(ret=widgets[id]),ret},Widget.prototype.getWidgetData=function(elm){var self=this,id=getWidgetId(elm),ret=!1;return id&&(ret=self.getWidgetById(id)),ret},Widget.prototype.embed=function(target){var self=this,root=self.root;target?!target.jquery&&target.nodeType&&(target=$(target)):target=$("."+CONST.classDef.polls),target.each(function(){var elm=$(this);if(!self.isInitialized(elm)){var data=getDataAttr(elm.get(0)),widget={dom:elm,data:data};if(validateWidgetData(widget)){self.saveWidget(widget);var limitType=root.Storage.getLimit(widget);limitType&&(widget.data.voteLimit=limitType);var limit=root.Storage.check(widget);limit&&(widget.data._storedLimitType=limit),self.render(widget.data.uniqueId)}else{var markup=$("<span></span>").html(elm.clone()).html();log("[FOX.Polls] check embed code: ",markup)}}})},Widget.prototype.render=function(id){var self=this,root=self.root,widget=(self.__vars,self.getWidgetById(id)),Renderer=root.Renderer;widget.data._initialized||(widget.data._initialized=!0,"map"===widget.data.widgetType?self.loadMapDependencies(id,function(){Renderer.set(widget)}):Renderer.set(widget))},Widget.prototype.loadMapDependencies=function(id,callback){var i,self=this,vars=(self.root,self.__vars),setWidgetMap=function(uid){var config=CONST.map.config,widget=self.getWidgetById(uid),custom=widget.data.mapCustomConfig||!1;custom&&(config=$.extend(!0,config,custom)),"object"==typeof widget.dom.data(CONST.map.dataUID)&&(config=$.extend(!0,config,widget.dom.data(CONST.map.dataUID))),widget.data._pollMapConfig=config,callback()};if(vars._mapReady)return setWidgetMap(id),!1;if(!vars._mapFilesLoad)for(vars._mapFilesLoad=!0,i=0;i<CONFIG.mapFiles.length;i++)loadScript(CONFIG.mapFiles[i]);$.loadAttempt(150,250,function(){return window.shmap&&window.Raphael?!0:!1},function(){vars._mapReady=!0,setWidgetMap(id)})},Widget.prototype.hasRendered=function(elm){return elm.hasClass(CONST.classDef.rendered)?!0:!1},Widget.prototype.isInitialized=function(elm){var self=this,ret=!1,id=getWidgetId(elm),widget=self.getWidgetById(id);return widget&&widget.data&&widget.data._initialized&&(ret=!0),ret},Widget}(),Feed=function(){var Feed=function(root){var self=this;self.root=root};Feed.prototype.getPoll=function(id,callback,direct){if("function"!=typeof callback)return!1;var url=direct?CONFIG.feed.api:CONFIG.feed.poll,callbackFN="FXPoll"+id,trigger=function(info,api){var data={feed:direct?Normalize.pollDataDirect(api):Normalize.pollData(info),api:Normalize.pollAPIData(api)};callback(data)};url=url.replace("${id}",id),url=url.replace("${callback}",callbackFN),url=url.replace("${cb}",cacheBuster(2)),ajaxCallJSONP(url,callbackFN,function(data){var info;direct?(info=data,info&&!info.error?trigger(null,info):log("[FOX.Polls] No data for id: "+id)):(info=data.response&&$.isArray(data.response.docs)&&data.response.docs.length>0&&data.response.docs[0]?data.response.docs[0]:!1,info&&info.secondary_id&&callAPI(info.secondary_id,"pl",function(apiData){apiData&&!apiData.error?trigger(data,apiData):log("[FOX.Polls] No data for id: "+id)}))})},Feed.prototype.getAffiliate=function(id,callback){if("function"!=typeof callback)return!1;var url=CONFIG.feed.affiliate,serializedId=id.replace(/[^a-zA-Z 0-9]+/g,"_"),callbackFN="FXAffil"+serializedId,trigger=function(info,api){var data={feed:Normalize.pollData(info),api:Normalize.pollAPIData(api)};callback(data)};url=url.replace("${id}",id),url=url.replace("${callback}",callbackFN),url=url.replace("${rows}","10"),url=url.replace("${cb}",cacheBuster(2)),ajaxCallJSONP(url,callbackFN,function(data){var info=data.response&&$.isArray(data.response.docs)&&data.response.docs.length>0&&data.response.docs[0]?data.response.docs[0]:!1;info&&info.secondary_id&&callAPI(info.secondary_id,"af",function(apiData){apiData&&!apiData.error?trigger(data,apiData):log("[FOX.Polls] No data for id: "+id)})})},Feed.prototype.getFiltersLatest=function(datestamp,callback){if("function"!=typeof callback)return!1;var url=CONFIG.feed.filtersLatest,callbackFN="FXFilter";url=url.replace("${datestamp}",datestamp?"&max_date="+datestamp:""),url=url.replace("${callback}",callbackFN),url=url.replace("${rows}","10"),url=url.replace("${cb}",cacheBuster(5)),ajaxCallJSONP(url,callbackFN,callback)},Feed.prototype.submitVote=function(id,uid,val,callback){var self=this,root=self.root,url=(root.Widget.getWidgetById(uid),CONFIG.feed.apiVote),callbackFN="FXAPIvt"+id;url=url.replace("${id}",id),url=url.replace("${callback}",callbackFN),url=url.replace("${cb}",cacheBuster(2)),url=url.replace("${answer}",val),ajaxCallJSONP(url,callbackFN,callback)};var callAPI=function(id,prefix,callback){var url=CONFIG.feed.api,callbackFN="FXAPI"+prefix+id;url=url.replace("${id}",id),url=url.replace("${callback}",callbackFN),url=url.replace("${cb}",cacheBuster(2)),ajaxCallJSONP(url,callbackFN,callback)},ajaxCallJSONP=function(url,callbackFN,callback){window[callbackFN]=function(data){callback(data)},$.ajax({url:url,dataType:"script",async:!0,cache:!0})};return Feed}(),Storage=function(){var CONST={storeName:"fx_plstrc",expires:1},Storage=function(root){var self=this;self.root=root,self.__vars={};var vars=self.__vars;vars._type=function(){var foo="localstorage";try{return localStorage.setItem(foo,foo),localStorage.removeItem(foo,foo),foo}catch(err){return isCookieEnabled()?"cookie":!1}}()};Storage.prototype.getLimit=function(widget){var self=this,root=self.root,data=(root.Feed,root.Widget,widget.data),limit=data.voteLimit?"1"!==data.voteLimit&&"2"!==data.voteLimit?"3":data.voteLimit:!1;return limit},Storage.prototype.getId=function(widget){var self=this,data=(self.root,widget.data),ret=data.affiliateId||data.pollId;return ret},Storage.prototype.setData=function(widget){{var self=this;self.root,self.__vars,widget.data}if(!self.getLimit(widget))return!1;var id=self.getId(widget);self.getData(id)||self.saveData(id)},Storage.prototype.check=function(widget){var self=this,root=self.root,vars=self.__vars,limit=(root.Feed,root.Widget,widget.data,self.getLimit(widget)),id=self.getId(widget),type=vars._type,ret=!1;return limit&&type&&self.isSaved(id)&&(ret=limit),ret},Storage.prototype.isSaved=function(id){var self=this,data=(self.root,self.getData(id)),ret=data?!0:!1;return ret},Storage.prototype.getData=function(id,clear){var self=this,vars=(self.root,self.__vars),type=vars._type;if("all"===id&&clear)return"localstorage"===type?localStorage.removeItem(CONST.storeName):$.cookie(CONST.storeName,null),!1;var data=!1;if("localstorage"===type?data=localStorage.getItem(CONST.storeName):"cookie"===type&&(data=$.cookie(CONST.storeName)),"all"===id)return data;if(!data)return!1;for(var ret=!1,timestamp=!1,newData=[],sp=data.split(";"),x=0;x<sp.length;x++){var item=sp[x].split("|");item[0]===id?(timestamp=item[1],hasExpired(item[1])?ret=!1:(ret=item,clear||newData.push(item.join("|")))):hasExpired(item[1])||newData.push(item.join("|"))}return newData.length>0&&self.saveData(newData.join(";"),!0),ret},Storage.prototype.saveData=function(val,all){var self=this,vars=(self.root,self.__vars),type=vars._type;if(!type)return!1;var curr;if(all)curr=val;else{var info=(self.getData(val,!0),[val,(new Date).getTime()].join("|"));curr=self.getData("all")||"",curr=curr.split(";"),curr.push(info),curr=curr.join(";")}"localstorage"===type?localStorage.setItem(CONST.storeName,curr):"cookie"===type&&$.cookie(CONST.storeName,curr,{expires:365})},Storage.prototype.removeData=function(id){{var self=this;self.root}self.getData(id,!0)};var isCookieEnabled=function(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var ret=-1!==document.cookie.indexOf("cookietest=")?!0:!1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",ret},hasExpired=function(val){var ret=!1,curr=(new Date).getTime(),diff=curr-val;if(diff>0){var diffDays=diff/864e5;diffDays>CONST.expires&&(ret=!0)}return ret};return Storage}(),Renderer=function(){var Renderer=function(root){var self=this;self.root=root,self.__vars={};self.__vars};return Renderer.prototype.set=function(widget){var self=this,root=self.root,Feed=root.Feed,Widget=root.Widget,EventListeners=CONST.Instance.EventListeners,Templates=CONST.Instance.Templates,data=widget.data,useTemplate="GENERIC",setRendered=function(){var info=Widget.getWidgetById(data.uniqueId);info.dom.addClass(CONST.classDef.rendered),EventListeners.trigger(root,"poll-rendered",widget,info),EventListeners[useTemplate](root,info)},callbackFN=function(type){"map"===type&&self.generateMap(data.uniqueId)};data._isAffiliate?Feed.getAffiliate(data.affiliateId,function(info){widget.data._pollData=info,Templates[useTemplate](widget,callbackFN,root),setRendered()}):Feed.getPoll(data.pollId,function(info){widget.data._pollData=info,Templates[useTemplate](widget,callbackFN,root),setRendered()},data.directFeed?!0:!1)},Renderer.prototype.generateResults=function(template,widget,callback){var self=this,root=self.root,Templates=CONST.Instance.Templates,EventListeners=CONST.Instance.EventListeners;Templates[template](widget,callback,root),widget.data._pollMap&&(widget.data._pollMap.map.redraw(!0),EventListeners.trigger(root,"map-redraw",widget))},Renderer.prototype.generateMap=function(id){var self=this,root=self.root,Widget=root.Widget,EventListeners=CONST.Instance.EventListeners,widget=Widget.getWidgetById(id),pollId=widget.data._pollData.api.poll.id,mapConfig=widget.data._pollMapConfig,pollConfig=function(){var ret={};for(var i in CONFIG.mapPollConfig)ret[i]=CONFIG.mapPollConfig[i];return ret}(),map=shmap.map(id,null,mapConfig);pollConfig.poll_id=pollId,shmap.load_poll(pollConfig).then(function(response){var mapDOM=widget.dom.find(".poll-map .poll-map-canvas").children();map.set_poll(response.poll.id,400),widget.data._pollmap={dom:mapDOM,map:map},EventListeners.trigger(root,"map-rendered",widget),mapConfig.tooltip&&mapDOM.hover(function(){mapDOM.css({cursor:"pointer"})},function(){mapDOM.css({cursor:"default"})})})},Renderer}(),Normalize=function(){var Normalize={};return Normalize.WidgetData=function(widget){var data=widget.data;data.uniqueId=generateWidgetId(data),widget.dom.attr("data-unique-id",data.uniqueId);var pollId=(data.pollId||"").toString(),affiliateId=(data.affiliateId||"").toString();pollId=pollId.length>0?pollId:!1,affiliateId=affiliateId.length>0?affiliateId:!1;var isAffiliate=pollId?!1:!0;return data.widgetType=$.inArray(data.widgetType,CONST.widgetTypes)>-1?data.widgetType:"poll",data._isAffiliate=isAffiliate,data.isSponsored="true"===data.isSponsored?!0:!1,data.template=data.template&&"string"==typeof data.template?data.template:CONST.defaultTemplate,data.directFeed="true"===data.skipVerification?!0:!1,data.pollProp&&(data.pollProp=function(){var x,str=data.pollProp,cfg=str.split(","),ret={};try{for(x=0;x<cfg.length;x++){var sp=cfg[x].split("="),key=$.trim(sp[0]||""),val=$.trim(sp[1]||"");key&&key.length>0&&(val=0===val.length?!0:"true"===val?!0:"false"===val?!1:val,ret[key]=val)}}catch(err){}return ret}()),data.mapCustomConfig&&(data.mapCustomConfig=function(){var x,str=data.mapCustomConfig,cfg=str.split(","),ret=!1;try{for(x=0;x<cfg.length;x++){var sp=cfg[x].split("="),key=$.trim(sp[0]),val=$.trim(sp[1]);ret||"undefined"==typeof key||"undefined"==typeof val||(ret={}),val="true"===val?!0:"false"===val?!1:val,ret[key]=val}}catch(err){}return ret}()),widget},Normalize.pollData=function(data){var info={},docs=data.response.docs;return info.poll=docs[0],info.raw=data,info},Normalize.pollAPIData=function(data){var info={},poll=data.poll;return info.poll={id:poll.id,items:poll.answers,closed:poll.closed},info.raw=data,info},Normalize.pollDataDirect=function(data){var info={},poll=data.poll;return info.poll={title:poll.title,date:poll.creationDate,taxonomy_path:poll.affiliates&&poll.affiliates.primary?[poll.affiliates.primary.polls]:[],url:[]},info.raw=info.poll,info},Normalize}(),Options=(function(){var Event={};return Event.bind=function(widget,eventName,callback){var dom=!1;widget&&widget.jquery?dom=widget:widget&&widget.dom&&widget.dom.jquery&&(dom=widget.dom),dom&&dom.bind(eventName,callback)},Event.trigger=function(widget,eventName,additionalData){var dom=!1;widget&&widget.jquery?dom=widget:widget&&widget.dom&&widget.dom.jquery&&(dom=widget.dom),dom&&dom.trigger(eventName,additionalData)},Event}(),function(){var Options=function(){};return Options.prototype.set=function(root){var optsIntervals,self=this,setOpts=function(){for(var opts=window._fox_polls_opt,len=opts.length,i=0;len>0;)opts[i]&&opts[i].type&&self.triggerOpts(root,opts[i]),opts.splice(i,1),len=opts.length};optsIntervals=setInterval(function(){window._fox_polls_opt&&$.isArray(window._fox_polls_opt)&&window._fox_polls_opt.length>0&&setOpts()},500)},Options.prototype.triggerOpts=function(root,opt){var Widget=root.Widget;switch(opt.type){case"embed":opt.target&&Widget.embed(opt.target);break;case"map":opt.target&&Widget.embed(opt.target)}},new Options}()),generateWidgetId=function(data){var pollId=(data.pollId||"").toString(),affiliateId=(data.affiliateId||"").toString(),type=data.widgetType||"widget";pollId=pollId.length>0?pollId:"pid",affiliateId=affiliateId.length>0?affiliateId:"affil";var ret=[type,pollId,affiliateId].join("-");return ret},getWidgetId=function(elm){var dom=elm.get(0),data=getDataAttr(dom),widget={dom:elm,data:data},ret=!1;return validateWidgetData(widget)&&(ret=generateWidgetId(widget.data)),ret},validateWidgetData=function(widget){var ret=!1;return widget.dom&&(widget.dom.jquery||widget.dom.nodeType)&&widget.data.widgetType&&(widget.data.pollId||widget.data.affiliateId)&&(ret=!0),ret},getDataAttr=function(dom){var data={},attr=dom.attributes;for(x=0;x<attr.length;x++){var node=attr[x],name=node.nodeName,val=node.nodeValue;if(0===name.indexOf("da